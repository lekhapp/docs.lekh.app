(this["webpackJsonplekhboard-web-ui"]=this["webpackJsonplekhboard-web-ui"]||[]).push([[0],{100:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),a=n(8),r=n.n(a),s=(n(99),n(67)),c=n(68),d=n(51),l=n(86),u=n(84),p=(n(100),n(143)),w={root:{flexGrow:1},title:{flexGrow:1},arrowUp:{top:"54px",position:"absolute"},MainGrid:{display:"flex",position:"relative"},outClass:{position:"relative",margin:"0 auto",bottom:"2px",border:"1px solid #d1d1d1"},paper:{background:"#fff",borderRadius:"8px",padding:"15px 126px",textAlign:"center",color:"#000",position:"absolute",margin:"20px",marginRight:"0",right:"-10px",top:"4px",minHeight:"180px","&::before":{content:'"s"',position:"absolute",width:0,height:0,borderLeft:"19px solid transparent",borderRight:"19px solid transparent",borderBottom:"28px solid #fff",top:"-28px",right:"27px",marginLeft:"auto",fontSize:0,zIndex:9}},responsicePaper:{width:"0px",background:"#fff",borderRadius:"8px",padding:"0px 66px",textAlign:"center",color:"#000",margin:"20px",marginRight:"0",right:"19px",top:"13px",minHeight:"123px","&::before":{content:'"s"',position:"absolute",width:0,height:0,borderLeft:"19px solid transparent",borderRight:"19px solid transparent",borderBottom:"28px solid #fff",top:"-28px",right:"27px",marginLeft:"auto",fontSize:0,zIndex:9}},textIcon:{margin:"-7px",paddingRight:"8px"},checkIcon:{position:"absolute",margin:"5px"}},h=n(141),m=n(18),x=n(2),b=Object(h.a)(w),g=function(){var e=b();return Object(x.jsx)("div",{className:"".concat(e.outClass," header_text"),children:Object(x.jsxs)(p.a,{children:[Object(x.jsxs)("span",{children:[Object(x.jsx)(m.g,{size:"2em",className:"headerIcon"}),Object(x.jsx)("span",{className:"headerText",children:"Use pencil/mouse to draw or double click to add text"})]}),Object(x.jsx)("a",{target:"_blank",href:"https://lekh.app/help/lekhboard.html",className:"help-link",children:" Help"})]})})},j=n(11),f=n(145),v=n(146),O=n(147),y=n(148),M=n(153),k=n(154),S=n(75),z=n.n(S),C=n(85),I=n(77),T=n.n(I),N={libraryColCount:4,moving:!1,fromX:0,fromY:0,origScrollX:0,origScrollY:0,showGrid:!0,gridType:2},R=null;N.toggleGrid=function(){N.showGrid=!N.showGrid,N.drawGrid()},N.onResize=function(){R=null,N.setSize(),N.draw(),N.drawGrid()},N.move=function(e,t,n){var o=window.Module.getZoom();if(0==n){var i=window.Module.getScroll();N.moving=!0,N.fromX=e,N.fromY=t,N.origScrollX=i.x,N.origScrollY=i.y}if(1==n&&N.moving){var a=e-N.fromX,r=t-N.fromY,s=N.origScrollX+a/o,c=N.origScrollY+r/o;window.Module.setScroll({x:s,y:c})}2==n&&N.moving&&(N.moving=!1)},N.maprx=function(e){return e/window.Module.getZoom()-window.Module.getScroll().x},N.mapry=function(e){return e/window.Module.getZoom()-window.Module.getScroll().y},N.getZoom=function(){return window.Module.getZoom()},N.zoomAt=function(e,t,n){var o=window.Module.getZoom(),i=n,a=window.Module.getScroll(),r=(e-a.x*o)*(o-i)/(o*i)+a.x*(o/i),s=(t-a.y*o)*(o-i)/(o*i)+a.y*(o/i);window.Module.setScroll({x:r,y:s}),window.Module.setZoom(n),N.drawGrid(),N.draw()},N.zoom=function(e){var t=document.getElementById("viewport").getBoundingClientRect();N.zoomAt(t.width/2,t.height/2,e)};var B=function(e,t,n){var o=window.devicePixelRatio||1;e.width=t*o,e.height=n*o,e.style.width=t+"px",e.style.height=n+"px",e.getContext("2d").scale(o,o)};N.setSize=function(){var e=document.getElementById("viewport").getBoundingClientRect(),t=document.getElementById("gridCanvas");B(t,e.width,e.height);var n=document.getElementById("drawCanvas");B(n,e.width,e.height);var o=document.getElementById("transparentPanel");B(o,e.width,e.height)},N.exportToImage=function(e){var t=window.Module.getBoundsOfAll(),n=10-t.x,o=10-t.y,i=t.width+20,a=t.height+20,r=document.createElement("canvas");B(r,i,a);var s=r.getContext("2d");return"jpg"!=e&&"jpeg"!=e||(s.fillStyle="#fff",s.fillRect(0,0,i,a)),window.Module.drawCanvasForExport(s,n,o),{data:r.toDataURL("image/"+e),width:i,height:a}},N.drawGrid=function(){var e=document.getElementById("gridCanvas"),t=e.width,n=e.height,o=e.getContext("2d");if(o.clearRect(0,0,e.width,e.height),N.showGrid){var i=window.Module.getZoom(),a=window.Module.getScroll(),r=1*i,s=48*i,c=a.x*i%s,d=a.y*i%s;if(1==N.gridType){if(s<16)return;o.beginPath(),o.fillStyle="#c0c0c0",o.strokeStyle="#c0c0c0";for(var l=d;l<n;l+=s)for(var u=c;u<t;u+=s)o.moveTo(u+r,l),o.arc(u,l,r,0,2*Math.PI,!1);o.fill(),o.stroke()}else{if(s<8)return;o.lineWidth=.1,o.strokeStyle="#606060",o.beginPath();for(l=d;l<n;l+=s)o.moveTo(0,l),o.lineTo(t,l);for(l=c;l<t;l+=s)o.moveTo(l,0),o.lineTo(l,n);o.stroke()}}},N.draw=function(){null==R&&(R=document.getElementById("drawCanvas"));var e=R.getContext("2d");e.clearRect(0,0,R.width,R.height),window.Module.drawCanvas(e)},N.drawCell=function(e,t,n,o){var i=t/N.libraryColCount,a=t%N.libraryColCount;window.Module.drawCell(e,i,a,n-8,n/2,n/2,o)};var E=N,P=n(74),D=n(105),G=Object(h.a)(w),L=function(){var e=G(),t=Object(o.useState)(!0),n=Object(j.a)(t,2),i=n[0],a=n[1],r=Object(o.useState)(E.showGrid),s=Object(j.a)(r,2),c=s[0],d=s[1],l=Object(o.useState)(""),u=Object(j.a)(l,2),p=u[0],w=u[1],h=Object(o.useState)(!1),m=Object(j.a)(h,2),b=m[0],g=m[1],S=[{id:"grid",name:"Show grid"},{id:"snap",name:"Snap objects"},{id:"help",name:"Help"}],I=function(e){"grid"==e&&(d(!c),E.showGrid=!c,E.drawGrid()),"snap"==e&&(a(!i),window.Module.setSnap(!i)),"help"==e&&window.open("https://lekh.app/help/lekhboard.html","_blank").focus(),g(!1)},N=function(e){if(console.log("export ",e),g(!1),"pdf"==e)!function(){var e=E.exportToImage("jpeg"),t="landscape";e.height>e.width&&(t="portrait");var n=new P.a({orientation:t,format:[e.width,e.height]});n.addImage(e.data,"JPEG",0,0,e.width,e.height),n.save("drawing.pdf")}();else if("png"==e||"jpeg"==e){var t=E.exportToImage(e);D.saveAs(t.data,"drawing."+e)}else if("svg"==e){var n=window.Module.getSvg(),o=new Blob([n],{type:"text/plain;charset=utf-8"});D.saveAs(o,"drawing.svg")}else if("lekh"==e){n=window.Module.getLekh(),o=new Blob([n],{type:"text/plain;charset=utf-8"});D.saveAs(o,"drawing.lekh")}};return Object(x.jsx)(f.a,{container:!0,children:Object(x.jsx)(v.a,{className:"HeaderSection",position:"static",color:"transparent",style:{background:"transparent",boxShadow:"none"},children:Object(x.jsxs)(O.a,{children:[Object(x.jsx)(y.a,{className:"HeaderMenuIcon",color:"inherit","aria-label":"menu",onClick:function(e){return function(e){w(e.currentTarget),g(!0)}(e)},children:Object(x.jsx)(z.a,{})}),Object(x.jsxs)(M.a,{onClose:function(){return g(!1)},open:b,value:p,PaperProps:{style:{width:200,marginTop:40}},children:[Object(x.jsx)(C.a,{style:{left:"15px"},label:"Export",onClick:function(){return I("export")},parentMenuOpen:b,className:"subIcon",children:[{id:"pdf",name:"PDF"},{id:"png",name:"PNG"},{id:"jpeg",name:"JPEG"},{id:"svg",name:"SVG"},{id:"lekh",name:"LEKH"}].map((function(e,t){return Object(x.jsx)(k.a,{onClick:function(){return N(e.id)},children:e.name},t)}))},"export"),null===S||void 0===S?void 0:S.map((function(t,n){var o=null;return("snap"==t.id&&i||"grid"==t.id&&c)&&(o=Object(x.jsx)("span",{className:e.checkIcon,children:Object(x.jsx)(T.a,{})})),Object(x.jsxs)("div",{children:[o,Object(x.jsx)(k.a,{style:{left:"15px"},value:t.name,onClick:function(){return I(t.id)},children:t.name},t.id)]},t.id)}))]})]})})})},A=n(149),X={footer:{justifyContent:"center",display:"flex"},backClass:{border:"1px solid",backgroundColor:"#fff",borderColor:"#fff",borderRadius:"4px",boxShadow:"0 0 0 50px transparent",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))",margin:"13px 10px","&:hover":{cursor:"pointer"}},countClass:{border:"1px solid",margin:"13px 10px",width:"173px",borderColor:"#fff",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 0 0 50px transparent",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))",display:"flex","&:hover":{cursor:"pointer"}},valueClass:{margin:"15px 0px",width:"45px",textAlign:"center"},iconClass:{fontSize:"22px",padding:"8px 8px"},countBtn:{minWidth:"64px",padding:0}},Y=n(79),_=n.n(Y),F=n(78),H=n.n(F),q=n(80),W=n.n(q),Z=n(81),J=n.n(Z),U=Object(h.a)(X),Q=function(){var e=U(),t=Object(o.useState)(100),n=Object(j.a)(t,2),i=n[0],a=n[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"undo-redo-buttons",children:[Object(x.jsx)(A.a,{className:"resButton",children:Object(x.jsx)(H.a,{className:e.iconClass,onClick:function(){return window.Module.inputReceiver().undo(),void E.draw()}})}),Object(x.jsxs)(A.a,{className:"resButton",children:[Object(x.jsx)(_.a,{className:e.iconClass,onClick:function(){return window.Module.inputReceiver().redo(),void E.draw()}})," "]})]}),Object(x.jsxs)("div",{className:"zoom-info",children:[Object(x.jsx)(A.a,{className:e.countBtn,children:Object(x.jsx)(W.a,{className:e.iconClass,onClick:function(){return function(){var e=i-10;e<10&&(e=5),a(e),E.zoom(e/100)}()}})}),Object(x.jsxs)("div",{className:e.valueClass,children:[" ",i,"% "]}),Object(x.jsx)(A.a,{className:e.countBtn,children:Object(x.jsx)(J.a,{className:e.iconClass,onClick:function(){return function(){var e=0;a(e=i<10?10:i+10),E.zoom(e/100)}()}})})]})]})},K={sideBar:{boxShadow:"0 0 0 50px transparent",background:"white",borderRadius:"10px",width:"55px",display:"inline-block",margin:"0 15px",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))"},sideBarMenu:{padding:"11px 12px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","&:hover":{cursor:"pointer"}},menuIcons:{marginBottom:10},menuItem:{textAlign:"center",fontSize:"13px"},sideMenuIcons:{textAlign:"center",fontSize:"14px"},changeColor:{"&:hover":{cursor:"pointer"}},spaceBwt:{height:"45px"},spaceBwtRound:{height:"47px",border:"1px solid #dfe3e8"}},V=n(9),$=n(21),ee=function(e){var t=Object(o.useRef)(null),n=window.devicePixelRatio||1,i=e.size,a=e.size;return Object(o.useEffect)((function(){var o=t.current;o.width=i*n,o.height=a*n,o.style.width=i+"px",o.style.height=a+"px";var r=o.getContext("2d");r.scale(n,n),E.drawCell(e.category,e.num,e.size,r)}),[]),Object(x.jsx)("canvas",Object($.a)(Object($.a)({ref:t},e),{},{width:i+"px",height:a+"px"}))},te=[Object(x.jsx)(V.a,{size:"2em",color:"red",id:"0"}),Object(x.jsx)(V.a,{size:"2em",color:"orange",id:"1"}),Object(x.jsx)(V.a,{size:"2em",color:"teal",id:"2"}),Object(x.jsx)(V.a,{size:"2em",color:"green",id:"3"}),Object(x.jsx)(V.a,{size:"2em",color:"yellow",id:"4"}),Object(x.jsx)(V.a,{size:"2em",color:"tan",id:"5"}),Object(x.jsx)(V.a,{size:"2em",color:"brown",id:"6"}),Object(x.jsx)(V.a,{size:"2em",color:"grey",id:"7"}),Object(x.jsx)(V.a,{size:"2em",color:"pink",id:"8"}),Object(x.jsx)(V.a,{size:"2em",color:"purple",id:"9"}),Object(x.jsx)(V.a,{size:"2em",color:"black",id:"10"}),Object(x.jsx)(V.a,{size:"2em",color:"violet",id:"11"}),Object(x.jsx)(V.a,{size:"2em",color:"plum",id:"12"}),Object(x.jsx)(V.a,{size:"2em",color:"skyblue",id:"13"}),Object(x.jsx)(V.a,{size:"2em",color:"cyan",id:"14"}),Object(x.jsx)(V.a,{size:"2em",color:"blue",id:"15"}),Object(x.jsx)(V.a,{size:"2em",color:"darkcyan",id:"16"}),Object(x.jsx)(V.a,{size:"2em",color:"darkorchid",id:"17"}),Object(x.jsx)(V.a,{size:"2em",color:"gold",id:"18"}),Object(x.jsx)(V.a,{size:"2em",color:"royalblue",id:"11"})],ne=[Object(x.jsx)(ee,{category:0,num:0,drag:"true",id:"0",size:45}),Object(x.jsx)(ee,{category:0,num:2,drag:"true",id:"1",size:45}),Object(x.jsx)(ee,{category:0,num:3,drag:"true",id:"2",size:45}),Object(x.jsx)(ee,{category:0,num:5,drag:"true",id:"3",size:45}),Object(x.jsx)(ee,{category:0,num:6,drag:"true",id:"4",size:45}),Object(x.jsx)(ee,{category:0,num:7,drag:"true",id:"5",size:45}),Object(x.jsx)(ee,{category:0,num:8,drag:"true",id:"6",size:45}),Object(x.jsx)(ee,{category:1,num:1,drag:"true",id:"7",size:45}),Object(x.jsx)(ee,{category:1,num:2,drag:"true",id:"8",size:45}),Object(x.jsx)(ee,{category:1,num:5,drag:"true",id:"9",size:45}),Object(x.jsx)(ee,{category:1,num:6,drag:"true",id:"10",size:45}),Object(x.jsx)(ee,{category:1,num:10,drag:"true",id:"11",size:45}),Object(x.jsx)(ee,{category:1,num:20,drag:"true",id:"12",size:45}),Object(x.jsx)(ee,{category:2,num:0,drag:"true",id:"13",size:45}),Object(x.jsx)(ee,{category:2,num:4,drag:"true",id:"14",size:45}),Object(x.jsx)(ee,{category:3,num:0,drag:"true",id:"15",size:45}),Object(x.jsx)(ee,{category:3,num:4,drag:"true",id:"16",size:45}),Object(x.jsx)(ee,{category:3,num:5,drag:"true",id:"17",size:45}),Object(x.jsx)(ee,{category:3,num:6,drag:"true",id:"18",size:45}),Object(x.jsx)(ee,{category:3,num:7,drag:"true",id:"19",size:45}),Object(x.jsx)(ee,{category:3,num:8,drag:"true",id:"20",size:45}),Object(x.jsx)(ee,{category:4,num:0,drag:"true",id:"21",size:45}),Object(x.jsx)(ee,{category:4,num:1,drag:"true",id:"22",size:45}),Object(x.jsx)(ee,{category:4,num:2,drag:"true",id:"23",size:45})],oe=[{id:1,icon:Object(x.jsx)(m.e,{size:"1.2em",color:"#000000b8"}),name:"Select"},{id:2,icon:Object(x.jsx)(m.d,{size:"1.2em",color:"#000000b8"}),name:"Move"},{id:3,icon:Object(x.jsx)(m.f,{size:"1.2em",color:"#000000b8"}),name:"Draw",subMenus:te},{id:4,icon:Object(x.jsx)(m.b,{size:"1.2em",color:"#000000b8"}),name:"Smart Draw",subMenus:te},{id:5,icon:Object(x.jsx)(m.c,{size:"1.2em",color:"#000000b8"}),name:"Erase"},{id:6,icon:Object(x.jsx)(V.b,{size:"1.2em",color:"#000000b8"}),name:"Erase All"},{id:7,icon:Object(x.jsx)(m.h,{size:"1.2em",color:"#000000b8"}),name:"Shapes",subMenus:ne}],ie=n(150),ae=n(151),re=n(113),se=n(44),ce={colorIndex:10,dashIndex:0,widthIndex:0};ce.setColor=function(e,t){ce.colorIndex=e;var n=function(e){var t={aliceblue:[240,248,255,255],antiquewhite:[250,235,215,255],aqua:[0,255,255,255],aquamarine:[127,255,212,255],azure:[240,255,255,255],beige:[245,245,220,255],bisque:[255,228,196,255],black:[0,0,0,255],blanchedalmond:[255,235,205,255],blue:[0,0,255,255],blueviolet:[138,43,226,255],brown:[165,42,42,255],burlywood:[222,184,135,255],cadetblue:[95,158,160,255],chartreuse:[127,255,0,255],chocolate:[210,105,30,255],coral:[255,127,80,255],cornflowerblue:[100,149,237,255],cornsilk:[255,248,220,255],crimson:[220,20,60,255],cyan:[0,255,255,255],darkblue:[0,0,139,255],darkcyan:[0,139,139,255],darkgoldenrod:[184,134,11,255],darkgray:[169,169,169,255],darkgreen:[0,100,0,255],darkkhaki:[189,183,107,255],darkmagenta:[139,0,139,255],darkolivegreen:[85,107,47,255],darkorange:[255,140,0,255],darkorchid:[153,50,204,255],darkred:[139,0,0,255],darksalmon:[233,150,122,255],darkseagreen:[143,188,143,255],darkslateblue:[72,61,139,255],darkslategray:[47,79,79,255],darkturquoise:[0,206,209,255],darkviolet:[148,0,211,255],deeppink:[255,20,147,255],deepskyblue:[0,191,255,255],dimgray:[105,105,105,255],dodgerblue:[30,144,255,255],firebrick:[178,34,34,255],floralwhite:[255,250,240,255],forestgreen:[34,139,34,255],fuchsia:[255,0,255,255],gainsboro:[220,220,220,255],ghostwhite:[248,248,255,255],gold:[255,215,0,255],goldenrod:[218,165,32,255],gray:[128,128,128,255],green:[0,128,0,255],greenyellow:[173,255,47,255],honeydew:[240,255,240,255],hotpink:[255,105,180,255],"indianred ":[205,92,92,255],indigo:[75,0,130,255],ivory:[255,255,240,255],khaki:[240,230,140,255],lavender:[230,230,250,255],lavenderblush:[255,240,245,255],lawngreen:[124,252,0,255],lemonchiffon:[255,250,205,255],lightblue:[173,216,230,255],lightcoral:[240,128,128,255],lightcyan:[224,255,255,255],lightgoldenrodyellow:[250,250,210,255],lightgrey:[211,211,211,255],lightgreen:[144,238,144,255],lightpink:[255,182,193,255],lightsalmon:[255,160,122,255],lightseagreen:[32,178,170,255],lightskyblue:[135,206,250,255],lightslategray:[119,136,153,255],lightsteelblue:[176,196,222,255],lightyellow:[255,255,224,255],lime:[0,255,0,255],limegreen:[50,205,50,255],linen:[250,240,230,255],magenta:[255,0,255,255],maroon:[128,0,0,255],mediumaquamarine:[102,205,170,255],mediumblue:[0,0,205,255],mediumorchid:[186,85,211,255],mediumpurple:[147,112,216,255],mediumseagreen:[60,179,113,255],mediumslateblue:[123,104,238,255],mediumspringgreen:[0,250,154,255],mediumturquoise:[72,209,204,255],mediumvioletred:[199,21,133,255],midnightblue:[25,25,112,255],mintcream:[245,255,250,255],mistyrose:[255,228,225,255],moccasin:[255,228,181,255],navajowhite:[255,222,173,255],navy:[0,0,128,255],oldlace:[253,245,230,255],olive:[128,128,0,255],olivedrab:[107,142,35,255],orange:[255,165,0,255],orangered:[255,69,0,255],orchid:[218,112,214,255],palegoldenrod:[238,232,170,255],palegreen:[152,251,152,255],paleturquoise:[175,238,238,255],palevioletred:[216,112,147,255],papayawhip:[255,239,213,255],peachpuff:[255,218,185,255],peru:[205,133,63,255],pink:[255,192,203,255],plum:[221,160,221,255],powderblue:[176,224,230,255],purple:[128,0,128,255],rebeccapurple:[102,51,153,255],red:[255,0,0,255],rosybrown:[188,143,143,255],royalblue:[65,105,225,255],saddlebrown:[139,69,19,255],salmon:[250,128,114,255],sandybrown:[244,164,96,255],seagreen:[46,139,87,255],seashell:[255,245,238,255],sienna:[160,82,45,255],silver:[192,192,192,255],skyblue:[135,206,235,255],slateblue:[106,90,205,255],slategray:[112,128,144,255],snow:[255,250,250,255],springgreen:[0,255,127,255],steelblue:[70,130,180,255],tan:[210,180,140,255],teal:[0,128,128,255],thistle:[216,191,216,255],tomato:[255,99,71,255],turquoise:[64,224,208,255],violet:[238,130,238,255],wheat:[245,222,179,255],white:[255,255,255,255],whitesmoke:[245,245,245,255],yellow:[255,255,0,255],yellowgreen:[154,205,50,255]};return"undefined"!=typeof t[e.toLowerCase()]?t[e.toLowerCase()]:[255,255,255,255]}(t);window.Module.setStrokeColor(n[0],n[1],n[2],n[3])},ce.setDashIndex=function(e){ce.dashIndex=e,window.Module.setDashType(e)},ce.setWidthIndex=function(e){ce.widthIndex=e,window.Module.inputReceiver().currentStyle().setStrokeWidth(2*(e+1))};var de=ce,le=function(e){var t=e.colors;return null===t||void 0===t?void 0:t.map((function(t,n){var o=null;return o=n==e.selectedIndex?Object(x.jsx)(m.a,{size:"2em",color:t.props.color}):t,Object(x.jsx)("span",{onClick:function(){return e.onColorChange(n,t.props.color)},children:o})}))},ue={mediaQuery:"only screen and (max-width: 640px)"},pe=Object(h.a)(K),we=function(e){var t=pe(),n=Object(o.useState)(de.colorIndex),i=Object(j.a)(n,2),a=i[0],r=i[1],s=Object(o.useState)(de.dashIndex),c=Object(j.a)(s,2),d=c[0],l=c[1],u=Object(o.useState)(de.widthIndex),p=Object(j.a)(u,2),w=p[0],h=p[1],m=[{icon:Object(x.jsx)(V.a,{size:"1em",id:"0"})},{icon:Object(x.jsx)(V.a,{size:"1.2em",id:"1"})},{icon:Object(x.jsx)(V.a,{size:"1.4em",id:"2"})},{icon:Object(x.jsx)(V.a,{size:"1.6em",id:"3"})},{icon:Object(x.jsx)(V.a,{size:"1.8em",id:"4"})}],b=[{icon:Object(x.jsx)(se.b,{size:"2.2em",id:"0"})},{icon:Object(x.jsx)(se.c,{size:"2em",style:{marginBottom:"3px"},id:"1"})},{icon:Object(x.jsx)(se.a,{size:"2em",style:{marginBottom:"3px"},id:"2"})},{icon:Object(x.jsx)(se.a,{size:"2em",style:{marginBottom:"3px"},id:"3"})}],g=function(e,t){r(e),de.setColor(e,t)},f=function(){return Object(x.jsx)("div",{className:t.spaceBwtRound,children:b.map((function(e,t){return Object(x.jsx)("span",{className:"".concat(e.icon.props.id==d?"changeBorder":""," "),onClick:function(){return function(e,t){l(t),de.setDashIndex(e)}(t,e.icon.props.id)},children:e.icon},t)}))})},v=function(){return Object(x.jsx)("div",{className:t.spaceBwt,children:m.map((function(e,t){return Object(x.jsx)("span",{className:"".concat(e.icon.props.id==w?"changeBorderRound":"defaultBorder"," "),onClick:function(){return function(e,t){h(t),de.setWidthIndex(e)}(t,e.icon.props.id)},children:e.icon},t)}))})},O=e.open,y=e.anchorEl,M=e.placement,k=e.subMenuIcons;return window.matchMedia(ue.mediaQuery).matches&&(M="top"),Object(x.jsx)("div",{children:Object(x.jsx)(ie.a,{open:O,anchorEl:y,placement:M,transition:!0,children:function(e){var t=e.TransitionProps;return Object(x.jsx)(ae.a,Object($.a)(Object($.a)({},t),{},{timeout:350,children:Object(x.jsxs)(re.a,{className:"smart_draw_paper smart_draw_res",children:[v(),f(),Object(x.jsx)(le,{colors:k,selectedIndex:a,onColorChange:g})]})}))}})})},he=n(152),me={mode:4,inDrawMode:function(){return 3==me.mode||4==me.mode},setMode:function(e){var t=document.getElementById("drawCanvas");e<=5&&(me.mode=e),1==e?(window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION),t.style.cursor="auto"):2==e?t.style.cursor="all-scroll":3==e?(window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING),window.Module.enableRecognition(!1),t.style.cursor="auto"):4==e?(window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING),window.Module.enableRecognition(!0),t.style.cursor="auto"):5==e?t.style.cursor='url("/eraser-solid.svg"), auto':6==e&&(window.Module.eraseAll(),E.draw())}},xe=me,be=n(83),ge=n.n(be),je=function(e){var t=function(e){return null===e||void 0===e?void 0:e.map((function(e,t){return Object(x.jsx)(ge.a,{position:{x:0,y:0},onStop:function(t){return function(e,t){var n=t.props.category,o=t.props.num,i=E.maprx(e.pageX),a=E.mapry(e.pageY);window.Module.libraryStore().addObjectToCanvas(n,o,i,a),E.draw()}(t,e)},children:Object(x.jsx)("div",{style:{display:"inline-block"},children:e})},t)}))},n=e.open,o=e.anchorEl,i=e.placement,a=e.subMenuIcons;return window.matchMedia(ue.mediaQuery).matches&&(i="top"),Object(x.jsx)("div",{children:Object(x.jsx)(ie.a,{open:n,anchorEl:o,placement:i,transition:!0,children:function(e){var n=e.TransitionProps;return Object(x.jsx)(ae.a,Object($.a)(Object($.a)({},n),{},{timeout:350,children:Object(x.jsx)(re.a,{className:"popper_paper poper_paper_res",children:t(a)})}))}})})},fe=Object(h.a)(K),ve=function(){var e=i.a.useState(null),t=Object(j.a)(e,2),n=t[0],o=t[1],a=i.a.useState(!1),r=Object(j.a)(a,2),s=r[0],c=r[1],d=i.a.useState(),l=Object(j.a)(d,2),u=l[0],p=l[1],w=i.a.useState(),h=Object(j.a)(w,2),m=h[0],b=h[1],g=i.a.useState(xe.mode),f=Object(j.a)(g,2),v=f[0],O=f[1],y=i.a.useState(),M=Object(j.a)(y,2),k=M[0],S=M[1],z=fe(),C=function(e,t,n,i){6!=i?(o(e.currentTarget),c(i!==v||!s),p(n),b(t),O(i),S(i-1),xe.setMode(i)):xe.setMode(i)},I=function(e,t){var n=e.icon,o=e.name,i=t.menuItem;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:i+" sideMenuIcons",children:n}),Object(x.jsx)("div",{className:i+" menuItems",children:o})]})};return Object(x.jsx)(he.a,{onClickAway:function(){return c(!1)},children:Object(x.jsxs)("div",{children:[(3===v||4===v)&&Object(x.jsx)(we,{open:s,anchorEl:n,placement:u,subMenuIcons:m,setOpenState:function(){return c(!s)},close:function(){return console.log("close")},selectedItemId:v}),7===v&&Object(x.jsx)(je,{open:s,anchorEl:n,placement:"right-end",subMenuIcons:m}),Object(x.jsx)("div",{className:"".concat(z.sideBar," side_menus"),children:oe.map((function(e,t){return function(e){return Object.keys(e).length>0&&"subMenus"in e}(e)?Object(x.jsx)("div",{className:e.id===v?z.sideBarMenu+" sideBarMenu active":z.sideBarMenu+" sideBarMenu",onClick:function(t){return C(t,e.subMenus,"right",e.id)},children:I(e,z)},t):Object(x.jsx)("div",{className:5!=t&&t===k?z.sideBarMenu+" sideBarMenu active":z.sideBarMenu+" sideBarMenu",onClick:function(t){return C(t,e.subMenus,"right",e.id)},children:I(e,z)},t)}))})]})})},Oe=function(){return Object(x.jsxs)("div",{className:"canvasContainer",children:[Object(x.jsxs)("div",{id:"viewport",className:"viewport",children:[Object(x.jsx)("canvas",{id:"gridCanvas",className:"canvasGridClass"}),Object(x.jsx)("canvas",{id:"drawCanvas",className:"canvasClass"})]}),Object(x.jsx)("canvas",{id:"transparentPanel",className:"viewport"})]})};function ye(){window.location.reload()}var Me=function(e){var t=null;return t="init"==e.state?Object(x.jsx)("div",{className:"layover-box",children:"Loading.."}):"disconnected"==e.state?Object(x.jsx)("div",{className:"layover-box",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{children:"Disconnected from server "}),Object(x.jsx)("a",{href:"#",onClick:ye,children:"Reconnect"})]})}):"notfound"==e.state?Object(x.jsxs)("div",{className:"layover-box",children:[Object(x.jsx)("span",{children:"Requested board does not exist"}),Object(x.jsx)("a",{href:"/?_new=true",children:"Start a collaborative board"}),Object(x.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}):"prompt"==e.state?Object(x.jsxs)("div",{className:"layover-box",children:[Object(x.jsx)("a",{href:"/?_new=true",children:"Start a collaborative board"}),Object(x.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}):Object(x.jsxs)("div",{className:"layover-box",children:[Object(x.jsx)("span",{children:"Something went wrong"}),Object(x.jsx)("a",{href:"#",onClick:ye,children:"Reload"}),Object(x.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}),Object(x.jsx)("div",{className:"layover-col",children:t})},ke=n(22),Se=n.n(ke),ze=(n(54),n(45)),Ce=n(25),Ie=n.n(Ce),Te={};function Ne(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(ze.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){window.Module.libraryStore().initObjects(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return(Be=Object(ze.a)(Se.a.mark((function e(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne("templates/v4/templates.json");case 2:return e.next=4,Ne("templates/v4/basic.json");case 4:return e.next=6,Ne("templates/v4/flowchart.json");case 6:return e.next=8,Ne("templates/v4/arrow.json");case 8:return e.next=10,Ne("templates/v4/misc.json");case 10:return e.next=12,Ne("templates/v4/misc2.json");case 12:return e.next=14,Ne("templates/v4/connection_arrows.json");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.generateUUID=function(){var e=(new Date).getTime(),t=window.performance&&window.performance.now&&1e3*window.performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===n?o:3&o|8).toString(16)}))},Te.loadBasicTemplates=function(e){(function(){return Be.apply(this,arguments)})().then((function(){window.Module.libraryStore().init(e),window.Module.libraryStore().onDisplaySettingChange()}))};var Ee=Te,Pe={},De=[],Ge=!1,Le=null;var Ae=function(){null==Le&&(Le=document.getElementById("transparentPanel"));var e=Le.getContext("2d");if(e.clearRect(0,0,Le.width,Le.height),De.length>0){window.Module.setCurrentStyleToCtx(e),e.beginPath();var t=De[0];e.moveTo(t.x,t.y);for(var n=0;n<De.length;n++)e.lineTo(De[n].x,De[n].y);e.stroke()}};Pe.onResize=function(){Le=null},Pe.click=function(e,t){var n={x:e,y:t};window.Module.inputFilter().tap(n,1),E.draw()},Pe.dbclick=function(e,t){var n={x:e,y:t};window.Module.inputFilter().tap(n,2),E.draw(),window.Module.inputReceiver().needTextEditing()&&function(){var e=window.Module.getTextEditRect(),t=e.x+e.width/2,n=e.y+e.height/2,o=E.scrollX,i=E.scrollY,a=Math.random()+"t",r=Ie()("<textarea id='"+a+"'></textarea>");r.val(window.Module.getTextForEditing());var s=window.Module.getTextEditStyle(),c=window.Module.isEditingFloatingText(),d={resize:"none",overflow:"hidden",position:"absolute","font-sze":"15px","line-height":"15px","background-color":"transparent",left:e.x+o+"px",top:e.y+i+"px",width:e.width+"px",height:e.height+"px","z-index":"2"};switch(s.effectiveTextAlignHorizontal().value){case 0:case 1:d["text-align"]="center";break;case 2:d["text-align"]="left";break;case 3:d["text-align"]="right"}function l(){var e=r.val(),a=window.Module.getTextEditSize(e,c);if(0==a.height&&(a.height=15),a.width<50&&(a.width=50),a.height+=7.5,r.css("top",n+i-a.height/2+"px"),r.css("height",a.height+"px"),c){var s=a.width+150;r.css("width",s+"px"),r.css("left",t+o-s/2+"px")}}r.css(d),Ie()("#viewport").append(r),r.trigger("focus"),r.on("blur",(function(e){window.Module.finishTextEditing(r.val()),r.remove(),E.draw()})),r.on("change keyup paste",l),l()}()},Pe.down=function(e,t){},Pe.up=function(e,t){},Pe.move=function(e,t){},Pe.drag=function(e,t,n){2==xe.mode?function(e,t,n){E.move(e,t,n),E.drawGrid(),E.draw()}(e,t,n):function(e,t,n){var o=window.Module.InputType.START;1==n?o=window.Module.InputType.OTHER:2==n&&(o=window.Module.InputType.END);var i={x:e,y:t},a={x:E.maprx(e),y:E.mapry(t)};o==window.Module.InputType.START&&xe.inDrawMode()&&window.Module.willDrawAt(a)&&(Ge=!0);Ge?(De.push(i),Ae()):(window.Module.inputFilter().pan(i,o),E.draw());o==window.Module.InputType.END&&Ge&&(Ge=!1,function(){if(De.length>2){window.Module.inputFilter().pan(De[0],window.Module.InputType.START);for(var e=1;e<De.length-1;e++)window.Module.inputFilter().pan(De[e],window.Module.InputType.OTHER);var t=De[De.length-1];window.Module.inputFilter().pan(t,window.Module.InputType.END)}E.draw(),De=[],Ae()}())}(e,t,n)},Pe.contextmenu=function(e,t){},Pe.enter=function(e){},Pe.leave=function(e){};var Xe=Pe,Ye={};Ye.attachEventHandlers=function(){Ie()(window).on("resize",(function(){E.onResize(),Xe.onResize()}));var e=document.getElementById("transparentPanel");function t(e,t,n,o){var i=e-n,a=t-o;return Math.sqrt(i*i+a*a)}var n=null,o=!1,i=!1,a=null,r=null,s=null,c=null,d=function(e){o=!1,Xe.up(s,c),i&&(Xe.drag(s,c,2),i=!1)};window.bean.on(e,"click",(function(e){2!=e.button?0==e.button&&(i?i=!1:null!=n?(clearTimeout(n),n=null,Xe.dbclick(e.offsetX,e.offsetY)):n=setTimeout((function(){n=null,Xe.click(e.offsetX,e.offsetY)}),350)):Xe.contextmenu(e)})),window.bean.on(e,"mousedown",(function(e){0==e.button&&(a=e.offsetX,r=e.offsetY,o=!0,Xe.down(a,r))})),window.bean.on(e,"mouseup",(function(e){0==e.button&&(o=!1,Xe.up(e.offsetX,e.offsetY),i&&Xe.drag(e.offsetX,e.offsetY,2))})),window.bean.on(e,"mousemove",(function(e){o&&0!=e.button||(o?i?Xe.drag(e.offsetX,e.offsetY,1):t(a,r,e.offsetX,e.offsetY)>=4&&(i=!0,Xe.drag(a,r,0),Xe.drag(e.offsetX,e.offsetY,1)):Xe.move(e.offsetX,e.offsetY))})),window.bean.on(e,"mouseenter",(function(e){})),window.bean.on(e,"mouseleave",(function(e){i&&(Xe.drag(e.offsetX,e.offsetY,2),i=!1,o=!1)})),window.bean.on(e,"contextmenu",(function(e){console.log("contextmenu")})),function(){var n=function(e){var t=e.targetTouches[0];return[t.clientX,t.clientY]};e.addEventListener("touchstart",(function(e){if(1==e.targetTouches.length){var t=n(e),i=Object(j.a)(t,2);s=i[0],c=i[1],a=s,r=c,o=!0,Xe.down(a,r)}})),e.addEventListener("touchmove",(function(e){if(e.preventDefault(),1==e.targetTouches.length){e.targetTouches[0];var d=n(e),l=Object(j.a)(d,2);if(s=l[0],c=l[1],!o)return void Xe.move(s,c);i?Xe.drag(s,c,1):t(a,r,s,c)>=4&&(i=!0,Xe.drag(a,r,0),Xe.drag(s,c,1))}})),e.addEventListener("touchend",(function(e){d()})),e.addEventListener("touchleave",(function(e){d()})),e.addEventListener("touchcancel",(function(e){d()}))}()};var _e=Ye,Fe={};window.wsmanager={state:"init",cb:null,setState:function(e){window.wsmanager.state=e,null!=window.wsmanager.cb&&window.wsmanager.cb(e)}};var He="https://api.lekh.app/v1",qe=!1,We=!1,Ze=!1,Je=function(e){var t=document.createElement("script");t.src=e,t.async=!1,document.body.appendChild(t)};window.Module={onRuntimeInitialized:function(){qe=!0,Fe.initInternal()}},Fe.init=function(e){Ze=!0,window.wsmanager.cb=e,Je("a1/bean.min.js"),Je("a1/lekhapp.js"),Fe.initInternal()},Fe.initInternal=function(){if(!We&&Ze&&qe&&(We=!0,document.getElementById("gridCanvas"))){var e=document.getElementById("drawCanvas");We=!0,window.Module.init(e),E.setSize(),E.drawGrid(),Ee.loadBasicTemplates(E.libraryColCount),_e.attachEventHandlers(),function(){var e=(o=new URL(window.location)).searchParams.get("docid"),t=o.searchParams.get("_new"),n=o.searchParams.get("offline");if(e){(i=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=JSON.parse(i.responseText);window.wsmanager.start(e,t.location)}else 404==this.status?window.wsmanager.setState("notfound"):window.wsmanager.setState("error")};var o=He+"/docs/"+e;i.open("POST",o),i.send()}else if("true"==t){var i;(i=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e=JSON.parse(i.responseText),t=new URL(window.location).origin+"/?docid="+e.docid;window.location=t}else window.wsmanager.setState("error")};o=He+"/docs";i.open("POST",o),i.send()}else"true"==n?window.wsmanager.setState("offline"):window.wsmanager.setState("prompt")}()}},window.wsmanager.start=function(e,t){var n,o=new window.WebSocket(t);window.Module.startDoc(e),window.wsmanager.send=function(e,t){return o.send(t),!0},o.onopen=function(e){console.log("connection opened: ",e),n=window.setInterval((function(){o.send("{}")}),15e3)},o.onmessage=function(e){window.Module.updateDoc(e.data),E.draw(),"init"==window.wsmanager.state&&window.wsmanager.setState("ready")},o.onclose=function(e){console.log("connection closed:",e),window.wsmanager.setState("disconnected"),window.clearInterval(n)},o.onerror=function(e){console.log("connection error: ",e),window.wsmanager.setState("disconnected"),window.clearInterval(n)}};var Ue=Fe,Qe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).state={wsState:"init"},o.wsCallback=o.handleWSState.bind(Object(d.a)(o)),o}return Object(c.a)(n,[{key:"handleWSState",value:function(e){this.setState({wsState:e})}},{key:"render",value:function(){console.log("state=",this.state.wsState);var e=null;return"ready"!=this.state.wsState&&"offline"!=this.state.wsState&&(e=Object(x.jsx)("div",{className:"layover",children:Object(x.jsx)(Me,{state:this.state.wsState})})),Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(Oe,{}),Object(x.jsx)("div",{className:"header-area",children:Object(x.jsx)(g,{})}),Object(x.jsx)("div",{className:"top-right",children:Object(x.jsx)("a",{target:"_blank",href:"https://lekh.app/help/lekhboard.html",className:"help-link",children:"Help"})}),Object(x.jsx)("div",{className:"top-left-menu",children:Object(x.jsx)(L,{})}),Object(x.jsx)("div",{className:"side-bar",children:Object(x.jsx)(ve,{})}),Object(x.jsx)("div",{className:"footer-area",children:Object(x.jsx)(Q,{})}),e]})}},{key:"componentDidMount",value:function(){Ue.init(this.wsCallback)}}]),n}(i.a.Component),Ke=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,528)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),a(e),r(e)}))};r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(Qe,{})}),document.getElementById("root")),Ke()},99:function(e,t,n){}},[[111,1,3]]]);
//# sourceMappingURL=main.a73e9cad.chunk.js.map