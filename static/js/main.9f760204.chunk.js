(this["webpackJsonplekhboard-web-ui"]=this["webpackJsonplekhboard-web-ui"]||[]).push([[0],{181:function(e,t,n){},182:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(9),r=n.n(o),s=(n(181),n(147)),c=n(148),d=n(81),l=n(171),u=n(169),b=(n(182),n(320)),j={root:{flexGrow:1},title:{flexGrow:1},arrowUp:{top:"54px",position:"absolute"},MainGrid:{display:"flex",position:"relative"},outClass:{position:"relative",margin:"0 auto",bottom:"2px",border:"1px solid #d1d1d1"},paper:{background:"#fff",borderRadius:"8px",padding:"15px 126px",textAlign:"center",color:"#000",position:"absolute",margin:"20px",marginRight:"0",right:"-10px",top:"4px",minHeight:"180px","&::before":{content:'"s"',position:"absolute",width:0,height:0,borderLeft:"19px solid transparent",borderRight:"19px solid transparent",borderBottom:"28px solid #fff",top:"-28px",right:"27px",marginLeft:"auto",fontSize:0,zIndex:9}},responsicePaper:{width:"0px",background:"#fff",borderRadius:"8px",padding:"0px 66px",textAlign:"center",color:"#000",margin:"20px",marginRight:"0",right:"19px",top:"13px",minHeight:"123px","&::before":{content:'"s"',position:"absolute",width:0,height:0,borderLeft:"19px solid transparent",borderRight:"19px solid transparent",borderBottom:"28px solid #fff",top:"-28px",right:"27px",marginLeft:"auto",fontSize:0,zIndex:9}},textIcon:{margin:"-7px",paddingRight:"8px"},checkIcon:{position:"absolute",margin:"5px"}},p=n(318),x=n(23),h=n(2),m=Object(p.a)(j),f=function(){var e=m();return Object(h.jsx)("div",{className:"".concat(e.outClass," header_text"),children:Object(h.jsxs)(b.a,{children:[Object(h.jsxs)("span",{children:[Object(h.jsx)(x.h,{size:"2em",className:"headerIcon"}),Object(h.jsx)("span",{className:"headerText",children:"Use pencil/mouse to draw or double click to add text"})]}),Object(h.jsx)("a",{target:"_blank",href:"https://lekh.app/help/lekhboard.html",className:"help-link",children:" Help"})]})})},w=n(11),g=n(322),v=n(323),O=n(324),y=n(325),k=n(330),S=n(331),C=n(155),M=n.n(C),z=n(170),I=n(157),N=n.n(I),B=n(98),T=n(154),E=(n(282),function(){var e=B.EditorState.createEmpty(),t=Object(a.useState)(e),n=Object(w.a)(t,2),i=(n[0],n[1]);return Object(h.jsx)(T.Editor,{editorState:e,onEditorStateChange:function(){return function(e){i(e)}()},toolbar:{options:["inline","fontSize","textAlign","history","fontFamily","remove"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0}},sytle:{display:"flex"}})}),R=n(326),D=Object(p.a)(j),L=function(){var e=D(),t=Object(a.useState)(""),n=Object(w.a)(t,2),i=n[0],o=n[1],r=Object(a.useState)(!1),s=Object(w.a)(r,2),c=s[0],d=s[1],l=Object(a.useState)(!1),u=Object(w.a)(l,2),b=(u[0],u[1],Object(a.useState)("")),j=Object(w.a)(b,2),p=j[0],x=j[1],m=Object(a.useState)(!1),f=Object(w.a)(m,2),C=f[0],I=f[1],B=[{id:1,name:"Insert diagram"},{id:2,name:"Default font"},{id:3,name:"Snap to grid"},{id:4,name:"Help"}],T=function(e){I(3===e&&!C),x(e),d(!1)};return Object(h.jsxs)(g.a,{container:!0,children:[Object(h.jsx)(v.a,{className:"HeaderSection",position:"static",color:"transparent",style:{background:"transparent",boxShadow:"none"},children:Object(h.jsxs)(O.a,{children:[Object(h.jsx)(y.a,{className:"HeaderMenuIcon",color:"inherit","aria-label":"menu",onClick:function(e){return function(e){o(e.currentTarget),d(!0)}(e)},children:Object(h.jsx)(M.a,{})}),Object(h.jsxs)(k.a,{onClose:function(){return d(!1)},open:c,value:i,PaperProps:{style:{width:200,marginTop:40}},children:[Object(h.jsx)(z.a,{style:{left:"15px"},label:"Export",onClick:function(){return T("exp")},parentMenuOpen:c,className:"subIcon",children:[{id:1,name:"PDF"},{id:2,name:"PNG"}].map((function(e,t){return Object(h.jsx)(S.a,{children:e.name},t)}))}),null===B||void 0===B?void 0:B.map((function(t,n){return Object(h.jsxs)("div",{children:[2===n&&C&&Object(h.jsx)("span",{className:e.checkIcon,children:Object(h.jsx)(N.a,{})}),Object(h.jsx)(S.a,{style:{left:"15px"},value:t.name,onClick:function(){return T(t.id)},children:t.name},n)]},n)}))]})]})}),2===p?Object(h.jsx)(R.a,{onClickAway:function(){x("")},children:Object(h.jsx)("div",{className:"text-editor",children:Object(h.jsx)(E,{})})}):null]})},A=n(327),P={footer:{justifyContent:"center",display:"flex"},backClass:{border:"1px solid",backgroundColor:"#fff",borderColor:"#fff",borderRadius:"4px",boxShadow:"0 0 0 50px transparent",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))",margin:"13px 10px","&:hover":{cursor:"pointer"}},countClass:{border:"1px solid",margin:"13px 10px",width:"173px",borderColor:"#fff",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 0 0 50px transparent",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))",display:"flex","&:hover":{cursor:"pointer"}},valueClass:{margin:"15px 0px",width:"45px",textAlign:"center"},iconClass:{fontSize:"22px",padding:"8px 8px"},countBtn:{minWidth:"64px",padding:0}},_=n(159),F=n.n(_),q=n(158),H=n.n(q),X=n(160),Y=n.n(X),G=n(161),W=n.n(G),U=n(32),J=n.n(U),K=(n(84),n(65)),Q=n(45),V=n.n(Q),Z={};function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(K.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){window.Module.libraryStore().initObjects(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(K.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("templates/v4/templates.json");case 2:return e.next=4,$("templates/v4/basic.json");case 4:return e.next=6,$("templates/v4/arrow.json");case 6:return e.next=8,$("templates/v4/callout.json");case 8:return e.next=10,$("templates/v4/flowchart.json");case 10:return e.next=12,$("templates/v4/connection_arrows.json");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Z.setCanvasSize=function(){var e=window.devicePixelRatio||1,t=function(t,n,a){t.width=n*e,t.height=a*e,t.style.width=n+"px",t.style.height=a+"px",t.getContext("2d").scale(e,e)},n=document.getElementById("viewport").getBoundingClientRect();t(document.getElementById("gridCanvas"),n.width,n.height),t(document.getElementById("drawCanvas"),n.width,n.height)},Z.drawGrid=function(e){var t=e.width,n=e.height,a=e.getContext("2d");a.lineWidth=.1,a.beginPath();for(var i=0;i<n;i+=16)a.moveTo(0,i),a.lineTo(t,i);for(i=0;i<t;i+=16)a.moveTo(i,0),a.lineTo(i,n);a.stroke()},Z.drawCanvas=function(){var e=document.getElementById("drawCanvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),window.Module.drawCanvas(t)},window.generateUUID=function(){var e=(new Date).getTime(),t=window.performance&&window.performance.now&&1e3*window.performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var a=16*Math.random();return e>0?(a=(e+a)%16|0,e=Math.floor(e/16)):(a=(t+a)%16|0,t=Math.floor(t/16)),("x"===n?a:3&a|8).toString(16)}))},Z.loadBasicTemplates=function(e){(function(){return te.apply(this,arguments)})().then((function(){window.Module.libraryStore().init(e),window.Module.libraryStore().onDisplaySettingChange()}))};var ne=Z,ae=Object(p.a)(P),ie=function(){var e=ae(),t=Object(a.useState)(100),n=Object(w.a)(t,2),i=n[0],o=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"undo-redo-buttons",children:[Object(h.jsx)(A.a,{className:"resButton",children:Object(h.jsx)(H.a,{className:e.iconClass,onClick:function(){return window.Module.inputReceiver().undo(),void ne.drawCanvas()}})}),Object(h.jsxs)(A.a,{className:"resButton",children:[Object(h.jsx)(F.a,{className:e.iconClass,onClick:function(){return window.Module.inputReceiver().redo(),void ne.drawCanvas()}})," "]})]}),Object(h.jsxs)("div",{className:"zoom-info",children:[Object(h.jsx)(A.a,{className:e.countBtn,children:Object(h.jsx)(Y.a,{className:e.iconClass,onClick:function(){return o(i-10),void(i<10&&o(0))}})}),Object(h.jsxs)("div",{className:e.valueClass,children:[" ",i,"% "]}),Object(h.jsx)(A.a,{className:e.countBtn,children:Object(h.jsx)(W.a,{className:e.iconClass,onClick:function(){o(i+10)}})})]})]})},oe={sideBar:{boxShadow:"0 0 0 50px transparent",background:"white",borderRadius:"10px",width:"55px",display:"inline-block",margin:"0 15px",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, .3))"},sideBarMenu:{padding:"11px 12px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","&:hover":{cursor:"pointer"}},menuIcons:{marginBottom:10},menuItem:{textAlign:"center",fontSize:"13px"},sideMenuIcons:{textAlign:"center",fontSize:"14px"},changeColor:{"&:hover":{cursor:"pointer"}},spaceBwt:{height:"45px"},spaceBwtRound:{height:"47px",border:"1px solid #dfe3e8"}},re=n(12),se=n(99),ce=n(54),de=n(162),le=n(100),ue=n(163),be=n(164),je=n(166),pe=n(165),xe=[Object(h.jsx)(re.a,{size:"2em",color:"red",id:"0"}),Object(h.jsx)(re.a,{size:"2em",color:"orange",id:"1"}),Object(h.jsx)(re.a,{size:"2em",color:"teal",id:"2"}),Object(h.jsx)(re.a,{size:"2em",color:"green",id:"3"}),Object(h.jsx)(re.a,{size:"2em",color:"yellow",id:"4"}),Object(h.jsx)(re.a,{size:"2em",color:"tan",id:"5"}),Object(h.jsx)(re.a,{size:"2em",color:"brown",id:"6"}),Object(h.jsx)(re.a,{size:"2em",color:"grey",id:"7"}),Object(h.jsx)(re.a,{size:"2em",color:"pink",id:"8"}),Object(h.jsx)(re.a,{size:"2em",color:"purple",id:"9"}),Object(h.jsx)(re.a,{size:"2em",color:"black",id:"10"}),Object(h.jsx)(re.a,{size:"2em",color:"violet",id:"11"}),Object(h.jsx)(re.a,{size:"2em",color:"plum",id:"12"}),Object(h.jsx)(re.a,{size:"2em",color:"skyblue",id:"13"}),Object(h.jsx)(re.a,{size:"2em",color:"cyan",id:"14"}),Object(h.jsx)(re.a,{size:"2em",color:"blue",id:"15"}),Object(h.jsx)(re.a,{size:"2em",color:"darkcyan",id:"16"}),Object(h.jsx)(re.a,{size:"2em",color:"darkorchid",id:"17"}),Object(h.jsx)(re.a,{size:"2em",color:"gold",id:"18"}),Object(h.jsx)(re.a,{size:"2em",color:"royalblue",id:"11"})],he=[Object(h.jsx)(se.b,{size:"2.5em",id:"0",drag:"true"}),Object(h.jsx)(ce.b,{size:"2.5em",id:"1",drag:"true"}),Object(h.jsx)(ce.e,{size:"2.5em",id:"2",drag:"true"}),Object(h.jsx)(de.a,{size:"2.5em",id:"3",drag:"true"}),Object(h.jsx)(x.a,{size:"2.5em",id:"4",drag:"true"}),Object(h.jsx)(le.b,{size:"2.5em",id:"5",drag:"true"}),Object(h.jsx)(ce.c,{size:"2.5em",id:"6",drag:"true"}),Object(h.jsx)(le.a,{size:"2.5em",id:"7",drag:"true"}),Object(h.jsx)(ue.a,{size:"2.5em",id:"8",drag:"true"}),Object(h.jsx)(se.a,{size:"2.5em",id:"9",drag:"true"}),Object(h.jsx)(be.a,{size:"2.5em",id:"10",drag:"true"}),Object(h.jsx)(ce.d,{size:"2.5em",id:"11",drag:"true"}),Object(h.jsx)(pe.a,{size:"2.5em",id:"12",drag:"true"}),Object(h.jsx)(je.a,{size:"2.5em",id:"13",drag:"true"}),Object(h.jsx)(ce.a,{size:"2.5em",id:"14",drag:"true"})],me=[{id:1,icon:Object(h.jsx)(x.f,{size:"1.2em",color:"#000000b8"}),name:"Select"},{id:2,icon:Object(h.jsx)(x.e,{size:"1.2em",color:"#000000b8"}),name:"Move"},{id:3,icon:Object(h.jsx)(x.g,{size:"1.2em",color:"#000000b8"}),name:"Draw",subMenus:xe},{id:4,icon:Object(h.jsx)(x.c,{size:"1.2em",color:"#000000b8"}),name:"Smart Draw",subMenus:xe},{id:5,icon:Object(h.jsx)(x.d,{size:"1.2em",color:"#000000b8"}),name:"Erase"},{id:6,icon:Object(h.jsx)(re.b,{size:"1.2em",color:"#000000b8"}),name:"Erase All"},{id:7,icon:Object(h.jsx)(x.i,{size:"1.2em",color:"#000000b8"}),name:"Shapes",subMenus:he}],fe=n(101),we=n(328),ge=n(329),ve=n(291),Oe=n(167),ye=n.n(Oe),ke=function(e){var t=i.a.useState(0),n=Object(w.a)(t,2),a=(n[0],n[1]),o=i.a.useState(0),r=Object(w.a)(o,2),s=(r[0],r[1]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ye.a,{position:{x:0,y:0},onStop:function(e){return function(e){a(e.x),s(e.x)}(e)},children:Object(h.jsx)("div",{style:{display:"inline-block"},children:e.subMenu})})})},Se=n(53),Ce={colorIndex:10,dashIndex:0,widthIndex:0};Ce.setColor=function(e,t){Ce.colorIndex=e;var n=function(e){var t={aliceblue:[240,248,255,255],antiquewhite:[250,235,215,255],aqua:[0,255,255,255],aquamarine:[127,255,212,255],azure:[240,255,255,255],beige:[245,245,220,255],bisque:[255,228,196,255],black:[0,0,0,255],blanchedalmond:[255,235,205,255],blue:[0,0,255,255],blueviolet:[138,43,226,255],brown:[165,42,42,255],burlywood:[222,184,135,255],cadetblue:[95,158,160,255],chartreuse:[127,255,0,255],chocolate:[210,105,30,255],coral:[255,127,80,255],cornflowerblue:[100,149,237,255],cornsilk:[255,248,220,255],crimson:[220,20,60,255],cyan:[0,255,255,255],darkblue:[0,0,139,255],darkcyan:[0,139,139,255],darkgoldenrod:[184,134,11,255],darkgray:[169,169,169,255],darkgreen:[0,100,0,255],darkkhaki:[189,183,107,255],darkmagenta:[139,0,139,255],darkolivegreen:[85,107,47,255],darkorange:[255,140,0,255],darkorchid:[153,50,204,255],darkred:[139,0,0,255],darksalmon:[233,150,122,255],darkseagreen:[143,188,143,255],darkslateblue:[72,61,139,255],darkslategray:[47,79,79,255],darkturquoise:[0,206,209,255],darkviolet:[148,0,211,255],deeppink:[255,20,147,255],deepskyblue:[0,191,255,255],dimgray:[105,105,105,255],dodgerblue:[30,144,255,255],firebrick:[178,34,34,255],floralwhite:[255,250,240,255],forestgreen:[34,139,34,255],fuchsia:[255,0,255,255],gainsboro:[220,220,220,255],ghostwhite:[248,248,255,255],gold:[255,215,0,255],goldenrod:[218,165,32,255],gray:[128,128,128,255],green:[0,128,0,255],greenyellow:[173,255,47,255],honeydew:[240,255,240,255],hotpink:[255,105,180,255],"indianred ":[205,92,92,255],indigo:[75,0,130,255],ivory:[255,255,240,255],khaki:[240,230,140,255],lavender:[230,230,250,255],lavenderblush:[255,240,245,255],lawngreen:[124,252,0,255],lemonchiffon:[255,250,205,255],lightblue:[173,216,230,255],lightcoral:[240,128,128,255],lightcyan:[224,255,255,255],lightgoldenrodyellow:[250,250,210,255],lightgrey:[211,211,211,255],lightgreen:[144,238,144,255],lightpink:[255,182,193,255],lightsalmon:[255,160,122,255],lightseagreen:[32,178,170,255],lightskyblue:[135,206,250,255],lightslategray:[119,136,153,255],lightsteelblue:[176,196,222,255],lightyellow:[255,255,224,255],lime:[0,255,0,255],limegreen:[50,205,50,255],linen:[250,240,230,255],magenta:[255,0,255,255],maroon:[128,0,0,255],mediumaquamarine:[102,205,170,255],mediumblue:[0,0,205,255],mediumorchid:[186,85,211,255],mediumpurple:[147,112,216,255],mediumseagreen:[60,179,113,255],mediumslateblue:[123,104,238,255],mediumspringgreen:[0,250,154,255],mediumturquoise:[72,209,204,255],mediumvioletred:[199,21,133,255],midnightblue:[25,25,112,255],mintcream:[245,255,250,255],mistyrose:[255,228,225,255],moccasin:[255,228,181,255],navajowhite:[255,222,173,255],navy:[0,0,128,255],oldlace:[253,245,230,255],olive:[128,128,0,255],olivedrab:[107,142,35,255],orange:[255,165,0,255],orangered:[255,69,0,255],orchid:[218,112,214,255],palegoldenrod:[238,232,170,255],palegreen:[152,251,152,255],paleturquoise:[175,238,238,255],palevioletred:[216,112,147,255],papayawhip:[255,239,213,255],peachpuff:[255,218,185,255],peru:[205,133,63,255],pink:[255,192,203,255],plum:[221,160,221,255],powderblue:[176,224,230,255],purple:[128,0,128,255],rebeccapurple:[102,51,153,255],red:[255,0,0,255],rosybrown:[188,143,143,255],royalblue:[65,105,225,255],saddlebrown:[139,69,19,255],salmon:[250,128,114,255],sandybrown:[244,164,96,255],seagreen:[46,139,87,255],seashell:[255,245,238,255],sienna:[160,82,45,255],silver:[192,192,192,255],skyblue:[135,206,235,255],slateblue:[106,90,205,255],slategray:[112,128,144,255],snow:[255,250,250,255],springgreen:[0,255,127,255],steelblue:[70,130,180,255],tan:[210,180,140,255],teal:[0,128,128,255],thistle:[216,191,216,255],tomato:[255,99,71,255],turquoise:[64,224,208,255],violet:[238,130,238,255],wheat:[245,222,179,255],white:[255,255,255,255],whitesmoke:[245,245,245,255],yellow:[255,255,0,255],yellowgreen:[154,205,50,255]};return"undefined"!=typeof t[e.toLowerCase()]?t[e.toLowerCase()]:[255,255,255,255]}(t);window.Module.setStrokeColor(n[0],n[1],n[2],n[3])},Ce.setDashIndex=function(e){Ce.dashIndex=e,window.Module.setDashType(e)},Ce.setWidthIndex=function(e){Ce.widthIndex=e,window.Module.inputReceiver().currentStyle().setStrokeWidth(2*(e+1))};var Me=Ce,ze=Object(p.a)(oe),Ie=function(e){var t=ze(),n=Object(a.useState)(Me.colorIndex),i=Object(w.a)(n,2),o=i[0],r=i[1],s=Object(a.useState)(Me.dashIndex),c=Object(w.a)(s,2),d=c[0],l=c[1],u=Object(a.useState)(Me.widthIndex),b=Object(w.a)(u,2),j=b[0],p=b[1],m=[{icon:Object(h.jsx)(re.a,{size:"1em",id:"0"})},{icon:Object(h.jsx)(re.a,{size:"1.2em",id:"1"})},{icon:Object(h.jsx)(re.a,{size:"1.4em",id:"2"})},{icon:Object(h.jsx)(re.a,{size:"1.6em",id:"3"})},{icon:Object(h.jsx)(re.a,{size:"1.8em",id:"4"})}],f=[{icon:Object(h.jsx)(Se.b,{size:"2.2em",id:"0"})},{icon:Object(h.jsx)(Se.c,{size:"2em",style:{marginBottom:"3px"},id:"1"})},{icon:Object(h.jsx)(Se.a,{size:"2em",style:{marginBottom:"3px"},id:"2"})},{icon:Object(h.jsx)(Se.a,{size:"2em",style:{marginBottom:"3px"},id:"3"})}],g=function(e,t){return(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.map((function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("span",{onClick:function(){return!e.props.drag&&v(t,e.props.color)},children:O(e)})})})))},v=function(e,t){r(e),Me.setColor(e,t)},O=function(e){if(!e.length){if(o!=e.props.id)return e.props.drag?Object(h.jsx)(ke,{subMenu:e,children:Object(h.jsx)("span",{children:e})}):e;if(!e.props.drag)return Object(h.jsx)(x.b,{size:"2em",color:e.props.color})}},y=function(){return Object(h.jsx)("div",{className:t.spaceBwtRound,children:(null===f||void 0===f?void 0:f.length)>0&&f.map((function(e,t){return Object(h.jsx)("span",{className:"".concat(e.icon.props.id===d?"changeBorder":""," "),onClick:function(){return function(e,t){l(t),Me.setDashIndex(e)}(t,e.icon.props.id)},children:e.icon},t)}))})},k=function(){return Object(h.jsx)("div",{className:t.spaceBwt,children:(null===m||void 0===m?void 0:m.length)>0&&m.map((function(e,t){return Object(h.jsx)("span",{className:"".concat(e.icon.props.id===j?"changeBorderRound":"defaultBorder"," "),onClick:function(){return function(e,t){p(t),Me.setWidthIndex(e)}(t,e.icon.props.id)},children:e.icon},t)}))})},S=e.open,C=e.anchorEl,M=e.placement,z=e.subMenuIcons,I=(e.setOpenState,e.close,e.selectedItemId);return Object(h.jsx)("div",{children:Object(h.jsx)(we.a,{open:S,anchorEl:C,placement:M,transition:!0,children:function(t){var n,a,i=t.TransitionProps;return Object(h.jsx)(ge.a,Object(fe.a)(Object(fe.a)({},i),{},{timeout:350,children:Object(h.jsxs)(ve.a,{className:"".concat(15===(null===e||void 0===e||null===(n=e.subMenuIcons)||void 0===n?void 0:n.length)?"popper_paper":"smart_draw_paper"," ").concat(15===(null===e||void 0===e||null===(a=e.subMenuIcons)||void 0===a?void 0:a.length)?"poper_paper_res":"smart_draw_res"),children:[(3==I||4==I)&&k(),(3==I||4==I)&&y(),g(z)]})}))}})})},Ne={setMode:function(e){if(1==e)window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);else if(2==e);else if(3==e)window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING),window.Module.enableRecognition(!1);else if(4==e)window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING),window.Module.enableRecognition(!0);else if(5==e);else if(6==e){var t=document.getElementById("drawCanvas");window.Module.eraseAll();var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),window.Module.drawCanvas(n)}}},Be=Ne,Te=Object(p.a)(oe),Ee=function(){var e=i.a.useState(null),t=Object(w.a)(e,2),n=t[0],a=t[1],o=i.a.useState(!1),r=Object(w.a)(o,2),s=r[0],c=r[1],d=i.a.useState(),l=Object(w.a)(d,2),u=l[0],b=l[1],j=i.a.useState(),p=Object(w.a)(j,2),x=p[0],m=p[1],f=i.a.useState(),g=Object(w.a)(f,2),v=g[0],O=g[1],y=i.a.useState(),k=Object(w.a)(y,2),S=k[0],C=k[1],M=i.a.useState(0),z=Object(w.a)(M,2),I=(z[0],z[1],Te()),N=function(e,t,n,i){a(e.currentTarget),c(i!==v||!s),b(n),m(t),O(i),C(i-1),Be.setMode(i)},B=function(e,t){var n=e.icon,a=e.name,i=t.menuItem;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:i+" sideMenuIcons",children:n}),Object(h.jsx)("div",{className:i+" menuItems",children:a})]})};return Object(h.jsx)(R.a,{onClickAway:function(){return c(!1)},children:Object(h.jsxs)("div",{children:[(3===v||4===v||7===v)&&Object(h.jsx)(Ie,{open:s,anchorEl:n,placement:u,subMenuIcons:x,setOpenState:function(){return c(!s)},close:function(){return console.log("close")},selectedItemId:v}),Object(h.jsx)("div",{className:"".concat(I.sideBar," side_menus"),children:me.map((function(e,t){return function(e){return Object.keys(e).length>0&&"subMenus"in e}(e)?Object(h.jsx)("div",{className:e.id===v?I.sideBarMenu+" sideBarMenu active":I.sideBarMenu+" sideBarMenu",onClick:function(t){return N(t,e.subMenus,"right",e.id)},children:B(e,I)},t):Object(h.jsx)("div",{className:5!=t&&t===S?I.sideBarMenu+" sideBarMenu active":I.sideBarMenu+" sideBarMenu",onClick:function(t){return N(t,e.subMenus,"right",e.id)},children:B(e,I)},t)}))})]})})},Re=function(){return Object(h.jsx)("div",{className:"canvasContainer",children:Object(h.jsxs)("div",{id:"viewport",className:"viewport",children:[Object(h.jsx)("canvas",{id:"gridCanvas",className:"canvasGridClass"}),Object(h.jsx)("canvas",{id:"drawCanvas",className:"canvasClass"})]})})};function De(){window.location.reload()}var Le=function(e){var t=null;return t="init"==e.state?Object(h.jsx)("div",{className:"layover-box",children:"Loading.."}):"disconnected"==e.state?Object(h.jsx)("div",{className:"layover-box",children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Disconnected from server "}),Object(h.jsx)("a",{href:"#",onClick:De,children:"Reconnect"})]})}):"notfound"==e.state?Object(h.jsxs)("div",{className:"layover-box",children:[Object(h.jsx)("span",{children:"Requested board does not exist"}),Object(h.jsx)("a",{href:"/?_new=true",children:"Start a collaborative board"}),Object(h.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}):"prompt"==e.state?Object(h.jsxs)("div",{className:"layover-box",children:[Object(h.jsx)("a",{href:"/?_new=true",children:"Start a collaborative board"}),Object(h.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}):Object(h.jsxs)("div",{className:"layover-box",children:[Object(h.jsx)("span",{children:"Something went wrong"}),Object(h.jsx)("a",{href:"#",onClick:De,children:"Reload"}),Object(h.jsx)("a",{href:"/?offline=true",children:"Start a offline board"})]}),Object(h.jsx)("div",{className:"layover-col",children:t})},Ae={};Ae.attachEventHandlers=function(){V()(window).on("resize",(function(){ne.setCanvasSize(),ne.drawCanvas();var e=document.getElementById("gridCanvas");ne.drawGrid(e)}));var e=document.getElementById("drawCanvas");function t(e,t){var n={x:e,y:t};window.Module.inputFilter().tap(n,2),ne.drawCanvas(),window.Module.inputReceiver().needTextEditing()&&function(){var e=window.Module.getTextEditRect(),t=e.y+e.height/2,n=e.x+e.width/2,a=Math.random()+"t",i=V()("<textarea id='"+a+"'></textarea>");i.val(window.Module.getTextForEditing());var o=window.Module.getTextEditStyle(),r=window.Module.isEditingFloatingText(),s={resize:"none",overflow:"hidden",position:"absolute","font-sze":"15px","line-height":"15px","background-color":"transparent",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px","z-index":"2"};switch(o.effectiveTextAlignHorizontal().value){case 0:case 1:s["text-align"]="center";break;case 2:s["text-align"]="left";break;case 3:s["text-align"]="right"}function c(){var e=i.val(),a=window.Module.getTextEditSize(e,r);if(0==a.height&&(a.height=15),a.width<50&&(a.width=50),a.height+=7.5,i.css("top",t-a.height/2+"px"),i.css("height",a.height+"px"),r){var o=a.width+150;i.css("width",o+"px"),i.css("left",n-o/2+"px")}console.log(a)}i.css(s),V()("#viewport").append(i),i.trigger("focus"),i.on("blur",(function(e){window.Module.finishTextEditing(i.val()),i.remove(),ne.drawCanvas()})),i.on("change keyup paste",c),c()}()}function n(e,t,n){var a=window.Module.InputType.START;1==n?a=window.Module.InputType.OTHER:2==n&&(a=window.Module.InputType.END);var i={x:e,y:t};window.Module.inputFilter().pan(i,a),ne.drawCanvas()}function a(e,t,n,a){var i=e-n,o=t-a;return Math.sqrt(i*i+o*o)}var i=null,o=!1,r=!1,s=null,c=null,d=null,l=null,u=function(e){o=!1,r&&(n(d,l,2),r=!1)};window.bean.on(e,"click",(function(e){2!=e.button&&0==e.button&&(r?r=!1:null!=i?(clearTimeout(i),i=null,t(e.offsetX,e.offsetY)):i=setTimeout((function(){i=null,function(e,t){var n={x:e,y:t};window.Module.inputFilter().tap(n,1),ne.drawCanvas()}(e.offsetX,e.offsetY)}),350))})),window.bean.on(e,"mousedown",(function(e){0==e.button&&(s=e.offsetX,c=e.offsetY,o=!0)})),window.bean.on(e,"mouseup",(function(e){0==e.button&&(o=!1,e.offsetX,e.offsetY,r&&n(e.offsetX,e.offsetY,2))})),window.bean.on(e,"mousemove",(function(e){if(!o||0==e.button)return o?void(r?n(e.offsetX,e.offsetY,1):a(s,c,e.offsetX,e.offsetY)>=4&&(r=!0,n(s,c,0),n(e.offsetX,e.offsetY,1))):(e.offsetX,void e.offsetY)})),window.bean.on(e,"mouseenter",(function(e){})),window.bean.on(e,"mouseleave",(function(e){r&&(n(e.offsetX,e.offsetY,2),r=!1,o=!1)})),window.bean.on(e,"contextmenu",(function(e){console.log("contextmenu")})),function(){var t=function(e){var t=e.targetTouches[0];return[t.clientX,t.clientY]};e.addEventListener("touchstart",(function(e){if(1==e.targetTouches.length){var n=t(e),a=Object(w.a)(n,2);d=a[0],l=a[1],s=d,c=l,o=!0}})),e.addEventListener("touchmove",(function(e){if(1==e.targetTouches.length){e.targetTouches[0];var i=t(e),u=Object(w.a)(i,2);if(d=u[0],l=u[1],!o)return;r?n(d,l,1):a(s,c,d,l)>=4&&(r=!0,n(s,c,0),n(d,l,1))}})),e.addEventListener("touchend",(function(e){u()})),e.addEventListener("touchleave",(function(e){u()})),e.addEventListener("touchcancel",(function(e){u()}))}()};var Pe=Ae,_e={};window.wsmanager={state:"init",cb:null,setState:function(e){window.wsmanager.state=e,null!=window.wsmanager.cb&&window.wsmanager.cb(e)}};var Fe="https://api.lekh.app/v1",qe=!1,He=!1,Xe=!1,Ye=function(e){var t=document.createElement("script");t.src=e,t.async=!1,document.body.appendChild(t)};window.Module={onRuntimeInitialized:function(){qe=!0,_e.initInternal()}},_e.init=function(e){Xe=!0,window.wsmanager.cb=e,Ye("a1/bean.min.js"),Ye("a1/lekhapp.js"),_e.initInternal()},_e.initInternal=function(){if(!He&&Xe&&qe){He=!0;var e=document.getElementById("gridCanvas");if(e){ne.setCanvasSize(),ne.drawGrid(e);var t=document.getElementById("drawCanvas");He=!0,window.Module.init(t),ne.loadBasicTemplates(3),Pe.attachEventHandlers(),function(){var e=(a=new URL(window.location)).searchParams.get("docid"),t=a.searchParams.get("_new"),n=a.searchParams.get("offline");if(e){(i=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=JSON.parse(i.responseText);window.wsmanager.start(e,t.location)}else 404==this.status?window.wsmanager.setState("notfound"):window.wsmanager.setState("error")};var a=Fe+"/docs/"+e;i.open("POST",a),i.send()}else if("true"==t){var i;(i=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e=JSON.parse(i.responseText),t=new URL(window.location).origin+"/?docid="+e.docid;window.location=t}else window.wsmanager.setState("error")};a=Fe+"/docs";i.open("POST",a),i.send()}else"true"==n?window.wsmanager.setState("offline"):window.wsmanager.setState("prompt")}()}}},window.wsmanager.start=function(e,t){var n,a=new window.WebSocket(t);window.Module.startDoc(e),window.wsmanager.send=function(e,t){return a.send(t),!0},a.onopen=function(e){console.log("connection opened: ",e),n=window.setInterval((function(){a.send("{}")}),15e3)},a.onmessage=function(e){window.Module.updateDoc(e.data),ne.drawCanvas(),"init"==window.wsmanager.state&&window.wsmanager.setState("ready")},a.onclose=function(e){console.log("connection closed:",e),window.wsmanager.setState("disconnected"),window.clearInterval(n)},a.onerror=function(e){console.log("connection error: ",e),window.wsmanager.setState("disconnected"),window.clearInterval(n)}};var Ge=_e,We=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={wsState:"init"},a.wsCallback=a.handleWSState.bind(Object(d.a)(a)),a}return Object(c.a)(n,[{key:"handleWSState",value:function(e){this.setState({wsState:e})}},{key:"render",value:function(){console.log("state=",this.state.wsState);var e=null;return"ready"!=this.state.wsState&&"offline"!=this.state.wsState&&(e=Object(h.jsx)("div",{className:"layover",children:Object(h.jsx)(Le,{state:this.state.wsState})})),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"header-area",children:Object(h.jsx)(f,{})}),Object(h.jsx)("div",{className:"top-right",children:Object(h.jsx)("a",{target:"_blank",href:"https://lekh.app/help/lekhboard.html",className:"help-link",children:"Help"})}),Object(h.jsx)("div",{className:"top-left-menu",children:Object(h.jsx)(L,{})}),Object(h.jsxs)("div",{className:"Content",children:[Object(h.jsxs)("div",{className:"side-bar",children:[" ",Object(h.jsx)(Ee,{})]}),Object(h.jsxs)("div",{className:"main-content",children:[" ",Object(h.jsx)(Re,{})]})]}),Object(h.jsx)("div",{className:"footer-area",children:Object(h.jsx)(ie,{})}),e]})}},{key:"componentDidMount",value:function(){Ge.init(this.wsCallback)}}]),n}(i.a.Component),Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,332)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),o(e),r(e)}))};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(We,{})}),document.getElementById("root")),Ue()}},[[289,1,2]]]);
//# sourceMappingURL=main.9f760204.chunk.js.map