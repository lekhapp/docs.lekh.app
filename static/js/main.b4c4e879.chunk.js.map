{"version":3,"sources":["common/Header/HeaderStyle.js","common/GlobalState.js","common/Canvas.js","common/Header/Feedback.js","common/Header/Menu.js","common/Footer/FooterStyle.js","common/MenuState.js","common/AppInput.js","common/TouchInput.js","common/MouseInput.js","common/Command.js","common/Footer/Footer.js","common/SideBarMenu/SideBarStyle.js","common/LibCell.js","Constant.js","common/DrawStyle.js","common/ColorList.js","common/Config.js","common/StrokeStyle.js","common/SelectionGroupPopup.js","common/ShapeLibrary.js","common/TextModePopup.js","common/KeyboardInput.js","common/SideBarMenu/SideBarMenu.js","common/SideBarMenu/Content.js","common/Layover.js","common/Util.js","common/AppEvent.js","common/AppInit.js","common/ContextMenu.js","App.js","reportWebVitals.js","index.js"],"names":["HeaderStyle","root","flexGrow","title","arrowUp","top","position","MainGrid","display","outClass","margin","bottom","border","paper","background","borderRadius","padding","textAlign","color","marginRight","right","minHeight","content","width","height","borderLeft","borderRight","borderBottom","marginLeft","fontSize","zIndex","responsicePaper","textIcon","paddingRight","checkIcon","appMenu","globalState","zoomHandler","setZoomHandler","cb","onZoom","window","Module","getZoom","canvas","libraryColCount","moving","fromX","fromY","origScrollX","origScrollY","showGrid","gridType","canvasElement","toggleGrid","drawGrid","onResize","setSize","draw","moveDelta","dx","dy","zm","scroll","getScroll","setScroll","x","y","getMidPoint","rect","document","getElementById","getBoundingClientRect","left","isVisible","pad","move","type","sx","sy","mapx","mapy","maprx","mapry","zoomAt","factor","z1","Math","round","z2","setZoom","zoom","fixCanvas","cnv","dpr","devicePixelRatio","style","getContext","scale","panel","tp","exportToImage","format","getBoundsOfAll","cel","createElement","ctx","fillStyle","fillRect","drawCanvasForExport","data","toDataURL","wd","ht","clearRect","rad","step","startx","starty","beginPath","strokeStyle","i","j","moveTo","arc","PI","fill","stroke","lineWidth","lineTo","drawCanvas","drawCell","categ","num","sz","row","col","Feedback","handleClose","useState","feedbackForm","setFeedbackForm","handleChange","e","name","target","value","newEntry","submitDIsabled","message","className","onClick","htmlFor","id","onChange","required","wsmanager","send","JSON","stringify","disabled","FileSaver","require","useStyles","makeStyles","Style","AppMenu","props","classes","snap","setSnap","grid","setGrid","setValue","open","setOpen","options","checkable","submenu","handleMenuClick","focus","showDialog","copyLink","select","execCommand","SearchButton","IconButton","url","location","dialog","Dialog","onClose","aria-labelledby","DialogTitle","TextField","variant","size","defaultValue","InputProps","readOnly","endAdornment","Button","shareBoard","feedback","giveFeedback","exportFile","console","log","img","orient","doc","jsPDF","orientation","addImage","save","exportPdf","saveAs","getSvg","blob","Blob","getLekh","Grid","container","AppBar","boxShadow","Toolbar","aria-label","currentTarget","handleClick","Menu","PaperProps","marginTop","map","option","index","checked","label","parentMenuOpen","subOption","MenuItem","FooterStyle","footer","justifyContent","backClass","backgroundColor","borderColor","filter","cursor","countClass","valueClass","iconClass","countBtn","minWidth","modes","selection","smartDraw","text","erase","laser","menus","selectionGroup","shapes","eraseAll","menuState","popup","selected","inputMode","selectionGroupVal","menu","mode","tpanel","inputReceiver","setMode","InputMode","SELECTION","POINTING","DRAWING","enableRecognition","ERASING","handleMode","hasPopup","removePopup","inDrawMode","AppInput","showContextMenu","drawPoints","drawing","transparentPanel","tnode","ignoreNextClick","updateCursorLoc","docid","inputFilter","pan","InputType","OTHER","finishTextEditing","val","remove","clearTransparentPanel","drawTemp","lineJoin","lineCap","length","setCurrentStyleToCtx","dp","isEditingText","click","mpt","addClickCircle","pt","tap","dbclick","needTextEditing","getTextEditRect","cx","cy","tid","random","$","getTextForEditing","getTextEditStyle","effectiveFontSize","effectiveFontMultiplier","isFLoating","isEditingFloatingText","tattrs","effectivePlatformFontFamily","effectiveTextAlignHorizontal","updateSize","getTextEditSize","css","append","trigger","on","code","key","initShapeTextEditor","drag","kind","dragMoveMode","drawLaserCircle","dragLaser","it","START","END","willDrawAt","push","flushTempDrawing","dragNative","contextmenu","enter","leave","touchInput","active","discarded","touch","timer","twoFingerTap","touches","firstRemoved","secondRemoved","lastPos","lastTouch","buffer","doublePan","origZoom","gestures","activeGesture","activeTouches","initPos","gest","hasZoomCond","d1","dist","d2","abs","findTouches","t1","t2","updatePos","shift","mapTouches","ret","pageX","pageY","identifier","sqrt","attachEvents","addEventListener","ev","preventDefault","start","changedTouches","targetTouches","end","cancel","inProgress","splice","reset","clearTimeout","setTimeout","ts","mid1x","mid1y","mid2x","mid2y","mouseInput","clickTimer","mdown","moved","initialX","initialY","savedZoom","pointerLoc","pointerLocation","ctrlKey","newval","floor","deltaY","deltaX","bean","button","offsetX","offsetY","x1","y1","x2","y2","command","inputModeChanged","getShapeAddLocation","loc","at","del","copy","cut","paste","pasteAt","selectAll","addBox","libraryStore","addObjectToCanvas","addCircle","addUser","addDb","addCloud","addNote","escape","handleEscapeKey","undo","redo","Footer","count","setCount","curCount","handleCount","handleAddCount","SideBarStyle","sideBar","sideBarMenu","alignItems","flexDirection","menuIcons","marginBottom","menuItem","sideMenuIcons","changeColor","spaceBwt","spaceBwtRound","expandedMenu","expandedMenuItem","expandedMenuItemActive","LibCell","canvasRef","useRef","useEffect","current","context","category","ref","CircleColors","ShapesList","SideBarMenuItems","icon","subMenus","drawStyle","colorIndex","dashIndex","widthIndex","setColor","idx","carr","colors","toLowerCase","colorNameToVal","setStrokeColor","setDashIndex","setDashType","setWidthIndex","currentStyle","setStrokeWidth","ColorList","item","selectedIndex","onColorChange","Config","mediaQuery","StrokeStyle","setColorIndex","widthCircles","dashLines","getDashLines","dashLine","iconsId","onDashChange","getWidthCircles","wcircle","onWidthChange","anchorEl","placement","subMenuIcons","matchMedia","matches","Popper","transition","TransitionProps","Fade","timeout","Paper","SelectionGroupPopup","chooseSelectMode","setSelectionMode","chooseMoveMode","itemClass","itemClassActive","selectStyle","moveStyle","menuClass","ShapeLibrary","getSubIcons","subMenu","onStop","event","popUpRect","popperRef","mid","onDragStop","React","createRef","TextModePopup","keyboardInput","showingDialog","isMac","navigator","userAgent","indexOf","handlers","handleKeyDown","handled","handler","shiftKey","altKey","metaKey","SideBarMenu","setAnchorEl","setPlacement","setSubMenuIcons","initialValue","state","setState","stateRef","useRefState","counterRef","setCounter","reload","removeEventListener","getIconAndName","sidebar","ClickAwayListener","onClickAway","newPlacement","Content","Layover","href","util","loadTemplate","a","fetch","then","response","json","initObjects","generateUUID","d","Date","getTime","performance","now","replace","c","r","toString","loadBasicTemplates","columns","loadAll","init","onDisplaySettingChange","appEvent","attachEventHandlers","initializer","toggleDebug","apiBasePath","runtimeInitialized","initialInitDone","docReady","appendScript","scriptToAppend","script","src","async","body","appendChild","onRuntimeInitialized","initInternal","URL","searchParams","get","np","offline","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","media","UA","test","hasTouch","obj","parse","responseText","withCredentials","newUrl","origin","startDoc","ws","WebSocket","onopen","setInterval","onmessage","updateDoc","setFontSize","onclose","clearInterval","onerror","key1","key2","div","ContextMenu","mappedPt","pos","handleMenu","showHandler","cmStatus","getContextMenuStatus","canSelectAll","canCut","canCopy","canPaste","canDelete","keyName","keepMounted","anchorReference","anchorPosition","divider","ListItemText","primary","ListItemSecondaryAction","AppComponent","wsState","ctxMenu","ctxMenuPos","sideMenuSelectedItem","wsCallback","handleWSState","bind","show","layover","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b4c4e879.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\n\nconst HeaderStyle = {\n    root: {\n        flexGrow: 1,\n    },\n    title: {\n        flexGrow: 1,\n    },\n    arrowUp: {\n        top: '54px',\n        position: 'absolute',\n    },\n    MainGrid: {\n        display: 'flex',\n        position: 'relative',\n    },\n    outClass: {\n        position: 'relative',\n        margin: '0 auto',\n        bottom: '2px',\n        border: '1px solid #d1d1d1',\n    },\n    paper: {\n        background: '#fff',\n        borderRadius: '8px',\n        padding: '15px 126px',\n        textAlign: 'center',\n        color: '#000',\n        position: 'absolute',\n        margin: '20px',\n        marginRight: '0',\n        right: '-10px',\n        top: '4px',\n        minHeight: '180px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    responsicePaper:{\n            width: '0px',\n            background: '#fff',\n            borderRadius: '8px',\n            padding: '0px 66px',\n            textAlign: 'center',\n            color: '#000',\n            margin: '20px',\n            marginRight: '0',\n            right: '19px',\n            top: '13px',\n            minHeight: '123px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    textIcon:{\n    margin: '-7px',\n    paddingRight: '8px',\n    },\n    checkIcon:{\n        position:'absolute',\n        margin:'5px'\n    },\n    appMenu: {\n        top: \"16px !important\"\n    }\n\n}\n\nexport default HeaderStyle;","var globalState = { }\n\nvar zoomHandler = null;\n\nglobalState.setZoomHandler = function(cb) {\n    zoomHandler = cb;\n}\n\nglobalState.onZoom = function() {\n    if (zoomHandler != null) {\n        zoomHandler(window.Module.getZoom());\n    }\n}\n\nexport default globalState;\n","import globalState from './GlobalState'\n\nvar canvas = {\n    libraryColCount: 4,\n    moving: false,\n    fromX: 0,\n    fromY: 0,\n    origScrollX: 0,\n    origScrollY: 0,\n    showGrid: true,\n    gridType: 2,\n };\n\nvar canvasElement = null;\n\ncanvas.toggleGrid = function() {\n    canvas.showGrid = !canvas.showGrid;\n    canvas.drawGrid();\n}\n\ncanvas.onResize = function() {\n    canvasElement = null;\n    canvas.setSize();\n    canvas.draw();\n    canvas.drawGrid();\n}\n\ncanvas.moveDelta = function(dx, dy) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    dx = dx / zm;\n    dy = dy / zm;\n    window.Module.setScroll({x: scroll.x + dx, y: scroll.y + dy});\n    canvas.drawGrid();\n    canvas.draw();\n}\n\ncanvas.getMidPoint = () => {\n    var tp = document.getElementById('transparentPanel');\n    var rect = tp.getBoundingClientRect();\n    var x = (rect.left + rect.right) / 2;\n    var y = (rect.top + rect.bottom) / 2;\n    return {x: x, y: y};\n}\n\ncanvas.isVisible = (x, y, pad) => {\n    var tp = document.getElementById('transparentPanel');\n    var rect = tp.getBoundingClientRect();\n    return x-pad >= rect.left && x+pad <= rect.right && y-pad >= rect.top && y+pad <= rect.bottom;\n}\n\ncanvas.move = function(x, y, type) {\n    var zm = window.Module.getZoom();\n     if (type == 0) {\n         var scroll = window.Module.getScroll();\n         canvas.moving = true;\n         canvas.fromX = x;\n         canvas.fromY = y;\n         canvas.origScrollX = scroll.x;\n         canvas.origScrollY = scroll.y;\n     }\n     if (type == 1 && canvas.moving) {\n        var dx = x - canvas.fromX;\n        var dy = y - canvas.fromY;\n        var sx = canvas.origScrollX + dx / zm;\n        var sy = canvas.origScrollY + dy / zm;\n        window.Module.setScroll({x: sx, y: sy});\n     }\n\n     if (type == 2 && canvas.moving) {\n         canvas.moving = false;\n     }\n}\n\ncanvas.mapx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (x  + scroll.x) * zm;\n}\n\ncanvas.mapy = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (y  + scroll.y) * zm;\n}\n\ncanvas.maprx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return x / zm - scroll.x;\n}\n\ncanvas.mapry = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return y / zm - scroll.y;\n}\n\ncanvas.getZoom = function() {\n    return window.Module.getZoom();\n}\n\ncanvas.zoomAt = function(x, y, factor) {\n    // (x + d1) * z1 = x'\n    // (x + d2) * z2 = x'\n    // from these two equations, calculate d2\n    var z1 = window.Module.getZoom();\n    z1 = Math.round(z1 * 100) / 100;\n    var z2 = Math.round(factor * 100) / 100;\n    \n    // If new zoom and old zoom are same in scale of [1 100]\n    // then do not do anything\n    if (Math.round(z1 * 100) == Math.round(z2 * 100)) {\n        return;\n    }\n\n    var scroll = window.Module.getScroll();\n\n    var dx = (x / z2) - (x / z1) + scroll.x;\n    var dy = (y / z2) - (y / z1) + scroll.y;\n\n    window.Module.setScroll({x: dx, y: dy});\n    window.Module.setZoom(Math.round(z2 * 100));\n\n    globalState.onZoom();\n    canvas.drawGrid();\n    canvas.draw();\n }\n\ncanvas.zoom = function(factor) {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    canvas.zoomAt(rect.width / 2, rect.height / 2, factor);\n}\n\nconst fixCanvas = function(cnv, width, height) {\n    var dpr = window.devicePixelRatio || 1;\n    cnv.width = width * dpr;\n    cnv.height = height * dpr;\n    cnv.style.width = width + \"px\";\n    cnv.style.height = height + \"px\";\n    var ctx = cnv.getContext(\"2d\");\n    ctx.scale(dpr, dpr);\n}\ncanvas.setSize = function() {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    var panel = document.getElementById(\"gridCanvas\");\n    fixCanvas(panel, rect.width, rect.height);\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    fixCanvas(canvasElement, rect.width, rect.height);\n    var tp = document.getElementById(\"transparentPanel\");\n    fixCanvas(tp, rect.width, rect.height);\n}\n\ncanvas.exportToImage = function(format) {\n    var padding = 10;\n    var rect = window.Module.getBoundsOfAll();\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    var width = rect.width + 2 * padding;\n    var height = rect.height + 2 * padding;\n\n    var cel = document.createElement(\"canvas\");\n    fixCanvas(cel, width, height);\n    var ctx = cel.getContext(\"2d\");\n\n    if (format == \"jpg\" || format == \"jpeg\") {\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, width, height);\n    }\n    window.Module.drawCanvasForExport(ctx, sx, sy);\n    return {data: cel.toDataURL(\"image/\" + format), width: width, height: height }\n}\n\ncanvas.drawGrid = function() {\n    var panel = document.getElementById(\"gridCanvas\");\n    var wd = panel.width;\n    var ht = panel.height;\n    var ctx = panel.getContext('2d');\n    ctx.clearRect(0, 0, panel.width, panel.height);\n    if (!canvas.showGrid) {\n        return;   \n    }\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    var rad = 1 * zm;\n    var step = 48 * zm;\n\n    var startx = (scroll.x * zm) % step;\n    var starty = (scroll.y * zm) % step;\n\n    if (canvas.gridType == 1) {\n        if (step < 16) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.fillStyle = \"#c0c0c0\";\n        ctx.strokeStyle = \"#c0c0c0\";\n        for (var i = starty; i < ht; i+= step) {\n            for (var j = startx; j < wd; j+= step) {\n                ctx.moveTo(j + rad, i);\n                ctx.arc(j, i, rad, 0, 2 * Math.PI, false);\n            }\n        }\n        ctx.fill();\n        ctx.stroke();\n    } else {\n        if (step < 8) {\n            return;\n        }\n        ctx.lineWidth = 0.1;\n        ctx.strokeStyle = \"#606060\";\n        ctx.beginPath();\n        for (var i = starty; i < ht; i+= step) {\n          ctx.moveTo(0, i);\n          ctx.lineTo(wd, i);\n        }\n        for (i = startx; i < wd; i+= step) {\n          ctx.moveTo(i, 0);\n          ctx.lineTo(i, ht);\n        }\n        ctx.stroke();\n    }\n}\n  \ncanvas.draw = function() {\n    if (canvasElement == null) {\n        canvasElement = document.getElementById(\"drawCanvas\");\n    }\n    \n    var ctx = canvasElement.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    window.Module.drawCanvas(ctx);\n}\n\ncanvas.drawCell = function(categ, num, sz, ctx) {\n    var row = num / canvas.libraryColCount;\n    var col = num % canvas.libraryColCount;\n    var padding = 8;\n    window.Module.drawCell(categ, row, col, sz - padding, sz / 2, sz / 2, ctx);\n}\n\nwindow.drawCanvas = canvas.draw;\n\nexport default canvas;","import React, { useState } from \"react\"\nimport { AiOutlineClose } from \"react-icons/ai\"\n\nconst Feedback = ({ handleClose }) => {\n  const [feedbackForm, setFeedbackForm] = useState({})\n\n  const handleChange = e => {\n    const name = e.target.name\n    const value = e.target.value\n    const newEntry = { [name]: value }\n    setFeedbackForm({ ...feedbackForm, ...newEntry })\n  }\n\n  const submitForm = () => {\n    if (feedbackForm.message) {\n      if (window.wsmanager.send) {\n        window.wsmanager.send('', JSON.stringify({\n          'type': 'feedback',\n          'data': feedbackForm\n        }));\n      }\n      handleClose();\n    }\n  }\n\n  var submitDIsabled = !(feedbackForm.message);\n\n  return (\n    <div className=\"feedback \">\n      <div className=\"feedback-form \">\n        <AiOutlineClose\n          className=\"close-feedback\"\n          onClick={() => handleClose()}\n        />\n        <h2>Feedback</h2>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"name\">Name</label>\n          <input\n            id=\"name\"\n            onChange={e => handleChange(e)}\n            name=\"name\"\n            required\n          />\n        </div>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"email\">Email Address</label>\n          <input\n            id=\"email\"\n            onChange={e => handleChange(e)}\n            name=\"email\"\n            type=\"email\"\n            required\n          />\n        </div>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"message\">Message</label>\n          <textarea\n            id=\"message\"\n            onChange={e => handleChange(e)}\n            name=\"message\"\n            type=\"email\"\n            required\n          />\n        </div>\n\n        <button className=\"submit-feedback\" onClick={submitForm} disabled={submitDIsabled}>\n          Submit\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Feedback\n","import React, { useState } from 'react';\nimport { AppBar, Grid, Toolbar, IconButton, Menu, MenuItem } from \"@material-ui/core\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Style from './HeaderStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport NestedMenuItem from \"material-ui-nested-menu-item\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport canvas from '../Canvas'\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { BiCopy } from \"react-icons/bi\";\nimport { jsPDF } from \"jspdf\";\nimport Feedback from \"./Feedback\"\n\nvar FileSaver = require('file-saver');\n\nconst useStyles = makeStyles(Style);\n\n/*\nvar blobToBase64 = function(blob, callback) {\n    var reader = new FileReader();\n    reader.onload = function() {\n        var dataUrl = reader.result;\n        var base64 = dataUrl.split(',')[1];\n        callback(base64);\n    };\n    reader.readAsDataURL(blob);\n};\n\nfunction download(filename, data) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:application/pdf;base64,' + data);\n    element.setAttribute('download', filename);\n  \n    element.style.display = 'none';\n    document.body.appendChild(element);\n  \n    element.click();\n  \n    document.body.removeChild(element);\n  }\n  */\n\n\nconst AppMenu = (props) => {\n    const classes = useStyles();\n    const [snap, setSnap] = useState(true);\n    const [grid, setGrid] = useState(canvas.showGrid);\n\n    const [value, setValue] = useState('');\n    const [open, setOpen] = useState(false);\n\n    const subOptions = [\n        { id: \"pdf\", name: 'PDF' },\n        { id: \"png\", name: 'PNG' },\n        { id: \"jpeg\", name: 'JPEG' },\n        { id: \"svg\", name: 'SVG' },\n        { id: \"lekh\", name: 'LEKH' },\n    ]\n\n    const options = [\n        /*{ id: 1, name: 'Insert diagram' }, */\n        { id: \"share\", name: 'Share board', checkable: false },\n        { id: \"export\", name: 'Export', submenu:  subOptions},\n        { id: \"grid\", name: 'Show grid', checkable: true },\n        { id: \"snap\", name: 'Snap objects', checkable: true },\n        { id: \"contact\", name: 'Contact us', checkable: false },\n        { id: \"feedback\", name: 'Feedback', checkable: false },\n        { id: \"help\", name: 'Help', checkable: false},\n    ];\n\n    const handleClick = (e) => {\n        setValue(e.currentTarget)\n        setOpen(true)\n    }\n\n    const getChecked = function(id) {\n        if (id == 'grid') {\n            return grid;\n        } else if (id == 'snap') {\n            return snap;\n        }\n        return false;\n    }\n\n    const shareBoard = function() {\n        const handleClose = function() {\n            props.showDialog(null);\n        };\n\n        const copyLink = ()=>{\n            document.getElementById(\"share-link\").select(); \n            document.execCommand(\"copy\");\n        };\n\n        const SearchButton = () => (\n            <IconButton onClick={copyLink}>\n              <BiCopy />\n            </IconButton>\n            )\n\n        var url = window.location;\n        var dialog = (\n        <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={true}>\n        <DialogTitle id=\"simple-dialog-title\">Get the shareable link from below</DialogTitle>\n        <TextField id=\"share-link\" variant=\"outlined\" size=\"small\" defaultValue={url} InputProps={{\n              readOnly: true,\n              endAdornment: <SearchButton/>\n            }}/>\n        <Button onClick={handleClose}>OK</Button>\n      </Dialog>\n      )\n      props.showDialog(dialog)\n    }\n    const giveFeedback = function () {\n      const handleClose = function () {\n        props.showDialog(null)\n      }\n\n      const feedback = (\n        <Dialog onClose={handleClose} aria-labelledby=\"feedback\" open={true}>\n          <Feedback handleClose={handleClose} />\n        </Dialog>\n      )\n\n      props.showDialog(feedback)\n    }\n\n    const handleMenuClick = (id) => {\n        if (id == \"grid\") {\n            setGrid(!grid);\n            canvas.showGrid = !grid;\n            canvas.drawGrid();\n        }\n        if (id == \"snap\") {\n            setSnap(!snap);\n            window.Module.setSnap(!snap);\n        }\n        if (id == \"help\") {\n            window.open(\"https://lekh.app/help.html\", '_blank').focus();\n        }\n        \n        if (id == \"contact\") {\n            window.open(\"https://lekh.app/contact.html\", '_blank').focus();\n        }\n\n        if (id == \"share\") {\n            shareBoard();\n        }\n        if (id == \"feedback\") {\n          giveFeedback()\n        }\n\n        setOpen(false)\n    }\n\n    const exportPdf  = () => {\n        var img = canvas.exportToImage(\"jpeg\");\n        var orient = \"landscape\";\n        if (img.height > img.width) {\n            orient = \"portrait\";\n        }\n        var doc = new jsPDF({\n            orientation: orient,\n            format: [img.width, img.height]\n        })\n        doc.addImage(img.data, 'JPEG', 0, 0, img.width, img.height)\n        doc.save(\"drawing.pdf\");\n\n        // The following code uses canvas2pdf which is not working\n        // Two ways to fix:\n        // 1) Fix the canvas2Pdf and use pdfkit\n        // 2) Use jsPdf which also provide html canvas like API\n        //\n        // In either case we need to change the JSPlatform code to \n        // not use Path2D class as it is marked as experimental\n        //\n        ////Create a new PDF canvas context.\n        //var ctx = new window.canvas2pdf.PdfContext(window.blobStream());\n        //\n        ////draw your canvas like you would normally\n        ////ctx.fillStyle='yellow';\n        ////ctx.fillRect(100,100,100,100);\n        //// more canvas drawing, etc...\n        //window.Module.drawCanvasForExport(ctx, 0, 0);\n\n        ////convert your PDF to a Blob and save to file\n        //ctx.stream.on('finish', function () {\n        //    var blob = ctx.stream.toBlob('application/pdf');\n        //    FileSaver.saveAs(blob, \"drawing.pdf\");\n        //});\n        //ctx.end();\n    }\n    const exportFile = (format) => {\n        console.log(\"export \", format);\n        setOpen(false)\n\n        if (format == \"pdf\") {\n            exportPdf();\n        } else if (format == \"png\" || format == \"jpeg\") {\n            var img = canvas.exportToImage(format);\n            FileSaver.saveAs(img.data, \"drawing.\" + format);\n        } else if (format == \"svg\") {\n            var content = window.Module.getSvg();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.svg\");\n        } else if (format == \"lekh\") {\n            var content = window.Module.getLekh();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.lekh\");\n        }\n    }\n\n    return (\n        <Grid container>\n            <AppBar className=\"HeaderSection\" position='static' color='transparent' style={{ background: 'transparent', boxShadow: 'none' }}>\n                <Toolbar>\n                    <IconButton className=\"HeaderMenuIcon\" color=\"inherit\" aria-label=\"menu\" onClick={(e) => handleClick(e)}>\n                        <MenuIcon />\n                    </IconButton>\n                    <Menu\n                        onClose={() => setOpen(false)}\n                        open={open}\n                        classes={{\n                            paper: classes.appMenu\n                        }}\n                        value={value}\n                        PaperProps={{\n                            style: {\n                                width: 200,\n                                marginTop: 40\n                            },\n                        }}>\n                        {options?.map((option, index) => {\n                            var checked = null;\n                            if (option.checkable && getChecked(option.id)) {\n                                checked = <span className={classes.checkIcon}><CheckIcon /></span>;\n                            }\n                            if (option.submenu) {\n                                return (<NestedMenuItem\n                                    style={{ left: '15px' }}\n                                    label={option.name}\n                                    parentMenuOpen={open}\n                                    className=\"subIcon\"\n                                    key={option.id}>\n                                    {\n                                    option.submenu.map((subOption, index) => (\n                                        <MenuItem key={index} onClick={()=>exportFile(subOption.id)}>{subOption.name}</MenuItem>\n                                    ))}\n                                </NestedMenuItem>);\n                            }\n                            return (\n                                <div key={option.id}>\n                                    { checked }\n                                    <MenuItem style={{ left: '15px' }} value={option.name} \n                                        onClick={() => handleMenuClick(option.id)} key={option.id}>\n                                        {option.name}\n                                    </MenuItem>\n                                </div>\n                            )\n                        })}\n                    </Menu>\n                </Toolbar>\n            </AppBar>\n        </Grid>\n    )\n}\n\nexport default AppMenu;\n","import React from 'react';\n\nconst FooterStyle = {\n\n    footer: {\n        justifyContent: 'center',\n        display: 'flex',\n      },\n      backClass:{\n        border: '1px solid',\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        margin: '13px 10px',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      countClass:{\n        border: '1px solid',\n        margin: '13px 10px',\n        width: '173px',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        backgroundColor: '#fff',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        display:'flex',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      valueClass:{\n        margin: '15px 0px',\n        width:'45px',\n        textAlign: 'center',\n      },\n      iconClass:{\n        fontSize:'22px',\n        padding: '8px 8px'\n      },\n      countBtn:{\n        minWidth:'64px',\n        padding: 0,\n      }\n}\n\nexport default FooterStyle;","import canvas from './Canvas'\n\nvar modes = {\n    selection: 1,\n    move: 2,\n    draw: 3,\n    smartDraw: 4,\n    text: 5,\n    erase: 6,\n    laser: 7\n}\n\nvar menus = {\n    selectionGroup: 0,\n    selection: 1,\n    move: 2,\n    laser: 3,\n    draw: 4,\n    smartDraw: 5,\n    text: 6,\n    shapes: 7,\n    erase: 8,\n    eraseAll: 9\n}\n\nvar menuState = {\n    menus: menus,\n    modes: modes,\n    popup: null,\n    selected: menus.smartDraw,\n    inputMode: modes.smartDraw,\n    selectionGroupVal: modes.selection\n} \n\nmenuState.handleMenuClick = function(menu) {\n    if (menu == menus.eraseAll) {\n        window.Module.eraseAll();\n        canvas.draw();\n        return;\n    }\n\n    if (menu == menus.selectionGroup) {\n        if (menuState.popup == menus.selectionGroup) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.selectionGroup;\n        }\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = menuState.selectionGroupVal;\n    } else if (menu == menus.selection) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.selection;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.selection;\n    } else if (menu == menus.move) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.move;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.move;\n    } else if (menu == menus.laser) {\n        menuState.popup = null;\n        menuState.selected = menus.laser;\n        menuState.inputMode = modes.laser;\n    } else if (menu == menus.draw) {\n        if (menuState.popup == menus.draw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.draw;\n        }\n        menuState.selected = menus.draw;\n        menuState.inputMode = modes.draw;\n    } else if (menu == menus.smartDraw) {\n        if (menuState.popup == menus.smartDraw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.smartDraw;\n        }\n        menuState.selected = menus.smartDraw;\n        menuState.inputMode = modes.smartDraw;\n    } else if (menu == menus.text) {\n        if (menuState.popup == menus.text) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.text;\n        }\n        menuState.selected = menus.text;\n        menuState.inputMode = modes.text;\n    } else if (menu == menus.shapes) {\n        if (menuState.popup == menus.shapes) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.shapes;\n        }\n    } else if (menu == menus.erase) {\n        menuState.popup = null;\n        menuState.selected = menus.erase;\n        menuState.inputMode = modes.erase;\n    }\n\n    handleMode();\n}\n\nmenuState.hasPopup = function() {\n    return menuState.popup != null;\n}\n\nmenuState.removePopup = function() {\n    menuState.popup = null;\n}\n\nmenuState.inDrawMode = function() {\n    return menuState.inputMode == modes.draw || menuState.inputMode == modes.smartDraw;\n}\n\nfunction handleMode() {\n    var mode = menuState.inputMode;\n    var tpanel = document.getElementById(\"transparentPanel\");\n\n    if (mode == modes.selection) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.move) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'all-scroll';\n    } else if (mode == modes.laser) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.POINTING);\n        tpanel.style.cursor = 'url(\"/red_circle.svg\") 10 10, auto';\n    } else if (mode == modes.draw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(false);\n        tpanel.style.cursor = 'url(\"/pen-solid.svg\") 0 20, auto';\n        //tpanel.style.cursor = 'auto';\n    } else if (mode == modes.smartDraw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(true);\n        //tpanel.style.cursor = 'url(\"/pen-solid.svg\") 0 20, auto';\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.text) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'url(\"/title_black.svg\") 0 20, auto';\n    } else if (mode == modes.erase) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.ERASING);\n        tpanel.style.cursor = 'url(\"/eraser-solid.svg\"), auto';\n    }\n}\n\nexport default menuState;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport menuState from './MenuState'\n\nvar AppInput = {showContextMenu:()=>{}};\n\nvar drawPoints = [];\nvar drawing = false;\nvar transparentPanel = null;\nvar tnode = null;\nvar ignoreNextClick = false;\n\nconst TextAlignHorizontalDefault = 0;\nconst TextAlignHorizontalCenter = 1;\nconst TextAlignHorizontalLeft = 2;\nconst TextAlignHorizontalRight = 3;\n\nfunction updateCursorLoc(x, y) {\n  var docid = window.wsmanager.docid\n  if (!docid || menuState.inputMode != menuState.modes.laser) {\n    return;\n  }\n  window.Module.inputFilter().pan({x:x, y:y}, window.Module.InputType.OTHER);\n}\n\nfunction finishTextEditing() {\n  if (tnode != null) {\n    window.Module.finishTextEditing(tnode.val());\n    tnode.remove();\n    canvas.draw();\n    tnode = null;\n    ignoreNextClick = true;\n    return true;\n  }\n  return false;\n}\n\nfunction initShapeTextEditor() {\n  finishTextEditing()\n  ignoreNextClick = false;\n\n  var rect = window.Module.getTextEditRect();\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n\n  var tid = Math.random() + \"t\";\n  tnode = $(\"<textarea id='\" + tid + \"'></textarea>\");\n  tnode.val(window.Module.getTextForEditing());\n  var style = window.Module.getTextEditStyle();\n  var fontSize = style.effectiveFontSize() * style.effectiveFontMultiplier();\n  var isFLoating = window.Module.isEditingFloatingText();\n\n  var tattrs = {\n    \"resize\": \"none\",\n    \"overflow\": \"hidden\",\n    \"position\": \"absolute\",\n    \"font\": style.effectivePlatformFontFamily(),\n    \"line-height\": fontSize + \"px\",\n    \"background-color\": \"transparent\",\n    \"left\": (rect.x)+ \"px\", \n    \"top\": (rect.y) + \"px\", \n    \"width\": rect.width + \"px\",\n    \"height\": rect.height + \"px\",\n    \"z-index\": \"1000\"\n  }\n\n  switch (style.effectiveTextAlignHorizontal().value) {\n    case TextAlignHorizontalDefault:\n    case TextAlignHorizontalCenter:\n      tattrs[\"text-align\"] = \"center\";\n      break;\n    case TextAlignHorizontalLeft:\n      tattrs[\"text-align\"] = \"left\";\n      break;\n    case TextAlignHorizontalRight:\n      tattrs[\"text-align\"] = \"right\";\n      break;\n    default:\n      break;\n  }\n  tnode.css(tattrs);\n  $(\"#drawContent\").append(tnode);\n  tnode.trigger(\"focus\");\n  tnode.on(\"blur\", function(e) {\n    finishTextEditing();\n  });\n  tnode.on(\"keyup\", function(e) {\n    if (e.code == \"Escape\" || e.key == \"Escape\") {\n      finishTextEditing();\n      ignoreNextClick = false;\n    }\n  });\n\n  function updateSize() {\n    if (!tnode) {\n      return;\n    }\n    var text = tnode.val();\n    var sz = window.Module.getTextEditSize(text, isFLoating);\n    if (sz.height == 0) {\n      sz.height = fontSize;\n    }\n    if (sz.width < 50) {\n      sz.width = 50;\n    }\n    sz.height += fontSize / 2;\n    tnode.css(\"top\", (cy - sz.height / 2) + \"px\");\n    tnode.css(\"height\", sz.height + \"px\");\n    if (isFLoating) {\n      var width = sz.width + 150;\n      tnode.css(\"width\", width + \"px\");\n      tnode.css(\"left\", (cx - width / 2) + \"px\");\n    }\n    //console.log(sz);\n  }\n \n  tnode.on('change keyup paste', updateSize);\n  updateSize();\n}\n\nconst drawLaserCircle = function(x, y) {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.beginPath();\n  ctx.arc(x, y, 32, 0, 2 * Math.PI, false);\n  ctx.fillStyle = 'red';\n  ctx.fill();\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = 'red';\n  ctx.stroke();\n}\n\nconst clearTransparentPanel = function() {\n  if (transparentPanel == null) {\n    transparentPanel = document.getElementById('transparentPanel')\n  }\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.clearRect(0, 0, transparentPanel.width, transparentPanel.height);\n}\n\nconst drawTemp = function() {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.lineJoin = \"round\";\n  ctx.lineCap = \"round\";\n\n  if (drawPoints.length > 0) {\n    window.Module.setCurrentStyleToCtx(ctx);\n    ctx.beginPath();\n    var dp = drawPoints[0];\n    ctx.moveTo(dp.x, dp.y);\n    \n    for (var i = 0; i < drawPoints.length; i++) {\n      ctx.lineTo(drawPoints[i].x, drawPoints[i].y);  \n    }\n    \n    ctx.stroke(); \n  }\n}\n\nAppInput.isEditingText = function() {\n  return tnode != null;\n}\n\nAppInput.onResize = function() {\n  transparentPanel = null;\n}\n\nAppInput.ignoreNextClick = function(val) {\n  ignoreNextClick = val;\n}\n\nAppInput.click = function(x, y) {\n  finishTextEditing()\n  if (ignoreNextClick) {\n    ignoreNextClick = false;\n    return true;\n  }\n  if (menuState.inputMode == menuState.modes.move) {\n    // Ignore click for move mode\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.text) {\n    // Text mode. Edit text and return\n    AppInput.dbclick(x, y);\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.draw) {\n    var mpt = {x: canvas.maprx(x), y: canvas.mapry(y)};\n    window.Module.addClickCircle(mpt);\n  } else {\n    var pt = {x: x, y: y }\n    window.Module.inputFilter().tap(pt, 1);\n  }\n  canvas.draw();\n}\n\nAppInput.dbclick = function(x, y) {\n    finishTextEditing()\n    var pt = {x: x, y: y }\n    window.Module.inputFilter().tap(pt, 2);\n    canvas.draw();\n    if (window.Module.inputReceiver().needTextEditing()) {\n        initShapeTextEditor()\n    }\n}\n\nAppInput.drag = function(x, y, kind) {\n    //console.log(x + \", \" + y + \"  ==  \" + kind);\n    finishTextEditing();\n    ignoreNextClick = false;\n    if (menuState.inputMode == menuState.modes.move) {\n        dragMoveMode(x, y, kind);\n    } else if (menuState.inputMode == menuState.modes.text) {\n      // Text mode\n      if (kind == 2) {\n        AppInput.dbclick(x, y);\n      }\n    } else if (menuState.inputMode == menuState.modes.laser) {\n      dragLaser(x, y, kind);\n    }  else {\n      dragNative(x, y, kind);\n    }\n}\n\nfunction dragLaser(x, y, kind) {\n  if (kind == 2) {\n    clearTransparentPanel();\n  } else {\n    drawLaserCircle(x, y);\n  }\n  updateCursorLoc(x, y);\n}\n\nfunction dragNative(x, y, kind) {\n    var it = window.Module.InputType.START;\n    if (kind == 1) {\n        it = window.Module.InputType.OTHER;\n    } else if (kind == 2) {\n        it = window.Module.InputType.END\n    }\n    var pt = {x: x, y: y }\n    var mpt = {x: canvas.maprx(x), y: canvas.mapry(y)};\n\n    if (it == window.Module.InputType.START && menuState.inDrawMode()) {\n      if (window.Module.willDrawAt(mpt)) {\n        drawing = true;\n      }\n    }\n\n    if (drawing) {\n      drawPoints.push(pt);\n      drawTemp();\n    } else {\n      window.Module.inputFilter().pan(pt, it);\n      canvas.draw();\n    }\n\n    if (it == window.Module.InputType.END && drawing) {\n      drawing = false;\n      flushTempDrawing();\n    }\n}\n\nfunction flushTempDrawing() {\n  if (drawPoints.length > 2) {\n    window.Module.inputFilter().pan(drawPoints[0], window.Module.InputType.START);\n    for (var i = 1; i < drawPoints.length - 1; i++) {\n      window.Module.inputFilter().pan(drawPoints[i], window.Module.InputType.OTHER);\n    }\n    var pt = drawPoints[drawPoints.length - 1];\n    window.Module.inputFilter().pan(pt, window.Module.InputType.END);\n  }\n  canvas.draw();\n  drawPoints = [];\n  drawTemp();\n}\n\nfunction dragMoveMode(x, y, kind) {\n    canvas.move(x, y, kind);\n    canvas.drawGrid();\n    canvas.draw();\n}\n\nAppInput.contextmenu = function(x, y) {\n  if (menuState.inputMode == menuState.modes.selection ||\n    menuState.inputMode == menuState.modes.draw ||\n    menuState.inputMode == menuState.modes.smartDraw) {\n    AppInput.showContextMenu(true, x, y);\n  }\n}\n\nAppInput.enter = function(x, y) {\n}\n\nAppInput.move = function(x, y) {\n  updateCursorLoc(x, y)\n}\n\nAppInput.leave = function(x, y) {\n}\n\nexport default AppInput;\n","import AppInput from './AppInput'\nimport canvas from './Canvas'\nimport menuState from './MenuState';\n\nvar touchInput = {}\n\nconst panThreshold = 6;\nconst doublePanThreshold = 12;\nconst zoomThreshold = 25;\nconst doubleTapIntervalMS = 300;\n\nvar tap = {\n    active: false,\n    discarded: false,\n    touch: null,\n    timer: null\n}\n\nvar twoFingerTap = {\n    active: false,\n    discarded: false,\n    touches: [],\n    firstRemoved: false,\n    secondRemoved: false,\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}]\n}\n\nvar pan = {\n    active: false,\n    discarded: false,\n    touch: null,\n    lastTouch: null,\n    buffer: []\n}\n\nvar doublePan = {\n    active: false,\n    discarded: false,\n    touches: [],\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}]\n}\n\nvar zoom = {\n    active: false,\n    discarded: false,\n    touches: [],\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}],\n    origZoom: 1.0\n}\n\nvar gestures = [tap, twoFingerTap, pan, doublePan, zoom];\nvar activeGesture = null;\n\nvar activeTouches = [];\n\nfunction initPos(gest) {\n    gest.lastPos[0].x = gest.touches[0].x;\n    gest.lastPos[0].y = gest.touches[0].y;\n\n    gest.lastPos[1].x = gest.touches[1].x;\n    gest.lastPos[1].y = gest.touches[1].y;\n\n    gest.lastPos[2].x = gest.touches[0].x;\n    gest.lastPos[2].y = gest.touches[0].y;\n\n    gest.lastPos[3].x = gest.touches[1].x;\n    gest.lastPos[3].y = gest.touches[1].y;\n}\n\nfunction hasZoomCond(gest) {\n    var d1 = dist(gest.lastPos[0], gest.lastPos[1]);\n    var d2 = dist(gest.lastPos[2], gest.lastPos[3]);\n    return Math.abs(d1 - d2) > zoomThreshold;\n}\n\nfunction hasPanCond(gest) {\n    if (dist(gest.lastPos[0], gest.lastPos[2]) > doublePanThreshold &&\n        dist(gest.lastPos[1], gest.lastPos[3]) > doublePanThreshold) {\n        var mid1 = {x: (gest.lastPos[0].x + gest.lastPos[1].x) / 2, y: (gest.lastPos[0].y + gest.lastPos[1].y) / 2}\n        var mid2 = {x: (gest.lastPos[2].x + gest.lastPos[3].x) / 2, y: (gest.lastPos[2].y + gest.lastPos[3].y) / 2}\n        return dist(mid1, mid2) > doublePanThreshold;\n    }\n    return false;\n}\n\nfunction findTouches(gest, touches) {\n    var t1 = null;\n    var t2 = null;\n\n    for (var i = 0; i < touches.length; i++) {\n        if (gest.touches.length > 0 && touches[i].id == gest.touches[0].id) {\n            t1 = touches[i];\n        }\n        if (gest.touches.length > 1 && touches[i].id == gest.touches[1].id) {\n            t2 = touches[i];\n        }\n    }\n\n    return {t1: t1, t2: t2};\n}\n\nfunction updatePos(gest, t1, t2, shift) {\n    if (shift) {\n        gest.lastPos[0].x = gest.lastPos[2].x;\n        gest.lastPos[0].y = gest.lastPos[2].y;\n\n        gest.lastPos[1].x = gest.lastPos[3].x;\n        gest.lastPos[1].y = gest.lastPos[3].y;\n    }\n    if (t1 == null) {\n        gest.lastPos[2].x = gest.lastPos[0].x;\n        gest.lastPos[2].y = gest.lastPos[0].y;\n    } else {\n        gest.lastPos[2].x = t1.x;\n        gest.lastPos[2].y = t1.y;\n    }\n    if (t2 == null) {\n        gest.lastPos[3].x = gest.lastPos[1].y;\n        gest.lastPos[3].y = gest.lastPos[1].y;\n    } else {\n        gest.lastPos[3].x = t2.x;\n        gest.lastPos[3].y = t2.y;\n    }\n}\n\nfunction mapTouches(touches) {\n    var ret = []\n    for (var i = 0; i < touches.length; i++) {\n        ret.push({\n            x: touches[i].pageX,\n            y: touches[i].pageY,\n            id: touches[i].identifier\n        });\n    }\n    return ret;\n}\n\nfunction dist(t1, t2) {\n    var dx = t1.x - t2.x;\n    var dy = t1.y - t2.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\ntouchInput.attachEvents = function(canvasElement) {\n    canvasElement.addEventListener('touchstart', function(ev) {\n      ev.preventDefault();\n      touchInput.start(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchmove', function(ev) {\n      ev.preventDefault();\n      touchInput.move(ev.targetTouches);\n    });\n    canvasElement.addEventListener('touchend', function(ev) {\n      ev.preventDefault();\n      touchInput.end(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchleave', function(ev) {\n      ev.preventDefault();\n      touchInput.cancel(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchcancel', function(ev) {\n      ev.preventDefault();\n      touchInput.cancel(ev.changedTouches);\n    });\n  }\n\ntouchInput.inProgress = function() {\n    return activeTouches.length > 0;\n}\n\ntouchInput.start = function(touches) {\n    if (activeGesture != null) {\n        return;\n    }\n    touches = mapTouches(touches);\n\n    for (var i = 0; i < touches.length; i++) {\n        activeTouches.push(touches[i]);\n    }\n    for (var i = 0; i < gestures.length; i++) {\n        if (!gestures[i].discarded) {\n            gestures[i].start(touches);\n            if (gestures[i].active) {\n                activeGesture = gestures[i];\n                break;\n            }\n        }\n    }\n}\n\ntouchInput.move = function(touches) {\n    touches = mapTouches(touches);\n    if (activeGesture != null) {\n        activeGesture.move(touches);\n    } else {\n        for (var i = 0; i < gestures.length; i++) {\n            if (!gestures[i].discarded) {\n                gestures[i].move(touches);\n                if (gestures[i].active) {\n                    activeGesture = gestures[i];\n                    break;\n                }\n            }\n        }\n    }\n}\n\ntouchInput.end = function(touches) {\n    touches = mapTouches(touches);\n    for (var i = 0; i < touches.length; i++) {\n        for (var j = 0; j < activeTouches.length; j++) {\n            if (touches[i].id == activeTouches[j].id) {\n                activeTouches.splice(j, 1);\n                break;\n            }\n        }\n    }\n    if (activeGesture != null) {\n        activeGesture.end(touches);\n    } else {\n        for (var i = 0; i < gestures.length; i++) {\n            if (!gestures[i].discarded) {\n                gestures[i].end(touches);\n                if (gestures[i].active) {\n                    activeGesture = gestures[i];\n                    break;\n                }\n            }\n        }\n    }\n    if (activeTouches.length == 0) {\n        touchInput.reset();\n    }\n}\n\ntouchInput.cancel = function(touches) {\n    touchInput.reset();\n}\n\ntouchInput.reset = function() {\n    for (var i = 0; i < gestures.length; i++) {\n        gestures[i].reset();\n        gestures[i].discarded = false;\n        gestures[i].active = false;\n    }\n    activeGesture = null;\n    activeTouches = [];\n}\n\ntap.start = function(touches) {\n    if (tap.touch != null) {\n        tap.discarded = true;\n        return;\n    }\n    if (touches.length > 1) {\n        tap.discarded = true;\n        return;\n    }\n    tap.touch = touches[0];\n}\n\ntap.move = function(touches) {\n    if (tap.touch == null) {\n        return;\n    }\n    if (touches.length != 1 || touches[0].id != tap.touch.id) {\n        tap.discarded = true;\n    } else {\n        if (dist(tap.touch, touches[0]) > panThreshold) {\n            tap.discarded = true;\n        }\n    }\n}\n\ntap.end = function(touches) {\n    if (tap.touch == null) {\n        return;\n    }\n    if (touches.length != 1 || touches[0].id != tap.touch.id) {\n        tap.discarded = true;\n    } else if (dist(tap.touch, touches[0]) > panThreshold) {\n        tap.discarded = true;\n    } else {\n        var x = tap.touch.x;\n        var y = tap.touch.y;\n        if (tap.timer != null) {\n            clearTimeout(tap.timer);\n            tap.timer = null;\n            AppInput.dbclick(x, y);\n        } else {\n            tap.timer = setTimeout(function() {\n                tap.timer = null;\n                AppInput.click(x, y);\n            }, doubleTapIntervalMS);\n        }\n    }\n    tap.active = false;\n}\n\ntap.reset = function() {\n    tap.touch = null;\n    tap.active = false;\n    if (activeGesture == tap) {\n        activeGesture = null;\n    }\n}\n\ntwoFingerTap.start = function(touches) {\n    if (twoFingerTap.touches.length + touches.length > 2) {\n        twoFingerTap.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        twoFingerTap.touches.push(touches[i]);\n    }\n\n    if (twoFingerTap.touches.length == 2) {\n        initPos(twoFingerTap);\n        twoFingerTap.firstRemoved = false;\n        twoFingerTap.secondRemoved = false;\n    }\n}\n\ntwoFingerTap.move = function(touches) {\n    if (twoFingerTap.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(twoFingerTap, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    updatePos(twoFingerTap, ts.t1, ts.t2, false);\n}\n\ntwoFingerTap.end = function(touches) {\n    var ts = findTouches(twoFingerTap, touches);\n    if (ts.t1 != null) {\n        twoFingerTap.firstRemoved = true;\n    }\n    if (ts.t2 != null) {\n        twoFingerTap.secondRemoved = true;\n    }\n    if (twoFingerTap.firstRemoved && twoFingerTap.secondRemoved) {\n        if (dist(twoFingerTap.lastPos[0], twoFingerTap.lastPos[2]) < panThreshold &&\n        dist(twoFingerTap.lastPos[1], twoFingerTap.lastPos[3]) < panThreshold) {\n            var x = (twoFingerTap.lastPos[0].x + twoFingerTap.lastPos[1].x) / 2;\n            var y = (twoFingerTap.lastPos[0].y + twoFingerTap.lastPos[1].y) / 2;\n            AppInput.contextmenu(x, y);\n        }\n        twoFingerTap.reset();\n    }\n}\n\ntwoFingerTap.reset = function() {\n    twoFingerTap.touches = [];\n    twoFingerTap.active = false;\n    twoFingerTap.firstRemoved = false;\n    twoFingerTap.secondRemoved = false;\n}\n\npan.start = function(touches) {\n    if (pan.active) {\n        return;\n    }\n\n    if (pan.touch != null) {\n        pan.discarded = true;\n        return;\n    }\n    if (touches.length > 1) {\n        pan.discarded = true;\n        return;\n    }\n    pan.touch = touches[0];\n    pan.lastTouch = pan.touch;\n    pan.buffer.push(touches[0]);\n}\n\npan.move = function(touches) {\n    if (pan.touch == null || touches.length > 1 ||\n        touches[0].id != pan.touch.id) {\n        return;\n    }\n    var touch = touches[0];\n    pan.lastTouch = touch;\n\n    if (pan.active) {\n        AppInput.drag(touch.x, touch.y, 1);\n    } else if (dist(touch, pan.touch) > panThreshold) {\n        pan.active = true;\n        if (pan.buffer.length > 0 && menuState.inputMode == menuState.modes.smartDraw) {\n            // for intelligent mode, ignore the first touch point\n            pan.buffer.splice(0, 1);\n        }\n        if (pan.buffer.length > 0) {\n            AppInput.drag(pan.buffer[0].x, pan.buffer[0].y, 0);    \n        } else {\n            AppInput.drag(touch.x, touch.y, 0);\n        }\n        for (var i = 1; i < pan.buffer.length; i++) {\n            AppInput.drag(pan.buffer[i].x, pan.buffer[i].y, 1);    \n        }\n        AppInput.drag(touch.x, touch.y, 1);\n        pan.buffer = [];\n    } else {\n        pan.buffer.push(touch);\n    }\n}\n\npan.end = function(touches) {\n    pan.reset();\n}\n\npan.reset = function() {\n    if (pan.active) {\n        AppInput.drag(pan.lastTouch.x, pan.lastTouch.y, 2);\n    }\n    pan.active = false;\n    pan.touch = null;\n    pan.lastTouch = null;\n    pan.buffer = [];\n    if (activeGesture == pan) {\n        activeGesture = null;\n    }\n}\n\ndoublePan.start = function(touches) {\n    if (doublePan.active) {\n        return;\n    }\n\n    if (doublePan.touches.length + touches.length > 2) {\n        doublePan.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        doublePan.touches.push(touches[i]);\n    }\n\n    if (doublePan.touches.length == 2) {\n        initPos(doublePan);\n    }\n}\n\ndoublePan.move = function(touches) {\n    if (doublePan.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(doublePan, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    if (doublePan.active) {\n        updatePos(doublePan, ts.t1, ts.t2, true);\n        var mid1x = (doublePan.lastPos[0].x + doublePan.lastPos[1].x) / 2;\n        var mid1y = (doublePan.lastPos[0].y + doublePan.lastPos[1].y) / 2;\n        var mid2x = (doublePan.lastPos[2].x + doublePan.lastPos[3].x) / 2;\n        var mid2y = (doublePan.lastPos[2].y + doublePan.lastPos[3].y) / 2;\n        canvas.moveDelta(mid2x - mid1x, mid2y - mid1y);\n    } else {\n        updatePos(doublePan, ts.t1, ts.t2, false);\n        if (hasPanCond(doublePan) && !hasZoomCond(doublePan)) {\n            doublePan.active = true;  \n        }\n    }\n}\n\ndoublePan.end = function(touches) {\n    doublePan.reset();\n}\n\ndoublePan.reset = function() {\n    doublePan.touches = [];\n    doublePan.active = false;\n    if (activeGesture == doublePan) {\n        activeGesture = null;\n    }\n}\n\nzoom.start = function(touches) {\n    if (zoom.active) {\n        return;\n    }\n\n    if (zoom.touches.length + touches.length > 2) {\n        zoom.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        zoom.touches.push(touches[i]);\n    }\n\n    if (zoom.touches.length == 2) {\n        initPos(zoom);\n    }\n}\n\nzoom.move = function(touches) {\n    if (zoom.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(zoom, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    updatePos(zoom, ts.t1, ts.t2, false);\n    if (zoom.active) {\n        var d1 = dist(zoom.lastPos[0], zoom.lastPos[1]);\n        var d2 = dist(zoom.lastPos[2], zoom.lastPos[3]);\n        canvas.zoom((zoom.origZoom * d2) / d1);\n    } else {\n        if (hasZoomCond(zoom)) {\n            zoom.origZoom = window.Module.getZoom()\n            zoom.active = true;\n        }\n    }\n}\n\nzoom.end = function(touches) {\n    zoom.reset();\n}\n\nzoom.reset = function() {\n    zoom.touches = [];\n    zoom.active = false;\n    zoom.origZoom = 1.0;\n    if (activeGesture == zoom) {\n        activeGesture = null;\n    }\n}\n\nexport default touchInput;","import AppInput from './AppInput'\nimport canvas from './Canvas'\nimport touchInput from './TouchInput'\n\nvar mouseInput = { };\n\nconst doubleClickIntervalMS = 300;\nconst dragMinDist = 4;\n\nvar clickTimer = null;\nvar mdown = false;\nvar moved = false;\nvar initialX = null;\nvar initialY = null;\nvar savedZoom = 1.0;\n\nvar pointerLoc = {x: null, y: null};\n\nfunction dist(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nmouseInput.pointerLocation = () => {\n  return pointerLoc;\n}\n\nmouseInput.attachEvents = function(canvasElement) {\n    canvasElement.addEventListener('wheel', (e) => {\n        e.preventDefault();\n        if (e.ctrlKey) {\n          var zm = canvas.getZoom();\n          var newval  = Math.floor(zm * 100 - e.deltaY);\n          if (newval >= 5) {\n              canvas.zoomAt(e.pageX, e.pageY, newval / 100);\n          }        \n        } else {\n          canvas.moveDelta(-e.deltaX, -e.deltaY);\n        }\n    });\n      \n    canvasElement.addEventListener(\"gesturestart\", function (e) {\n        e.preventDefault();\n        if (touchInput.inProgress()) {\n          return;\n        }\n        savedZoom = window.Module.getZoom();\n    });\n      \n    canvasElement.addEventListener(\"gesturechange\", function (e) {\n        e.preventDefault();\n        if (touchInput.inProgress()) {\n          return;\n        }\n        var newval = Math.round(savedZoom * e.scale * 100) / 100;\n        canvas.zoomAt(e.pageX, e.pageY, newval);\n    });\n      \n    canvasElement.addEventListener(\"gestureend\", function (e) {\n        e.preventDefault();\n    });\n  \n    window.bean.on(canvasElement, 'click', function (e) {\n        e.preventDefault();\n        if (e.button == 2) {\n          AppInput.contextmenu(e);\n          return;\n        }\n        if (e.button != 0) {\n          return;\n        }\n        if (moved) {\n          moved = false;\n          return;\n        }\n  \n        if (clickTimer != null) {\n            clearTimeout(clickTimer);\n            clickTimer = null;\n            AppInput.dbclick(e.offsetX, e.offsetY);\n        } else {\n            clickTimer = setTimeout(function () {\n                clickTimer = null;\n                AppInput.click(e.offsetX, e.offsetY);\n            }, doubleClickIntervalMS);\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mousedown', function (e) {\n        if (e.button != 0) {\n          return;\n        }\n        initialX = e.offsetX;\n        initialY = e.offsetY;\n        mdown = true;\n    });\n  \n    window.bean.on(canvasElement, 'mouseup', function (e) {\n        if (e.button == 0) {\n          mdown = false;\n          if (moved) {\n            AppInput.drag(e.offsetX, e.offsetY, 2);\n          }\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mousemove', function (e) {\n        e.preventDefault();\n        // update pointer location\n        pointerLoc.x = e.offsetX;\n        pointerLoc.y = e.offsetY;\n        \n        if (mdown && e.button != 0) {\n          return;\n        }\n  \n        if (!mdown) {\n          AppInput.move(e.offsetX, e.offsetY);\n          return;\n        }\n        if (moved) {\n          AppInput.drag(e.offsetX, e.offsetY, 1);\n        } else {\n          if (dist(initialX, initialY, e.offsetX, e.offsetY) >= dragMinDist) {\n            moved = true;\n            AppInput.drag(initialX, initialY, 0);\n            AppInput.drag(e.offsetX, e.offsetY, 1);\n          }\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mouseenter', function (e) {\n        AppInput.enter(e.offsetX, e.offsetY);\n    });\n  \n    window.bean.on(canvasElement, 'mouseleave', function (e) {\n        if (moved) {\n          AppInput.drag(e.offsetX, e.offsetY, 2);\n          moved = false;\n          mdown = false;\n        } else {\n            AppInput.leave(e.offsetX, e.offsetY);\n        }\n    });\n  \n    window.bean.on(canvasElement, 'contextmenu', function (e) {\n        e.preventDefault();\n        AppInput.contextmenu(e.offsetX, e.offsetY);\n    });\n}\n\nexport default mouseInput;\n","import canvas from './Canvas'\nimport mouseInput from './MouseInput'\nimport menuState from './MenuState'\n\nvar command = {inputModeChanged: false };\n\nfunction getShapeAddLocation() {\n    var loc = mouseInput.pointerLocation();\n    var at = null;\n    if (loc.x == null || loc.y == null || !canvas.isVisible(loc.x, loc.y, 40)) {\n        at = canvas.getMidPoint();\n    } else {\n        at = loc;\n    }\n    at = {x: canvas.maprx(at.x), y: canvas.mapry(at.y)};\n    return at;\n}\n\ncommand.del = () => {\n    window.Module.del();\n}\n\ncommand.copy = () => {\n    window.Module.copy();\n}\n\ncommand.cut = () => {\n    window.Module.cut();\n}\n\ncommand.paste = () => {\n    window.Module.paste();\n}\n\ncommand.pasteAt = (at) => {\n    window.Module.pasteAt(at);\n}\n\ncommand.selectAll = () => {\n    command.inputModeChanged = true;\n    menuState.handleMenuClick(menuState.menus.selection);\n    window.Module.selectAll();\n}\n\ncommand.addBox = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 2, at.x, at.y);\n}\n\ncommand.addCircle = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 0, at.x, at.y);\n}\n\ncommand.addUser = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(3, 8, at.x, at.y);\n}\n\ncommand.addDb = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(1, 6, at.x, at.y);\n}\n\ncommand.addCloud = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(4, 0, at.x, at.y);\n}\n\ncommand.addNote = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(3, 7, at.x, at.y);\n}\n\ncommand.escape = () => {\n    window.Module.handleEscapeKey();\n}\n\ncommand.undo = () => {\n    window.Module.inputReceiver().undo();\n}\n\ncommand.redo = () => {\n    window.Module.inputReceiver().redo();\n}\n\nexport default command;\n","import React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport Style from './FooterStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport AddIcon from '@material-ui/icons/Add';\nimport canvas from '../Canvas'\nimport globalState from '../GlobalState'\nimport command from '../Command'\n\nconst useStyles = makeStyles(Style);\nconst Footer = () => {\n    const classes = useStyles();\n    const [count, setCount] = useState(100);\n\n    /*\n     * Count Increase\n    */\n    const handleCount = () => {\n        var curCount = count - 10;\n        curCount = Math.round(curCount / 10) * 10;\n        if (curCount < 10) {\n            curCount = 5;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    /*\n     * Count Decrease\n    */\n    const handleAddCount = () => {\n        var curCount = 0;\n        if (count < 10) {\n            curCount = 10;\n        } else {\n            curCount = count + 10;\n            curCount = Math.round(curCount / 10) * 10;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleUndo = () => {\n        command.undo();\n        canvas.draw();\n    }\n\n    const handleRedo = () => {\n        command.redo();\n        canvas.draw();\n    }\n\n    globalState.setZoomHandler(function(zoom) {\n        var val = Math.round(zoom * 100);\n        setCount(val);\n    });\n\n    return (\n        <>\n        <div className=\"undo-redo-buttons\">\n            <Button className=\"resButton\"><ReplayIcon className={classes.iconClass} onClick={() => handleUndo()}/></Button>\n            <Button className=\"resButton\"><RefreshIcon className={classes.iconClass} onClick={() => handleRedo()}/> </Button>\n        </div>\n        <div className='zoom-info'>\n            <Button className={classes.countBtn}><RemoveIcon className={classes.iconClass} onClick={() => handleCount()} /></Button>\n            <div className={classes.valueClass}> {count}% </div> \n            <Button className={classes.countBtn}><AddIcon className={classes.iconClass} onClick={() => handleAddCount()} /></Button>\n        </div>\n        </>\n    );\n}\n\nexport default Footer;","const SideBarStyle = {\n    sideBar: {\n        boxShadow:'0 0 0 50px transparent',\n        background: 'white',\n        borderRadius: '10px',\n        width: '55px',\n        display: 'inline-block',\n        margin:'0 15px',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n    },\n    sideBarMenu: {\n        padding: '11px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    menuIcons:{\n        marginBottom:10\n    },\n    menuItem:{\n        textAlign: 'center',\n        fontSize: '13px'\n    },\n    sideMenuIcons:{\n        textAlign:'center',\n        fontSize: '14px'\n    },\n    changeColor:{\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    spaceBwt:{\n      height: '45px',\n    },\n    spaceBwtRound:{\n        height: '47px',\n        border: '1px solid #dfe3e8',\n    },\n    expandedMenu: {\n        display: 'flex',\n        flexDirection: 'row'\n    },\n    expandedMenuItem: {\n        padding: '11px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        '&:hover':{\n            cursor:'pointer',\n            'background-color': '#f2f2ff'\n        }\n    },\n    expandedMenuItemActive: {\n        'background-color': '#dedefc'\n    }\n}\n\nexport default SideBarStyle","import React, { useRef, useEffect } from 'react'\nimport canvas from './Canvas'\n\nconst LibCell = props => {\n  \n  const canvasRef = useRef(null)\n  var dpr = window.devicePixelRatio || 1;\n  var width = props.size;\n  var height = props.size;\n  \n  useEffect(() => {\n    const canvasElement = canvasRef.current\n    \n    canvasElement.width = width * dpr;\n    canvasElement.height = height * dpr;\n    canvasElement.style.width = width + \"px\";\n    canvasElement.style.height = height + \"px\";\n    const context = canvasElement.getContext('2d')  \n    context.scale(dpr, dpr);\n    canvas.drawCell(props.category, props.num, props.size, context);\n  }, [])\n  \n  return <canvas ref={canvasRef} {...props} width={width+\"px\"} height={height+\"px\"}/>\n}\n\nexport default LibCell","import React from 'react'\nimport { FaShapes, FaMousePointer, FaHandRock, FaEdit, FaEraser, FaPen } from 'react-icons/fa';\nimport { RiDeleteBin5Line, RiCheckboxBlankCircleFill } from \"react-icons/ri\";\nimport { MdTitle } from \"react-icons/md\";\nimport { GiTorch } from \"react-icons/gi\";\n\nimport LibCell from './common/LibCell'\nimport menuState from './common/MenuState'\n\n\nconst CircleColors = [\n    \n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"red\" id='0' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"orange\" id='1' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"teal\" id='2' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"green\" id='3' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"yellow\" id='4' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"tan\" id='5' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"brown\" id='6' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gray\" id='7' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"pink\" id='8' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"purple\" id='9' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"black\" id='10' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"violet\" id='11' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"plum\" id='12' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"skyblue\" id='13' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"cyan\" id='14' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"blue\" id='15' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkcyan\" id='16' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkorchid\" id='17' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gold\" id='18' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"royalblue\" id='11' />,\n]\n\nconst ShapesList = [\n    <LibCell category={0} num={0} drag=\"true\" id=\"0\" size={45}/>,\n    <LibCell category={0} num={2} drag=\"true\" id=\"1\" size={45}/>,\n    <LibCell category={0} num={3} drag=\"true\" id=\"2\" size={45}/>,\n    <LibCell category={0} num={5} drag=\"true\" id=\"3\" size={45}/>,\n    <LibCell category={0} num={6} drag=\"true\" id=\"4\" size={45}/>,\n    <LibCell category={0} num={7} drag=\"true\" id=\"5\" size={45}/>,\n    <LibCell category={0} num={8} drag=\"true\" id=\"6\" size={45}/>,\n    <LibCell category={1} num={1} drag=\"true\" id=\"7\" size={45}/>,\n    <LibCell category={1} num={2} drag=\"true\" id=\"8\" size={45}/>,\n    <LibCell category={1} num={5} drag=\"true\" id=\"9\" size={45}/>,\n    <LibCell category={1} num={6} drag=\"true\" id=\"10\" size={45}/>,\n    <LibCell category={1} num={10} drag=\"true\" id=\"11\" size={45}/>,\n    <LibCell category={1} num={20} drag=\"true\" id=\"12\" size={45}/>,\n    <LibCell category={2} num={0} drag=\"true\" id=\"13\" size={45}/>,\n    <LibCell category={2} num={4} drag=\"true\" id=\"14\" size={45}/>,\n    <LibCell category={3} num={0} drag=\"true\" id=\"15\" size={45}/>,\n    <LibCell category={3} num={4} drag=\"true\" id=\"16\" size={45}/>,\n    <LibCell category={3} num={5} drag=\"true\" id=\"17\" size={45}/>,\n    <LibCell category={3} num={6} drag=\"true\" id=\"18\" size={45}/>,\n    <LibCell category={3} num={7} drag=\"true\" id=\"19\" size={45}/>,\n    <LibCell category={3} num={8} drag=\"true\" id=\"20\" size={45}/>,\n    <LibCell category={4} num={0} drag=\"true\" id=\"21\" size={45}/>,\n    <LibCell category={4} num={1} drag=\"true\" id=\"22\" size={45}/>,\n    <LibCell category={4} num={2} drag=\"true\" id=\"23\" size={45}/>,\n]\n\nconst SideBarMenuItems = [\n    {\n        id: menuState.menus.selectionGroup,\n        icon: <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Select',\n    },\n    {\n        id: menuState.menus.laser,\n        icon: <GiTorch size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Laser',\n    },\n    {\n        id: menuState.menus.draw,\n        icon: <FaPen size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: menuState.menus.smartDraw,\n        icon: <FaEdit size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Smart Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: menuState.menus.text,\n        icon: <MdTitle size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Text'\n    },\n    {\n        id: menuState.menus.shapes,\n        icon: <FaShapes size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Shapes',\n        subMenus: ShapesList\n    },\n    {\n        id: menuState.menus.erase,\n        icon: <FaEraser size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase',\n    },\n    {\n        id: menuState.menus.eraseAll,\n        icon: <RiDeleteBin5Line size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase All',\n    },\n]\nexport default SideBarMenuItems","var drawStyle = {\n    colorIndex: 10,\n    dashIndex: 0,\n    widthIndex: 0\n}\n\ndrawStyle.setColor = function(idx, color) {\n    drawStyle.colorIndex = idx;\n    var carr = colorNameToVal(color)\n    window.Module.setStrokeColor(carr[0], carr[1], carr[2], carr[3]);\n}\n\ndrawStyle.setDashIndex = function(idx) {\n    drawStyle.dashIndex = idx;\n    window.Module.setDashType(idx);\n}\n\ndrawStyle.setWidthIndex = function(idx) {\n    drawStyle.widthIndex = idx;\n    window.Module.inputReceiver().currentStyle().setStrokeWidth((idx + 1) * 2);\n}\n\nfunction colorNameToVal(color)\n{\n    var colors = {\"aliceblue\": [240, 248, 255, 255], \"antiquewhite\": [250, 235, 215, 255], \"aqua\": [0, 255, 255, 255], \"aquamarine\": [127, 255, 212, 255], \"azure\": [240, 255, 255, 255], \"beige\": [245, 245, 220, 255], \"bisque\": [255, 228, 196, 255], \"black\": [0, 0, 0, 255], \"blanchedalmond\": [255, 235, 205, 255], \"blue\": [0, 0, 255, 255], \"blueviolet\": [138, 43, 226, 255], \"brown\": [165, 42, 42, 255], \"burlywood\": [222, 184, 135, 255], \"cadetblue\": [95, 158, 160, 255], \"chartreuse\": [127, 255, 0, 255], \"chocolate\": [210, 105, 30, 255], \"coral\": [255, 127, 80, 255], \"cornflowerblue\": [100, 149, 237, 255], \"cornsilk\": [255, 248, 220, 255], \"crimson\": [220, 20, 60, 255], \"cyan\": [0, 255, 255, 255], \"darkblue\": [0, 0, 139, 255], \"darkcyan\": [0, 139, 139, 255], \"darkgoldenrod\": [184, 134, 11, 255], \"darkgray\": [169, 169, 169, 255], \"darkgreen\": [0, 100, 0, 255], \"darkkhaki\": [189, 183, 107, 255], \"darkmagenta\": [139, 0, 139, 255], \"darkolivegreen\": [85, 107, 47, 255], \"darkorange\": [255, 140, 0, 255], \"darkorchid\": [153, 50, 204, 255], \"darkred\": [139, 0, 0, 255], \"darksalmon\": [233, 150, 122, 255], \"darkseagreen\": [143, 188, 143, 255], \"darkslateblue\": [72, 61, 139, 255], \"darkslategray\": [47, 79, 79, 255], \"darkturquoise\": [0, 206, 209, 255], \"darkviolet\": [148, 0, 211, 255], \"deeppink\": [255, 20, 147, 255], \"deepskyblue\": [0, 191, 255, 255], \"dimgray\": [105, 105, 105, 255], \"dodgerblue\": [30, 144, 255, 255], \"firebrick\": [178, 34, 34, 255], \"floralwhite\": [255, 250, 240, 255], \"forestgreen\": [34, 139, 34, 255], \"fuchsia\": [255, 0, 255, 255], \"gainsboro\": [220, 220, 220, 255], \"ghostwhite\": [248, 248, 255, 255], \"gold\": [255, 215, 0, 255], \"goldenrod\": [218, 165, 32, 255], \"gray\": [128, 128, 128, 255], \"green\": [0, 128, 0, 255], \"greenyellow\": [173, 255, 47, 255], \"honeydew\": [240, 255, 240, 255], \"hotpink\": [255, 105, 180, 255], \"indianred \": [205, 92, 92, 255], \"indigo\": [75, 0, 130, 255], \"ivory\": [255, 255, 240, 255], \"khaki\": [240, 230, 140, 255], \"lavender\": [230, 230, 250, 255], \"lavenderblush\": [255, 240, 245, 255], \"lawngreen\": [124, 252, 0, 255], \"lemonchiffon\": [255, 250, 205, 255], \"lightblue\": [173, 216, 230, 255], \"lightcoral\": [240, 128, 128, 255], \"lightcyan\": [224, 255, 255, 255], \"lightgoldenrodyellow\": [250, 250, 210, 255], \"lightgrey\": [211, 211, 211, 255], \"lightgreen\": [144, 238, 144, 255], \"lightpink\": [255, 182, 193, 255], \"lightsalmon\": [255, 160, 122, 255], \"lightseagreen\": [32, 178, 170, 255], \"lightskyblue\": [135, 206, 250, 255], \"lightslategray\": [119, 136, 153, 255], \"lightsteelblue\": [176, 196, 222, 255], \"lightyellow\": [255, 255, 224, 255], \"lime\": [0, 255, 0, 255], \"limegreen\": [50, 205, 50, 255], \"linen\": [250, 240, 230, 255], \"magenta\": [255, 0, 255, 255], \"maroon\": [128, 0, 0, 255], \"mediumaquamarine\": [102, 205, 170, 255], \"mediumblue\": [0, 0, 205, 255], \"mediumorchid\": [186, 85, 211, 255], \"mediumpurple\": [147, 112, 216, 255], \"mediumseagreen\": [60, 179, 113, 255], \"mediumslateblue\": [123, 104, 238, 255], \"mediumspringgreen\": [0, 250, 154, 255], \"mediumturquoise\": [72, 209, 204, 255], \"mediumvioletred\": [199, 21, 133, 255], \"midnightblue\": [25, 25, 112, 255], \"mintcream\": [245, 255, 250, 255], \"mistyrose\": [255, 228, 225, 255], \"moccasin\": [255, 228, 181, 255], \"navajowhite\": [255, 222, 173, 255], \"navy\": [0, 0, 128, 255], \"oldlace\": [253, 245, 230, 255], \"olive\": [128, 128, 0, 255], \"olivedrab\": [107, 142, 35, 255], \"orange\": [255, 165, 0, 255], \"orangered\": [255, 69, 0, 255], \"orchid\": [218, 112, 214, 255], \"palegoldenrod\": [238, 232, 170, 255], \"palegreen\": [152, 251, 152, 255], \"paleturquoise\": [175, 238, 238, 255], \"palevioletred\": [216, 112, 147, 255], \"papayawhip\": [255, 239, 213, 255], \"peachpuff\": [255, 218, 185, 255], \"peru\": [205, 133, 63, 255], \"pink\": [255, 192, 203, 255], \"plum\": [221, 160, 221, 255], \"powderblue\": [176, 224, 230, 255], \"purple\": [128, 0, 128, 255], \"rebeccapurple\": [102, 51, 153, 255], \"red\": [255, 0, 0, 255], \"rosybrown\": [188, 143, 143, 255], \"royalblue\": [65, 105, 225, 255], \"saddlebrown\": [139, 69, 19, 255], \"salmon\": [250, 128, 114, 255], \"sandybrown\": [244, 164, 96, 255], \"seagreen\": [46, 139, 87, 255], \"seashell\": [255, 245, 238, 255], \"sienna\": [160, 82, 45, 255], \"silver\": [192, 192, 192, 255], \"skyblue\": [135, 206, 235, 255], \"slateblue\": [106, 90, 205, 255], \"slategray\": [112, 128, 144, 255], \"snow\": [255, 250, 250, 255], \"springgreen\": [0, 255, 127, 255], \"steelblue\": [70, 130, 180, 255], \"tan\": [210, 180, 140, 255], \"teal\": [0, 128, 128, 255], \"thistle\": [216, 191, 216, 255], \"tomato\": [255, 99, 71, 255], \"turquoise\": [64, 224, 208, 255], \"violet\": [238, 130, 238, 255], \"wheat\": [245, 222, 179, 255], \"white\": [255, 255, 255, 255], \"whitesmoke\": [245, 245, 245, 255], \"yellow\": [255, 255, 0, 255], \"yellowgreen\": [154, 205, 50, 255]};\n    if (typeof colors[color.toLowerCase()] != 'undefined')\n        return colors[color.toLowerCase()];\n    return [255, 255, 255, 255]\n}\n\nexport default drawStyle;\n","import React from 'react'\nimport { FaCheckCircle } from \"react-icons/fa\";\n\nconst ColorList = (props) => {\n    const {colors} = props;\n    return colors?.map((color, index)=>{\n        var item = null;\n        if (index == props.selectedIndex) {\n            item = <FaCheckCircle size=\"2em\" color={color.props.color}/>;\n        } else {\n            item = color;\n        }\n        return (\n            <span onClick={() => props.onColorChange(index, color.props.color)}>\n              {item}\n            </span>\n        )\n    })\n}\n\nexport default ColorList;\n","var Config = {\n    mediaQuery: \"only screen and (max-width: 640px)\"\n}\n\nexport default Config;","import React, { useState } from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Style from './SideBarMenu/SideBarStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AiOutlineMinus, AiOutlineDash, AiOutlineSmallDash } from \"react-icons/ai\";\nimport { RiCheckboxBlankCircleFill } from \"react-icons/ri\";\nimport drawStyle from './DrawStyle'\nimport ColorList from './ColorList'\nimport Config from './Config'\n\nconst useStyles = makeStyles(Style);\n\nconst StrokeStyle = (props) => {\n    const classes = useStyles();\n\n    const [colorIndex, setColorIndex] = useState(drawStyle.colorIndex)\n    const [dashIndex, setDashIndex] = useState(drawStyle.dashIndex)\n    const [widthIndex, setWidthIndex] = useState(drawStyle.widthIndex)\n\n    const widthCircles = [\n        {icon: <RiCheckboxBlankCircleFill size=\"1em\" id=\"0\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.2em\" id=\"1\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.4em\" id=\"2\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.6em\" id=\"3\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.8em\" id=\"4\" />},\n    ]\n\n    const dashLines = [\n        {icon: <AiOutlineMinus size=\"2.2em\" id=\"0\" />},\n        {icon:<AiOutlineSmallDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"1\"  />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}   id=\"2\" />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"3\" />},\n    ]\n    \n    const onColorChange = (index, color) =>{\n        setColorIndex(index)\n        drawStyle.setColor(index,color);\n    }\n\n    const onDashChange = (index, iconsId) => {\n        setDashIndex(iconsId)\n        drawStyle.setDashIndex(index);\n    }\n\n    const onWidthChange = (index, iconsId) => {\n        setWidthIndex(iconsId)\n        drawStyle.setWidthIndex(index);\n    }\n\n    const getDashLines = () => {\n                      return ( \n                          <div className={classes.spaceBwtRound}>\n                        {\n                           dashLines.map((dashLine, index) =>{\n                                return(\n                                    <span key={index} className={`${dashLine.icon.props.id == dashIndex ? \"changeBorder\" : \"\"} `} \n                                        onClick={() => onDashChange(index, dashLine.icon.props.id) }>\n                                        {dashLine.icon}\n                                    </span>\n                                )\n                            })\n                        }\n                        </div>\n                      )\n    }\n\n    const getWidthCircles = () => {\n        return ( \n            <div className={classes.spaceBwt} >\n          {\n             widthCircles.map((wcircle, index) =>{\n                  return(\n                      <span key={index} className={`${wcircle.icon.props.id == widthIndex ? \"changeBorderRound\" : \"defaultBorder\"} `} \n                        onClick={() => onWidthChange(index, wcircle.icon.props.id) }>\n                          {wcircle.icon}\n                      </span>\n                  )\n              })\n          }\n          </div>\n        )\n    }\n    var {open, anchorEl, placement, subMenuIcons} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition\n            >\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"smart_draw_paper smart_draw_res\">\n                            {getWidthCircles()}\n                            {getDashLines()}\n                            <ColorList colors={subMenuIcons} selectedIndex={colorIndex} \n                                onColorChange={onColorChange}/>\n                         </Paper>\n                    </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default StrokeStyle;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from './Config'\nimport Style from './SideBarMenu/SideBarStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport menuState from './MenuState'\n\nconst useStyles = makeStyles(Style);\n\nconst SelectionGroupPopup = (props) => {\n    const classes = useStyles();\n\n    var {open, anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    var chooseSelectMode = () => {\n        props.setSelectionMode(menuState.menus.selection);\n    }\n\n    var chooseMoveMode = () => {\n        props.setSelectionMode(menuState.menus.move);\n    }\n\n    var itemClass = classes.expandedMenuItem;\n    var itemClassActive = classes.expandedMenuItem + ' ' + classes.expandedMenuItemActive\n    var selectStyle = itemClass;\n    var moveStyle = itemClass;\n    if (menuState.selectionGroupVal == menuState.menus.selection) {\n        selectStyle = itemClassActive;\n    } else {\n        moveStyle = itemClassActive;\n    }\n    var menuClass = classes.expandedMenu;\n    const {menuItem} = classes;\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition\n            >\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"selection_menu_expanded_paper\">\n                            <div className={menuClass}>\n                                <div className={selectStyle} onClick={chooseSelectMode}>\n                                    <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                                        <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>\n                                    </div>\n                                    <div className={menuItem +' '+ 'menuItems'}>Select</div>\n                                </div>\n                                <div className={moveStyle} onClick={chooseMoveMode}>\n                                    <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                                        <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>\n                                    </div>\n                                    <div className={menuItem +' '+ 'menuItems'}>Move</div>\n                                </div>\n                            </div>\n                         </Paper>\n                    </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default SelectionGroupPopup;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport canvas from './Canvas'\nimport Draggable from 'react-draggable';\nimport Config from './Config'\n\nconst ShapeLibrary = (props) => {\n    const onDragStop = (event, subMenu, data) => {\n        var categ = subMenu.props.category;\n        var num = subMenu.props.num;\n        var x = event.pageX;\n        var y = event.pageY;\n        if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n            if (event.changedTouches && event.changedTouches.length > 0) {\n                var touch  = event.changedTouches[0];\n                x = touch.pageX;\n                y = touch.pageY;\n            }\n        }\n        if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n            return;\n        }\n        \n        var popUpRect = popperRef.current.getBoundingClientRect()\n        if (y>= popUpRect.top && y<= popUpRect.bottom && x >= popUpRect.left && x <= popUpRect.right) {\n            var mid = canvas.getMidPoint();\n            x = mid.x;\n            y = mid.y;\n        }\n        x = canvas.maprx(x);\n        y = canvas.mapry(y);\n        window.Module.libraryStore().addObjectToCanvas(categ, num, x, y);\n        canvas.draw();\n    }\n\n    const getSubIcons = (subMenuIcons) =>{\n        return subMenuIcons?.map((subMenu,index)=>{\n            return (\n                <Draggable key={index} position={{x: 0, y: 0}} onStop={(event, data) => onDragStop(event, subMenu, data)}>\n                  <div style={{display:\"inline-block\"}}>\n                    {subMenu}\n                  </div>\n                </Draggable>\n            )\n        })\n    }\n\n    var {open, anchorEl, placement, subMenuIcons} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    var popperRef = React.createRef();\n    return (\n        <div>\n            <Popper ref={popperRef} open={open} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            {getSubIcons(subMenuIcons)}\n                         </Paper>\n                     </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default ShapeLibrary;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from './Config'\n\nconst TextModePopup = (props) => {\n    \n    var {open, anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            <span>Text can also be added by double clicking on the board</span>\n                         </Paper>\n                     </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default TextModePopup;\n","import canvas from './Canvas';\nimport command from './Command'\n\nvar keyboardInput = { \n    showingDialog: false\n};\n\nconst isMac = navigator.userAgent.indexOf(\"OS X\") > 0;\n\nvar handlers = {\n    'a': command.selectAll,\n    'c': command.copy,\n    'x': command.cut,\n    'v': command.paste,\n    'b': command.addBox,\n    'e': command.addCircle,\n    'u': command.addUser,\n    'z': command.undo,\n}\n\nkeyboardInput.handleKeyDown = function(event) {\n    if (keyboardInput.showingDialog) {\n        // do not handle keyboard while showing a dialog\n        return;\n    }\n\n    let key = event.key.toLowerCase();\n    var handled = false;\n    if (key == 'backspace' || key == 'delete') {\n        command.del();\n        handled = true;\n    } else if (key == 'escape') {\n        command.escape();\n        handled = true;\n    } else {\n        var handler = handlers[key];\n        if (!event.shiftKey && !event.altKey) {\n            if (handler && ((isMac && event.metaKey) || (!isMac && event.ctrlKey))) {\n                handler();\n                handled = true;\n            }\n        }\n        if (isMac && key == 'z' && event.shiftKey && event.metaKey) {\n            command.redo();\n            handled = true;\n        }\n        if (!isMac && key == 'z' && event.shiftKey && event.ctrlKey) {\n            command.redo();\n            handled = true;\n        }\n        if (!isMac && key == 'y' && event.ctrlKey && !event.shiftKey && !event.altKey) {\n            command.redo();\n            handled = true;\n        }\n    }\n    if (handled) {\n        event.preventDefault();\n        canvas.draw();\n    }\n}\n\nkeyboardInput.attachEvents = function(canvasElement) {\n    document.addEventListener(\"keydown\", function(event) {\n        keyboardInput.handleKeyDown(event);\n    });\n}\n\nexport default keyboardInput;\n","import React from 'react'\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Style from './SideBarStyle';\nimport SideBarMenuItems from \"../../Constant\"\nimport StrokeStyle from '../StrokeStyle'\nimport SelectionGroupPopup from '../SelectionGroupPopup'\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport menuState from '../MenuState'\nimport ShapeLibrary from '../ShapeLibrary'\nimport TextModePopup from '../TextModePopup'\nimport AppInput from '../AppInput'\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport keyboardInput from '../KeyboardInput'\nimport command from '../Command'\n\nconst useStyles = makeStyles(Style);\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n      () => { stateRef.current = state },\n      [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst SideBarMenu = () => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [placement, setPlacement] = React.useState();\n    const [subMenuIcons, setSubMenuIcons] = React.useState();\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const classes = useStyles();\n\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    const handleKeyDown = (event) => {\n        if (!AppInput.isEditingText()) {\n            let key = event.key.toLowerCase();\n            var handled = false;\n            if (key == 'escape') {\n                if (menuState.hasPopup()) {\n                    menuState.removePopup();\n                    handled = true;\n                } else if (menuState.selected == menuState.menus.laser ||\n                    menuState.selected == menuState.menus.erase ||\n                    menuState.selected == menuState.menus.text) {\n                    menuState.handleMenuClick(menuState.menus.selection);\n                    handled = true;\n                }\n\n                if (handled) {\n                    event.preventDefault();\n                    AppInput.ignoreNextClick(false);\n                    reload();\n                    return;\n                }\n            }\n            keyboardInput.handleKeyDown(event);\n            if (command.inputModeChanged) {\n                command.inputModeChanged = false;\n                reload();\n            }\n        }\n    };\n    \n    React.useEffect(() => {\n        document.addEventListener('keydown', handleKeyDown);\n    \n        // cleanup this component\n        return () => {\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    \n    const handleClick = (event, subMenus, newPlacement,id) => {\n        if (id == menuState.menus.eraseAll) {\n            menuState.handleMenuClick(id);\n            return;\n        }\n        menuState.handleMenuClick(id);\n        setAnchorEl(event.currentTarget);\n        var willOpen = menuState.popup != null;\n\n        if (willOpen && (id == menuState.menus.draw || id == menuState.menus.smartDraw || id == menuState.menus.shapes)) {\n            AppInput.ignoreNextClick(true);\n        } else {\n            AppInput.ignoreNextClick(false);\n        }\n\n        setPlacement(newPlacement);\n        setSubMenuIcons(subMenus)\n        reload();\n    };\n\n    const handleClickAway = () => {\n        if (menuState.popup != null) {\n            menuState.removePopup();\n            reload();\n        }\n    }\n\n    const setSelectionMode = (val) => {\n        menuState.handleMenuClick(val);\n        reload();\n    };\n    \n    const getIconAndName = (sidebar, classes) => {\n        var {icon, name} = sidebar;\n        const {menuItem} = classes;\n        if (sidebar.id == menuState.menus.selectionGroup) {\n            if (menuState.selectionGroupVal == menuState.menus.selection) {\n                icon = <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>;\n                name = \"Select\";\n            } else {\n                icon = <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>;\n                name = \"Move\";\n            }\n        }\n        return (\n            <div>\n                <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                    {icon}\n                </div>\n                <div className={menuItem +' '+ 'menuItems'}>{name}</div>\n            </div>\n        )\n    }\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n        <div>\n           { (menuState.popup === menuState.menus.selectionGroup) && <SelectionGroupPopup\n                open={true}\n                anchorEl={anchorEl}\n                placement={placement}\n                setSelectionMode={setSelectionMode}\n            /> }\n           { (menuState.popup === menuState.menus.draw || menuState.popup === menuState.menus.smartDraw) && <StrokeStyle\n                open={true}\n                anchorEl={anchorEl}\n                placement={placement}\n                subMenuIcons ={subMenuIcons}\n            /> }\n            { menuState.popup === menuState.menus.text && <TextModePopup\n                open={true}\n                anchorEl={anchorEl}\n                placement=\"right-end\"\n            /> }\n            { menuState.popup === menuState.menus.shapes && <ShapeLibrary\n                open={true}\n                anchorEl={anchorEl}\n                placement=\"right-end\"\n                subMenuIcons ={subMenuIcons}\n            /> }\n            \n            <div className={`${classes.sideBar} side_menus`}>\n                {SideBarMenuItems.map((sidebar, index) => {\n                    var itemClass = classes.sideBarMenu +' '+ 'sideBarMenu';\n                    if (sidebar.id === menuState.menus.shapes && menuState.popup === menuState.menus.shapes) {\n                        itemClass = classes.sideBarMenu +' '+ 'sideBarMenu selected';\n                    }\n                    if (sidebar.id === menuState.selected) {\n                        itemClass = classes.sideBarMenu +' '+ 'sideBarMenu active';\n                    }\n                    return (\n                        <div className={itemClass} key={index} onClick={(event)=>handleClick(event, sidebar.subMenus,'right',sidebar.id)} >\n                            {getIconAndName(sidebar, classes)}\n                        </div>\n                    )\n                })}\n\n            </div>\n        </div>\n        </ClickAwayListener>\n        \n    )\n}\nexport default SideBarMenu","import React from 'react'\n\nconst  Content = () =>  {\n    return (\n        <div className=\"canvasContainer\" id=\"drawContent\">\n            <div id=\"viewport\" className=\"viewport\">\n                <canvas id=\"gridCanvas\" className=\"canvasGridClass\" />\n                <canvas id=\"drawCanvas\" className=\"canvasClass\" />\n            </div>\n          <canvas id=\"transparentPanel\" className=\"viewport\" />\n        </div>\n    )\n}\n\nexport default Content;\n","function reload() {\n    window.location.reload();\n}\n\nconst Layover = (props) => {\n    // init, disconnected, notfound, prompt\n    var item = null;\n    if (props.state == \"init\") {\n        item = <div className=\"layover-box\">Loading..</div>;\n    } else if (props.state == \"disconnected\") {\n        item = <div className=\"layover-box\">\n            <p><span>Disconnected from server </span><a href=\"#\" onClick={reload}>Reconnect</a></p>\n            </div>;\n    } else if (props.state == \"notfound\") {\n        item = <div className=\"layover-box\">\n            <span>Requested board does not exist</span>\n            <a href=\"/?_new=true\">Start a collaborative board</a>\n            <a href=\"/?offline=true\">Start an offline board</a>\n            </div>;\n    } else if (props.state == \"prompt\") {\n        item = <div className=\"layover-box\">\n            <a href=\"/?_new=true\">Start a collaborative board</a>\n            <a href=\"/?offline=true\">Start an offline board</a>\n            </div>;\n    } else {\n        item = <div className=\"layover-box\">\n            <span>Something went wrong</span>\n            <a href=\"#\" onClick={reload}>Reload</a>\n            <a href=\"/?offline=true\">Start an offline board</a>\n            </div>;\n    }\n\n    return (\n        <div className=\"layover-col\">\n            {item}\n        </div>\n    )\n}\n\nexport default Layover\n","import $ from 'jquery'\nimport canvas from './Canvas'\n\nvar util = { };\n\n// Adding into window as this is being used by c++ code\nwindow.generateUUID = function() {\n    var d = new Date().getTime();//Timestamp\n    var d2 = (window.performance && window.performance.now && (window.performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}\n\nasync function loadTemplate(name) {\n    await fetch(name)\n      .then(response => response.json())\n      .then(response => {\n        window.Module.libraryStore().initObjects(JSON.stringify(response));\n      })\n}\n  \nasync function loadAll() {\n    await loadTemplate(\"templates/v4/templates.json\")\n    await loadTemplate(\"templates/v4/basic.json\")\n    await loadTemplate(\"templates/v4/flowchart.json\")\n    await loadTemplate(\"templates/v4/arrow.json\")\n    await loadTemplate(\"templates/v4/misc.json\")\n    await loadTemplate(\"templates/v4/misc2.json\")\n    await loadTemplate(\"templates/v4/connection_arrows.json\")\n}\n  \nutil.loadBasicTemplates = function(columns) {\n    loadAll()\n      .then(function () {\n        window.Module.libraryStore().init(columns);\n        window.Module.libraryStore().onDisplaySettingChange();\n        //collectAndPopulateShapeLibrary(columns);\n      });\n}\n  \nasync function collectAndPopulateShapeLibrary(columns) {\n    const shapeLibrary = await collectShapeLibrary(columns);\n    populateShapeLibrary(shapeLibrary, columns);\n    drawShapes(shapeLibrary, columns);\n}\n  \nasync function collectShapeLibrary(columns) {\n    var cc = window.Module.libraryStore().categoryCount();\n    const libraryDetails = {};\n    for (var i = 0; i < cc; i++) {\n      var name = window.Module.getCategoryName(i);\n      if (!libraryDetails[name]) {\n        libraryDetails[name] = [];\n      }\n      var rc = window.Module.libraryStore().rowCount(i);\n      for (var j = 0; j < rc; j++) {\n        for (var k = 0; k < columns; k++) {\n          if (window.Module.libraryStore().hasObject(i, j, k)) {\n            var nm = window.Module.getObjectName(i, j, k);\n            libraryDetails[name].push({\n              category: i,\n              row: j,\n              col: k,\n              nm\n            })\n            // console.log(nm);\n          }\n        }\n      }\n    }\n    return libraryDetails;\n}\n  \nfunction populateShapeLibrary(shapeLib, columns) {\n    let colKeys = Object.keys(shapeLib);\n    for (let colKey of colKeys) {\n      const colData = shapeLib[colKey];\n      let d = `<li class=\"nav-item left-pane-li\">\n      <a class=\"nav-link\" href=\"#\">${colKey}</a>\n      <div id=\"stdiv-${colKey}\"></div></li>`;\n      $(\"#shapeLibUl\").append(d);\n    }\n}\n  \nfunction drawShapes(shapeLib, columns) {\n    let colKeys = Object.keys(shapeLib);\n    for (let colKey of colKeys) {\n      const colData = shapeLib[colKey];\n      const divEl = document.getElementById(`stdiv-${colKey}`);\n      for (let data of colData) {\n        const id = `st${data.category}${data.row}${data.col}`;\n        var canv = document.createElement(\"canvas\");\n        canv.setAttribute('width', 50);\n        canv.setAttribute('height', 50);\n        canv.setAttribute('id', id);\n        canv.setAttribute('data-category', data.category);\n        canv.setAttribute('data-row', data.row);\n        canv.setAttribute('data-col', data.col);\n        canv.classList.add('draggable');\n        canv.drop = function(x, y) {\n          var objNum = columns * data.row + data.col;\n          window.Module.libraryStore().addObjectToCanvas(data.category, objNum, x, y);\n          canvas.draw();\n        }\n        divEl.appendChild(canv);\n        //\n        const panel = canv;\n        const ctx = panel.getContext('2d');\n        window.Module.drawCell(data.category, data.row, data.col, 35, 25, 25, ctx);\n  \n        $(canv).draggable({\n          helper: \"clone\"\n        });\n      }\n    }\n}\n  \nexport default util;\n  ","import $ from 'jquery';\nimport canvas from './Canvas'\nimport AppInput from './AppInput'\nimport touchInput from './TouchInput'\nimport mouseInput from './MouseInput'\n//import keyboardInput from './KeyboardInput'\n\nvar appEvent = { };\n\nfunction attachResizeHandler() {\n  $(window).on(\"resize\", function() {\n    canvas.onResize();\n    AppInput.onResize();\n  });\n}\n\nappEvent.attachEventHandlers = function() {\n  attachResizeHandler();\n\n  var canvasElement = document.getElementById(\"transparentPanel\");\n  mouseInput.attachEvents(canvasElement);\n  touchInput.attachEvents(canvasElement);\n  //keyboardInput.attachEvents(canvasElement);\n}\n\nexport default appEvent;\n","import util from './Util'\nimport canvas from './Canvas'\n\nimport appEvent from './AppEvent'\n\nvar initializer = { };\n\n// Adding into window as this is being used by c++ code\nwindow.wsmanager = {\n    // state values: init, ready, disconnected, notfound, offline, prompt\n    state: \"init\",\n    cb: null,\n    docid: null,\n    setState: function(state) {\n        window.wsmanager.state = state;\n        if (window.wsmanager.cb != null) { window.wsmanager.cb(state); } \n    }\n}\n\nwindow.toggleDebug = function() {\n    window.Module.toggleDebug();\n}\n\nvar apiBasePath = 'https://api.lekh.app/v1';\n//var apiBasePath = 'http://localhost:3000/v1';\n//var apiBasePath = 'http://192.168.1.5:3000/v1';\n\nvar runtimeInitialized = false;\nvar initialInitDone = false;\nvar docReady = false;\n\nconst hasTouch = () => {\n    var hasTouchScreen = false;\n    if (\"maxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.maxTouchPoints > 0;\n    } else if (\"msMaxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.msMaxTouchPoints > 0;\n    } else {\n        var mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n        if (mQ && mQ.media === \"(pointer:coarse)\") {\n            hasTouchScreen = !!mQ.matches;\n        } else if ('orientation' in window) {\n            hasTouchScreen = true; // deprecated, but good fallback\n        } else {\n            // Only as a last resort, fall back to user agent sniffing\n            var UA = navigator.userAgent;\n            hasTouchScreen = (\n                /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) ||\n                /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA)\n            );\n        }\n    }\n    return hasTouchScreen;\n}\n\nconst appendScript = (scriptToAppend) => {\n    const script = document.createElement(\"script\");\n    script.src = scriptToAppend;\n    script.async = false;\n    document.body.appendChild(script);\n}\n\nconst setStyleAfterDocLoad = () => {\n    //window.Module.inputReceiver().currentStyle().setStrokeWidth(4);\n    window.Module.inputReceiver().currentStyle().setFontSize(18);\n}\n\nwindow.Module = {\n    onRuntimeInitialized: function () {\n        runtimeInitialized = true;\n        initializer.initInternal();\n    }\n};\n\ninitializer.init = function(cb) {\n    docReady = true;\n    window.wsmanager.cb = cb;\n    appendScript(\"a1/bean.min.js\");\n    appendScript(\"a1/lekhapp.js\");\n    initializer.initInternal();\n}\n\ninitializer.initInternal = function() {\n    if (initialInitDone || !docReady || !runtimeInitialized) {\n        return;\n    }\n    initialInitDone = true;\n    var panel = document.getElementById(\"gridCanvas\");\n    if (!panel) {\n        return;\n    }\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    initialInitDone = true;\n\n    window.Module.init(canvasElement);\n    //window.Module.setZoom(70)\n    canvas.setSize();\n    canvas.drawGrid();\n    \n    util.loadBasicTemplates(canvas.libraryColCount);\n    appEvent.attachEventHandlers();\n    startDoc();\n}\n\nfunction startDoc() {\n    var url = new URL(window.location);\n    var docid = url.searchParams.get('docid');\n    var np = url.searchParams.get('_new');\n    var ref = url.searchParams.get('ref');\n    var offline = url.searchParams.get('offline');\n    if (docid) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var touch = 'false';\n              try {\n                if (hasTouch()) {\n                    touch = 'true';\n                }\n              } catch(e) {\n              }\n              var obj = JSON.parse(xhttp.responseText);\n              window.wsmanager.start(docid, obj.location+'?_touch=' + touch);\n            } else {\n                if (this.status == 404) {\n                    window.wsmanager.setState('notfound');\n                } else {\n                  window.wsmanager.setState('error');\n                }\n            }\n          }\n        };\n        var url = apiBasePath + \"/docs/\" + docid;\n        xhttp.open(\"POST\", url);\n        xhttp.withCredentials = true;\n        xhttp.send();\n    } else if (np == 'true') {\n      var xhttp = new XMLHttpRequest();\n      xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var obj = JSON.parse(xhttp.responseText);\n              var url = new URL(window.location);\n              var newUrl = url.origin + \"/?docid=\" + obj.docid;\n              window.location = newUrl;\n            } else {\n                window.wsmanager.setState('error');\n            }\n          }\n      };\n      var url = apiBasePath + \"/docs\"\n      if (ref) {\n        url += \"?ref=\" + ref;\n      }\n      xhttp.open(\"POST\", url);\n      xhttp.withCredentials = true;\n      xhttp.send();\n    } else if (offline == 'true') {\n        window.wsmanager.setState('offline');\n    } else {\n        window.wsmanager.setState('prompt');\n    }\n}\n\nwindow.wsmanager.start = function (docid, location) {\n    var timer;\n  \n    const ws = new window.WebSocket(location);\n    window.Module.startDoc(docid);\n  \n    window.wsmanager.send = function(docid, data) {\n      ws.send(data);\n      return true;\n    }\n  \n    ws.onopen = function(event) {\n        console.log('connection opened: ', event);\n        timer = window.setInterval(function() {\n            ws.send('{}');\n        }, 15000);\n    };\n  \n    ws.onmessage = function(event) {\n        window.Module.updateDoc(event.data);\n        canvas.draw();\n        if (window.wsmanager.state == 'init') {\n            // The first update is supposed to load update\n            // after loading the doc, we can change the default style\n            setStyleAfterDocLoad();\n            window.wsmanager.docid = docid;\n            window.wsmanager.setState('ready');\n        }\n    };\n  \n    ws.onclose = function(event) {\n        console.log('connection closed:', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n  \n    ws.onerror = function(event) {\n        console.log('connection error: ', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n}\n\nexport default initializer;\n","import React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport NestedMenuItem from \"material-ui-nested-menu-item\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport canvas from './Canvas'\nimport command from './Command'\n\nconst shapesMenus = [\n    {id:'box', name: 'Box', key1:'Ctrl + B', key2: '⌘ B', disabled: false},\n    {id:'ellipse', name: 'Circle', key1:' Ctrl + E', key2: '⌘ E', disabled: false},\n    /*{id:'table', name: 'Table', key1:'ctrl l', key2: '⌘ L', disabled: false},*/\n    {id:'user', name: 'User', key1:'Ctrl + U', key2: '⌘ U', disabled: false},\n    {id:'note', name: 'Note', key1:'', key2: '', disabled: false},\n    {id:'db', name: 'Database', key1:'', key2: '', disabled: false},\n    {id:'cloud', name: 'Cloud', key1:'', key2: '', disabled: false},\n    /*{id:'more', name: 'More', key1:'', key2: '', disabled: false},*/\n]\nvar menus = [\n    {id:'add', name: 'Add Shapes', key1: '', key2: '', div: true, disabled: false, submenu: shapesMenus},\n    {id:'select', name: 'Select All', key1: 'Ctrl + A', key2: '⌘ A', div: true, disabled: false},\n    {id:'cut', name: 'Cut', key1: 'Ctrl + X', key2: '⌘ X', div: false, disabled: false},\n    {id:'copy', name: 'Copy', key1: 'Ctrl + C', key2: '⌘ C', div: false, disabled: false},\n    {id:'paste', name: 'Paste', key1: 'Ctrl + V', key2: '⌘ V', div: false, disabled: false},\n    {id:'del', name: 'Delete', key1: 'Del', key2: 'Delete', div: false, disabled: false},\n    //{id:'line', name: 'Line Style', key1: '', key2: '', div: false, disabled: false},\n    //{id:'fill', name: 'Fill Color', key1: '', key2: '', div: false, disabled: false},\n    //{id:'font', name: 'Font', key1: '', key2: '', div: false, disabled: false},\n]\n\nexport default function ContextMenu(props) {\n  const handleClose = () => {\n    props.showHandler(false);\n  };\n\n  var mappedPt = {y: canvas.mapry(props.pos.y), x: canvas.maprx(props.pos.x)};\n\n  const handleMenu = (id) => {\n      if (id == \"copy\") {\n        command.copy();\n      } else if (id == \"paste\") {\n        command.pasteAt(mappedPt);\n      } else if (id == \"cut\") {\n        command.cut();\n      } else if (id == \"del\") {\n        command.del();\n      } else if (id == \"select\") {\n        command.selectAll();\n      } else if (id == \"box\") {\n        command.addBox({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"ellipse\") {\n        command.addCircle({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"table\") {        \n      } else if (id == \"user\") {\n        command.addUser({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"db\") {\n        command.addDb({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"cloud\") {\n        command.addCloud({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"note\") {\n        command.addNote({x:mappedPt.x, y:mappedPt.y});\n      }\n\n      canvas.draw();\n      props.showHandler(false);\n  };\n\n  var cmStatus = window.Module.getContextMenuStatus(mappedPt);\n  menus[1].disabled = !cmStatus.canSelectAll;\n  menus[2].disabled = !cmStatus.canCut;\n  menus[3].disabled = !cmStatus.canCopy;\n  menus[4].disabled = !cmStatus.canPaste;\n  menus[5].disabled = !cmStatus.canDelete;\n  canvas.draw();\n\n  var keyName = 'key1';\n  if (navigator.userAgent.indexOf(\"OS X\") > 0) {\n      // This is MAC\n      keyName = \"key2\";\n  }\n  return (\n      <Menu\n        keepMounted\n        open={true}\n        onClose={handleClose}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={{top: props.pos.y, left: props.pos.x}}\n        PaperProps={{\n            style: {\n                border: '2px solid #d3d4d5'\n            },\n        }}>\n      {menus?.map((option, index) => {\n          if (option.submenu) {\n            return (<NestedMenuItem\n                label={option.name}\n                style={{ left: '4px' }}\n                parentMenuOpen={true}\n                divider={option.div}\n                className=\"subIcon\"\n                key={option.id}>\n                {\n                option.submenu.map((subOption, index) => (\n                    <MenuItem onClick={()=>{handleMenu(subOption.id)}} key={subOption.id} divider={subOption.div} disabled={subOption.disabled}>\n                        <ListItemText primary={subOption.name} />\n                        <ListItemSecondaryAction className=\"shortcutKeys\">{subOption[keyName]}</ListItemSecondaryAction>\n                    </MenuItem>\n                    \n                ))}\n            </NestedMenuItem>);\n          }\n          return (\n            <MenuItem onClick={()=>{handleMenu(option.id)}} key={option.id} divider={option.div} disabled={option.disabled} style={{ left: '4px' }}>\n                <ListItemText primary={option.name} />\n                <ListItemSecondaryAction className=\"shortcutKeys\">{option[keyName]}</ListItemSecondaryAction>\n            </MenuItem>\n          )\n       })\n       }\n      </Menu>\n  );\n}\n\n/*\n⌘ – &#x2318; – &#8984; – the Command Key symbol\n⌥ – &#x2325; – &#8997; – the Option Key symbol\n⇧ – &#x21E7; – &#8679; – the Shift Key symbol\n⌃ – &#x2303; – &#8963; – the Control Key symbol\n⎋ – &#x238B; – &#9099; – the ESC Key symbol\n⇪ – &#x21ea; – &#8682; – the Capslock symbol\n⏎ – &#x23ce; – &#9166; – the Return symbol\n⌫ – &#x232b; – &#9003; – the Delete / Backspace symbol\n⇥ – &#x21E5; – &#8677; – the Tab Key symbol\n*/\n\n","import './App.css';\nimport AppMenu from './common/Header/Menu';\nimport Footer from './common/Footer/Footer';\nimport SideBarMenu from './common/SideBarMenu/SideBarMenu';\nimport Content from './common/SideBarMenu/Content';\nimport Layover from './common/Layover';\nimport React from \"react\";\nimport initializer from './common/AppInit'\nimport ContextMenu from './common/ContextMenu'\nimport AppInput from './common/AppInput'\nimport menuState from './common/MenuState'\nimport keyboardInput from './common/KeyboardInput'\n\nclass AppComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wsState: \"init\",\n      dialog: null, \n      ctxMenu: false,\n      ctxMenuPos:{x:0, y:0}, \n      sideMenuSelectedItem: menuState.selected\n    };\n    this.wsCallback = this.handleWSState.bind(this);\n    this.showDialog = this.showDialog.bind(this);\n    this.showContextMenu = this.showContextMenu.bind(this);\n  }\n\n  handleWSState(state) {\n    this.setState({wsState: state});\n  }\n\n  showDialog(dialog) {\n    this.setState({dialog:dialog});\n  }\n\n  showContextMenu(show, x, y) {\n    if (show) {\n      this.setState({ctxMenu: true, ctxMenuPos:{x:x, y:y}});  \n    } else {\n      this.setState({ctxMenu: false});\n    }\n  }\n\n  render() {\n    var layover = null;\n    if (this.state.wsState != \"ready\" && this.state.wsState != \"offline\") {\n      layover = <div className=\"layover\"><Layover state={this.state.wsState}/></div>;\n    }\n    keyboardInput.showingDialog = this.state.dialog != null || layover != null || this.state.ctxMenu;\n    \n    return (\n      <div className=\"container\">\n        <Content />\n        <div className=\"top-right\">\n          <a target=\"_blank\" href=\"https://lekh.app/help.html\" className=\"help-link\">Help</a>\n        </div>\n        <div className=\"top-left-menu\">\n          <AppMenu showDialog={this.showDialog}/>\n        </div>\n        <div className=\"side-bar\">\n           <SideBarMenu />\n          </div>\n        <div className=\"footer-area\">\n          <Footer/>\n        </div>\n        {layover}\n        {this.state.dialog}\n        {this.state.ctxMenu && <ContextMenu showHandler={this.showContextMenu} pos={this.state.ctxMenuPos}/>}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.wsCallback);\n    AppInput.showContextMenu = this.showContextMenu;\n  }\n}\n\nexport default AppComponent;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}