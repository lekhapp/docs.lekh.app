{"version":3,"sources":["assests/icons/lekhboard-small.svg","assests/icons/Logo.svg","assests/icons/Logo-grey.png","assests/icons/google.svg","assests/icons/avatar.svg","components/Header/HeaderStyle.js","common/GlobalState.js","shapelib/Stencils.js","utils/EventListener.js","common/MenuState.js","common/AppInput.js","common/TouchInput.js","common/MouseInput.js","experimental/SpeechCommand.js","common/Command.js","common/KeyboardInput.js","common/AppEvent.js","integ/AtlasianIntegUI.js","components/LekhImporter/LekhImporter.jsx","components/Loaders/MiniLoader.jsx","utils/ApiConstants.jsx","utils/ApiUtils.jsx","utils/UserInfo.js","utils/ApiRequests.jsx","utils/DocsManager.js","common/Messaging.js","components/Picker/LekhItemPicker.jsx","common/Util.js","integ/atlassian.js","integ/integ.js","common/UIConfig.js","shapelib/Shapes.js","common/Canvas.js","components/Header/Feedback.js","components/Tip/QuickTip.js","components/InputField/InputField.jsx","hooks/useFetch.jsx","components/DashboardItems/ShareModal.jsx","utils/DocInfo.js","utils/RemoteResourceManager.js","components/ImageUploader/ImageUploader.jsx","components/PageList/PageManager.js","components/PageList/PageList.jsx","common/Config.js","components/PageSize/PageSize.jsx","components/Header/Menu.js","components/Footer/FooterStyle.js","components/Footer/Footer.js","components/SideBarMenu/SideBarStyle.js","components/LibCell/LibCell.js","Constant.js","common/DrawStyle.js","common/ColorList.js","components/SideBarMenu/StrokeStyle.js","components/SideBarMenu/SelectionGroupPopup.js","draggable/Panel.js","draggable/LekhDraggable.js","shapelib/MiniLib.js","shapelib/ShapesGroup.js","shapelib/FullLib.js","shapelib/ShapeLibrary.js","components/SideBarMenu/TextModePopup.js","shapeprops/PropsUtil.js","shapeprops/Help.js","shapeprops/EnumPicker.js","shapeprops/Property.js","shapeprops/LineStyle.js","shapeprops/FillColor.js","shapeprops/FontEditor.js","shapeprops/StyleEditor.js","shapeprops/ArrowCell.js","shapeprops/ConnectionEditor.js","shapeprops/ShapeProps.js","components/SideBarMenu/SideBarMenu.js","components/SideBarMenu/Content.js","utils/HttpUtil.js","common/AppInit.js","components/Layover/Layover.js","common/ContextMenu.js","gestures/Frame.js","gestures/Geometry.js","gestures/Dragger.js","gestures/Gestures.js","gestures/LandmarksFeatures.js","gestures/GestureRecognizer.js","gestures/LandmarkHandler.js","gestures/GesturePanel.jsx","App.js","common/Viewer.js","reportWebVitals.js","components/AuthLayout/AuthLayout.jsx","components/ModalContainer/ModalContainer.jsx","components/Loaders/FullLoader.jsx","hooks/useQuery.jsx","pages/auth/Confirm.jsx","pages/auth/ConfirmLogin.jsx","pages/auth/EmailLogin.jsx","pages/auth/Forgot.jsx","pages/auth/Login.jsx","pages/auth/OTPLogin.jsx","pages/auth/AuthUtil.jsx","pages/auth/Reset.jsx","pages/auth/SignUp.jsx","routes/PublicRoute.jsx","routes/AuthRoutes.jsx","hooks/useOnClickOutside.jsx","components/DashLayout/DashSidebar.jsx","components/DashLayout/DashboardTop.jsx","components/DashLayout/DashLayout.jsx","components/DashboardItems/DetailsModal.jsx","components/DashboardItems/RenameModal.jsx","components/DashboardItems/MoveModal.jsx","components/DashboardItems/DocumentListItem.jsx","pages/Dashboard/Dashboard.jsx","pages/Dashboard/Settings.jsx","routes/DashRoutes.jsx","components/DocsLog/DocsLogUtil.js","components/DocsLog/SessionViewer.jsx","components/DocsLog/DocsLogRoutes.jsx","components/DocsLog/SessionList.jsx","components/DocsLog/OfflineList.jsx","components/DocsLog/OfflineViewer.jsx","routes/Routes.jsx","index.js"],"names":["HeaderStyle","root","flexGrow","title","arrowUp","top","position","MainGrid","display","outClass","margin","bottom","border","paper","background","borderRadius","padding","textAlign","color","marginRight","right","minHeight","content","width","height","borderLeft","borderRight","borderBottom","marginLeft","fontSize","zIndex","responsicePaper","textIcon","paddingRight","checkIcon","appMenu","globalState","zoomHandler","setZoomHandler","cb","onZoom","window","Module","getZoom","stencilUrl","name","stencils","EventListener","this","listeners","addListener","indexOf","push","removeListener","idx","splice","trigger","data","e","console","log","modes","selection","move","draw","smartDraw","text","erase","laser","menus","selectionGroup","shapes","eraseAll","cameraInput","menuState","popup","selected","inputMode","selectionGroupVal","cameraActive","event","handleMenuClick","menu","canvas","mode","tpanel","document","getElementById","inputReceiver","setMode","InputMode","SELECTION","style","cursor","POINTING","DRAWING","enableRecognition","ERASING","handleMode","setTimeout","hasPopup","removePopup","inDrawMode","AppInput","showContextMenu","showShapeProps","drawPoints","drawing","transparentPanel","tnode","ignoreNextClick","updateCursorLoc","x","y","wsmanager","docid","uiMappedPt","mapPtUIScroll","inputFilter","pan","InputType","OTHER","finishTextEditing","val","remove","clearTransparentPanel","getContext","clearRect","drawTemp","ctx","lineJoin","lineCap","length","setCurrentStyleToCtx","beginPath","dp","moveTo","i","lineTo","stroke","dbclick","uiConfig","readOnly","tap","needTextEditing","rect","getTextEditRect","vpp","toViewPort","cx","cy","tid","Math","random","$","getTextForEditing","getTextEditStyle","effectiveFontSize","effectiveFontMultiplier","isFLoating","isEditingFloatingText","tattrs","effectivePlatformFontFamily","effectiveTextAlignHorizontal","value","updateSize","sz","getTextEditSize","css","append","on","code","key","initShapeTextEditor","dragMoveMode","kind","drawGrid","isEditingText","onResize","click","mpt","maprx","mapry","addClickCircle","drag","arc","PI","fillStyle","fill","lineWidth","strokeStyle","drawLaserCircle","dragLaser","it","START","END","pt","willDrawAt","mapPt","flushTempDrawing","dragNative","contextmenu","enter","leave","touchInput","active","discarded","touch","timer","twoFingerTap","touches","firstRemoved","secondRemoved","lastPos","lastTouch","buffer","doublePan","zoom","origZoom","gestures","activeGesture","activeTouches","initPos","gest","hasZoomCond","d1","dist","d2","abs","findTouches","t1","t2","id","updatePos","shift","mapTouches","ret","pageX","pageY","identifier","dx","dy","sqrt","attachEvents","canvasElement","addEventListener","ev","preventDefault","start","changedTouches","targetTouches","end","cancel","inProgress","j","reset","clearTimeout","ts","mid1x","mid1y","mid2x","mid2y","moveDelta","mouseInput","clickTimer","mdown","moved","initialX","initialY","savedZoom","pointerLoc","pointerLocation","ctrlKey","zm","newval","floor","deltaY","zoomAt","deltaX","round","scale","bean","button","offsetX","offsetY","x1","y1","x2","y2","speechCommand","cmdMap","addShape","recognition","SpeechRecognition","webkitSpeechRecognition","continuous","lang","interimResults","maxAlternatives","onresult","shape","handleText","results","transcript","command","inputModeChanged","getShapeAddLocation","loc","at","isVisible","getMidPoint","del","copy","cut","paste","pasteAt","selectAll","addBox","libraryStore","addObjectToCanvas","addCircle","addUser","addDb","addCloud","addNote","escape","handleEscapeKey","undo","redo","moveToFront","moveObjectToFront","moveToBack","moveObjectToBack","startSpeech","r","c","keyboardInput","showingDialog","postListeners","isMac","navigator","userAgent","handlers","addPostListener","removePostListener","handleKeyDown","toLowerCase","handled","handler","shiftKey","altKey","metaKey","appEvent","resizeListener","attachEventHandlers","evt","shouldAttachMouseEventHandler","shouldAttachKeyboardEventHandler","FileNameInputDialog","cancelText","okText","onCancel","onAccept","initialValue","useState","setValue","okDisabled","trim","Dialog","onClose","aria-labelledby","open","DialogTitle","DialogContent","TextField","autoFocus","fullWidth","variant","onChange","target","DialogActions","Button","onClick","disabled","ConfirmDialog","msg","MessageDialog","LekhImporter","showDialog","onImport","file","setFile","errMsg","setErrMsg","btnEnabled","handleSubmit","reader","FileReader","importLekh","result","readAsText","close","className","action","onSubmit","type","accept","changedFile","files","MiniLoader","constant","tokenName","expiryName","refreshToken","baseUrl","appUrl","backendVersion","userInfoLoading","userInfoError","userInfoAvailable","setRefreshTokenToStorage","token","localStorage","setItem","setExpiryTimeToStorage","date","getRefreshTokenFromStorage","getItem","removeRefreshTokenFromStorage","removeItem","available","loading","error","getCalled","userInfo","state","isUsingLekhBackend","handleStorageChange","fetchInfo","integ","getUser","info","getAccessTokenOnDemand","refreshTokenStr","a","resp","access_token","getCurrentUser","canUseGestures","isLoggedIn","features","gesture","loggedIn","err","onStoreChange","setErr","wasLoggedin","tryToRefreshToken","new_refresh_token","do_retry","retry","response","refresh_token","renewTokenBeforeExpiry","ApiRequestWithToken","config","baseURL","headers","axios","create","ApiRequestWithoutToken","withCredentials","fetcher","url","get","then","res","login","post","loginWithApple","getDocs","qstr","getDoc","docsManager","parent","search","order","orderBy","docs","path","arr","split","obj","item","encodeURIComponent","route","qparam","qpath","qs","parse","ignoreQueryPrefix","setPath","qsearch","serializePath","join","searchTerm","pop","deleteDoc","delete","reload","canCreateNewDoc","createDoc","getADoc","getFullPath","doc","unshift","duplicate","getChildFolders","folderId","getChildItems","folders","messaging","init","onMessage","origin","LekhItemPicker","pick","defaultTitle","pickText","folderOnly","setLoading","setData","userid","setParent","loginState","setLoginState","parentDoc","setParentDoc","selectedIdx","setSelectedIdx","Map","cache","childCache","useRef","signedIn","useEffect","getChildren","catch","fetchAccessToken","pickClass","signInMessage","href","rtoken","current","has","set","children","iframe","prefix","startsWith","iframeUrl","frameBorder","scrolling","vspace","hspace","marginHeight","marginWidth","src","map","m","isFolder","backClass","IconButton","require","default","util","generateUUID","d","Date","getTime","performance","now","replace","toString","mouseLocation","hasTouch","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","UA","test","loadScript","Promise","resolve","reject","script","createElement","async","onload","onerror","body","appendChild","macroType","macroKey","endsWith","draftAttachment","atlassian","integMode","customContentInfo","previousComputedHeight","docInfo","atlassianUserId","pageLocation","pageId","macroData","setAppState","contextToken","lekhAttachment","lekhAttachmentReadErr","editorInitTimer","numUpdatesInEditor","numPageAttrUpdate","draftSavedAtCounter","saveDraftTimer","draftSaveFailureWarnDone","has_touch","eventListener","waitList","eventTypes","logDebug","fn","cond","waitFor","sendEventToBackend","makeStr","JSON","stringify","String","attachmentName","diagramName","location","userId","product","showNotification","AP","flag","getPageContext","editor","closeEditor","getLocation","context","contentId","user","atlassianAccountId","getToken","readLekhAttachment","readDraftAttachment","handleAtlassianInit","confluence","getMacroData","Object","keys","customContentId","getContentInfo","decodeURIComponent","storage","status","v4","counter","integVersion","viewer","full","setViewerSize","clientRect","getBoundingClientRect","getBoundsOfAll","viewerHeight","viewerWidth","sx","sy","setScroll","setZoom","newHeight","ceil","resize","fileName","readAttachment","errObj","statusText","draftName","request","success","fetchBody","contentType","saveAttachment","comment","attFile","Blob","reqData","minorEdit","draftFlag","deleteDraft","tmp","getAttachmentInfo","saveDraft","curUpdatesCounter","lekhContent","getLekh","onDiagramChange","updates","finally","saveDraftAndClose","dialog","getDiagramsInPage","diagrams","processNode","node","tagName","isLekh","attributes","attrib","diagram","childNodes","param","innerHTML","processMacroNode","xmlDoc","DOMParser","parseFromString","publish","attName","customObj","spaceKey","version","number","saveCustomContent","custErr","custResp","respObj","imgData","exportToImage","fetch","blob","saveImage","imgErr","saveMacro","renameDiagram","curName","importLekhFile","setPageSize","importFromCloud","picker","getRemoteLekhContent","copyToLekhCloud","diagName","isUnique","count","newName","uploadDoc","startPageEditing","setSize","CanvasSizeType","Infinite","unit","Unit","Inch","setShowDialogHandler","dialogHandler","setStateForApp","params","useLekhBackend","showOptions","fileNameEditable","viewertype","makeLink","showEditOption","checkLicenseAndGetPageContext","lic","checkCustomContent","custom","head","getElementsByTagName","getIntegMode","getDocInfo","handleClickOnViewer","chrome","header","publishEditorChanges","loadDoc","LekhErrJson","send","startDoc","drawCanvas","setState","customizeSidebar","sidebarMenu","icon","size","concat","slice","customizeAppMenu","checkable","submenu","newMenu","handleLogoClick","shouldShowQuickTip","integImpl","isIntegration","offline","initForIntegMode","initForLekhBackendMode","initForOfflineMode","isIntegMode","isIntegViewer","isViewerLink","isFullViewer","shouldLoadShapes","shouldShowFooter","isZoomOnlyFooter","shouldShowPagesInFooter","shouldShowUndoRedoInFooter","shouldShowPublishCancelButton","expanded","libraryColCount","scroll","searchText","loadingUrls","Set","miniGroup","category","num","initEmptyCategs","initEmptyCateg","loadAll","initNames","libnames","contents","loadTemplate","json","promise","all","initObjects","initialize","onDisplaySettingChange","groupCount","getShapeLibGroupCount","getGroup","getShapeLibGroup","expandGroup","expandShapeLibGroup","getShapes","group","contentUrl","add","getMiniGroup","getDisplaySettings","getShapeLibDisplaySettings","setDisplaySetting","addDisplaySetting","filterObjects","showGrid","gridType","isScrolling","savedScroll","scrollingFrom","infiniteScroll","uiScrollX","uiScrollY","effectiveScrollX","effectiveScrollY","effectiveWidth","effectiveHeight","canvasWidth","canvasHeight","viewPortWidth","viewPortHeight","pageLayoutDoneOnce","fixCanvas","cnv","dpr","devicePixelRatio","vport","gridPanel","pageEditor","getSize","pixlesPerInch","pointsPerInch","getCanvasType","effectiveMinWidth","min","effectiveMinHeight","computeSize","left","toggleGrid","layout","onConnectionStateChanged","getScroll","moveDeltaForInfiniteScroll","moveForInfiniteScroll","pad","mapx","mapy","factor","z1","z2","uiPt","canvasPtX","canvasPtY","ptx","pty","format","cel","fillRect","drawCanvasForExport","toDataURL","panel","wd","ht","rad","step","startx","starty","drawCell","categ","row","col","drawArrow","layoutCanvas","Feedback","handleClose","feedbackForm","setFeedbackForm","handleChange","newEntry","submitDIsabled","message","htmlFor","required","tip","force","closed","showDoNotShowButton","show","getStorage","Storage","showing","showTip","doNotShowAgain","QuickTip","props","React","stateRef","useRefState","counterRef","setCounter","vid","paused","setAttribute","autoPlay","muted","loop","InputField","label","placeholder","pattern","errorText","useFetch","useSWR","ShareModal","email","setEmail","setType","access","setAccess","viewShares","setViewShares","copied","setCopied","setSuccess","setError","docUrl","privateForm","shareDoc","mutate","options","defaultValue","onCopy","shares","deleteShare","toast","resources","failedUrl","remoteResouceManager","addToResources","getResource","resid","substr","responseType","img","Image","URL","createObjectURL","onDataFromBackend","MaxSize","selectedImage","ImageUploader","setWidth","setHeight","uploading","setUploading","btnText","dataArray","FormData","insertImageWithResource","objectUrl","insertImage","revokeObjectURL","pageManager","curIdx","pages","load","getPages","numPages","page","getPageName","getPageId","changeOrder","oldIdx","newIdx","reorder","addPage","deletePage","rename","setPageName","duplicatePage","activePageIndex","setCurrent","select","showingDialogForKeyboardInput","RenameModal","orig","setName","ConfirmModal","PageContextMenu","showRenameDialog","setShowRenameDialog","showDeleteDialog","setShowDeleteDialog","PageList","anchorEl","setAnchorEl","showMenu","setShowMenu","menuIdx","setMenuIdx","scrollIntoView","block","onWebsocketUpdate","items","renderItem","provided","snapshot","rubric","source","index","rowId","ref","innerRef","draggableProps","setCurrentPage","dragHandleProps","onPageOption","currentTarget","pos","transform","ClickAwayListener","onClickAway","Popper","placement","listDiv","scrollTop","scrollHeight","onDragEnd","destination","onDragStart","droppableId","renderClone","droppableProps","draggableId","Config","mediaQuery","equal","val1","val2","PageSizeModal","selectedOption","setSelectedOption","customWidth","setCustomWidth","customHeight","setCustomHeight","setMarginWidth","setMarginHeight","setCustomSize","parseFloat","Fixed","setMarginSize","isInfinite","isCustom","cst","found","getMarginSize","selectStyles","base","newOption","toFixed","maxMenuHeight","styles","FileSaver","useStyles","makeStyles","Style","AppMenu","classes","snap","setSnap","grid","setGrid","setOpen","exportFile","exportPdf","exportImage","saveAs","getSvg","shareBoard","shareLoggedInBoard","copyLink","execCommand","SearchButton","InputProps","endAdornment","PageSize","focus","feedback","giveFeedback","orient","jsPDF","orientation","addImage","save","Grid","container","AppBar","boxShadow","Toolbar","alt","aria-label","handleClick","Menu","PaperProps","marginTop","option","checked","parentMenuOpen","subOption","MenuItem","FooterStyle","footer","justifyContent","backgroundColor","borderColor","filter","countClass","valueClass","iconClass","countBtn","minWidth","Footer","setCount","showPages","setShowPages","pagesAnchorEl","setPagesAnchorEl","zoomOnlyFooter","curCount","handleCount","handleAddCount","SideBarStyle","sideBar","sideBarMenu","alignItems","flexDirection","menuIcons","marginBottom","menuItem","sideMenuIcons","changeColor","spaceBwt","spaceBwtRound","expandedMenu","expandedMenuItem","expandedMenuItemActive","LibCell","canvasRef","enabled","CircleColors","ShapesList","SideBarMenuItems","subMenus","SideBarMenuItemsWithGestures","drawStyle","colorIndex","dashIndex","widthIndex","setColor","carr","colors","colorNameToVal","setStrokeColor","setDashIndex","setDashType","setWidthIndex","currentStyle","setStrokeWidth","ChessCircle","strokeWidth","WhiteCircle","ColorNameToVal","lineColors","extraColors","fillColors","ColorListOld","selectedIndex","onColorChange","ColorList","curColor","alpha","component","dr","red","dg","green","db","blue","getSelectedIndex","cl","StrokeStyle","setColorIndex","widthCircles","dashLines","getDashLines","dashLine","iconsId","onDashChange","getWidthCircles","wcircle","onWidthChange","subMenuIcons","transition","TransitionProps","Fade","timeout","Paper","SelectionGroupPopup","chooseSelectMode","setSelectionMode","chooseMoveMode","itemClass","itemClassActive","selectStyle","moveStyle","menuClass","dragging","update","DragPanel","LekhDraggable","setEnabled","updatePanel","cloneElement","onStart","onDrag","onStop","MiniLib","popperRef","createRef","expand","onDragStop","ShapesGroup","canvasId","searchTimer","SearchBox","searchCompleted","FullLib","showMoreSettings","showMoreSettingsRef","setShowMoreSttings","textBox","activeElement","keyboard","shapesGroupRef","icons","displaySettings","Switch","ShapeLibrary","setExpanded","containerRef","popUpRect","mid","onExpand","TextModePopup","propsUtil","connectionEditMaxHeight","showHelpMaxHeight","propertyEditMaxHeight","styleEditMaxHeight","getPlacement","maxHeight","tp","tpRect","clientWidth","clientHeight","getTopPlacement","Help","needToShowShapeHelp","startPropertyEditing","isValid","setNeedToShowShapeHelp","helpText","getHelpText","getBound","dangerouslySetInnerHTML","__html","EnumPicker","setSelectedVal","properties","getProperties","enumItems","done","List","ListItem","setVal","selectItem","ListItemText","primary","ListItemSecondaryAction","Property","showingEnum","setShowingEnum","enumPropIdx","setEnumPropIdx","needPropertyEditing","setNeedPropertyEditing","handleEnumSelect","changeBoolVal","changeNumberVal","plus","prop","minVal","maxVal","changeSliderVal","newVal","range","propVal","getSliderVal","max","valueType","Slider","finalize","LineStyle","effectiveStrokeWidth","effectiveStrokePaint","solidColor","dashType","getDashType","cls","setLineColor","FillColor","effectiveFillPaint","setFillColor","FontEditor","effectiveTextFill","fontSz","alignV","effectiveTextAlignVertical","alignHz","changeHzAlign","setHorizontalAlignment","changeVAlign","setVerticalAlignment","setFontSize","paddingTop","borderTop","setTextColor","StyleEditor","selectedTab","setSelectedTab","needStyleEditing","startStyleEditing","getObjectBound","setNeedStyleEditing","tab","ArrowCell","drawArrowCell","side","ConnectionEditor","needConnectionEditing","startConnectionEditing","setStartArrow","setEndArrow","arrowCount","startArrowType","endArrowType","arrowsLeft","arrowsRight","clientX","clientY","setNeedConnectionEditing","Select","disableUnderline","shapePropsUtil","ShapeProps","handleKey","isPropertyWindowOpen","dismissWindow","propsEdit","showHelp","styleEdit","connectionEdit","isDesktop","reloadSideBar","SideBarMenu","setPlacement","setSubMenuIcons","afterKeyHandling","getIconAndName","sidebar","sideMenuItems","detectedDevice","DeviceDetector","device","toLocaleLowerCase","newPlacement","Content","b64toBlob","base64","blobToBase64","resole","onloadend","readAsDataURL","blobToStr","toStr","requestHttp","reqId","hk","hv","pathname","method","timeoutSec","encodeResponseBase64","multiPart","mp","decodeValueBase64","mime","decodeRequestBase64","httpResp","MapStringString","substring","httpResponse","httpUtil","initPlatformImpl","requestLekhHttp","initializer","shapesInitDone","docDetailFetched","docStarted","apiBasePath","permission","toggleDebug","getLekhResource","sc","luaScripts","getBase64FromImage","drawImage","getRemoteResource","runtimeInitialized","initialInitDone","reactAppReady","searchParams","np","xhttp","XMLHttpRequest","onreadystatechange","readyState","responseText","setRequestHeader","onRuntimeInitialized","initInternal","scriptToAppend","appendScript","onDocDetailFetch","createNewDoc","newUrl","ws","WebSocket","onopen","setInterval","onmessage","updateDoc","updateObj","onclose","clearInterval","continueTrial","Layover","wsstate","key1","key2","div","ContextMenu","uiMapped","mappedPt","handleMenu","showHandler","cmStatus","getContextMenuStatus","canArrage","canSelectAll","canCut","canCopy","canPaste","canDelete","keyName","keepMounted","anchorReference","anchorPosition","rightIcon","divider","canvasCtx","cameraCtx","landmarkLines","mirrorPoint","npt","clearCameraCanvas","drawCenterText","font","fz","fillText","strokeText","restore","mkpt","p","z","pt2d","p1","p2","inOrder","pts","inord","p3","eq","LineEq","perp","crosses","A","B","C","eq2","D","Dx","Dy","atan2","LineSegment","len","point","near","solve","contains","distFrom","seg","eq1","got","Dragger","MOVE_DIST_REF","MOVE_DIST_SMALL_REF","MOVE_DIST_SMALL","last","lastRef","moving","points","ptref","addPoint","dx1","dx2","dy1","dy2","handleMove","checkMove","lastDrawMode","updateSidebarMenus","captureDrawMode","Gesture","dragger","ptidx","landmarks","lastpt","Drag1Gesture","track","sendPoints","checkClick","sendLastPoint","Drag2Gesture","ThumbGesture","PinchGesture","Features","backSide","indexBent","middleBent","ringBent","indexInOrder","middleInOrder","ringInOrder","indexCurved","middleCurved","ringCurved","getSide","pval","isCurved","p4","deg","ta","theta","acos","v1x","v1y","v2x","crossProduct","turn","turnAngle","drag1Active","drag2Active","RepeatedGesture","noop","gap","times","lastGesture","lastAt","GestureRecognizer","model","drag1Gesture","drag2Gesture","thumbGesture","pinchGesture","noopGesture","undoGesture","check","hand","getGesture","handleRepeated","getFeatures","isPinch","isThumb","isDrag2","dPinch","pinchLike","isDrag1","gestureRecognizer","prevGesture","pendingGesture","initStartTime","flashDuration","showingVideo","flashing","handle","line","drawLandmarks","curGesture","handleLast","activeptIdx","activePoint","drawActivePoint","showVideo","image","translate","handleLandmarkResults","multiHandLandmarks","lms","multiHandedness","initLandmarkHandler","cameraCanvas","cameraElement","devices","GesturePanel","showList","setShowList","showCamera","setShowCamera","initialized","setInitialized","startMediapipe","devId","frames","startCamera","outCanvas","mediaDevices","enumerateDevices","deviceInfos","deviceInfo","dev","deviceId","AppComponent","wsState","ctxMenu","ctxMenuPos","sideMenuSelectedItem","docInfoState","wsCallback","handleWSState","bind","layover","docName","loginLink","moveLink","fontWeight","publishChangesForIntegMode","public","Component","Viewer","wsStateHandler","attempt","self","setMouseCursor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AuthLayout","ModalContainer","parentOnClick","FullLoader","useLocation","useQuery","URLSearchParams","ConfirmUser","query","history","useHistory","ConfirmLogin","expires_at","EmailLogin","loginForm","setloginForm","successText","showSuccessText","proceed","to","Forgot","password","passwordForm","setpasswordForm","attemptedLoadingAppleScript","appleAuthInitialized","loadAppleScript","Login","formType","appleScriptLoaded","setAppleScriptLoaded","AppleID","auth","clientId","scope","redirectURI","usePopup","handleGoogleLoginFailure","googleData","handleGoogleLogin","tokenId","handleAppleLogin","signIn","firstName","lastName","authorization","id_token","first_name","last_name","render","renderProps","onSuccess","onFailure","cookiePolicy","OTPLogin","code_type","passwordCheck","Reset","cPassword","apiError","setApiError","SignUp","signUpForm","setSignUpForm","submitSuccess","setSubmitSuccess","PublicRoute","rest","AuthRouteList","exact","AuthRoutes","useClickOutside","callback","removeEventListener","NewBoard","DashSidebar","openNew","setOpenNew","setDocsState","docsManagerCb","activeClassName","MobileMenu","DashboardTop","settingsRef","openSettings","setOpenSettings","openMenu","setOpenMenu","setText","setSearchMode","getRoute","logout","DashLayout","DetailsModal","inScope","in_my_scope","created_at","toDateString","updated_at","owner","MoveModal","MoveDoc","DocumentListItem","share","setShare","showDetails","setShowDetails","setRename","setMove","deleting","setDeleting","handleOpen","pushParent","shared","Dashboard","setRoute","popParentTo","getRootName","Settings","current_password","updateForm","setupdateForm","new_password","DashRouteList","DashRoutes","setUserState","onUserInfoChange","PrivateRoute","dateStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","TopBar","curVersionIdx","playInterval","redraw","toggleAutoPlay","onTimer","applyNext","alert","hasNext","DocsLogRoutes","defKey","setKey","sessions","setSessions","setToken","nextToken","setNextToken","sess","ds","timestamp","num_updates","elm","parts","getDocsLogSessions","next_token","overflow","session","setSession","setUpdates","loadingMsg","setLoadingMsg","playing","getSession","hash","sessionid","getADocsLogSession","updatesArr","sort","b","getUpdates","updateArr","from","verStr","respIdx","onUpdatesLoaded","is_delta","RouteList","Routes","autoClose","hideProgressBar","newestOnTop","closeOnClick","pauseOnHover","openDoc","_new","replaceState","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.6750f7ac.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/lekhboard-small.d3d7afbf.svg\";","export default __webpack_public_path__ + \"static/media/Logo.30a79e97.svg\";","export default \"data:image/png;base64,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PgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczppcHRjRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo0YzMwZGYyNi1iODAwLTQzYjktYTg0Ny05NmYzMjhkODgwMjAiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NWNmNWNlYTctZGIzNy00M2Y4LTgyOGYtMmY0ZTI4ZjcyODRmIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MDBlMTVhODUtMDVlZS00YWZkLWE1MDQtYWM2ODEwYmZkNDgxIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJNYWMgT1MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjI5NzE1NTUxMTIwNjE4IgogICBHSU1QOlZlcnNpb249IjIuMTAuOCIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIzODIiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI1NDkiCiAgIHRpZmY6SW1hZ2VIZWlnaHQ9IjU0OSIKICAgdGlmZjpJbWFnZVdpZHRoPSIzODIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIj4KICAgPGlwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICA8aXB0Y0V4dDpMb2NhdGlvblNob3duPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgPGlwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICA8aXB0Y0V4dDpSZWdpc3RyeUlkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6UmVnaXN0cnlJZD4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2ExY2ZhNjUtNTJiOC00YWM3LWIzMzMtNWU3Y2FjZGFhZGJlIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKE1hYyBPUykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDgtMjNUMTY6MTU6NTErMDU6MzAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogICA8cGx1czpJbWFnZVN1cHBsaWVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VTdXBwbGllcj4KICAgPHBsdXM6SW1hZ2VDcmVhdG9yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VDcmVhdG9yPgogICA8cGx1czpDb3B5cmlnaHRPd25lcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkNvcHlyaWdodE93bmVyPgogICA8cGx1czpMaWNlbnNvcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkxpY2Vuc29yPgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+hRHudAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5QgXCi0ykomKzwAAByZJREFUeNrt1r/L1WUYwOH72JkSQsGttVXQqdV/QN0NWlykou3lVXBoCV8572ZEW5G4NzdETdH/0NpsYeAQclqkrfDXie85n+s6yxm/z/18eLhX25k5PTeP5/7R7dlz24EXd+aff8ebE+OgGb/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHP/M8eaLzcoIKcY/8/F8KX+a8c/ckj/V+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+GduzcPNWy6GYvwzH8y38qcZ/8wN+VONX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/68gvXBnOTGzOmHR89c6W5tvfxef8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8T/BvL/2kXTjH/mmoumGj+IH8QP4kf8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gf8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfpiZWRvBTtyci4d5sNX+H+HO9qn4d+nqXDeEhfpsnlp7sPOD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfsQP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/gRP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH88LLWRrAT9+abvf32R/O2+Hl1v+zxt/9l7QHxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxI34QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iR/wgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/Ej/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED//4pH4qfpkvhI/Tdv5qJG/+MnmL36y+YufbP7i57/yfyB+qvl/OvfFT9Xtw81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81/nbiIs5vvDvyEz+b46NfF5T9zvOShrbYzc3puHnuq9txvc2Vx+c+cLDD/89vfrT2H5d35cfOe5cfOL3/5i1/+8he//OUvfvnLX/zyz+cv/sPM/+fNRfmLv+nC/CB/8ctf/uKXv/zFL3/5i1/+7fzFL/9s/uKXfzZ/8cs/m7/45Z/NX/zyz+Z/ZjUrYcg/lf/q+c/LL//s6y9++WfzF7/8l5H/5+Knmv/duSN+qvmf/N/5i1/+2fzFL/9s/uKXfzZ/8cs/m7/45Z/NX/zyz+YvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uJnV/lfWnr+4mdX+f+0eX+R+W/Fz669M98vMv8/xE81f2sP8hc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzb/9czMPJnLZsyC/WkEALy+vwEv5uzdltH5GQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/google.97c84023.svg\";","export default __webpack_public_path__ + \"static/media/avatar.75fdf75c.svg\";","import React, { useState } from 'react';\n\n\nconst HeaderStyle = {\n    root: {\n        flexGrow: 1,\n    },\n    title: {\n        flexGrow: 1,\n    },\n    arrowUp: {\n        top: '54px',\n        position: 'absolute',\n    },\n    MainGrid: {\n        display: 'flex',\n        position: 'relative',\n    },\n    outClass: {\n        position: 'relative',\n        margin: '0 auto',\n        bottom: '2px',\n        border: '1px solid #d1d1d1',\n    },\n    paper: {\n        background: '#fff',\n        borderRadius: '8px',\n        padding: '15px 126px',\n        textAlign: 'center',\n        color: '#000',\n        position: 'absolute',\n        margin: '20px',\n        marginRight: '0',\n        right: '-10px',\n        top: '4px',\n        minHeight: '180px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    responsicePaper:{\n            width: '0px',\n            background: '#fff',\n            borderRadius: '8px',\n            padding: '0px 66px',\n            textAlign: 'center',\n            color: '#000',\n            margin: '20px',\n            marginRight: '0',\n            right: '19px',\n            top: '13px',\n            minHeight: '123px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    textIcon:{\n    margin: '-7px',\n    paddingRight: '8px',\n    },\n    checkIcon:{\n        position:'absolute',\n        margin:'5px'\n    },\n    appMenu: {\n        top: \"16px !important\"\n    }\n\n}\n\nexport default HeaderStyle;","var globalState = { }\n\nvar zoomHandler = null;\n\nglobalState.setZoomHandler = function(cb) {\n    zoomHandler = cb;\n}\n\nglobalState.onZoom = function() {\n    if (zoomHandler != null) {\n        zoomHandler(window.Module.getZoom());\n    }\n}\n\nexport default globalState;\n","function stencilUrl(name) {\n    return \"https://rajeevku02.github.io/lekhboard/stencils/v3/\" + name;\n}\n\nvar stencils = [\n    [\"Font Awesome Brands\", \"fab\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_brands.json\")],\n    [\"Font Awesome Solid\", \"fa\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_solid.json\")],\n    [\"Font Awesome Regular\", \"far\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_regular.json\")],\n    [\"Wireframe Big\", \"avabodh.wireframe.big\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Buttons\", \"avabodh.wireframe.buttons\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Forms\", \"avabodh.wireframe.forms\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Text\", \"avabodh.wireframe.text\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Layout\", \"avabodh.wireframe.layout\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Markup\", \"avabodh.wireframe.markup\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Media\", \"avabodh.wireframe.media\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe iOS\", \"avabodh.wireframe.ios\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Android\", \"avabodh.wireframe.android\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Misc\", \"avabodh.wireframe.misc\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe iOS Icons\", \"avabodh.wireframe.iosicons\", \"Software\", \"UI Wireframe\", stencilUrl(\"ios_icons.json\")],\n    [\"Network Infrastructure\", \"avabodh.networks\", \"Network\", \"Network Infrastructure\", stencilUrl(\"networks.json\")],\n    [\"Office Clouds\", \"avabodh.office.clouds\", \"Network\", \"Office\", stencilUrl(\"office_cloud.json\")],\n    [\"Office Communications\", \"avabodh.office.communications\", \"Network\", \"Office\", stencilUrl(\"office_communications.json\")],\n    [\"Office Concepts\", \"avabodh.office.concepts\", \"Network\", \"Office\", stencilUrl(\"office_concepts.json\")],\n    [\"Office Databases\", \"avabodh.office.databases\", \"Network\", \"Office\", stencilUrl(\"office_databases.json\")],\n    [\"Office Devices\", \"avabodh.office.devices\", \"Network\", \"Office\", stencilUrl(\"office_devices.json\")],\n    [\"Office Security\", \"avabodh.office.security\", \"Network\", \"Office\", stencilUrl(\"office_security.json\")],\n    [\"Office Servers\", \"avabodh.office.servers\", \"Network\", \"Office\", stencilUrl(\"office_servers.json\")],\n    [\"Office Services\", \"avabodh.office.services\", \"Network\", \"Office\", stencilUrl(\"office_services.json\")],\n    [\"Office Sites\", \"avabodh.office.sites\", \"Network\", \"Office\", stencilUrl(\"office_sites.json\")],\n    [\"Office Users\", \"avabodh.office.users\", \"Network\", \"Office\", stencilUrl(\"office_users.json\")],\n    [\"AWS Analytics\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Analytics\", \"Network\", \"AWS\", stencilUrl(\"aws_analytics.json\")],\n    [\"AWS Application Services\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Application Services\", \"Network\", \"AWS\", stencilUrl(\"aws_application_services.json\")],\n    [\"AWS Artificial Intelligence\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Artificial Intelligence\", \"Network\", \"AWS\", stencilUrl(\"aws_artificial_intelligence.json\")],\n    [\"AWS Business Productivity\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Business Productivity\", \"Network\", \"AWS\", stencilUrl(\"aws_business_productivity.json\")],\n    [\"AWS Compute\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Compute\", \"Network\", \"AWS\", stencilUrl(\"aws_compute.json\")],\n    [\"AWS Database\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Database\", \"Network\", \"AWS\", stencilUrl(\"aws_database.json\")],\n    [\"AWS Desktop & Streaming\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Desktop App Streaming\", \"Network\", \"AWS\", stencilUrl(\"aws_desktop_app_streaming.json\")],\n    [\"AWS Developer Tools\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Developer Tools\", \"Network\", \"AWS\", stencilUrl(\"aws_developer_tools.json\")],\n    [\"AWS Game Development\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Game Development\", \"Network\", \"AWS\", stencilUrl(\"aws_game_development.json\")],\n    [\"AWS General\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.General\", \"Network\", \"AWS\", stencilUrl(\"aws_general.json\")],\n    [\"AWS Internet of Things\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Internet of Things\", \"Network\", \"AWS\", stencilUrl(\"aws_internet_of_things.json\")],\n    [\"AWS Management Tools\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Management Tools\", \"Network\", \"AWS\", stencilUrl(\"aws_management_tools.json\")],\n    [\"AWS Messaging\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Messaging\", \"Network\", \"AWS\", stencilUrl(\"aws_messaging.json\")],\n    [\"AWS Migration\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Migration\", \"Network\", \"AWS\", stencilUrl(\"aws_migration.json\")],\n    [\"AWS Mobile Services\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Mobile Services\", \"Network\", \"AWS\", stencilUrl(\"aws_mobile_services.json\")],\n    [\"AWS Networking & Content Delivery\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Networking And Content Delivery\", \"Network\", \"AWS\", stencilUrl(\"aws_networking_and_content_delivery.json\")],\n    [\"AWS On Demand Workforce\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.On Demand Workforce\", \"Network\", \"AWS\", stencilUrl(\"aws_on_demand_workforce.json\")],\n    [\"AWS SDKs\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.SDKs\", \"Network\", \"AWS\", stencilUrl(\"aws_sdks.json\")],\n    [\"AWS Security Identity & Compliance\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Security Identity And Compliance\", \"Network\", \"AWS\", stencilUrl(\"aws_security_identity_and_compliance.json\")],\n    [\"AWS Storage\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Storage\", \"Network\", \"AWS\", stencilUrl(\"aws_storage.json\")],\n    [\"Azure Common\", \"avabodh.azure\", \"Network\", \"Azure\", stencilUrl(\"azure.json\")],\n    [\"Azure Cloud\", \"avabodh.azure.cloud\", \"Network\", \"Azure\", stencilUrl(\"mscae_cloud.json\")],\n    [\"Azure General\", \"avabodh.azure.general\", \"Network\", \"Azure\", stencilUrl(\"mscae_general.json\")],\n    [\"Azure Enterprise\", \"avabodh.azure.enterprise\", \"Network\", \"Azure\", stencilUrl(\"mscae_enterprise.json\")],\n    [\"Azure Intune\", \"avabodh.azure.intune\", \"Network\", \"Azure\", stencilUrl(\"mscae_intune.json\")],\n    [\"Azure System Center\", \"avabodh.azure.system_center\", \"Network\", \"Azure\", stencilUrl(\"mscae_system_center.json\")],\n    [\"Azure Other\", \"avabodh.azure.other\", \"Network\", \"Azure\", stencilUrl(\"mscae_other.json\")],\n    [\"GCP Big Data\", \"avabodh.GCP.Big Data\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_big_data.json\")],\n    [\"GCP Compute\", \"avabodh.GCP.Compute\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_compute.json\")],\n    [\"GCP Developer Tools\", \"avabodh.GCP.Developer Tools\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_developer_tools.json\")],\n    [\"GCP Extras\", \"avabodh.GCP.Extras\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_extras.json\")],\n    [\"GCP Identity & Security\", \"avabodh.GCP.Identity And Security\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_identity_and_security.json\")],\n    [\"GCP Machine Learning\", \"avabodh.GCP.Machine Learning\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_machine_learning.json\")],\n    [\"GCP Management Tools\", \"avabodh.GCP.Management Tools\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_management_tools.json\")],\n    [\"GCP Networking\", \"avabodh.GCP.Networking\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_networking.json\")],\n    [\"GCP Storage & Databases\", \"avabodh.GCP.Storage And Databases\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_storage_and_databases.json\")],\n    [\"Citrix\", \"avabodh.citrix\", \"Network\", \"Citrix\", stencilUrl(\"citrix.json\")],\n    [\"Cisco Buildings\", \"avabodh.cisco.buildings\", \"Network\", \"Cisco\", stencilUrl(\"cisco_buildings.json\")],\n    [\"Cisco Computers & Peripherals\", \"avabodh.cisco.computers_and_peripherals\", \"Network\", \"Cisco\", stencilUrl(\"cisco_computers_and_peripherals.json\")],\n    [\"Cisco Controllers & Modules\", \"avabodh.cisco.controllers_and_modules\", \"Network\", \"Cisco\", stencilUrl(\"cisco_controllers_and_modules.json\")],\n    [\"Cisco Directors\", \"avabodh.cisco.directors\", \"Network\", \"Cisco\", stencilUrl(\"cisco_directors.json\")],\n    [\"Cisco Hubs & Gateways\", \"avabodh.cisco.hubs_and_gateways\", \"Network\", \"Cisco\", stencilUrl(\"cisco_hubs_and_gateways.json\")],\n    [\"Cisco Misc\", \"avabodh.cisco.misc\", \"Network\", \"Cisco\", stencilUrl(\"cisco_misc.json\")],\n    [\"Cisco Modems & Phones\", \"avabodh.cisco.modems_and_phones\", \"Network\", \"Cisco\", stencilUrl(\"cisco_modems_and_phones.json\")],\n    [\"Cisco People\", \"avabodh.cisco.people\", \"Network\", \"Cisco\", stencilUrl(\"cisco_people.json\")],\n    [\"Cisco Routers\", \"avabodh.cisco.routers\", \"Network\", \"Cisco\", stencilUrl(\"cisco_routers.json\")],\n    [\"Cisco Security\", \"avabodh.cisco.security\", \"Network\", \"Cisco\", stencilUrl(\"cisco_security.json\")],\n    [\"Cisco Servers\", \"avabodh.cisco.servers\", \"Network\", \"Cisco\", stencilUrl(\"cisco_servers.json\")],\n    [\"Cisco Storage\", \"avabodh.cisco.storage\", \"Network\", \"Cisco\", stencilUrl(\"cisco_storage.json\")],\n    [\"Cisco Switches\", \"avabodh.cisco.switches\", \"Network\", \"Cisco\", stencilUrl(\"cisco_switches.json\")],\n    [\"Cisco Wireless\", \"avabodh.cisco.wireless\", \"Network\", \"Cisco\", stencilUrl(\"cisco_wireless.json\")],\n    [\"Rack APC\", \"avabodh.rack.APC\", \"Network\", \"Server Rack\", stencilUrl(\"rack_apc.json\")],\n    [\"Rack Cisco\", \"avabodh.rack.cisco\", \"Network\", \"Server Rack\", stencilUrl(\"rack_cisco.json\")],\n    [\"Rack Dell\", \"avabodh.rack.Dell\", \"Network\", \"Server Rack\", stencilUrl(\"rack_dell.json\")],\n    [\"Rack F5\", \"avabodh.rack.f5\", \"Network\", \"Server Rack\", stencilUrl(\"rack_f5.json\")],\n    [\"Rack General\", \"avabodh.rack.General\", \"Network\", \"Server Rack\", stencilUrl(\"rack_general.json\")],\n    [\"Rack HP\", \"avabodh.rack.HP\", \"Network\", \"Server Rack\", stencilUrl(\"rack_hp.json\")],\n    [\"Rack IBM\", \"avabodh.rack.IBM\", \"Network\", \"Server Rack\", stencilUrl(\"rack_ibm.json\")],\n    [\"Rack Oracle\", \"avabodh.rack.Oracle\", \"Network\", \"Server Rack\", stencilUrl(\"rack_oracle.json\")],\n    [\"Web Icons\", \"avabodh.webicons\", \"Network\", \"Web Icons\", stencilUrl(\"web_icons.json\")],\n    [\"Web Logos\", \"avabodh.weblogos\", \"Network\", \"Web Icons\", stencilUrl(\"web_logos.json\")],\n    [\"Sign Animals\", \"avabodh.signs.animals\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_animals.json\")],\n    [\"Sign Food\", \"avabodh.signs.food\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_food.json\")],\n    [\"Sign Healthcare\", \"avabodh.signs.healthcare\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_healthcare.json\")],\n    [\"Sign Nature\", \"avabodh.signs.nature\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_nature.json\")],\n    [\"Sign People\", \"avabodh.signs.people\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_people.json\")],\n    [\"Sign Safety\", \"avabodh.signs.safety\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_safety.json\")],\n    [\"Sign Science\", \"avabodh.signs.science\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_science.json\")],\n    [\"Sign Sports\", \"avabodh.signs.sports\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_sports.json\")],\n    [\"Sign Tech\", \"avabodh.signs.tech\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_tech.json\")],\n    [\"Sign Transportation\", \"avabodh.signs.transportation\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_transportation.json\")],\n    [\"Sign Travel\", \"avabodh.signs.travel\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_travel.json\")]\n]\n\nexport default stencils;","class EventListener {\n    constructor() {\n        this.listeners = [];\n\n        this.addListener = (cb) => {\n            var idx = this.listeners.indexOf(cb);\n            if (idx < 0) {\n                this.listeners.push(cb);\n            }\n        };\n\n        this.removeListener = (cb) => {\n            var idx = this.listeners.indexOf(cb);\n            if (idx >= 0) {\n                this.listeners.splice(idx, 1);\n            }\n        };\n\n        this.trigger = (data) => {\n            for (let cb of this.listeners) {\n                try {\n                    cb(data);\n                } catch (e) {\n                    console.log(e);\n                }\n            }\n        };\n    }\n}\n\nexport default EventListener;\n","import canvas from './Canvas'\nimport EventListener from '../utils/EventListener'\n\nvar modes = {\n    selection: 1,\n    move: 2,\n    draw: 3,\n    smartDraw: 4,\n    text: 5,\n    erase: 6,\n    laser: 7\n}\n\nvar menus = {\n    selectionGroup: 0,\n    selection: 1,\n    move: 2,\n    laser: 3,\n    draw: 4,\n    smartDraw: 5,\n    text: 6,\n    shapes: 7,\n    erase: 8,\n    eraseAll: 9,\n    cameraInput: 10\n}\n\nvar menuState = {\n    menus: menus,\n    modes: modes,\n    popup: null,\n    selected: menus.smartDraw,\n    inputMode: modes.smartDraw,\n    selectionGroupVal: modes.selection,\n    cameraActive: false,\n    event: new EventListener()\n} \n\nmenuState.handleMenuClick = function(menu) {\n    if (menu == menus.eraseAll) {\n        window.Module.eraseAll();\n        canvas.draw();\n        return;\n    }\n    \n    if (menu == menus.selectionGroup) {\n        if (menuState.popup == menus.selectionGroup) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.selectionGroup;\n        }\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = menuState.selectionGroupVal;\n    } else if (menu == menus.selection) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.selection;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.selection;\n    } else if (menu == menus.move) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.move;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.move;\n    } else if (menu == menus.laser) {\n        menuState.popup = null;\n        menuState.selected = menus.laser;\n        menuState.inputMode = modes.laser;\n    } else if (menu == menus.draw) {\n        if (menuState.popup == menus.draw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.draw;\n        }\n        menuState.selected = menus.draw;\n        menuState.inputMode = modes.draw;\n    } else if (menu == menus.smartDraw) {\n        if (menuState.popup == menus.smartDraw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.smartDraw;\n        }\n        menuState.selected = menus.smartDraw;\n        menuState.inputMode = modes.smartDraw;\n    } else if (menu == menus.text) {\n        if (menuState.popup == menus.text) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.text;\n        }\n        menuState.selected = menus.text;\n        menuState.inputMode = modes.text;\n    } else if (menu == menus.shapes) {\n        if (menuState.popup == menus.shapes) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.shapes;\n        }\n    } else if (menu == menus.erase) {\n        menuState.popup = null;\n        menuState.selected = menus.erase;\n        menuState.inputMode = modes.erase;\n    } else if (menu == menus.cameraInput) {\n        menuState.cameraActive = !menuState.cameraActive\n        menuState.popup = null;\n    }\n\n    handleMode();\n    window.setTimeout(()=> {\n        menuState.event.trigger();\n    }, 1);\n}\n\nmenuState.hasPopup = function() {\n    return menuState.popup != null;\n}\n\nmenuState.removePopup = function() {\n    menuState.popup = null;\n}\n\nmenuState.inDrawMode = function() {\n    return menuState.inputMode == modes.draw || menuState.inputMode == modes.smartDraw;\n}\n\nfunction handleMode() {\n    var mode = menuState.inputMode;\n    var tpanel = document.getElementById(\"transparentPanel\");\n\n    if (mode == modes.selection) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.move) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'all-scroll';\n    } else if (mode == modes.laser) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.POINTING);\n        tpanel.style.cursor = 'url(\"red_circle.svg\") 10 10, auto';\n    } else if (mode == modes.draw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(false);\n        tpanel.style.cursor = 'url(\"pen-solid.svg\") 0 20, auto';\n        //tpanel.style.cursor = 'auto';\n    } else if (mode == modes.smartDraw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(true);\n        //tpanel.style.cursor = 'url(\"pen-solid.svg\") 0 20, auto';\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.text) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'url(\"title_black.svg\") 0 20, auto';\n    } else if (mode == modes.erase) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.ERASING);\n        tpanel.style.cursor = 'url(\"eraser-solid.svg\"), auto';\n    }\n}\n\nexport default menuState;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport menuState from './MenuState'\nimport uiConfig from './UIConfig';\n\nvar AppInput = {\n  showContextMenu:()=>{},\n  showShapeProps: null\n};\n\nvar drawPoints = [];\nvar drawing = false;\nvar transparentPanel = null;\nvar tnode = null;\nvar ignoreNextClick = false;\n\nconst TextAlignHorizontalDefault = 0;\nconst TextAlignHorizontalCenter = 1;\nconst TextAlignHorizontalLeft = 2;\nconst TextAlignHorizontalRight = 3;\n\nfunction updateCursorLoc(x, y) {\n  var docid = window.wsmanager.docid\n  if (!docid || menuState.inputMode != menuState.modes.laser) {\n    return;\n  }\n\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y:y});\n  window.Module.inputFilter().pan(uiMappedPt, window.Module.InputType.OTHER);\n}\n\nfunction finishTextEditing() {\n  if (tnode != null) {\n    window.Module.finishTextEditing(tnode.val());\n    tnode.remove();\n    canvas.draw();\n    tnode = null;\n    ignoreNextClick = true;\n    return true;\n  }\n  return false;\n}\n\nfunction initShapeTextEditor() {\n  finishTextEditing()\n  ignoreNextClick = false;\n\n  var rect = window.Module.getTextEditRect();\n\n  var vpp = canvas.toViewPort({x: rect.x, y: rect.y});\n\n  var cx = vpp.x + rect.width / 2;\n  var cy = vpp.y + rect.height / 2;\n\n  var tid = Math.random() + \"t\";\n  tnode = $(\"<textarea id='\" + tid + \"'></textarea>\");\n  tnode.val(window.Module.getTextForEditing());\n  var style = window.Module.getTextEditStyle();\n  var fontSize = style.effectiveFontSize() * style.effectiveFontMultiplier();\n  var isFLoating = window.Module.isEditingFloatingText();\n\n  var tattrs = {\n    \"resize\": \"none\",\n    \"overflow\": \"hidden\",\n    \"position\": \"absolute\",\n    \"font\": style.effectivePlatformFontFamily(),\n    \"line-height\": fontSize + \"px\",\n    \"background-color\": \"transparent\",\n    \"left\": (vpp.x)+ \"px\", \n    \"top\": (vpp.y) + \"px\", \n    \"width\": rect.width + \"px\",\n    \"height\": rect.height + \"px\",\n    \"z-index\": \"1000\"\n  }\n\n  switch (style.effectiveTextAlignHorizontal().value) {\n    case TextAlignHorizontalDefault:\n    case TextAlignHorizontalCenter:\n      tattrs[\"text-align\"] = \"center\";\n      break;\n    case TextAlignHorizontalLeft:\n      tattrs[\"text-align\"] = \"left\";\n      break;\n    case TextAlignHorizontalRight:\n      tattrs[\"text-align\"] = \"right\";\n      break;\n    default:\n      break;\n  }\n  tnode.css(tattrs);\n  $(\"#drawContent\").append(tnode);\n  tnode.trigger(\"focus\");\n  tnode.on(\"blur\", function(e) {\n    finishTextEditing();\n  });\n  tnode.on(\"keyup\", function(e) {\n    if (e.code == \"Escape\" || e.key == \"Escape\") {\n      finishTextEditing();\n      ignoreNextClick = false;\n    }\n  });\n\n  function updateSize() {\n    if (!tnode) {\n      return;\n    }\n    var text = tnode.val();\n    var sz = window.Module.getTextEditSize(text, isFLoating);\n    if (sz.height == 0) {\n      sz.height = fontSize;\n    }\n    if (sz.width < 50) {\n      sz.width = 50;\n    }\n    sz.height += fontSize / 2;\n    tnode.css(\"top\", (cy - sz.height / 2) + \"px\");\n    tnode.css(\"height\", sz.height + \"px\");\n    if (isFLoating) {\n      var width = sz.width + 150;\n      tnode.css(\"width\", width + \"px\");\n      tnode.css(\"left\", (cx - width / 2) + \"px\");\n    }\n    //console.log(sz);\n  }\n \n  tnode.on('change keyup paste', updateSize);\n  updateSize();\n}\n\nconst drawLaserCircle = function(x, y) {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.beginPath();\n  ctx.arc(x, y, 32, 0, 2 * Math.PI, false);\n  ctx.fillStyle = 'red';\n  ctx.fill();\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = 'red';\n  ctx.stroke();\n}\n\nconst clearTransparentPanel = function() {\n  if (transparentPanel == null) {\n    transparentPanel = document.getElementById('transparentPanel')\n  }\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.clearRect(0, 0, transparentPanel.width, transparentPanel.height);\n}\n\nconst drawTemp = function() {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.lineJoin = \"round\";\n  ctx.lineCap = \"round\";\n\n  if (drawPoints.length > 0) {\n    window.Module.setCurrentStyleToCtx(ctx);\n    ctx.beginPath();\n    var dp = drawPoints[0];\n    ctx.moveTo(dp.x, dp.y);\n    \n    for (var i = 0; i < drawPoints.length; i++) {\n      ctx.lineTo(drawPoints[i].x, drawPoints[i].y);  \n    }\n    \n    ctx.stroke(); \n  }\n}\n\nconst dbclick = (x, y) => {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n  finishTextEditing()\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y: y});\n  window.Module.inputFilter().tap(uiMappedPt, 2);\n  canvas.draw();\n  if (window.Module.inputReceiver().needTextEditing()) {\n    initShapeTextEditor()\n  }\n}\n\nAppInput.isEditingText = function() {\n  return tnode != null;\n}\n\nAppInput.onResize = function() {\n  transparentPanel = null;\n}\n\nAppInput.ignoreNextClick = function(val) {\n  ignoreNextClick = val;\n}\n\nAppInput.click = function(x, y) {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n\n  finishTextEditing()\n  if (ignoreNextClick) {\n    ignoreNextClick = false;\n    return true;\n  }\n  if (menuState.inputMode == menuState.modes.move) {\n    // Ignore click for move mode\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.text) {\n    // Text mode. Edit text and return\n    dbclick(x, y);\n    return;\n  }\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y: y});\n  if (menuState.inputMode == menuState.modes.draw) {\n    var mpt = {x: canvas.maprx(uiMappedPt.x), y: canvas.mapry(uiMappedPt.y)};\n    window.Module.addClickCircle(mpt);\n  } else {\n    window.Module.inputFilter().tap(uiMappedPt, 1);\n  }\n  canvas.draw();\n\n  if (AppInput.showShapeProps) {\n    AppInput.showShapeProps();\n  }\n}\n\nAppInput.dbclick = function(x, y) {\n    dbclick(x, y);\n}\n\nAppInput.drag = function(x, y, kind) {\n    //console.log(x + \", \" + y + \"  ==  \" + kind);\n    finishTextEditing();\n    if (uiConfig.readOnly()) {\n        dragMoveMode(x, y, kind);\n        return;\n    }\n    ignoreNextClick = false;\n    if (menuState.inputMode == menuState.modes.move) {\n        dragMoveMode(x, y, kind);\n    } else if (menuState.inputMode == menuState.modes.text) {\n      // Text mode\n      if (kind == 2) {\n        dbclick(x, y);\n      }\n    } else if (menuState.inputMode == menuState.modes.laser) {\n      dragLaser(x, y, kind);\n    }  else {\n      dragNative(x, y, kind);\n    }\n}\n\nfunction dragLaser(x, y, kind) {\n  if (kind == 2) {\n    clearTransparentPanel();\n  } else {\n    drawLaserCircle(x, y);\n  }\n  updateCursorLoc(x, y);\n}\n\nfunction dragNative(x, y, kind) {\n    var it = window.Module.InputType.START;\n    if (kind == 1) {\n        it = window.Module.InputType.OTHER;\n    } else if (kind == 2) {\n        it = window.Module.InputType.END\n    }\n    var pt = {x: x, y: y }\n    var uiMappedPt = canvas.mapPtUIScroll(pt);\n    var mpt = {x: canvas.maprx(uiMappedPt.x), y: canvas.mapry(uiMappedPt.y)};\n\n    if (it == window.Module.InputType.START && menuState.inDrawMode()) {\n      if (window.Module.willDrawAt(mpt)) {\n        drawing = true;\n      }\n    }\n\n    if (drawing) {\n      drawPoints.push(pt);\n      drawTemp();\n    } else {\n      window.Module.inputFilter().pan(uiMappedPt, it);\n      canvas.draw();\n    }\n\n    if (it == window.Module.InputType.END && drawing) {\n      drawing = false;\n      flushTempDrawing();\n    }\n}\n\nfunction flushTempDrawing() {\n  const mapPt = (pt) => canvas.mapPtUIScroll(pt);\n  if (drawPoints.length > 2) {\n    window.Module.inputFilter().pan(mapPt(drawPoints[0]), window.Module.InputType.START);\n    for (var i = 1; i < drawPoints.length - 1; i++) {\n      window.Module.inputFilter().pan(mapPt(drawPoints[i]), window.Module.InputType.OTHER);\n    }\n    var pt = drawPoints[drawPoints.length - 1];\n    window.Module.inputFilter().pan(mapPt(pt), window.Module.InputType.END);\n  }\n  canvas.draw();\n  drawPoints = [];\n  drawTemp();\n}\n\nfunction dragMoveMode(x, y, kind) {\n    canvas.move(x, y, kind);\n    canvas.drawGrid();\n    canvas.draw();\n}\n\nAppInput.contextmenu = function(x, y) {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.selection ||\n    menuState.inputMode == menuState.modes.draw ||\n    menuState.inputMode == menuState.modes.smartDraw) {\n    AppInput.showContextMenu(true, x, y);\n  }\n}\n\nAppInput.enter = function(x, y) {\n}\n\nAppInput.move = function(x, y) {\n  updateCursorLoc(x, y)\n}\n\nAppInput.leave = function(x, y) {\n}\n\nexport default AppInput;\n","import AppInput from './AppInput'\nimport canvas from './Canvas'\nimport menuState from './MenuState';\n\nvar touchInput = {}\n\nconst panThreshold = 6;\nconst doublePanThreshold = 12;\nconst zoomThreshold = 25;\nconst doubleTapIntervalMS = 300;\n\nvar tap = {\n    active: false,\n    discarded: false,\n    touch: null,\n    timer: null\n}\n\nvar twoFingerTap = {\n    active: false,\n    discarded: false,\n    touches: [],\n    firstRemoved: false,\n    secondRemoved: false,\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}]\n}\n\nvar pan = {\n    active: false,\n    discarded: false,\n    touch: null,\n    lastTouch: null,\n    buffer: []\n}\n\nvar doublePan = {\n    active: false,\n    discarded: false,\n    touches: [],\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}]\n}\n\nvar zoom = {\n    active: false,\n    discarded: false,\n    touches: [],\n    lastPos: [{x:0, y:0}, {x:0, y:0}, {x:0, y:0}, {x:0, y:0}],\n    origZoom: 1.0\n}\n\nvar gestures = [tap, twoFingerTap, pan, doublePan, zoom];\nvar activeGesture = null;\n\nvar activeTouches = [];\n\nfunction initPos(gest) {\n    gest.lastPos[0].x = gest.touches[0].x;\n    gest.lastPos[0].y = gest.touches[0].y;\n\n    gest.lastPos[1].x = gest.touches[1].x;\n    gest.lastPos[1].y = gest.touches[1].y;\n\n    gest.lastPos[2].x = gest.touches[0].x;\n    gest.lastPos[2].y = gest.touches[0].y;\n\n    gest.lastPos[3].x = gest.touches[1].x;\n    gest.lastPos[3].y = gest.touches[1].y;\n}\n\nfunction hasZoomCond(gest) {\n    var d1 = dist(gest.lastPos[0], gest.lastPos[1]);\n    var d2 = dist(gest.lastPos[2], gest.lastPos[3]);\n    return Math.abs(d1 - d2) > zoomThreshold;\n}\n\nfunction hasPanCond(gest) {\n    if (dist(gest.lastPos[0], gest.lastPos[2]) > doublePanThreshold &&\n        dist(gest.lastPos[1], gest.lastPos[3]) > doublePanThreshold) {\n        var mid1 = {x: (gest.lastPos[0].x + gest.lastPos[1].x) / 2, y: (gest.lastPos[0].y + gest.lastPos[1].y) / 2}\n        var mid2 = {x: (gest.lastPos[2].x + gest.lastPos[3].x) / 2, y: (gest.lastPos[2].y + gest.lastPos[3].y) / 2}\n        return dist(mid1, mid2) > doublePanThreshold;\n    }\n    return false;\n}\n\nfunction findTouches(gest, touches) {\n    var t1 = null;\n    var t2 = null;\n\n    for (var i = 0; i < touches.length; i++) {\n        if (gest.touches.length > 0 && touches[i].id == gest.touches[0].id) {\n            t1 = touches[i];\n        }\n        if (gest.touches.length > 1 && touches[i].id == gest.touches[1].id) {\n            t2 = touches[i];\n        }\n    }\n\n    return {t1: t1, t2: t2};\n}\n\nfunction updatePos(gest, t1, t2, shift) {\n    if (shift) {\n        gest.lastPos[0].x = gest.lastPos[2].x;\n        gest.lastPos[0].y = gest.lastPos[2].y;\n\n        gest.lastPos[1].x = gest.lastPos[3].x;\n        gest.lastPos[1].y = gest.lastPos[3].y;\n    }\n    if (t1 == null) {\n        gest.lastPos[2].x = gest.lastPos[0].x;\n        gest.lastPos[2].y = gest.lastPos[0].y;\n    } else {\n        gest.lastPos[2].x = t1.x;\n        gest.lastPos[2].y = t1.y;\n    }\n    if (t2 == null) {\n        gest.lastPos[3].x = gest.lastPos[1].y;\n        gest.lastPos[3].y = gest.lastPos[1].y;\n    } else {\n        gest.lastPos[3].x = t2.x;\n        gest.lastPos[3].y = t2.y;\n    }\n}\n\nfunction mapTouches(touches) {\n    var ret = []\n    for (var i = 0; i < touches.length; i++) {\n        ret.push({\n            x: touches[i].pageX,\n            y: touches[i].pageY,\n            id: touches[i].identifier\n        });\n    }\n    return ret;\n}\n\nfunction dist(t1, t2) {\n    var dx = t1.x - t2.x;\n    var dy = t1.y - t2.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\ntouchInput.attachEvents = function(canvasElement) {\n    canvasElement.addEventListener('touchstart', function(ev) {\n      ev.preventDefault();\n      touchInput.start(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchmove', function(ev) {\n      ev.preventDefault();\n      touchInput.move(ev.targetTouches);\n    });\n    canvasElement.addEventListener('touchend', function(ev) {\n      ev.preventDefault();\n      touchInput.end(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchleave', function(ev) {\n      ev.preventDefault();\n      touchInput.cancel(ev.changedTouches);\n    });\n    canvasElement.addEventListener('touchcancel', function(ev) {\n      ev.preventDefault();\n      touchInput.cancel(ev.changedTouches);\n    });\n  }\n\ntouchInput.inProgress = function() {\n    return activeTouches.length > 0;\n}\n\ntouchInput.start = function(touches) {\n    if (activeGesture != null) {\n        return;\n    }\n    touches = mapTouches(touches);\n\n    for (var i = 0; i < touches.length; i++) {\n        activeTouches.push(touches[i]);\n    }\n    for (var i = 0; i < gestures.length; i++) {\n        if (!gestures[i].discarded) {\n            gestures[i].start(touches);\n            if (gestures[i].active) {\n                activeGesture = gestures[i];\n                break;\n            }\n        }\n    }\n}\n\ntouchInput.move = function(touches) {\n    touches = mapTouches(touches);\n    if (activeGesture != null) {\n        activeGesture.move(touches);\n    } else {\n        for (var i = 0; i < gestures.length; i++) {\n            if (!gestures[i].discarded) {\n                gestures[i].move(touches);\n                if (gestures[i].active) {\n                    activeGesture = gestures[i];\n                    break;\n                }\n            }\n        }\n    }\n}\n\ntouchInput.end = function(touches) {\n    touches = mapTouches(touches);\n    for (var i = 0; i < touches.length; i++) {\n        for (var j = 0; j < activeTouches.length; j++) {\n            if (touches[i].id == activeTouches[j].id) {\n                activeTouches.splice(j, 1);\n                break;\n            }\n        }\n    }\n    if (activeGesture != null) {\n        activeGesture.end(touches);\n    } else {\n        for (var i = 0; i < gestures.length; i++) {\n            if (!gestures[i].discarded) {\n                gestures[i].end(touches);\n                if (gestures[i].active) {\n                    activeGesture = gestures[i];\n                    break;\n                }\n            }\n        }\n    }\n    if (activeTouches.length == 0) {\n        touchInput.reset();\n    }\n}\n\ntouchInput.cancel = function(touches) {\n    touchInput.reset();\n}\n\ntouchInput.reset = function() {\n    for (var i = 0; i < gestures.length; i++) {\n        gestures[i].reset();\n        gestures[i].discarded = false;\n        gestures[i].active = false;\n    }\n    activeGesture = null;\n    activeTouches = [];\n}\n\ntap.start = function(touches) {\n    if (tap.touch != null) {\n        tap.discarded = true;\n        return;\n    }\n    if (touches.length > 1) {\n        tap.discarded = true;\n        return;\n    }\n    tap.touch = touches[0];\n}\n\ntap.move = function(touches) {\n    if (tap.touch == null) {\n        return;\n    }\n    if (touches.length != 1 || touches[0].id != tap.touch.id) {\n        tap.discarded = true;\n    } else {\n        if (dist(tap.touch, touches[0]) > panThreshold) {\n            tap.discarded = true;\n        }\n    }\n}\n\ntap.end = function(touches) {\n    if (tap.touch == null) {\n        return;\n    }\n    if (touches.length != 1 || touches[0].id != tap.touch.id) {\n        tap.discarded = true;\n    } else if (dist(tap.touch, touches[0]) > panThreshold) {\n        tap.discarded = true;\n    } else {\n        var x = tap.touch.x;\n        var y = tap.touch.y;\n        if (tap.timer != null) {\n            clearTimeout(tap.timer);\n            tap.timer = null;\n            AppInput.dbclick(x, y);\n        } else {\n            tap.timer = setTimeout(function() {\n                tap.timer = null;\n                AppInput.click(x, y);\n            }, doubleTapIntervalMS);\n        }\n    }\n    tap.active = false;\n}\n\ntap.reset = function() {\n    tap.touch = null;\n    tap.active = false;\n    if (activeGesture == tap) {\n        activeGesture = null;\n    }\n}\n\ntwoFingerTap.start = function(touches) {\n    if (twoFingerTap.touches.length + touches.length > 2) {\n        twoFingerTap.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        twoFingerTap.touches.push(touches[i]);\n    }\n\n    if (twoFingerTap.touches.length == 2) {\n        initPos(twoFingerTap);\n        twoFingerTap.firstRemoved = false;\n        twoFingerTap.secondRemoved = false;\n    }\n}\n\ntwoFingerTap.move = function(touches) {\n    if (twoFingerTap.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(twoFingerTap, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    updatePos(twoFingerTap, ts.t1, ts.t2, false);\n}\n\ntwoFingerTap.end = function(touches) {\n    var ts = findTouches(twoFingerTap, touches);\n    if (ts.t1 != null) {\n        twoFingerTap.firstRemoved = true;\n    }\n    if (ts.t2 != null) {\n        twoFingerTap.secondRemoved = true;\n    }\n    if (twoFingerTap.firstRemoved && twoFingerTap.secondRemoved) {\n        if (dist(twoFingerTap.lastPos[0], twoFingerTap.lastPos[2]) < panThreshold &&\n        dist(twoFingerTap.lastPos[1], twoFingerTap.lastPos[3]) < panThreshold) {\n            var x = (twoFingerTap.lastPos[0].x + twoFingerTap.lastPos[1].x) / 2;\n            var y = (twoFingerTap.lastPos[0].y + twoFingerTap.lastPos[1].y) / 2;\n            AppInput.contextmenu(x, y);\n        }\n        twoFingerTap.reset();\n    }\n}\n\ntwoFingerTap.reset = function() {\n    twoFingerTap.touches = [];\n    twoFingerTap.active = false;\n    twoFingerTap.firstRemoved = false;\n    twoFingerTap.secondRemoved = false;\n}\n\npan.start = function(touches) {\n    if (pan.active) {\n        return;\n    }\n\n    if (pan.touch != null) {\n        pan.discarded = true;\n        return;\n    }\n    if (touches.length > 1) {\n        pan.discarded = true;\n        return;\n    }\n    pan.touch = touches[0];\n    pan.lastTouch = pan.touch;\n    pan.buffer.push(touches[0]);\n}\n\npan.move = function(touches) {\n    if (pan.touch == null || touches.length > 1 ||\n        touches[0].id != pan.touch.id) {\n        return;\n    }\n    var touch = touches[0];\n    pan.lastTouch = touch;\n\n    if (pan.active) {\n        AppInput.drag(touch.x, touch.y, 1);\n    } else if (dist(touch, pan.touch) > panThreshold) {\n        pan.active = true;\n        if (pan.buffer.length > 0 && menuState.inputMode == menuState.modes.smartDraw) {\n            // for intelligent mode, ignore the first touch point\n            pan.buffer.splice(0, 1);\n        }\n        if (pan.buffer.length > 0) {\n            AppInput.drag(pan.buffer[0].x, pan.buffer[0].y, 0);    \n        } else {\n            AppInput.drag(touch.x, touch.y, 0);\n        }\n        for (var i = 1; i < pan.buffer.length; i++) {\n            AppInput.drag(pan.buffer[i].x, pan.buffer[i].y, 1);    \n        }\n        AppInput.drag(touch.x, touch.y, 1);\n        pan.buffer = [];\n    } else {\n        pan.buffer.push(touch);\n    }\n}\n\npan.end = function(touches) {\n    pan.reset();\n}\n\npan.reset = function() {\n    if (pan.active) {\n        AppInput.drag(pan.lastTouch.x, pan.lastTouch.y, 2);\n    }\n    pan.active = false;\n    pan.touch = null;\n    pan.lastTouch = null;\n    pan.buffer = [];\n    if (activeGesture == pan) {\n        activeGesture = null;\n    }\n}\n\ndoublePan.start = function(touches) {\n    if (doublePan.active) {\n        return;\n    }\n\n    if (doublePan.touches.length + touches.length > 2) {\n        doublePan.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        doublePan.touches.push(touches[i]);\n    }\n\n    if (doublePan.touches.length == 2) {\n        initPos(doublePan);\n    }\n}\n\ndoublePan.move = function(touches) {\n    if (doublePan.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(doublePan, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    if (doublePan.active) {\n        updatePos(doublePan, ts.t1, ts.t2, true);\n        var mid1x = (doublePan.lastPos[0].x + doublePan.lastPos[1].x) / 2;\n        var mid1y = (doublePan.lastPos[0].y + doublePan.lastPos[1].y) / 2;\n        var mid2x = (doublePan.lastPos[2].x + doublePan.lastPos[3].x) / 2;\n        var mid2y = (doublePan.lastPos[2].y + doublePan.lastPos[3].y) / 2;\n        canvas.moveDelta(mid2x - mid1x, mid2y - mid1y);\n    } else {\n        updatePos(doublePan, ts.t1, ts.t2, false);\n        if (hasPanCond(doublePan) && !hasZoomCond(doublePan)) {\n            doublePan.active = true;  \n        }\n    }\n}\n\ndoublePan.end = function(touches) {\n    doublePan.reset();\n}\n\ndoublePan.reset = function() {\n    doublePan.touches = [];\n    doublePan.active = false;\n    if (activeGesture == doublePan) {\n        activeGesture = null;\n    }\n}\n\nzoom.start = function(touches) {\n    if (zoom.active) {\n        return;\n    }\n\n    if (zoom.touches.length + touches.length > 2) {\n        zoom.discarded = true;\n        return;\n    }\n\n    for (var i = 0; i < touches.length; i++) {\n        zoom.touches.push(touches[i]);\n    }\n\n    if (zoom.touches.length == 2) {\n        initPos(zoom);\n    }\n}\n\nzoom.move = function(touches) {\n    if (zoom.touches.length != 2) {\n        return;\n    }\n\n    var ts = findTouches(zoom, touches);\n    if (ts.t1 == null && ts.t2 == null) {\n        return;\n    }\n\n    updatePos(zoom, ts.t1, ts.t2, false);\n    if (zoom.active) {\n        var d1 = dist(zoom.lastPos[0], zoom.lastPos[1]);\n        var d2 = dist(zoom.lastPos[2], zoom.lastPos[3]);\n        canvas.zoom((zoom.origZoom * d2) / d1);\n    } else {\n        if (hasZoomCond(zoom)) {\n            zoom.origZoom = window.Module.getZoom()\n            zoom.active = true;\n        }\n    }\n}\n\nzoom.end = function(touches) {\n    zoom.reset();\n}\n\nzoom.reset = function() {\n    zoom.touches = [];\n    zoom.active = false;\n    zoom.origZoom = 1.0;\n    if (activeGesture == zoom) {\n        activeGesture = null;\n    }\n}\n\nexport default touchInput;","import AppInput from './AppInput'\nimport canvas from './Canvas'\nimport touchInput from './TouchInput'\n\nvar mouseInput = { };\n\nconst doubleClickIntervalMS = 300;\nconst dragMinDist = 4;\n\nvar clickTimer = null;\nvar mdown = false;\nvar moved = false;\nvar initialX = null;\nvar initialY = null;\nvar savedZoom = 1.0;\n\nvar pointerLoc = {x: null, y: null};\n\nfunction dist(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nmouseInput.pointerLocation = () => {\n  return pointerLoc;\n}\n\nmouseInput.attachEvents = function(canvasElement) {\n    canvasElement.addEventListener('wheel', (e) => {\n        e.preventDefault();\n        if (e.ctrlKey) {\n          var zm = canvas.getZoom();\n          var newval  = Math.floor(zm * 100 - e.deltaY);\n          if (newval >= 5) {\n              canvas.zoomAt(e.pageX, e.pageY, newval / 100);\n          }        \n        } else {\n          canvas.moveDelta(-e.deltaX, -e.deltaY);\n        }\n    });\n      \n    canvasElement.addEventListener(\"gesturestart\", function (e) {\n        e.preventDefault();\n        if (touchInput.inProgress()) {\n          return;\n        }\n        savedZoom = window.Module.getZoom();\n    });\n      \n    canvasElement.addEventListener(\"gesturechange\", function (e) {\n        e.preventDefault();\n        if (touchInput.inProgress()) {\n          return;\n        }\n        var newval = Math.round(savedZoom * e.scale * 100) / 100;\n        canvas.zoomAt(e.pageX, e.pageY, newval);\n    });\n      \n    canvasElement.addEventListener(\"gestureend\", function (e) {\n        e.preventDefault();\n    });\n  \n    window.bean.on(canvasElement, 'click', function (e) {\n        e.preventDefault();\n        if (e.button == 2) {\n          AppInput.contextmenu(e);\n          return;\n        }\n        if (e.button != 0) {\n          return;\n        }\n        if (moved) {\n          moved = false;\n          return;\n        }\n  \n        if (clickTimer != null) {\n            clearTimeout(clickTimer);\n            clickTimer = null;\n            AppInput.dbclick(e.offsetX, e.offsetY);\n        } else {\n            clickTimer = setTimeout(function () {\n                clickTimer = null;\n                AppInput.click(e.offsetX, e.offsetY);\n            }, doubleClickIntervalMS);\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mousedown', function (e) {\n        if (e.button != 0) {\n          return;\n        }\n        initialX = e.offsetX;\n        initialY = e.offsetY;\n        mdown = true;\n    });\n  \n    window.bean.on(canvasElement, 'mouseup', function (e) {\n        if (e.button == 0) {\n          mdown = false;\n          if (moved) {\n            AppInput.drag(e.offsetX, e.offsetY, 2);\n          }\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mousemove', function (e) {\n        e.preventDefault();\n        // update pointer location\n        pointerLoc.x = e.offsetX;\n        pointerLoc.y = e.offsetY;\n        \n        if (mdown && e.button != 0) {\n          return;\n        }\n  \n        if (!mdown) {\n          AppInput.move(e.offsetX, e.offsetY);\n          return;\n        }\n        if (moved) {\n          AppInput.drag(e.offsetX, e.offsetY, 1);\n        } else {\n          if (dist(initialX, initialY, e.offsetX, e.offsetY) >= dragMinDist) {\n            moved = true;\n            AppInput.drag(initialX, initialY, 0);\n            AppInput.drag(e.offsetX, e.offsetY, 1);\n          }\n        }\n    });\n  \n    window.bean.on(canvasElement, 'mouseenter', function (e) {\n        AppInput.enter(e.offsetX, e.offsetY);\n    });\n  \n    window.bean.on(canvasElement, 'mouseleave', function (e) {\n        if (moved) {\n          AppInput.drag(e.offsetX, e.offsetY, 2);\n          moved = false;\n          mdown = false;\n        } else {\n            AppInput.leave(e.offsetX, e.offsetY);\n        }\n    });\n  \n    window.bean.on(canvasElement, 'contextmenu', function (e) {\n        e.preventDefault();\n        AppInput.contextmenu(e.offsetX, e.offsetY);\n    });\n}\n\nexport default mouseInput;\n","var speechCommand = { }\n\nconst cmdMap = {\n    \"start a flowchart\": [2, 20],\n    \"start flowchart\": [2, 20],\n    \"start\": [2, 20],\n    \"end\": [2, 20],\n    \"done\": [2, 20],\n    \"end the flowchart\": [2, 20],\n    \"add input\": [2, 4],\n    \"input\": [2, 4],\n    \"add decision\": [2, 1],\n    \"decision\": [2, 1],\n    \"add process\": [2, 0],\n    \"process\": [2, 0],\n}\n\nconst handleText = (text, addShape) => {\n    console.log(text);\n    var shape = cmdMap[text];\n    if (shape) {\n        addShape(shape[0], shape[1]);\n    }\n}\n\nspeechCommand.start = (addShape) => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition    \n    var recognition = new SpeechRecognition();\n    //var grammar = '#JSGF V1.0; grammar colors; public <color> = aqua | azure | beige | bisque | black | blue | brown | chocolate | coral | crimson | cyan | fuchsia | ghostwhite | gold | goldenrod | gray | green | indigo | ivory | khaki | lavender | lime | linen | magenta | maroon | moccasin | navy | olive | orange | orchid | peru | pink | plum | purple | red | salmon | sienna | silver | snow | tan | teal | thistle | tomato | turquoise | violet | white | yellow ;'\n    //var speechRecognitionList = new SpeechGrammarList();\n    //speechRecognitionList.addFromString(grammar, 1);\n    //recognition.grammars = speechRecognitionList;\n    recognition.continuous = false;\n    recognition.lang = 'en-US';\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n\n    recognition.onresult = function(event) {\n        var text = event.results[0][0].transcript;\n        handleText(text, addShape);\n    }\n\n    recognition.start();\n    console.log('Ready to receive speech command.');\n}\n\nexport default speechCommand;","import canvas from './Canvas'\nimport mouseInput from './MouseInput'\nimport menuState from './MenuState'\nimport speechCommand from '../experimental/SpeechCommand';\n\nvar command = {inputModeChanged: false };\n\nfunction getShapeAddLocation() {\n    var loc = mouseInput.pointerLocation();\n    var at = null;\n    if (loc.x == null || loc.y == null || !canvas.isVisible(loc.x, loc.y, 40)) {\n        at = canvas.getMidPoint();\n    } else {\n        at = loc;\n    }\n    at = canvas.mapPtUIScroll(at);\n    at = {x: canvas.maprx(at.x), y: canvas.mapry(at.y)};\n    return at;\n}\n\ncommand.del = () => {\n    window.Module.del();\n}\n\ncommand.copy = () => {\n    window.Module.copy();\n}\n\ncommand.cut = () => {\n    window.Module.cut();\n}\n\ncommand.paste = () => {\n    window.Module.paste();\n}\n\ncommand.pasteAt = (at) => {\n    window.Module.pasteAt(at);\n}\n\ncommand.selectAll = () => {\n    command.inputModeChanged = true;\n    menuState.handleMenuClick(menuState.menus.selection);\n    window.Module.selectAll();\n}\n\ncommand.addBox = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 2, at.x, at.y);\n}\n\ncommand.addCircle = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 0, at.x, at.y);\n}\n\ncommand.addUser = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 8, at.x, at.y);\n}\n\ncommand.addDb = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(2, 6, at.x, at.y);\n}\n\ncommand.addCloud = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 9, at.x, at.y);\n}\n\ncommand.addNote = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 7, at.x, at.y);\n}\n\ncommand.escape = () => {\n    window.Module.handleEscapeKey();\n}\n\ncommand.undo = () => {\n    window.Module.inputReceiver().undo();\n}\n\ncommand.redo = () => {\n    window.Module.inputReceiver().redo();\n}\n\ncommand.moveToFront = () => {\n    window.Module.moveObjectToFront();\n}\n\ncommand.moveToBack = () => {\n    window.Module.moveObjectToBack();\n}\n\ncommand.startSpeech = () => {\n    speechCommand.start((r, c) => {\n        var at = getShapeAddLocation();\n        window.Module.libraryStore().addObjectToCanvas(r, c, at.x, at.y);\n        canvas.draw();\n    });\n}\n\nexport default command;\n","import canvas from './Canvas';\nimport command from './Command'\nimport AppInput from './AppInput'\n\nvar keyboardInput = { \n    showingDialog: false\n};\n\nvar listeners = [];\nvar postListeners = [];\n\nconst isMac = navigator.userAgent.indexOf(\"OS X\") > 0;\n\nvar handlers = {\n    'a': command.selectAll,\n    'c': command.copy,\n    'x': command.cut,\n    'v': command.paste,\n    'b': command.addBox,\n    'e': command.addCircle,\n    'u': command.addUser,\n    'z': command.undo,\n    //'s': command.startSpeech,\n}\n\nkeyboardInput.addListener = function(cb) {\n    listeners.push(cb);\n}\n\nkeyboardInput.removeListener = function(cb) {\n    for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i] == cb) {\n            listeners.splice(i, 1);\n            return;\n        }\n    }\n}\n\nkeyboardInput.addPostListener = function(cb) {\n    postListeners.push(cb);\n}\n\nkeyboardInput.removePostListener = function(cb) {\n    for (var i = 0; i < postListeners.length; i++) {\n        if (postListeners[i] == cb) {\n            postListeners.splice(i, 1);\n            return;\n        }\n    }\n}\n\nkeyboardInput.handleKeyDown = function(event) {\n    if (AppInput.isEditingText() || keyboardInput.showingDialog) {\n        // do not handle keyboard while showing a dialog or editing shape text\n        return;\n    }\n    if (window.wsmanager && window.wsmanager.readOnly()) {\n        return;\n    }\n\n    for (let cb of listeners) {\n        if (cb(event)) {\n            return;\n        }\n    }\n\n    let key = event.key.toLowerCase();\n    var handled = false;\n    if (key == 'backspace' || key == 'delete') {\n        command.del();\n        handled = true;\n    } else if (key == 'escape') {\n        command.escape();\n        handled = true;\n    } else {\n        var handler = handlers[key];\n        if (!event.shiftKey && !event.altKey) {\n            if (handler && ((isMac && event.metaKey) || (!isMac && event.ctrlKey))) {\n                handler();\n                handled = true;\n            }\n        }\n        if (isMac && key == 'z' && event.shiftKey && event.metaKey) {\n            command.redo();\n            handled = true;\n        }\n        if (!isMac && key == 'z' && event.shiftKey && event.ctrlKey) {\n            command.redo();\n            handled = true;\n        }\n        if (!isMac && key == 'y' && event.ctrlKey && !event.shiftKey && !event.altKey) {\n            command.redo();\n            handled = true;\n        }\n    }\n    if (handled) {\n        event.preventDefault();\n        canvas.draw();\n    }\n\n    for (let cb of postListeners) {\n        cb(event);\n    }\n}\n\nkeyboardInput.attachEvents = function(canvasElement) {\n    document.addEventListener(\"keydown\", function(event) {\n        keyboardInput.handleKeyDown(event);\n    });\n}\n\nexport default keyboardInput;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport AppInput from './AppInput'\nimport touchInput from './TouchInput'\nimport mouseInput from './MouseInput'\nimport keyboardInput from './KeyboardInput'\nimport uiConfig from './UIConfig';\nimport EventListener from '../utils/EventListener';\n\nvar appEvent = {\n  resizeListener: new EventListener()\n};\n\nfunction attachResizeHandler() {\n  $(window).on(\"resize\", function(evt) {\n    canvas.onResize();\n    AppInput.onResize();\n    appEvent.resizeListener.trigger(evt);\n  });\n}\n\nappEvent.attachEventHandlers = function() {\n  attachResizeHandler();\n  var canvasElement = document.getElementById(\"transparentPanel\");\n  if (uiConfig.shouldAttachMouseEventHandler()) {\n    mouseInput.attachEvents(canvasElement);\n    touchInput.attachEvents(canvasElement);\n  }\n  if (uiConfig.shouldAttachKeyboardEventHandler()) {\n    keyboardInput.attachEvents(canvasElement);\n  }\n}\n\nexport default appEvent;\n","\nimport { Dialog } from \"@material-ui/core\";\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport React, {useState} from \"react\";\n\nexport const FileNameInputDialog = ({title, cancelText, okText, onCancel, onAccept, initialValue }) => {\n    const [value, setValue] = useState(initialValue);\n    var okDisabled = value.trim() == '';\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"name\"\n                fullWidth\n                variant=\"outlined\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onCancel}>{cancelText}</Button>\n            <Button onClick={()=>onAccept(value)} disabled={okDisabled}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\nexport const ConfirmDialog = ({title, msg, okText, cancelText, onAccept, onCancel }) => {\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onCancel}>{cancelText}</Button>\n            <Button onClick={onAccept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\nexport const MessageDialog = ({title, msg, okText, onAccept }) => {\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onAccept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\n","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from '@material-ui/core';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport canvas from \"../../common/Canvas\";\n\nconst LekhImporter = ({showDialog, onImport, onCancel}) => {\n  const [file, setFile] = useState(null);\n  const [errMsg, setErrMsg] = useState('');\n\n  var btnText = 'Import';\n  var btnEnabled = file != null;\n  \n  const onChange = (e) => {\n    var changedFile = e.target.files[0];\n    setFile(changedFile);\n    setErrMsg('')\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => {\n        var out = window.Module.importLekh(reader.result);\n        if (out) {\n            setErrMsg('Unable to import. Please check that you are importing a valid Lekh file.');\n        } else {\n            showDialog(null);\n            canvas.draw();\n            onImport();\n        }\n    }, false);\n\n    if (file) {\n        reader.readAsText(file);\n    }\n  };\n\n  const close = ()=> {\n    showDialog(null);\n    onCancel();\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\">\n        <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Import Lekh File</h4>\n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <form\n            action=\"\"\n            className=\"\"\n            onSubmit={handleSubmit}\n        >\n            <input type='file' accept=\".lekh\" className=\"mx-3 mt-4\" onChange={onChange}/>\n            {errMsg && \n              <div className=\"mt-2 mx-3 text-red-600 text-sm\">\n                <label>{errMsg}</label>\n              </div>\n            }\n            <div className=\"flex mb-4 mt-5 mx-3\">\n                <div className=\"mr-4\"><Button variant=\"outlined\" onClick={close}>Cancel</Button></div>\n                <Button variant=\"outlined\" disabled={!btnEnabled} onClick={handleSubmit}>{btnText}</Button>\n            </div>\n        </form>\n    </Dialog>\n  );\n};\n\nexport default LekhImporter;\n","import React from \"react\"\n\nconst MiniLoader = () => {\n  return <div className=\"loading-spinner\"></div>\n}\n\nexport default MiniLoader\n","export const constant = {\n  tokenName: \"LKH-TKN\",\n  expiryName: \"LKH-EXP\",\n  refreshToken: \"LKH-RFR\",\n  baseUrl: \"https://api.lekh.app\",\n  appUrl: \"https://docs.lekh.app\",\n  backendVersion: \"v1.1\",\n  userInfoLoading: 'loading',\n  userInfoError: 'error',\n  userInfoAvailable: 'available'\n}\n","import { constant } from \"./ApiConstants\";\n\nexport const setTokenToStorage = token => {\n  return localStorage.setItem(constant.tokenName, token);\n};\n\nexport const setRefreshTokenToStorage = token => {\n  return localStorage.setItem(constant.refreshToken, token);\n};\n\nexport const setExpiryTimeToStorage = date => {\n  return localStorage.setItem(constant.expiryName, date);\n};\n\nexport const storageContainsToken = () => {\n  return !!localStorage.getItem(constant.tokenName);\n};\n\nexport const storageContainsRefreshToken = () => {\n  return !!localStorage.getItem(constant.tokenName);\n};\n\nexport const getTokenFromStorage = () => {\n  return localStorage.getItem(constant.tokenName);\n};\n\nexport const getRefreshTokenFromStorage = () => {\n  return localStorage.getItem(constant.refreshToken);\n};\n\nexport const getExpiryTimeFromStorage = () => {\n  return localStorage.getItem(constant.expiryName);\n};\n\nexport const tokenStillValid = () => {\n  return (\n    new Date().getTime() <\n    new Date(parseInt(getExpiryTimeFromStorage()) * 1000).getTime()\n  );\n};\n\nexport const checkLogin = () => {\n  if (getRefreshTokenFromStorage()) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const removeTokenFromStorage = () => {\n  localStorage.removeItem(constant.tokenName);\n};\n\nexport const removeRefreshTokenFromStorage = () => {\n  localStorage.removeItem(constant.refreshToken);\n};\n\nexport const removeExpiryDateFromStorage = () => {\n  localStorage.removeItem(constant.expiryName);\n};\n\nexport const logout = () => {\n  return (\n    removeExpiryDateFromStorage() &&\n    removeRefreshTokenFromStorage() &&\n    removeTokenFromStorage()\n  );\n};\n","import {\n  getRefreshTokenFromStorage,\n  setRefreshTokenToStorage,\n  removeRefreshTokenFromStorage,\n} from \"./ApiUtils\";\nimport { refreshToken, getCurrentUser } from \"./ApiRequests\";\nimport { constant } from \"./ApiConstants\";\nimport integ from \"../integ/integ\";\nimport uiConfig from \"../common/UIConfig\";\nimport EventListener from \"./EventListener\";\n\n/*\nThe user info can be used in react functional component like this\n\n  const onUserLoginStateChange = () => {\n    // handler for user login state change\n  }\n\n  useEffect(() => {\n    userInfo.addListener(onUserLoginStateChange);\n    userInfo.get();\n    return () => {\n      userInfo.removeListener(onUserLoginStateChange);\n    }\n  }, []);\n\n  // use this check while rendering\n  // userInfo.state == 'available' ==> user is logged in\n  // userInfo.state == 'loading' ==> the user info is being fetched\n  // userInfo.state == 'error' ==> unable to fetch the user info. redirect to login page\n\n*/\n\nconst available = constant.userInfoAvailable;\nconst loading = constant.userInfoLoading;\nconst error = constant.userInfoError;\n\nvar getCalled = false;\n\n// state can be one one of: loading, available, error\nvar userInfo = {\n  state: loading,\n  data: {},\n  token: \"\",\n  event: new EventListener()\n};\n\nuserInfo.isLoggedIn = () => {\n  return userInfo.state == available && !!userInfo.token;\n}\n\nuserInfo.logout = () => {\n  userInfo.token = \"\";\n  userInfo.data = { };\n  userInfo.state = \"loading\";\n  getCalled = false;\n  removeRefreshTokenFromStorage();\n}\n\nuserInfo.get = () => {\n  if (getCalled && userInfo.state != error) {\n    return\n  }\n  getCalled = true;\n\n  if (!uiConfig.isUsingLekhBackend()) {\n    integ.getUser((state, token, info) => {\n      userInfo.token = token;\n      userInfo.data = info;\n      userInfo.state = state;\n      onChange();\n    });\n    return;\n  }\n\n  window.addEventListener('storage', handleStorageChange);\n  userInfo.state = loading;\n  fetchInfo(false);\n};\n\nuserInfo.getAccessTokenOnDemand = async (refreshTokenStr) => {\n  if (!refreshTokenStr) {\n    return false;\n  }\n  var resp = null;\n  try {\n    resp = await refreshToken(refreshTokenStr);\n  } catch(err) {\n    console.log(err);\n    return false;\n  }\n  userInfo.token = resp.data.access_token;\n  try {\n    resp = await getCurrentUser(resp.data.access_token);\n  } catch (err) {\n    console.log(err);\n    return false;\n  }\n  userInfo.data = resp.data;\n  return true;\n}\n\nuserInfo.canUseGestures = () => {\n  if (!userInfo.isLoggedIn()) {\n    return false;\n  }\n  return userInfo.data.features && userInfo.data.features.gesture;\n}\n\nconst handleStorageChange = () => {\n  var loggedIn = userInfo.isLoggedIn();\n  let refreshTokenStr = getRefreshTokenFromStorage();\n  if (loggedIn && !!refreshTokenStr) {\n    console.log(\"Not responding to storage change\");\n    return;\n  }\n  console.log(\"Responding to storage change\");\n  fetchInfo(true)\n}\n\nconst onChange = () => {\n  try {\n    userInfo.event.trigger();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst fetchInfo = async (onStoreChange) => {\n  let refreshTokenStr = getRefreshTokenFromStorage();\n  if (!refreshTokenStr) {\n    if (userInfo.state != error) {\n      setErr();\n    }\n    return;\n  }\n  var wasLoggedin = userInfo.isLoggedIn()\n  var resp = await tryToRefreshToken(refreshTokenStr);\n  if (resp.new_refresh_token) {\n    if (!onStoreChange) {\n      setRefreshTokenToStorage(resp.new_refresh_token);\n    }\n    if (!wasLoggedin) {\n      onChange();\n    }\n  } else {\n    if (resp.do_retry) {\n      retry(onStoreChange);\n    } else {\n      removeRefreshTokenFromStorage();\n      setErr();\n    }\n  }\n}\n\nconst setErr = () => {\n  userInfo.state = error;\n  userInfo.data = {};\n  userInfo.token = '';\n  onChange();\n}\n\nconst tryToRefreshToken = async (refreshTokenStr) => {\n  let resp = null;\n  try {\n    resp = await refreshToken(refreshTokenStr);\n  } catch(err) {\n    if (err.response && err.response.data && err.response.data.code) {\n      let code = err.response.data.code;\n      if (code == \"code_expired\" || code == \"refresh_token_expired\" ||\n        code == \"invalid_input\" || code == 'login_failure' || code == 'unknown') {\n        return {new_refresh_token: null, do_retry: false};\n      }\n    }\n    console.log(err);\n    return {new_refresh_token: null, do_retry: true};\n  }\n\n  let new_refresh_token = resp.data.refresh_token\n  userInfo.token = resp.data.access_token;\n\n  try {\n    resp = await getCurrentUser(resp.data.access_token);\n  } catch (err) {\n    console.log(err);\n    return {new_refresh_token: null, do_retry: true};\n  }\n  \n  renewTokenBeforeExpiry();\n\n  userInfo.data = resp.data;\n  userInfo.state = available;\n\n  return {new_refresh_token: new_refresh_token, do_retry: false}\n};\n\nconst renewTokenBeforeExpiry = () => {\n  // TODO: we should look at the expires_at\n  // but for now we will refresh every half an hour\n  let hafHour = 1000 * 60 * 30;\n  setTimeout(() => {\n    fetchInfo(false);\n  }, hafHour);\n};\n\nconst retry = (onStoreChange) => {\n  setTimeout(() => {\n    fetchInfo(onStoreChange);\n  }, 1000 * 10);\n};\n\nexport default userInfo;\n","import axios from \"axios\";\n// import { getTokenFromStorage } from \"./ApiUtils\";\nimport { constant } from \"./ApiConstants\";\nimport userInfo from \"./UserInfo\";\n\nexport const ApiRequestWithToken = () => {\n  const config = { baseURL: constant.baseUrl };\n  config.headers = { \"X-Auth-Token\": userInfo.token };\n  const instance = axios.create(config);\n  return instance;\n};\n\nexport const ApiRequestWithoutToken = () => {\n  const config = { baseURL: constant.baseUrl, withCredentials: true };\n  const instance = axios.create(config);\n  return instance;\n};\n\nexport const fetcher = url =>\n  ApiRequestWithToken()\n    .get(url)\n    .then(res => res.data);\n\nexport const signUp = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/users\", data);\n\nexport const login = data => ApiRequestWithoutToken().post(\"/v1.1/auth\", data);\n\nexport const confirmAccount = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/confirm\", data);\n\nexport const forgotPassword = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/forgot\", data);\n\nexport const resetPassword = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/reset\", data);\n\nexport const refreshToken = data =>\n  ApiRequestWithToken().post(\"/v1.1/auth/refresh\", { refresh_token: data });\n\nexport const loginWithGoogle = data =>\nApiRequestWithoutToken().post(\"/v1.1/auth/googlelogin\", data);\n\nexport const loginWithApple = data =>\nApiRequestWithoutToken().post(\"/v1.1/auth/applelogin\", data);\n\nexport const getCurrentUser = () =>\n  ApiRequestWithToken().get(\"/v1.1/users/current\");\n\nexport const getDocs = qstr => ApiRequestWithToken().get(\"/v1.1/docs\" + qstr);\n\nexport const getDoc = docid => ApiRequestWithToken().get(\"/v1.1/docs/\" + docid);\n\nexport const updateCurrentUser = data =>\n  ApiRequestWithToken().post(\"/v1.1/users/current\", data);\n\nexport const createNew = data => ApiRequestWithToken().post(\"/v1.1/docs\", data);\n\nexport const openDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {});\n\nexport const deleteDoc = id => ApiRequestWithToken().delete(`/v1.1/docs/${id}`);\n\nexport const claimDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {'operation': {'type': 'claim'}});\n\nexport const duplicateDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {'operation': {'type': 'duplicate'}});\n\nexport const shareDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}/share`, data);\n\nexport const RenameDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}`, data);\n\nexport const MoveDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}`, data);\n\nexport const deleteShare = (id, email) =>\n  ApiRequestWithToken().delete(`/v1.1/docs/${id}/share?email=${email}\n`);\n\nexport const getResource = (id) => ApiRequestWithToken().get(`/v1.1/resources/${id}`, {responseType: 'blob'});\n\nexport const hello = (ref) => ApiRequestWithoutToken().get('/hello?ref=' + ref, {withCredentials: true});\n\nexport const getDocsLogSessions = (qstr) => ApiRequestWithToken().get('/v1.1/docslog/logs/sessions?' + qstr);\nexport const getADocsLogSession = (sessionid) => ApiRequestWithToken().get('/v1.1/docslog/logs/sessions/' + sessionid);\nexport const getDocsLogUpdate = (docid, version) => ApiRequestWithToken().get('/v1.1/docslog/logs/updates/' + docid + '/' + version);","import qs from 'qs';\nimport { getDocs, getDoc, deleteDoc, createNew, duplicateDoc } from \"./ApiRequests\";\nimport EventListener from './EventListener'\n\nvar nextToken = null;\n\nvar docsManager = {\n  state: \"loading\",\n  parent: null,\n  search: null,\n  order: null,\n  orderBy: null,\n  docs: [],\n  path: [],\n  mode: 'mydocs',\n  event: new EventListener(),\n};\n\ndocsManager.setPath = (path) => {\n  var arr = path.split('/');\n  if (arr.length % 2 != 0) {\n    return;\n  }\n\n  docsManager.path = [];\n  docsManager.parent = null;\n\n  for (let i = 0; i < arr.length; i+= 2) {\n    var obj = {docid: arr[i], name: arr[i + 1]}\n    docsManager.path.push(obj);\n  }\n  if (docsManager.path.length > 0) {\n    docsManager.parent = docsManager.path[docsManager.path.length - 1].docid;\n  } else {\n    docsManager.parent = null;\n  }\n}\n\ndocsManager.serializePath = () => {\n  var path = '';\n  for(let item of docsManager.path) {\n    if (path != '') {\n      path += '/';\n    }\n    path += item.docid + '/' + item.name;\n  }\n  return encodeURIComponent(path);\n}\n\ndocsManager.setRoute = (route, qparam) => {\n  if (route == '/docs/mydocs') {\n    docsManager.mode = 'mydocs';\n  } else if (route == '/docs/shared') {\n    docsManager.mode = 'shared';\n  } else if (route == '/docs/search') {\n    docsManager.mode = 'search';\n  } else {\n    return;\n  }\n  docsManager.reset();\n  var qpath = qs.parse(qparam, { ignoreQueryPrefix: true }).path;\n  if (qpath) {\n    docsManager.setPath(qpath);\n  }\n  var qsearch = qs.parse(qparam, { ignoreQueryPrefix: true }).search;\n  if (qsearch) {\n    docsManager.search = qsearch;\n  }\n}\n\ndocsManager.getRoute = () => {\n  var qs = docsManager.serializePath();\n  var path = '/docs/' + docsManager.mode;\n  var arr = []\n  if (qs != '') {\n    arr.push('path=' + qs);\n  } \n  if (docsManager.mode == 'search' && docsManager.search) {\n    arr.push('search=' + encodeURIComponent(docsManager.search));\n  }\n\n  if (arr.length > 0) {\n    path += '?' + arr.join('&');\n  }\n  return path;\n}\n\ndocsManager.setSearchMode = (searchTerm) => {\n    if (docsManager.mode == 'search') {\n      docsManager.search = searchTerm;\n      return;\n    }\n    docsManager.reset();\n    docsManager.search = searchTerm;\n    docsManager.mode = 'search';\n}\n\ndocsManager.getRootName = () => {\n    if (docsManager.mode == 'shared') {\n        return 'Shared with me';\n    } else if (docsManager.mode == 'search') {\n        return 'Search';\n    } else {\n        return 'My Documents'\n    }\n}\n\ndocsManager.reset = () => {\n  docsManager.state = \"loading\";\n  docsManager.docs = [];\n  docsManager.parent = null;\n  docsManager.search = null;\n  docsManager.order = null;\n  docsManager.orderBy = null;\n  docsManager.path = [];\n  nextToken = null;\n};\n\ndocsManager.pushParent = function (parent) {\n  for (let item of docsManager.docs) {\n    if (item.docid == parent) {\n      docsManager.parent = parent;\n      docsManager.path.push(item);\n      docsManager.docs = [];\n      docsManager.state = 'loading';\n      break;\n    }\n  }\n};\n\ndocsManager.popParentTo = function (parent) {\n  docsManager.docs = [];\n  docsManager.state = 'loading';\n\n  if (!parent) {\n    docsManager.path = [];\n    docsManager.parent = null;\n    return;\n  }\n\n  while (docsManager.path.length > 0) {\n    let item = docsManager.path[docsManager.path.length - 1];\n    if (item.docid == parent) {\n        docsManager.parent = parent;\n        break;\n    }\n    docsManager.path.pop();\n  }\n};\n\ndocsManager.deleteDoc = async docid => {\n  await deleteDoc(docid);\n  await docsManager.reload();\n};\n\ndocsManager.canCreateNewDoc = () => {\n  return docsManager.mode == \"mydocs\" || docsManager.path.length > 0;\n}\n\ndocsManager.createDoc = async (parent, type, name) => {\n  await createNew({ parent: parent, type: type, name: name });\n  await docsManager.reload();\n};\n\ndocsManager.reload = async () => {\n  var qs = [];\n  if (docsManager.parent) {\n    qs.push(\"parent=\" + docsManager.parent);\n  }\n  if (docsManager.mode == 'search' && docsManager.search && !docsManager.parent) {\n    qs.push(\"search=\" + docsManager.search);\n  }\n  if (docsManager.order) {\n    qs.push(\"order=\" + docsManager.order);\n  }\n  if (docsManager.orderBy) {\n    qs.push(\"order_by=\" + docsManager.orderBy);\n  }\n  if (docsManager.mode == 'shared' && !docsManager.parent) {\n    qs.push(\"shared=true\");\n  }\n  var qstr = \"\";\n  if (qs.length > 0) {\n    qstr = \"?\" + qs.join(\"&\");\n  }\n\n  docsManager.state = \"loading\";\n  docsManager.event.trigger();\n  try {\n    var resp = await getDocs(qstr);\n    docsManager.docs = resp.data.docs;\n    docsManager.state = \"available\";\n  } catch (err) {\n    docsManager.state = \"error\";\n    console.log(err);\n  }\n  docsManager.event.trigger();\n};\n\ndocsManager.getADoc = async (docid) => {\n  var resp = await getDoc(docid);\n  return resp.data;\n}\n\ndocsManager.getFullPath = async (docid, root) => {\n  var arr = [];\n  var doc = null;\n  try {\n    doc = await docsManager.getADoc(docid);\n    arr.push({name: doc.name, docid: doc.docid});\n  } catch (err) {\n    console.log(err);\n  }\n\n  while (doc.parent != root) {\n    try {\n      doc = await docsManager.getADoc(doc.parent);\n      arr.unshift({name: doc.name, docid: doc.docid});\n    } catch(err) {\n      console.log(err);\n      break;\n    }\n  }\n  return arr;\n}\n\ndocsManager.get = async () => {\n  if (docsManager.state == \"available\") {\n    return;\n  }\n  docsManager.reload();\n};\n\ndocsManager.duplicate = async (docid) => {\n  await duplicateDoc(docid);\n}\n\ndocsManager.getChildFolders = async folderId => {\n  var docs = await docsManager.getChildItems(folderId);\n  var folders = [];\n  for (let item of docs) {\n    if (item.type == \"folder\") {\n      folders.push(item);\n    }\n  }\n  return folders;\n};\n\ndocsManager.getChildItems = async folderId => {\n  var qstr = \"?parent=\" + folderId;\n  var docs = [];\n  try {\n    var resp = await getDocs(qstr);\n    docs = resp.data.docs;\n  } catch (err) {\n    console.log(err);\n  }\n  return docs;\n};\n\nexport default docsManager;\n","import EventListener from \"../utils/EventListener\";\nimport { constant } from \"../utils/ApiConstants\";\n\nconst messaging  = {\n    event: new EventListener(),\n    data: null,\n    init: () => { window.addEventListener(\"message\", onMessage, false); }\n}\n\nconst onMessage = (event) => {\n    if (event.origin !== constant.appUrl) {\n        return;\n    }\n    messaging.data = event.data;\n    messaging.event.trigger(event);\n}\n\nexport default messaging;","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog, IconButton } from \"@material-ui/core\";\nimport { useEffect, useState, useRef } from \"react\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport docsManager from \"../../utils/DocsManager\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { AiFillFolder, AiOutlineRight } from \"react-icons/ai\";\nimport { BiArrowBack } from \"react-icons/bi\";\nimport uiConfig from \"../../common/UIConfig\";\nimport { constant } from \"../../utils/ApiConstants\";\nimport messaging from \"../../common/Messaging\";\n\nconst LekhItemPicker = ({ close, pick, defaultTitle, pickText, folderOnly }) => {\n  var [loading, setLoading] = useState(false);\n  const [data, setData] = useState();\n  const [parent, setParent] = useState(userInfo?.data?.userid);\n  const [loginState, setLoginState] = useState(uiConfig.isUsingLekhBackend()? userInfo.state: 'init');\n  const [error, setError] = useState(null);\n  const [parentDoc, setParentDoc] = useState(null);\n  const [selectedIdx, setSelectedIdx] = useState(-1);\n\n  const [cache, setCache] = useState(new Map());\n  const [childCache, setChildCache] = useState(new Map());\n\n  const refreshToken = useRef('dummy');\n\n  const signingIn = loginState == 'loading';\n  const signedIn = loginState == 'available';\n  loading = loading || signingIn;\n  \n  useEffect(() => {\n    if (!parent) {\n      return;\n    }\n    setLoading(true);\n    getDoc(parent)\n    .then(resp=>{\n      setParentDoc(resp);\n    })\n    .then(()=> getChildren(parent || userInfo?.data?.userid))\n    .then(res => {\n      setData(res);\n      setLoading(false);\n    })\n    .catch(err => console.log(err.response));\n  }, [parent]);\n\n  useEffect(() => {\n    fetchAccessToken();\n    messaging.event.addListener(fetchAccessToken);\n    return () => messaging.event.removeListener(fetchAccessToken);\n  }, []);\n\n  var title = \"\";\n  var pickClass = '';\n  if (signedIn && parentDoc) {\n    title = parentDoc.name;\n  } else {\n    title = defaultTitle;\n  }\n\n  if (!folderOnly && selectedIdx < 0) {\n    pickClass = \"text-white\";\n  }\n\n  var signInMessage = (<>\n    <div className=\"text-center font-bold\">Please <a className=\"text-blue-600\" href={constant.appUrl + '#/login'} target=\"_blank\">sign in</a></div>\n    <br/>\n    <div>You need to be signed-in into the Lekh account for importing / exporting.</div>\n    </>);\n\n  const fetchAccessToken = () => {\n    if (!uiConfig.isUsingLekhBackend()) {\n      var rtoken = messaging.data;\n      if (rtoken == refreshToken.current || !rtoken) {\n        return;\n      }\n      refreshToken.current = rtoken;\n      setLoginState('loading');\n      userInfo.getAccessTokenOnDemand(rtoken).then(result => {\n        if (result) {\n          setSelectedIdx(-1);\n          setParent(userInfo?.data?.userid);\n          setLoginState('available');\n        } else {\n          setLoginState('error');\n        }\n      });\n    }\n  }\n\n  const getDoc = async (docid) => {\n    if (!docid || docid == userInfo?.data?.userid) {\n      return {docid: docid, name: 'My Documents', parent: null}\n    }\n    if (cache.has(docid)) {\n      return cache.get(docid);\n    }\n    var doc = await docsManager.getADoc(docid);\n    cache.set(docid, doc);\n    return doc;\n  }\n\n  const getChildren = async (docid) => {\n    if (childCache.has(docid)) {\n      return childCache.get(docid);\n    }\n    if (folderOnly) {\n      var children = await docsManager.getChildFolders(docid);  \n    } else {\n      var children = await docsManager.getChildItems(docid);\n    }\n    \n    childCache.set(docid, children);\n    for (let item of children) {\n      cache.set(item.docid, item);\n    }\n    return children;\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!folderOnly) {\n      if (selectedIdx < 0) {\n        return;\n      }\n      pick(data[selectedIdx].docid);\n    } else {\n      let docid = parentDoc.docid;\n      setLoading(true);\n      docsManager.getChildItems(docid).then(children => {\n        pick(parentDoc.docid, children);\n      }).catch(e=> {\n        setLoading(false);\n      });\n    }\n  };\n\n  var iframe = null;\n  if (!uiConfig.isUsingLekhBackend()) {\n    var prefix = '';\n    if (constant.appUrl.startsWith('http://localhost')) {\n      prefix = '/integ/ac/confluence/res'\n    }\n    const iframeUrl = constant.appUrl + prefix + \"/atlassian_util.html\";\n    iframe = <iframe style={{display:'block'}} width=\"0\" height=\"0\" frameBorder=\"0\" scrolling=\"no\" vspace=\"0\" hspace=\"0\" marginHeight=\"0\" marginWidth=\"0\" src={iframeUrl}></iframe>\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\" aria-labelledby=\"Share\">\n      <form\n        className={`py-2 h-72 w-64 lg:w-96 bg-white`}\n        onSubmit={handleSubmit}\n      >\n        {iframe}\n        <div className=\"flex items-center justify-between my-2 px-3\">\n          {parent != userInfo?.data?.userid ? (\n            <BiArrowBack\n              className=\"text-xl cursor-pointer\"\n              onClick={() => {\n                setParent(parentDoc.parent);\n                setSelectedIdx(-1);\n              }}\n            />\n          ) : (\n            <div />\n          )}\n\n          <h4 className=\"text-center m-0 w-44 truncate\">\n            {title}\n          </h4>\n\n          <AiOutlineClose\n            className=\"text-xl cursor-pointer\"\n            onClick={() => close()}\n          />\n        </div>\n        <hr />\n\n        {loading && (\n          <div className=\"mt-6\">\n            <MiniLoader />\n          </div>\n        )}\n        {!loading && !signedIn && signInMessage}\n        {!loading && signedIn && (\n          <>\n            <div className=\"h-40 space-y-2 py-2 overflow-y-auto px-3\">\n              {data?.map((m, i) => {\n                let isFolder = m.type == 'folder';\n                let backClass = 'hover:bg-gray-200';\n                if (selectedIdx == i) {\n                  backClass = 'bg-gray-200';\n                }\n                const onClick = () => {\n                  if (isFolder) {\n                    setSelectedIdx(-1);\n                    setParent(m.docid);\n                  } else {\n                    setSelectedIdx(i);\n                  }\n                }\n                return (<div\n                  className={`move-grid text-lg cursor-pointer ` + backClass}\n                  key={i}\n                >\n                  <div\n                    className=\"flex items-center space-x-2 cursor-pointer\"\n                    onClick={onClick}\n                  >\n                    {isFolder &&<AiFillFolder />}\n                    {!isFolder && (\n                      <IconButton color=\"inherit\" className=\"w-3\">\n                        <img\n                            src={require(\"../../assests/icons/lekhboard-small.svg\").default}\n                            className=\"w-3\" />\n                      </IconButton>)}\n                    <span className=\"w-40  lg:w-44 truncate\">{m.name}</span>\n                  </div>\n                  {isFolder && <AiOutlineRight\n                    className=\"cursor-pointer text-right ml-auto\"\n                    onClick={() => {setParent(m.docid); setSelectedIdx(-1)}}\n                  />}\n                </div>\n              )})}\n            </div>\n            <hr />\n            <div className=\"text-right mt-3 px-3\">\n              <button\n                type=\"submit\"\n                className={pickClass + \" font-medium lg:text-lg px-3 py-1 outline-none border-none border-0 mx-auto\"}\n              >\n                {pickText}\n              </button>\n            </div>\n          </>\n        )}\n      </form>\n    </Dialog>\n  );\n};\n\nexport default LekhItemPicker;\n","var util = { };\n\n// Adding into window as this is being used by c++ code\nwindow.generateUUID = function() {\n    var d = new Date().getTime();//Timestamp\n    var d2 = (window.performance && window.performance.now && (window.performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}\n\nutil.mouseLocation = (event) => {\n  var x = event.pageX;\n    var y = event.pageY;\n    if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n        if (event.changedTouches && event.changedTouches.length > 0) {\n            var touch = event.changedTouches[0];\n            x = touch.pageX;\n            y = touch.pageY;\n        }\n    }\n    if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n        return null;\n    }\n    return {x: x, y: y};\n}\n\nutil.hasTouch = () => {\n    var hasTouchScreen = false;\n    if (\"maxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.maxTouchPoints > 0;\n    } else if (\"msMaxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.msMaxTouchPoints > 0;\n    } else {\n        var mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n        if (mQ && mQ.media === \"(pointer:coarse)\") {\n            hasTouchScreen = !!mQ.matches;\n        } else if ('orientation' in window) {\n            hasTouchScreen = true; // deprecated, but good fallback\n        } else {\n            // Only as a last resort, fall back to user agent sniffing\n            var UA = navigator.userAgent;\n            hasTouchScreen = (\n                /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) ||\n                /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA)\n            );\n        }\n    }\n    return hasTouchScreen;\n}\n\nutil.loadScript = async (path) => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement(\"script\");\n        script.src = path;\n        script.async = true;\n        script.onload = () => {\n            resolve();\n        }\n        script.onerror = (err) => {\n            console.log(err)\n            reject(err);\n        }\n        document.body.appendChild(script);\n    });\n}\n  \nexport default util;\n  ","import appEvent from \"../common/AppEvent\";\nimport {v4} from 'uuid'\nimport EventListener from \"../utils/EventListener\";\nimport menuState from \"../common/MenuState\";\nimport {FileNameInputDialog, ConfirmDialog, MessageDialog} from \"./AtlasianIntegUI\";\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport canvas from \"../common/Canvas\";\nimport LekhImporter from \"../components/LekhImporter/LekhImporter\";\nimport LekhItemPicker from \"../components/Picker/LekhItemPicker\";\nimport LekhErrJson from './load_err.json'\nimport axios from \"axios\";\nimport { constant } from \"../utils/ApiConstants\";\nimport util from \"../common/Util\";\n\nconst integVersion = '1.0';\nconst enableEditorTimeout = true;\nconst editorInitTimeout = 1 * 60 * 1000; // one minute\nconst enableDebugLog = false;\n\nvar macroType = 'confluence.ac.lekh.app:lekh-diagram';\nvar macroKey = 'lekh';\nif (constant.baseUrl.startsWith('http://localhost') || constant.baseUrl.endsWith('ngrok.io')) {\n    macroType = 'dev-confluence.ac.lekh.app:lekh-diagram';\n    macroKey = 'newdg';\n}\n\nconst atlassian = {}\n\nvar integMode = null;\n\nvar customContentInfo = null;\nvar previousComputedHeight = 0;\nvar docInfo = {name: '', docid: ''}\n\n// Initial values updated during initialization\nvar atlassianUserId = '';\nvar pageLocation = null;\nvar pageId = null;\nvar macroData = null;\nvar showDialog = null;\nvar setAppState = null;\nvar contextToken = null;\n\n// Attachment related variables\nvar lekhAttachment = null;\nvar draftAttachment;\nvar lekhAttachmentReadErr = null;\nvar draftAttachmentReadErr = null;\n\nvar editorInitTimer = null;\n\n// variables to track updates in diagrams by editing by user\nvar numUpdatesInEditor = 0;\nvar numPageAttrUpdate = 0;\nvar draftSavedAtCounter = 0;\nvar saveDraftTimer = null;\nvar draftSaveFailureWarnDone = false;\n\nconst has_touch = util.hasTouch();\n\nconst eventListener = new EventListener();\nconst waitList = [];\n\nconst eventTypes = {\n    create: 'create',\n    promptCreate: 'promptCreate',\n    view: 'view',\n    fullView: 'fullView',\n    edit: 'edit',\n    save: 'save',\n    saveError: 'saveError',\n    readError: 'readErroror',\n    timeout: 'timeout',\n    deleteDraftError: 'deleteDraftError',\n    macroFindError: 'macroFindError',\n    diagramImport: 'diagramImport',\n    cloudImport: 'cloudImport',\n    cloudImportError: 'cloudImportError',\n}\n\nconst logDebug = (fn) => {\n    if (enableDebugLog) {\n        fn();\n    }\n}\n\nconst wakeupWaiting = () => {\n    let i = 0;\n    while (i < waitList.length) {\n        if (waitList[i].cond()) {\n            waitList[i].resolve();\n            waitList.splice(i, 1);\n        } else {\n            i++;\n        }\n    }\n}\neventListener.addListener(wakeupWaiting);\n\nconst waitFor = async (cond) => {\n    if (cond()) {\n        return;\n    }\n    return new Promise((resolve, reject) => {\n        waitList.push({cond: cond, resolve: resolve});\n    });\n}\n\nconst sendEventToBackend = async (type, info, err) => {\n    const makeStr = (obj) => {\n        if (obj == null || typeof(obj) == 'undefined') {\n            return '';\n        } else if (typeof(obj) == 'object') {\n            return JSON.stringify(obj);\n        }\n        return String(obj);\n    }\n    info = info || { }\n    if (macroData && macroData.attachmentName) {\n        info.attachmentName = macroData.attachmentName;\n        info.diagramName = macroData.diagramName;\n    }\n    info.pageId = pageId;\n    info.location = pageLocation.href;\n    info.userId = atlassianUserId;\n    info.has_touch = has_touch;\n    info.product = 'confluence';\n    if (err) {\n        info.err = makeStr(err);\n    }\n    \n    let data = {\n        type: type,\n        info: info\n    }\n    const config = { baseURL: constant.baseUrl };\n    config.headers = { \"authorization\": 'JWT ' + contextToken };\n    return await axios.post('/integ/ac/confluence/api/stats', data, config);\n}\n\nconst showNotification = (data) => {\n    window.AP.flag.create(data);\n    //alert(data.title + ': ' + data.body);\n}\n\nconst setupEditorInitTimeout = () => {\n    if (integMode.editor != null && enableEditorTimeout) {\n        editorInitTimer = window.setTimeout(()=> {\n            sendEventToBackend(eventTypes.timeout);\n            showNotification({\n                title: \"Error\",\n                body: \"Unable to load the Lekh Diagram. Operation timed out.\",\n                type: \"error\"\n            });\n            atlassian.closeEditor();\n        }, editorInitTimeout);\n    }\n}\n\nconst getMacroData = (cb) => {\n    if (customContentInfo != null) {\n        pageId = customContentInfo.pageId;\n        cb(customContentInfo);\n    } else {\n        window.AP.confluence.getMacroData(data => {\n            if (!data || Object.keys(data).length == 0) {\n                if (pageLocation && pageLocation.target == 'addonmodule' &&\n                 pageLocation.context && pageLocation.context.context &&\n                 pageLocation.context.context['content.type'] == 'custom' &&\n                 pageLocation.context.context['content.id']) {\n                    var customContentId = pageLocation.context.context['content.id'];\n                    getContentInfo(customContentId, true, (err, resp) => {\n                        if (err == null) {\n                            customContentInfo = JSON.parse(decodeURIComponent(resp.body.storage.value));\n                            pageId = customContentInfo.pageId;\n                            cb(customContentInfo);\n                        } else {\n                            cb(data);\n                        }\n                    });\n                 } else {\n                    cb(data);\n                 }\n            } else {\n                cb(data);\n            }\n        });\n    }\n}\n\nconst getPageContext = () => {\n    setupEditorInitTimeout();\n    // We are calling atlassian API serially. Ideally we should call them in parallel\n    // but it seems the atlassian does not support API call in parallel\n    window.AP.navigator.getLocation(loc => {\n        logDebug(() => console.log('getLocation responded: ', performance.now()));\n        pageLocation = loc;\n        pageId = loc.context.contentId;\n        window.AP.user.getCurrentUser(user => {\n            logDebug(() => console.log('getCurrentUser responded: ', performance.now()));\n            atlassianUserId = user.atlassianAccountId;\n            window.AP.context.getToken(token => {\n                logDebug(() => console.log('getToken responded: ', performance.now()));\n                contextToken = token;\n                getMacroData(data => {\n                    logDebug(() => console.log('getMacroData responded: ', performance.now()));\n                    macroData = data;\n                    eventListener.trigger();\n                    readLekhAttachment(() => {\n                        logDebug(() => console.log('LekhAttachment read done: ', performance.now()));\n                        readDraftAttachment(() => {\n                            logDebug(() => console.log('DraftAttachment read done: ', performance.now()));\n                            eventListener.trigger();\n                            handleAtlassianInit();\n                        });\n                    });\n                });\n            });\n        });\n    });\n}\n\nconst handleAtlassianInit = async () => {\n    if (editorInitTimer != null) {\n        window.clearTimeout(editorInitTimer);\n        editorInitTimer = null;\n    }\n\n    // if we are unable to read the attachment and we are in editor mode\n    // then we should simple close the editor\n    if (lekhAttachmentReadErr && lekhAttachmentReadErr.status != 404 && integMode.editor != null) {\n        showNotification({\n            title: 'Error',\n            body: 'Unable to load the editor',\n            type: 'error'\n        });\n        atlassian.closeEditor();\n        return;\n    }\n\n    eventListener.trigger();\n\n    // when the macro is created then we do not have any attachment name \n    if (!macroData.attachmentName && integMode.editor != null) {\n        sendEventToBackend(eventTypes.promptCreate);\n        await waitFor(() => showDialog != null);\n        \n        let onCancel = () => {\n            atlassian.closeEditor();\n        }\n\n        let onAccept = (value) => {\n            var attachmentName = v4();\n            macroData = {diagramName: value, attachmentName: attachmentName, counter:1, integVersion: integVersion };\n            docInfo.name = value;\n            docInfo.docid = attachmentName;\n            numUpdatesInEditor++;\n            showDialog(null);\n            sendEventToBackend(eventTypes.create);\n        }\n\n        showDialog(<FileNameInputDialog title={\"Enter Diagram Name\"} cancelText={\"Cancel\"} okText={\"OK\"} onCancel={onCancel} onAccept={onAccept} initialValue={''}/>)\n    }\n    \n    if (integMode.editor != null) {\n        sendEventToBackend(eventTypes.edit);\n    } else if (integMode.viewer.full) {\n        sendEventToBackend(eventTypes.fullView);\n    } else {\n        sendEventToBackend(eventTypes.view);\n    }\n    eventListener.trigger();\n}\n\nconst setViewerSize = () => {\n    var vport = document.getElementById(\"viewport\");\n    var clientRect = vport.getBoundingClientRect();\n    var rect = window.Module.getBoundsOfAll();\n    const padding = 12;\n    var viewerHeight = rect.height + 2 * padding;\n    var viewerWidth = rect.width + 2 * padding;\n    var zoom = 1.0;\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    if (viewerWidth > clientRect.width && viewerWidth > 0) {\n        // We need to zoom so that the content can fit in the width\n        zoom = clientRect.width / viewerWidth;\n        viewerHeight *= zoom;\n    }\n    window.Module.setScroll({x: sx, y: sy});\n    if (zoom != 1.0 && !integMode.viewer.full) {\n        window.Module.setZoom(Math.floor(zoom * 100));\n    }\n\n    if (integMode.viewer != null && !integMode.viewer.full) {\n        var newHeight = Math.ceil(viewerHeight);\n        if (Math.abs(newHeight - previousComputedHeight) > 2) {\n            previousComputedHeight = newHeight;\n            window.AP.resize('100%', newHeight);\n        }\n    }\n}\n\nconst readLekhAttachment = (cb) => {\n    if (lekhAttachment != null) {\n        cb();\n        return;\n    }\n    \n    if (!macroData.attachmentName) {\n        lekhAttachment = \"\";\n        cb();\n        return;\n    }\n\n    var fileName = macroData.attachmentName + \".lekh\";\n    readAttachment(fileName, (content, err) => {\n        if (err) {\n            var errObj = {}\n            if (err.status) { errObj.status = err.status}\n            if (err.statusText) { errObj.statusText = err.statusText}\n            sendEventToBackend(eventTypes.readError, {fileName: fileName}, errObj);\n            lekhAttachment = '';\n            lekhAttachmentReadErr = err;\n        } else {\n            lekhAttachment = content == null? '' : content;\n        }\n        cb();\n    });\n}\n\nconst draftName = () => {\n    return macroData.attachmentName + \"-\" + atlassianUserId + \"-draft.lekh\";\n}\n\nconst readDraftAttachment = (cb) => {\n    if (integMode.editor == null || !macroData.attachmentName) {\n        draftAttachment = \"\";\n        cb();\n        return;\n    }\n    if (draftAttachment != null) {\n        cb();\n        return;\n    }\n\n    var fileName = draftName();\n    readAttachment(fileName, (content, err) => {\n        if (err) {\n            if (err.status && err.status != 404) {\n                var errObj = {}\n                if (err.status) { errObj.status = err.status}\n                if (err.statusText) { errObj.statusText = err.statusText}\n                sendEventToBackend(eventTypes.readError, {fileName: fileName}, errObj);\n            }\n            draftAttachment = '';\n            draftAttachmentReadErr = err;\n        } else {\n            draftAttachment = content == null? '' : content;\n        }\n        cb();\n    });\n}\n\nconst readAttachment = (fileName, cb) => {\n    window.AP.request({\n        url: '/download/attachments/' + pageId + '/' + fileName,\n        success: (resp) => {\n            cb(resp, null);\n        },\n        error: (err) => {\n            cb(null, err);\n        }\n    });\n}\n\nconst getContentInfo = (id, fetchBody, cb) => {\n    if (!id) {\n        cb('err', '');\n        return;\n    }\n\n    var url = '/rest/api/content/' + id;\n    if (fetchBody) {\n        url += '/?expand=body.storage'\n    }\n\n    window.AP.request({\n        url: url,\n\t\ttype: 'GET',\n\t\tcontentType: 'application/json;charset=UTF-8',\n\t\tsuccess: (resp) => {\n            let obj = JSON.parse(resp);\n\t\t\tcb(null, obj);\n\t\t},\n\t\terror: (resp) => {\n            cb('err', resp);\n        }\n\t});\n}\n\nconst saveCustomContent = (customContentId, cb) => {\n    var info = {\n\t    \"pageId\": pageId,\n        \"attachmentName\": macroData.attachmentName,\n\t    \"diagramName\": macroData.diagramName,\n        \"counter\": macroData.counter\n    }\n\n    var customObj = {\n        \"type\": \"ac:\" + macroType,\n        \"space\": {\n           \"key\": pageLocation.context.spaceKey\n         },\n         \"container\": {\n               \"type\": 'page',\n               \"id\": pageId\n            },\n         \"title\": macroData.diagramName,\n         \"body\": {\n           \"storage\": {\n             \"value\": encodeURIComponent(JSON.stringify(info)),\n             \"representation\": \"storage\"\n           }\n         },\n         \"status\": \"current\"\n    };\n    getContentInfo(customContentId, false, (err, resp) => {\n        if (err) {\n            customContentId = null;\n        } else {\n            customObj.version = {\n                \"number\": resp.version.number + 1\n            }\n            info.version = resp.version.number + 1;\n            customObj.body.storage.value = encodeURIComponent(JSON.stringify(info));\n        }\n        window.AP.request({\n            type: customContentId? 'PUT' : 'POST',\n            data: JSON.stringify(customObj),\n            url:  \"/rest/api/content/\" + (customContentId? customContentId : \"\"),\n            contentType: \"application/json\",\n            success: (resp) => {\n                cb(null, resp);\n            },\n            error: (resp) => {\n                cb('err', resp)\n            }\n        });\n    });\n}\n\nconst saveAttachment = (fileName, content, comment, cb) => {\n    logDebug(() => console.log('will save attachment: ', performance.now()));\n    var attFile = (content instanceof Blob)? content : new Blob([content], {type: 'application/lekh'});;\n    attFile.name = fileName;\n    if (!comment) {\n        comment = 'Created by Lekh';\n    }\n    var reqData = {file: attFile, minorEdit: true, comment: comment};\n    var draftFlag = pageLocation.target == 'contentcreate' ? '?status=draft' : '';\n\n    window.AP.request({\n        type: 'PUT',\n        data: reqData,\n        url:  \"/rest/api/content/\"+ pageId +\"/child/attachment\" + draftFlag,\n        contentType: \"multipart/form-data\",\n        success: () => {\n            logDebug(() => console.log('attachment saved: ', performance.now()));\n            cb(null);\n        },\n        error: (e) => {\n            var errObj = { }\n            if (e.status) { errObj.status = e.status}\n            if (e.statusText) { errObj.statusText = e.statusText}\n            sendEventToBackend(eventTypes.saveError, {fileName: fileName}, errObj);\n            cb(e);\n        }\n    });\n}\n\nconst getAttachmentInfo = (fileName, cb) => {\n\twindow.AP.request({\n        type: 'GET',\n        url: '/rest/api/content/' + pageId + '/child/attachment?filename=' + encodeURIComponent(fileName),\n        contentType: 'application/json;charset=UTF-8',\n        success: function (resp) {\n            var tmp = JSON.parse(resp);\n            if (tmp.results && tmp.results.length == 1) {\n                var info = tmp.results[0], attInfo;\n                cb(null, info);\n            } else {\n                cb({status: 404});\n            }\n        },\n        error: cb\n    });\n};\n\nconst deleteDraft = (cb) => {\n    getAttachmentInfo(draftName(), (err, info) => {\n        if (err == null && info && info.id) {\n            window.AP.request({\n                url : '/rest/api/content/' + info.id,\n                type : 'DELETE',\n                success : () => {cb(null)},\n                error : e=> {cb(e)}\n            });\n        } else {\n            cb(err);\n        }\n    });\n}\n\nconst saveDraft = async () => {\n    if (draftSavedAtCounter == numUpdatesInEditor) {\n        return;\n    }\n    var curUpdatesCounter = numUpdatesInEditor;\n    return new Promise((resolve, reject) => {\n        var lekhContent = window.Module.getLekh();\n        var fileName = draftName();\n        saveAttachment(fileName, lekhContent, 'Lekh Draft', (e) => {\n            if (!e) {\n                draftSavedAtCounter = curUpdatesCounter;\n                resolve();\n            } else {\n                console.log('Error in saving draft', e)\n                if (!draftSaveFailureWarnDone) {\n                    draftSaveFailureWarnDone = true;\n                    let title = \"Draft save error\";\n                    let msg = \"Unable to save the draft. Please check you are connected to the internet and logged-in into Atlassian.\";\n                    showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n                }\n                reject(e);\n            }\n        });\n    });\n}\n\nconst onDiagramChange = (docid, data) => {\n    var obj = JSON.parse(data);\n    if (obj && obj.type == 'update' && obj.updates && obj.updates.type != 'trackpointer') {\n        if (obj.updates.type == 'changepageattr' && numPageAttrUpdate == 0) {\n            numPageAttrUpdate = 1;\n        } else {\n            numUpdatesInEditor++;\n            if (saveDraftTimer == null) {\n                // Accumulate updates of 10 seconds and then save\n                saveDraftTimer = window.setTimeout(() => {\n                    saveDraft().finally(()=> {\n                        saveDraftTimer = null;\n                    });\n                }, 10 * 1000);\n            }\n        }\n    }\n}\n\nconst closeEditor = (saveDraftAndClose) => {\n    if (saveDraftAndClose) {\n        if (setAppState != null) {\n            setAppState('closing')\n        }\n        saveDraft().finally(() => {\n            window.AP.dialog.close();\n        });\n    } else {\n        window.AP.dialog.close();\n    }\n}\n\nconst confirmDraftLoad = () => {\n    let onAccept = () => {\n        lekhAttachment = draftAttachment;\n        numUpdatesInEditor++;\n        draftAttachment = null;\n        showDialog(null);\n        eventListener.trigger();\n    }\n    let onCancel = () => {\n        draftAttachment = null;\n        showDialog(null);\n        eventListener.trigger();\n    }\n\n    let title = \"Load draft?\";\n    let msg = \"Found unpublished changes from past editing\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"Cancel\"} okText={\"Load Draft\"} onCancel={onCancel} onAccept={onAccept}/>)\n}\n\nconst getDiagramsInPage = (cb) => {\n    var diagrams = [];\n    const processMacroNode = (node) => {\n        let isLekh = false;\n        for (let attrib of node.attributes) {\n            if (attrib.name == \"ac:name\" && attrib.value == macroKey) {\n                isLekh = true;\n                break;\n            }\n        }\n        if (!isLekh) {\n            return;\n        }\n\n        let diagram = { }\n        for (let param of node.childNodes) {\n            if (param.tagName != \"ac:parameter\") {\n                continue;\n            }\n\n            for (let attrib of param.attributes) {\n                if (attrib.name == \"ac:name\") {\n                    diagram[attrib.value] = param.innerHTML;\n                }\n            }\n        }\n        diagrams.push(diagram);\n    }\n\n    const processNode = (node) => {\n        if (node.tagName == \"ac:structured-macro\") {\n            processMacroNode(node);\n        } else {\n            for (let item of node.childNodes) {\n                processNode(item);\n            }\n        }\n    }\n    window.AP.request({\n        url: '/rest/api/content/' + pageId + '/?expand=body.storage,version&status=draft',\n        contentType: 'application/json;charset=UTF-8',\n        success: (resp) => {\n            try {\n                let page = JSON.parse(resp);\n                let content = '<data xmlns:ac=\"https://www.atlassian.com/confluence/page\">' + page.body.storage.value + '</data>';\n                let parser = new DOMParser();\n                let xmlDoc = parser.parseFromString(content, \"text/xml\");\n                processNode(xmlDoc.childNodes[0]);\n            } catch (err) {\n                cb(err, [])\n            }\n            cb(null, diagrams);\n        },\n        error: (err) => {\n            console.log(err)\n            cb(err, [])\n        }\n    });\n}\n\nconst saveImage = (cb) => {\n    try {\n        var imgData = canvas.exportToImage('png');\n    } catch (e) {\n        cb(e);\n        return;\n    }\n    fetch(imgData.data)\n    .then(res => res.blob())\n    .then(blob => {\n        let fileName = macroData.attachmentName + \".png\";\n        saveAttachment(fileName, blob, null, (err) => {\n            if (err == null) {\n                macroData.width = imgData.width;\n                macroData.height = imgData.height;\n            }\n            cb(err);\n        });\n    })\n    .catch(cb);\n}\n\nconst publish = (cb) => {\n    var lekhContent = window.Module.getLekh();\n    var attName = macroData.attachmentName;\n    if (!attName) {\n        attName = v4();\n    }\n    var fileName = attName + \".lekh\";\n    if (setAppState != null) {\n        setAppState('saving')\n    }\n    saveAttachment(fileName, lekhContent, null, (err) => {\n        if (!err) {\n            sendEventToBackend(eventTypes.save);\n            saveCustomContent(macroData.customContentId, (custErr, custResp) => {\n                if (!custErr) {\n                    let respObj = null;\n                    try {\n                        respObj = JSON.parse(custResp);\n                    } catch (e) { }\n                    if (respObj != null) {\n                        macroData.customContentId = respObj.id;\n                    }\n                }\n                saveImage(imgErr => {\n                    if (imgErr != null) {\n                        console.log(\"Error in saving image attachment \", imgErr);\n                    }\n                    macroData.counter = !!macroData.counter? macroData.counter + 1 : 1;\n                    macroData.pageId = pageId;\n                    window.AP.confluence.saveMacro(macroData);\n                    deleteDraft(e=> {\n                        setTimeout(() => {\n                            window.AP.dialog.close();\n                        }, 1);\n                        cb(null);\n                    });\n                });\n            });\n        } else {\n            const onAccept = () => {\n                if (setAppState != null) {\n                    setAppState('ready')\n                }\n                showDialog(null);\n                cb(err);\n            }\n            let title = \"Error\";\n            let msg = \"Unable to publish changes. Please check that you are connected to the internet and try again.\";\n            showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={onAccept}/>)\n            console.log('Error in saving attachment', err)\n        }\n    });\n}\n\nconst renameDiagram = () => {\n    const rename = (name) => {\n        macroData.diagramName = name;\n        docInfo.name = name;\n        numUpdatesInEditor++;\n        showDialog(<MessageDialog title={\"Diagram renamed\"} msg={\"You need to publish to save the new name.\"} okText={\"OK\"} onAccept={()=>showDialog(null)} />)\n    }\n\n    const cancel = () => {\n        showDialog(null);\n    }\n\n    let curName = !!macroData.diagramName? macroData.diagramName: '';\n    showDialog(<FileNameInputDialog title={\"Enter New Name\"} cancelText={\"Cancel\"} okText={\"Rename\"} onCancel={cancel} onAccept={rename} initialValue={curName}/>)\n}\n\nconst importLekhFile = () => {\n    const doImport = () => {\n        const onImport = () => {\n            sendEventToBackend(eventTypes.diagramImport);\n            numUpdatesInEditor++;\n            setPageSize();\n        }\n        showDialog(<LekhImporter showDialog={showDialog} onImport={onImport} onCancel={()=>{}} />)\n    }\n\n    let msg = \"Importing a Lekh file will replace the current diagram with a new Lekh file. This operation cannot be undone. Do you want to proceed?\";\n    let title = \"Import\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"No\"} okText={\"Yes\"} onCancel={()=>showDialog(null)} onAccept={doImport}/>)\n}\n\nconst importFromCloud = () => {\n    const doImport = () => {\n        const close = () => {\n            showDialog(null);\n        }\n\n        const pick = (docid) => {\n            showDialog(null);\n            setAppState('importing');\n            window.Module.getRemoteLekhContent(docid, (err, content) => {\n                var errMsg = null;\n                if (!err) {\n                    var out = window.Module.importLekh(content);\n                    if (out) {\n                        errMsg = \"Unable to import due to unexpected error. Please contact our support\";\n                    } else {\n                        canvas.draw();\n                        numUpdatesInEditor++;\n                    }\n                } else {\n                    errMsg = \"Unable to fetch the diagram from the cloud. Please try again. If the problem persists then contact our support\"\n                }\n\n                if (errMsg) {\n                    sendEventToBackend(eventTypes.cloudImportError);\n                    showDialog(<MessageDialog title={\"Error\"} msg={errMsg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n                } else {\n                    sendEventToBackend(eventTypes.cloudImport);\n                }\n                setAppState('ready');\n\n                setTimeout(() => {\n                    canvas.draw();\n                }, 10);\n            });\n        }\n\n        let picker = <LekhItemPicker close={close} pick={pick} defaultTitle={\"Import\"} folderOnly={false} pickText={\"Import\"}/>\n        showDialog(picker);\n    }\n    let msg = \"Importing from Lekh Cloud will replace the current diagram with the imported file. This operation cannot be undone. Do you want to proceed?\";\n    let title = \"Import\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"No\"} okText={\"Yes\"} onCancel={()=>showDialog(null)} onAccept={doImport}/>)\n}\n\nconst copyToLekhCloud = () => {\n    const close = () => {\n        showDialog(null);\n    }\n    const newName = (children) => {\n        const isUnique = (name) => {\n            for (let item of children) {\n                if (item.name == name) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        var name = macroData.diagramName;\n        var count = 0;\n        while (!isUnique(name)) {\n            count++;\n            name = macroData.diagramName + \"-\" + count;\n        }\n        return name;\n    }\n\n    const pick = (docid, children) => {\n        showDialog(null);\n        let diagName = newName(children);\n        var content = window.Module.getLekh();\n        setAppState('exporting');\n        window.Module.uploadDoc(diagName, docid, '', content, (err) => {\n            setAppState('ready');\n            let title = \"\";\n            let msg = \"\";\n            if (err) {\n                title = \"Error\";\n                msg = \"Unable to copy. Please try again. If problem persists then contact our support\";\n            } else {\n                title = \"Copied successfully\";\n                msg = \"\";\n            }\n            showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n        })\n    }\n    let picker = <LekhItemPicker close={close} pick={pick} defaultTitle={\"Select Folder\"} folderOnly={true} pickText={\"Copy Here\"}/>\n    showDialog(picker);\n}\n\nconst setPageSize = () => {\n    var pageEditor = window.Module.startPageEditing();\n    pageEditor.setSize(window.Module.CanvasSizeType.Infinite, {width: 0, height: 0, unit: window.Module.Unit.Inch}, \"infinite\");\n}\n\natlassian.setShowDialogHandler = (dialogHandler, setStateForApp) => {\n    showDialog = dialogHandler;\n    setAppState = setStateForApp;\n    eventListener.trigger();\n}\n\natlassian.init = (params) => {\n    logDebug(() => console.log('Init called: ', performance.now()));\n\n    if (params.editor == 'true') {\n        integMode = {\n            useLekhBackend: false,\n            editor: {\n                showOptions: true,\n                fileNameEditable: true,\n                readOnly: false\n            },\n            viewer: null\n        };\n    } else {\n        integMode = {\n            useLekhBackend: false,\n            editor: null,\n            viewer: {\n                full: params.viewertype == 'full',\n                makeLink: params.viewertype != 'full',\n                showEditOption: false,\n                showOptions: false\n            },\n        };\n    }\n\n    const checkLicenseAndGetPageContext = () => {\n        // check license in prod only\n        var checkLicense = constant.baseUrl.startsWith('https://api.lekh.app');\n        if (checkLicense && integMode.editor != null) {\n            if (!params.lic || params.lic == 'none') {\n                waitFor(() => showDialog != null).then(() => {\n                    let title = \"Invalid license\";\n                    let msg = \"You do not have a valid licence to use Lekh Diagram\";\n                    showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=> {\n                        showDialog(null);\n                        closeEditor(false);\n                    }}/>)\n                });\n                return;\n            }\n        }\n\n        getPageContext();\n    }\n\n    const checkCustomContent = () => {\n        var customContentId = null;\n        if (params.custom == 'true') {\n            customContentId = params.customContentId;\n        }\n        if (customContentId == null) {\n            checkLicenseAndGetPageContext();\n        } else {\n            getContentInfo(customContentId, true, (err, resp) => {\n                if (err == null) {\n                    customContentInfo = JSON.parse(decodeURIComponent(resp.body.storage.value));\n                    checkLicenseAndGetPageContext();\n                }\n            });\n        }\n    }\n    \n    if (!window.AP) {\n        var head = document.getElementsByTagName('head')[0];\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.onload = function() {\n            checkCustomContent()\n        }\n        script.src = 'https://connect-cdn.atl-paas.net/all.js';\n        head.appendChild(script);\n    } else {\n        checkCustomContent();\n    }\n}\n\natlassian.getIntegMode = (params) => {\n    return integMode;\n}\n\natlassian.getUser = (cb) => {\n    //return state, token, info\n    cb('available', 'dummy', {name: ''});\n}\n\natlassian.getDocInfo = (cb) => {\n    // return state, docid, info\n    waitFor(()=> macroData != null).then(() => {\n        if (macroData.diagramName) {\n            docInfo.name = macroData.diagramName;\n        }\n        if (macroData.attachmentName) {\n            docInfo.docid = macroData.attachmentName;\n        }\n        cb('available', 'dummy', docInfo);\n    })\n}\n\natlassian.handleClickOnViewer = (evt) => {\n    var name = \"\";\n    if (macroData && macroData.diagramName) {\n        name = macroData.diagramName;\n    }\n    window.AP.dialog.create({\n        key: 'viewer-full-screen',\n        width: '100%',\n        height: '100%',\n        chrome: true,\n        header: name\n      }).on(\"close\", () => {\n      });\n}\n\natlassian.closeEditor = () => {\n    closeEditor(true);\n}\n\natlassian.publishEditorChanges = async () => {\n    return new Promise((resolve, reject) => {\n        if (numUpdatesInEditor > draftSavedAtCounter) {\n            getDiagramsInPage((err, diagrams) => {\n                if (err) {\n                    sendEventToBackend(eventTypes.macroFindError, null, err);\n                }\n                let count = 0;\n                if (!!diagrams) {\n                    for (let item of diagrams) {\n                        if (item.attachmentName == macroData.attachmentName) {\n                            count++\n                            if (count > 1) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (count > 1) {\n                    // there exists a macro with same attachment name\n                    // to fix the conflicts, rename the attachment name\n                    // for this macro. This happens in copy paste\n                    macroData.attachmentName = v4();\n                    macroData.customContentId = null;\n                }\n                publish((err) => {\n                    if (err == null) {\n                        resolve();\n                    } else {\n                        reject(err);\n                    }\n                });\n            });\n        } else {\n            deleteDraft(e=> {\n                setTimeout(() => {\n                    window.AP.dialog.close();\n                }, 1);\n                resolve();\n            });\n        }\n    });\n}\n\natlassian.loadDoc = async () => {\n    logDebug(() => console.log('loadDoc called: ', performance.now()));\n    await waitFor(() => lekhAttachment != null);\n    if (integMode.editor != null) {\n        await waitFor(() => draftAttachment != null);\n        if (draftAttachment != '') {\n            confirmDraftLoad();\n            await waitFor(() => draftAttachment == null || draftAttachment == '');\n        }\n    }\n\n    if (lekhAttachmentReadErr != null && integMode.viewer != null && lekhAttachment == '') {\n        window.Module.loadDoc(JSON.stringify(LekhErrJson));\n    } else {\n        window.Module.loadDoc(lekhAttachment);\n    }\n\n    logDebug(() => console.log('doc loaded: ', performance.now()));\n\n    // override the send so that we can track user's changes in the doc\n    window.wsmanager.send = onDiagramChange;\n    window.Module.startDoc(macroData.attachmentName? macroData.attachmentName : 'docid');\n    \n    setPageSize();\n\n    window.drawCanvas();\n\n    if (integMode.viewer != null) {\n        setViewerSize();\n        if (!integMode.viewer.full) {\n            appEvent.resizeListener.addListener(setViewerSize);\n        }\n    }\n    window.wsmanager.setState('ready');\n}\n\natlassian.customizeSidebar = (sidebarMenu) => {\n    let items = [\n    {\n        id: menuState.menus.selection,\n        icon: <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Select',\n    },\n    {\n        id: menuState.menus.move,\n        icon: <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Move',\n    }];\n\n    return items.concat(sidebarMenu.slice(2));\n}\n\natlassian.customizeAppMenu = (appMenu) => {\n    var subOption = [\n        {id: 'fromLekhFile', name: 'Lekh File', handler: importLekhFile},\n        {id: 'fromLekhCloud', name: 'From Lekh Cloud', handler: importFromCloud}\n    ]\n    var menus = [\n        { id: \"renameDiagram\", name: 'Rename Diagram', checkable: false, handler: renameDiagram },\n        { id: \"importLekh\", name: 'Import', submenu:  subOption},\n        { id: \"exportToCloud\", name: 'Copy to Lekh Cloud', checkable: false, handler: copyToLekhCloud}\n    ];\n\n    var newMenu = appMenu.slice(1);\n    newMenu.splice(5, 1);\n    return menus.concat(newMenu)\n}\n\natlassian.handleLogoClick = () => {\n    window.open('https://lekh.app', '_blank')\n}\n\natlassian.shouldShowQuickTip = () => {\n    if (!macroData || !macroData.attachmentName) {\n        return false;\n    }\n    return true;\n}\n\nexport default atlassian;\n\n","import atlassian from './atlassian';\n\nconst integ = { }\nvar integImpl = null;\n\ninteg.isIntegration = (params) => {\n    if (params.atlassian == 'true') {\n        integImpl = atlassian;\n        integImpl.init(params);\n        return true;\n    }\n    return false;\n}\n\ninteg.getIntegMode = (params) => {\n    if (params.atlassian == 'true') {\n        return atlassian.getIntegMode(params);\n    }\n    return null;\n}\n\ninteg.getUser = (cb) => {\n    integImpl.getUser(cb);\n}\n\ninteg.getDocInfo = (cb) => {\n    integImpl.getDocInfo(cb);\n}\n\ninteg.loadDoc = async () => {\n    integImpl.loadDoc();\n}\n\ninteg.handleClickOnViewer = (evt) => {\n    integImpl.handleClickOnViewer();\n}\n\ninteg.closeEditor = () => {\n    integImpl.closeEditor();\n}\n\ninteg.publishEditorChanges = async () => {\n    await integImpl.publishEditorChanges();\n}\n\ninteg.customizeSidebar = (sidebarMenu) => {\n    return integImpl.customizeSidebar(sidebarMenu);\n}\n\ninteg.customizeAppMenu = (appMenu) => {\n    return integImpl.customizeAppMenu(appMenu);\n}\n\ninteg.setShowDialogHandler = (showDialog, setAppState) => {\n    integImpl.setShowDialogHandler(showDialog, setAppState);\n}\n\ninteg.handleLogoClick = () => {\n    integImpl.handleLogoClick();\n}\n\ninteg.shouldShowQuickTip = () => {\n    return integImpl.shouldShowQuickTip();\n}\n\nexport default integ;","import integ from \"../integ/integ\";\n\nconst uiConfig = {\n}\n\nvar integMode = {\n    useLekhBackend: false,\n    editor: {\n        showOptions: false,\n        fileNameEditable: false,\n        readOnly: false\n    },\n    viewer: {\n        full: false,\n        makeLink: false,\n        showEditOption: false,\n        showOptions: false\n    },\n};\n\nvar offline = false;\n\nuiConfig.initForIntegMode = (params) => {\n    integMode = integ.getIntegMode(params);\n}\n\nuiConfig.initForLekhBackendMode = () => {\n    integMode = null;\n    offline = false;\n}\n\nuiConfig.initForOfflineMode = () => {\n    integMode = null;\n    offline = true;\n}\n\nuiConfig.isIntegMode = () => {\n    return integMode != null;\n}\n\nuiConfig.isIntegViewer = () => {\n    return integMode != null && integMode.editor == null;\n}\n\nuiConfig.isViewerLink = () => {\n    if (integ != null && integMode != null && integMode.viewer != null) {\n        return integMode.viewer.makeLink;\n    }\n    return false;\n}\n\nuiConfig.isFullViewer = () => {\n    if (integ != null && integMode != null && integMode.viewer != null) {\n        return integMode.viewer.full;\n    }\n    return false;\n}\n\nuiConfig.readOnly = () => { \n    if (integMode != null) {\n        if (integMode.editor != null) {\n            return integMode.editor.readOnly;\n        }\n        return true;\n    }\n    return window.wsmanager && window.wsmanager.readOnly();\n}\n\nuiConfig.offline = () => {\n    return offline;\n}\n\nuiConfig.shouldLoadShapes = () => {\n    if (integMode != null) {\n        return integMode.editor != null;\n    }\n    return true;\n}\n\nuiConfig.shouldAttachMouseEventHandler = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        } else {\n            return true;\n        }\n    }\n    return true;\n}\n\nuiConfig.shouldAttachKeyboardEventHandler = () => {\n    if (integMode != null) {\n        return integMode.editor != null;\n    }\n    return true;\n}\n\n\nuiConfig.shouldShowFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return true;\n    }\n    return true;\n}\n\nuiConfig.isZoomOnlyFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return false;\n    }\n    return false;\n}\n\nuiConfig.shouldShowPagesInFooter = () => {\n    return integMode == null;\n}\n\nuiConfig.shouldShowUndoRedoInFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return false;\n    }\n    return true;\n}\n\nuiConfig.isUsingLekhBackend = () => {\n    if (integMode != null) {\n        return integMode.useLekhBackend;\n    }\n    return true;\n}\n\nuiConfig.shouldShowPublishCancelButton = () => {\n    return integMode != null && integMode.editor != null\n}\n\nuiConfig.shouldShowQuickTip = () => {\n    if (integMode != null && integMode.editor != null) {\n        return integ.shouldShowQuickTip();\n    }\n    return true;\n}\n\nexport default uiConfig;","import stencils from \"./Stencils\"\nimport libnames from '../data/libnames.json'\nimport uiConfig from \"../common/UIConfig\"\n\nvar shapes = {\n    expanded: false,\n    libraryColCount: 4,\n    scroll: 0,\n    searchText: ''\n}\n\nconst loadingUrls = new Set()\n\nvar miniGroup = {\n    name: 'Default',\n    shapes: [\n        {category: 0, num: 0, name: ''},\n        {category: 0, num: 2, name: ''},\n        {category: 0, num: 3, name: ''},\n        {category: 0, num: 5, name: ''},\n        {category: 0, num: 6, name: ''},\n        {category: 0, num: 7, name: ''},\n        {category: 0, num: 8, name: ''},\n        {category: 2, num: 1, name: ''},\n        {category: 2, num: 2, name: ''},\n        {category: 2, num: 5, name: ''},\n        {category: 2, num: 6, name: ''},\n        {category: 2, num: 10, name: ''},\n        {category: 2, num: 20, name: ''},\n        {category: 3, num: 0, name: ''},\n        {category: 3, num: 4, name: ''},\n        {category: 5, num: 0, name: ''},\n        {category: 5, num: 4, name: ''},\n        {category: 5, num: 5, name: ''},\n        {category: 5, num: 6, name: ''},\n        {category: 5, num: 7, name: ''},\n        {category: 5, num: 8, name: ''},\n        {category: 5, num: 9, name: ''},\n        {category: 5, num: 10, name: ''},\n        {category: 4, num: 1, name: ''}\n    ]\n}\n\nfunction initEmptyCategs() {\n    for (let item of stencils) {\n        window.Module.libraryStore().initEmptyCateg(item[0], item[1], item[2], item[3], item[4]);\n    }\n}\n\nasync function loadAll() {\n    window.Module.libraryStore().initNames(JSON.stringify(libnames));\n    let contents = { }\n    let loadTemplate = async (idx, name) => {\n        await fetch(name)\n        .then(response => response.json())\n        .then(response => {\n          contents[idx] = JSON.stringify(response);\n        })\n    }\n    var promise = Promise.all([\n        loadTemplate(0, \"templates/v4/templates.json\"),\n        loadTemplate(1, \"templates/v4/connection_arrows.json\"),\n        loadTemplate(2, \"templates/v4/basic.json\"),\n        loadTemplate(3, \"templates/v4/container.json\"),\n        loadTemplate(4, \"templates/v4/flowchart.json\"),\n        loadTemplate(5, \"templates/v4/arrow.json\"),\n        loadTemplate(6, \"templates/v4/callout.json\"),\n        loadTemplate(7, \"templates/v4/misc.json\"),\n        loadTemplate(8, \"templates/v4/uml.json\")\n    ]);\n    await promise;\n\n    for (let idx = 0; idx < 9; idx++) {\n        if (contents[idx]) {\n            window.Module.libraryStore().initObjects(contents[idx]);\n        }\n    }\n}\n\nshapes.initialize = async function() {\n    if (!uiConfig.shouldLoadShapes()) {\n        return;\n    }\n    await loadAll();  \n    window.Module.libraryStore().init(shapes.libraryColCount);\n    initEmptyCategs();\n    window.Module.libraryStore().onDisplaySettingChange();\n}\n\nshapes.groupCount = function() {\n    return window.Module.getShapeLibGroupCount();\n}\n\nshapes.getGroup = function(idx) {\n    var group = window.Module.getShapeLibGroup(idx);\n    return group;\n}\n\nshapes.expandGroup = function(idx, flag) {\n    window.Module.expandShapeLibGroup(idx, flag);\n}\n\nshapes.getShapes = function(idx, cb) {\n    var group = window.Module.getShapeLibGroup(idx);\n    if (group == null) {\n        return;\n    }\n    if (group.contentUrl) {\n        if (loadingUrls.has(group.contentUrl)) {\n            return;\n        }\n        loadingUrls.add(group.contentUrl);\n        fetch(group.contentUrl)\n            .then(response => response.json())\n            .then(response => {\n                window.Module.libraryStore().initObjects(JSON.stringify(response));\n                cb();\n                loadingUrls.delete(group.contentUrl);\n            });\n    }\n}\n\nshapes.getMiniGroup = function() {\n    return miniGroup;\n}\n\nshapes.getDisplaySettings = function() {\n    return window.Module.getShapeLibDisplaySettings();\n}\n\nshapes.setDisplaySetting = function(name, flag) {\n    window.Module.libraryStore().addDisplaySetting(name, flag);\n    window.Module.libraryStore().onDisplaySettingChange();\n}\n\nshapes.search = function(text) {\n    shapes.searchText = text;\n    window.Module.libraryStore().filterObjects(text);\n}\n\nexport default shapes\n","import globalState from './GlobalState'\nimport shapes from '../shapelib/Shapes'\n\nvar canvas = {\n    showGrid: true,\n    gridType: 2,\n };\n\nconst CANVAS_FIXED = 1;\nconst UNIT_PT = 0;\nconst UNIT_PX = 1;\nconst UNIT_IN = 2;\nconst UNIT_CM = 3;\n\nconst minWidth = 200;\nconst minHeight = 200;\n\nvar canvasElement = null;\n\nvar isScrolling = false;\nvar savedScroll = {x:0, y: 0};\nvar scrollingFrom = {x: 0, y: 0};\n\nvar infiniteScroll = true;\nvar uiScrollX = 0;\nvar uiScrollY = 0;\nvar effectiveScrollX = 0;\nvar effectiveScrollY = 0;\n\nvar effectiveWidth = 0;\nvar effectiveHeight = 0;\n\nvar canvasWidth = 0;\nvar canvasHeight = 0;\n\nvar viewPortWidth = 0;\nvar viewPortHeight = 0;\n\nvar pageLayoutDoneOnce = false;\n\nconst fixCanvas = function(cnv, width, height) {\n    var dpr = window.devicePixelRatio || 1;\n    cnv.width = width * dpr;\n    cnv.height = height * dpr;\n    cnv.style.width = width + \"px\";\n    cnv.style.height = height + \"px\";\n    var ctx = cnv.getContext(\"2d\");\n    ctx.scale(dpr, dpr);\n}\n\nconst computeSize = (vport) => {\n    var rect = vport.getBoundingClientRect();\n    \n    viewPortWidth = rect.width;\n    viewPortHeight = rect.height;\n\n    // Initialize assuming it is infinite scroll\n    canvasWidth = viewPortWidth;\n    canvasHeight = viewPortHeight;\n\n    effectiveHeight = canvasHeight;\n    effectiveWidth = canvasWidth;\n\n    effectiveScrollX = 0;\n    effectiveScrollY = 0;\n    \n    infiniteScroll = true;\n\n    // Check if there is fixed canvas size\n    if (window.wsmanager && window.wsmanager.state == 'ready') {\n        var pageEditor = window.Module.startPageEditing();\n        var sz = pageEditor.getSize();\n        var tp = pageEditor.getCanvasType();\n        \n        // In CSS: a pt is 1/72 of an inch, and a px is 1/96 of an inch.\n        // In Lekh, a pt in 1/144 of an inch and we map 1 Lekh pt to 1 css px \n        var pointsPerInch = 144;\n        var pixelsPerPoint = 1;\n        var pixlesPerInch = pointsPerInch * pixelsPerPoint;\n        if (tp.value == CANVAS_FIXED) {\n            infiniteScroll = false;\n            if (sz.unit.value == UNIT_PT) {\n                //canvasWidth = (sz.width * 96) / 72;\n                //canvasHeight = (sz.height * 96) / 72;\n                canvasWidth = sz.width;\n                canvasHeight = sz.height;\n            } else if (sz.unit.value == UNIT_PX) {\n                canvasWidth = sz.width;\n                canvasHeight = sz.height;\n            } else if (sz.unit.value == UNIT_IN) {\n                canvasWidth = sz.width * pixlesPerInch;\n                canvasHeight = sz.height * pixlesPerInch;\n            } else if (sz.unit.value == UNIT_CM) {\n                canvasWidth = (sz.width / 2.54) * pixlesPerInch;\n                canvasHeight = (sz.height / 2.54) * pixlesPerInch;\n            }\n            var zm = window.Module.getZoom();\n            canvasWidth *= zm;\n            canvasHeight *= zm;\n\n            if (!pageLayoutDoneOnce) {\n                pageLayoutDoneOnce = true;\n                if (canvasWidth < viewPortWidth) {\n                    uiScrollX = (viewPortWidth - canvasWidth) / 2;\n                }\n                if (canvasHeight < viewPortHeight) {\n                    uiScrollY = (viewPortHeight - canvasHeight) / 2;\n                }\n            }\n\n            var effectiveMinWidth = Math.min(minWidth, viewPortWidth)\n            var effectiveMinHeight = Math.min(minHeight, viewPortHeight)\n            // check canvas moving out of view port to left and top\n            if (canvasWidth <= effectiveMinWidth) {\n                uiScrollX = uiScrollX < 0 ? 0 : uiScrollX;\n            } else if (canvasWidth + uiScrollX < effectiveMinWidth) {\n                uiScrollX =  effectiveMinWidth - canvasWidth;\n            }\n\n            if (canvasHeight < effectiveMinHeight) {\n                uiScrollY = uiScrollY < 0 ? 0 : uiScrollY;\n            } else if (canvasHeight + uiScrollY < effectiveMinHeight) {\n                uiScrollY = effectiveMinHeight - canvasHeight;\n            }\n\n            // check canvas moving out of view port to right and bottom\n            if (uiScrollX > viewPortWidth - effectiveMinWidth) {\n                uiScrollX = viewPortWidth - effectiveMinWidth;\n            }\n\n            if (uiScrollY > viewPortHeight - effectiveMinHeight) {\n                uiScrollY = viewPortHeight - effectiveMinHeight;\n            }\n\n            effectiveScrollX = uiScrollX;\n            effectiveScrollY = uiScrollY;\n\n            effectiveWidth = canvasWidth;\n            effectiveHeight = canvasHeight;\n\n            // check clipping in left and top\n            if (effectiveScrollX < 0) {\n                effectiveWidth += effectiveScrollX;\n                effectiveScrollX = 0;\n            }\n            if (effectiveScrollY < 0) {\n                effectiveHeight += effectiveScrollY;\n                effectiveScrollY = 0;\n            }\n\n            // check clipping to right and bottom\n            if (uiScrollX + canvasWidth > viewPortWidth) {\n                effectiveWidth -= canvasWidth + uiScrollX - viewPortWidth;\n            }\n\n            if (uiScrollY + canvasHeight > viewPortHeight) {\n                effectiveHeight -= canvasHeight + uiScrollY - viewPortHeight;\n            }\n        }\n    }\n}\n\ncanvas.setSize = () => {\n    canvasElement = document.getElementById(\"drawCanvas\");\n    var vport = document.getElementById(\"viewport\");\n    var gridPanel = document.getElementById(\"gridCanvas\");\n    var transparentPanel = document.getElementById(\"transparentPanel\");\n\n    if (!canvasElement || !vport || !gridPanel || !transparentPanel) {\n        return;\n    }\n\n    computeSize(vport);\n\n    fixCanvas(gridPanel, effectiveWidth, effectiveHeight);\n    fixCanvas(canvasElement, effectiveWidth, effectiveHeight);\n    fixCanvas(transparentPanel, viewPortWidth, viewPortHeight);\n    \n    gridPanel.style.position = 'absolute';\n    canvasElement.style.position = 'absolute';\n\n    if (infiniteScroll) {\n        gridPanel.style.left = '0px';\n        gridPanel.style.top = '0px';\n\n        canvasElement.style.left = '0px';\n        canvasElement.style.top = '0px';\n    } else {    \n        gridPanel.style.left = effectiveScrollX + 'px';\n        gridPanel.style.top = effectiveScrollY + 'px';\n\n        canvasElement.style.left = effectiveScrollX + 'px';\n        canvasElement.style.top = effectiveScrollY + 'px';\n\n        if (uiScrollX < 0 || uiScrollY < 0) {\n            var zm = window.Module.getZoom();\n            var sx = uiScrollX < 0? uiScrollX : 0;\n            var sy = uiScrollY < 0? uiScrollY : 0;\n            window.Module.setScroll({x: sx / zm, y: sy / zm});\n        } else {\n            window.Module.setScroll({x: 0, y: 0});\n        }\n    }\n}\n\nconst moveDelta = (dx, dy) => {\n    uiScrollX += dx;\n    uiScrollY += dy;\n    canvas.setSize();\n}\n\nconst moveDeltaForInfiniteScroll = (dx, dy) => {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    dx = dx / zm;\n    dy = dy / zm;\n    window.Module.setScroll({x: scroll.x + dx, y: scroll.y + dy});\n}\n\nconst move = (x, y, type) => {\n    if (type == 0) {\n        isScrolling = true;\n        savedScroll = {x: uiScrollX, y: uiScrollY}\n        scrollingFrom = {x: x, y: y}\n    }\n\n    if (type == 1 && isScrolling) {\n        var dx = x - scrollingFrom.x;\n        var dy = y - scrollingFrom.y;\n\n        uiScrollX = savedScroll.x + dx;\n        uiScrollY = savedScroll.y + dy;\n\n        canvas.setSize();\n    }\n\n    if (type == 2 && isScrolling) {\n        isScrolling = false;\n    }\n}\n\nconst moveForInfiniteScroll = (x, y, type) => {\n    if (type == 0) {\n        isScrolling = true;\n        savedScroll = window.Module.getScroll();\n        scrollingFrom = {x: x, y: y}\n    }\n\n    if (type == 1 && isScrolling) {\n        var dx = x - scrollingFrom.x;\n        var dy = y - scrollingFrom.y;\n\n        var zm = window.Module.getZoom();\n        var sx = savedScroll.x + dx / zm;\n        var sy = savedScroll.y + dy / zm;\n        window.Module.setScroll({ x: sx, y: sy });\n    }\n\n    if (type == 2 && isScrolling) {\n        isScrolling = false;\n    }\n}\n\ncanvas.toggleGrid = function() {\n    canvas.showGrid = !canvas.showGrid;\n    canvas.drawGrid();\n}\n\ncanvas.onResize = function() {\n    canvas.layout();\n}\n\ncanvas.onConnectionStateChanged = () => {\n    if (!window.wsmanager || \n        (window.wsmanager.state != 'init' &&\n        window.wsmanager.state != 'ready')) {\n        return;\n    }\n    canvas.layout();\n}\n\ncanvas.layout = function() {\n    canvas.setSize();\n    canvas.drawGrid();\n    if(window.wsmanager && window.wsmanager.state == 'ready') {\n        canvas.draw();\n    }\n}\n\ncanvas.moveDelta = function(dx, dy) {\n    if (infiniteScroll) {\n        moveDeltaForInfiniteScroll(dx, dy);\n    } else {\n        moveDelta(dx, dy);\n    }\n    canvas.drawGrid();\n    canvas.draw();\n}\n\ncanvas.move = function(x, y, type) {\n    if (infiniteScroll) {\n        moveForInfiniteScroll(x, y, type);\n    } else {\n        move(x, y, type);\n    }\n    canvas.drawGrid();\n    canvas.draw();\n}\n\ncanvas.getMidPoint = () => {\n    if (infiniteScroll) {\n        var tp = document.getElementById('transparentPanel');\n        var rect = tp.getBoundingClientRect();\n        var x = (rect.left + rect.right) / 2;\n        var y = (rect.top + rect.bottom) / 2;\n        return {x: x, y: y};\n    }\n    return {x: effectiveScrollX + effectiveWidth / 2, y: effectiveScrollY + effectiveHeight / 2}\n}\n\ncanvas.isVisible = (x, y, pad) => {\n    var tp = document.getElementById('transparentPanel');\n    var rect = tp.getBoundingClientRect();\n    if (infiniteScroll) {\n        return x-pad >= rect.left && x+pad <= rect.right && y-pad >= rect.top && y+pad <= rect.bottom;\n    }\n    return x-pad >= effectiveScrollX && x+pad <= effectiveScrollX + effectiveWidth &&\n        y-pad >= effectiveScrollY && y+pad <= effectiveScrollY + effectiveHeight;\n}\n\ncanvas.mapx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (x  + scroll.x) * zm;\n}\n\ncanvas.mapy = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (y  + scroll.y) * zm;\n}\n\ncanvas.maprx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return x / zm - scroll.x;\n}\n\ncanvas.mapry = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return y / zm - scroll.y;\n}\n\ncanvas.mapPtUIScroll = (pt) => {\n    if (infiniteScroll) {\n        return pt;\n    }\n    return {x: pt.x - effectiveScrollX, y:pt.y - effectiveScrollY};\n}\n\ncanvas.toViewPort = (pt) => {\n    if (infiniteScroll) {\n        return pt;\n    }\n    return {x: pt.x + effectiveScrollX, y:pt.y + effectiveScrollY};\n}\n\ncanvas.getZoom = function() {\n    return window.Module.getZoom();\n}\n\ncanvas.zoomAt = function(x, y, factor) {\n    // (x + d1) * z1 = x'\n    // (x + d2) * z2 = x'\n    // from these two equations, calculate d2\n    var z1 = window.Module.getZoom();\n    z1 = Math.round(z1 * 100) / 100;\n    var z2 = Math.round(factor * 100) / 100;\n    \n    // If new zoom and old zoom are same in scale of [1 100]\n    // then do not do anything\n    if (Math.round(z1 * 100) == Math.round(z2 * 100)) {\n        return;\n    }\n    \n    if (infiniteScroll) {\n        var scroll = window.Module.getScroll();\n\n        var dx = (x / z2) - (x / z1) + scroll.x;\n        var dy = (y / z2) - (y / z1) + scroll.y;\n\n        window.Module.setScroll({x: dx, y: dy});\n        window.Module.setZoom(Math.round(z2 * 100));\n    } else {\n        var uiPt = canvas.mapPtUIScroll({x: x, y: y});\n        uiPt.x = uiPt.x < 0 ? 0: uiPt.x;\n        uiPt.y = uiPt.y < 0 ? 0: uiPt.y;\n        uiPt.x = uiPt.x > effectiveWidth? effectiveWidth: uiPt.x;\n        uiPt.y = uiPt.y > effectiveHeight? effectiveHeight: uiPt.y;\n\n        var canvasPtX = canvas.maprx(uiPt.x);\n        var canvasPtY = canvas.mapry(uiPt.y);\n\n        window.Module.setZoom(Math.round(z2 * 100));\n        canvas.setSize();\n        var ptx = canvas.mapx(canvasPtX)\n        var pty = canvas.mapy(canvasPtY);\n        \n        uiScrollX -= ptx - uiPt.x;\n        uiScrollY -= pty - uiPt.y;\n        canvas.setSize();\n    }\n\n    globalState.onZoom();\n    canvas.drawGrid();\n    canvas.draw();\n }\n\ncanvas.zoom = function(factor) {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    canvas.zoomAt(rect.width / 2, rect.height / 2, factor);\n}\n\ncanvas.exportToImage = function(format) {\n    var padding = 10;\n    var rect = window.Module.getBoundsOfAll();\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    var width = rect.width + 2 * padding;\n    var height = rect.height + 2 * padding;\n\n    var cel = document.createElement(\"canvas\");\n    fixCanvas(cel, width, height);\n    var ctx = cel.getContext(\"2d\");\n\n    if (format == \"jpg\" || format == \"jpeg\") {\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, width, height);\n    }\n    window.Module.drawCanvasForExport(ctx, sx, sy);\n    return {data: cel.toDataURL(\"image/\" + format), width: width, height: height }\n}\n\ncanvas.drawGrid = function() {\n    var panel = document.getElementById(\"gridCanvas\");\n    var wd = panel.width;\n    var ht = panel.height;\n    var ctx = panel.getContext('2d');\n    ctx.clearRect(0, 0, panel.width, panel.height);\n    if (!canvas.showGrid) {\n        return;   \n    }\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    var rad = 1 * zm;\n    var step = 48 * zm;\n\n    var startx = (scroll.x * zm) % step;\n    var starty = (scroll.y * zm) % step;\n\n    if (canvas.gridType == 1) {\n        if (step < 16) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.fillStyle = \"#c0c0c0\";\n        ctx.strokeStyle = \"#c0c0c0\";\n        for (var i = starty; i < ht; i+= step) {\n            for (var j = startx; j < wd; j+= step) {\n                ctx.moveTo(j + rad, i);\n                ctx.arc(j, i, rad, 0, 2 * Math.PI, false);\n            }\n        }\n        ctx.fill();\n        ctx.stroke();\n    } else {\n        if (step < 8) {\n            return;\n        }\n        ctx.lineWidth = 0.1;\n        ctx.strokeStyle = \"#606060\";\n        ctx.beginPath();\n        for (var i = starty; i < ht; i+= step) {\n          ctx.moveTo(0, i);\n          ctx.lineTo(wd, i);\n        }\n        for (i = startx; i < wd; i+= step) {\n          ctx.moveTo(i, 0);\n          ctx.lineTo(i, ht);\n        }\n        ctx.stroke();\n    }\n}\n  \ncanvas.draw = function() {\n    if (canvasElement == null) {\n        canvasElement = document.getElementById(\"drawCanvas\");\n    }\n    \n    var ctx = canvasElement.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    window.Module.drawCanvas(ctx);\n}\n\ncanvas.drawCell = function(categ, num, sz, ctx) {\n    var row = num / shapes.libraryColCount;\n    var col = num % shapes.libraryColCount;\n    var padding = 8;\n    window.Module.drawCell(categ, row, col, sz - padding, sz / 2, sz / 2, ctx);\n}\n\ncanvas.drawArrow = function(type, size, ctx) {\n}\n\nwindow.drawCanvas = canvas.draw;\nwindow.layoutCanvas = canvas.layout;\n\nexport default canvas;","import React, { useState } from \"react\"\nimport { AiOutlineClose } from \"react-icons/ai\"\n\nconst Feedback = ({ handleClose }) => {\n  const [feedbackForm, setFeedbackForm] = useState({})\n\n  const handleChange = e => {\n    const name = e.target.name\n    const value = e.target.value\n    const newEntry = { [name]: value }\n    setFeedbackForm({ ...feedbackForm, ...newEntry })\n  }\n\n  const submitForm = () => {\n    if (feedbackForm.message) {\n      if (window.wsmanager.send) {\n        window.wsmanager.send('', JSON.stringify({\n          'type': 'feedback',\n          'data': feedbackForm\n        }));\n      }\n      handleClose();\n    }\n  }\n\n  var submitDIsabled = !(feedbackForm.message);\n\n  return (\n    <div className=\"feedback \">\n      <div className=\"feedback-form \">\n        <AiOutlineClose\n          className=\"close-feedback\"\n          onClick={() => handleClose()}\n        />\n        <h2>Feedback</h2>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"name\">Name</label>\n          <input\n            id=\"name\"\n            onChange={e => handleChange(e)}\n            name=\"name\"\n            required\n          />\n        </div>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"email\">Email Address</label>\n          <input\n            id=\"email\"\n            onChange={e => handleChange(e)}\n            name=\"email\"\n            type=\"email\"\n            required\n          />\n        </div>\n\n        <div className=\"feedback-input\">\n          <label htmlFor=\"message\">Message</label>\n          <textarea\n            id=\"message\"\n            onChange={e => handleChange(e)}\n            name=\"message\"\n            type=\"email\"\n            required\n          />\n        </div>\n\n        <button className=\"submit-feedback\" onClick={submitForm} disabled={submitDIsabled}>\n          Submit\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Feedback\n","import './Tip.css'\n\nimport React from 'react'\nimport { Dialog } from \"@material-ui/core\";\nimport Button from '@material-ui/core/Button';\nimport { AiOutlineClose } from \"react-icons/ai\"\nimport uiConfig from '../../common/UIConfig';\n\nexport const tip = {\n    force: false,\n    closed: false,\n    reload: () => {},\n    showDoNotShowButton: true,\n    show: () => {tip.force = true; tip.closed=false; tip.showDoNotShowButton = false; tip.reload();}\n}\n\nconst getStorage = () => {\n    if (typeof(window.Storage) == \"undefined\") {\n        return null;\n    }\n    try {\n        return window.localStorage;\n    } catch(e) { }\n\n    return null;\n}\n\ntip.showing = () => {\n    if (tip.closed) {\n        return false\n    }\n\n    if (!uiConfig.shouldShowQuickTip()) {\n        return false;\n    }\n\n    if (tip.force) {\n        return true;\n    }\n\n    var storage = getStorage();\n    if (!storage) {\n        return false;\n    }\n    var showTip = storage.getItem(\"showTip\");\n    if (showTip == null || typeof(showTip) == 'undefined') {\n        return true;\n    }\n\n    return showTip != \"true\";\n}\n\ntip.doNotShowAgain = () => {\n    var storage = getStorage();\n    if (!storage) {\n        return;\n    }\n    storage.setItem(\"showTip\", \"true\");\n}\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n      () => { stateRef.current = state },\n      [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst QuickTip = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n    React.useEffect(() => {\n        tip.reload = () => {\n            reload();\n        }\n\n        window.setTimeout(()=> {\n            var vid = document.getElementById(\"tip_video\");\n            if (vid != null && vid.paused) {\n                vid.setAttribute(\"controls\", \"controls\")\n            }\n        }, 200);\n    }, [])\n\n    if (!tip.showing()) {\n        return null;\n    }\n\n    const handleClose = () => {\n        tip.closed = true;\n        tip.force = false;\n        reload();\n    }\n\n    const doNotShowAgain = () => {\n        handleClose();\n        tip.doNotShowAgain();\n    }\n\n    return <Dialog onClose={handleClose} open={true}>\n        <div className=\"tip_container\">\n            <div className=\"tip_header\">\n                <span className=\"tip_title\">Drawing Tip</span>\n                <AiOutlineClose className=\"tip_close\" onClick={() => handleClose()}></AiOutlineClose>\n            </div>\n            <div>\n                <video id=\"tip_video\" className=\"tip_video\" autoPlay muted loop>\n                    <source src=\"a1/videos/QuickTip.mp4\" type=\"video/mp4\" />\n                </video>\n            </div>\n            {tip.showDoNotShowButton && <div className=\"tip_donot_show\" >\n                <Button onClick={doNotShowAgain}>Do not show again</Button>\n            </div>}\n        </div>\n    </Dialog>\n}\n\nexport default QuickTip;","import React from \"react\";\n\nconst InputField = ({\n  label,\n  type,\n  id,\n  name,\n  value,\n  handleChange,\n  placeholder,\n  pattern,\n  required,\n  error,\n  errorText,\n  readOnly\n}) => {\n  return (\n    <div className=\"flex  flex-col\">\n      {label ? (\n        <label\n          htmlFor={id}\n          className=\"text-prmDGrey mb-2 font-Poppins lg:text-lg\"\n        >\n          {label}\n        </label>\n      ) : (\n        <label\n          htmlFor=\"email\"\n          className=\"text-prmDGrey mb-2 font-Poppins lg:text-lg invisible\"\n        >\n          *****\n        </label>\n      )}\n      {error && (\n        <p className=\"font-italic text-red-400 my-0 mb-2 text-sm\">\n          {errorText}\n        </p>\n      )}\n      <input\n        type={type}\n        id={id}\n        placeholder={placeholder}\n        name={name}\n        value={value}\n        onChange={handleChange}\n        readOnly={readOnly}\n        pattern={pattern}\n        required={required}\n        className={`${\n          readOnly ? \"cursor-not-allowed bg-gray-100\" : \"\"\n        }   \"lg:text-lg outline-none text-prmDGrey border border-1 border-prmLGrey px-3 py-1.5 mb-5 font-Poppins \"`}\n      />\n    </div>\n  );\n};\n\nexport default InputField;\n","import useSWR from \"swr\"\nimport { fetcher } from \"../utils/ApiRequests\"\n\nconst useFetch = url => {\n  const { data, error } = useSWR(url, fetcher)\n\n  return { data, loading: !error && !data, error }\n}\n\nexport default useFetch\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog } from \"@material-ui/core\";\nimport Select from \"react-select\";\nimport InputField from \"../InputField/InputField\";\nimport { useState } from \"react\";\nimport { deleteShare, shareDoc } from \"../../utils/ApiRequests\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport { toast } from \"react-toastify\";\nimport { HiInformationCircle } from \"react-icons/hi\";\nimport useFetch from \"../../hooks/useFetch\";\nimport { IoMdMail } from \"react-icons/io\";\nimport { mutate } from \"swr\";\nimport { BiArrowBack } from \"react-icons/bi\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { useEffect } from \"react\";\n\nconst ShareModal = ({ state, close, doc }) => {\n  const id = doc.docid;\n  const [email, setEmail] = useState(\"\");\n  const [type, setType] = useState(\"private\");\n  const [access, setAccess] = useState(\"read\");\n  const [loading, setLoading] = useState(false);\n  const [viewShares, setViewShares] = useState(false);\n  const { data, loading: fetch } = useFetch(id ? `/v1.1/docs/${id}/share` : \"\");\n  const [copied, setCopied] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(null);\n  const options = [\n    { value: \"private\", label: \"Private\" },\n    { value: \"public\", label: \"Public\" }\n  ];\n  const accessOptions = [\n    { value: \"read\", label: \"Read\" },\n    { value: \"write\", label: \"Write\" }\n  ];\n\n  useEffect(() => {\n    setEmail(\"\");\n    setType(\"private\");\n    setAccess(\"read\");\n    setCopied(false);\n    setError(null);\n    setSuccess(false);\n  }, [close]);\n\n  // const handleKeyDown = event => {\n  //   console.log(event.key);\n  //   // if (event.key.toLowerCase() == \"esc\") {\n  //   //   close();\n  //   // }\n  // };\n\n  // useEffect(() => {\n  //   document.addEventListener(\"keydown\", handleKeyDown);\n\n  //   return () => {\n  //     document.removeEventListener(\"keydown\", handleKeyDown);\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  var docUrl = window.origin + \"/?docid=\" + id;\n  if (doc.type == \"folder\") {\n    docUrl =\n      window.origin +\n      \"/#/docs/shared?path=\" +\n      encodeURIComponent(id + \"/\" + doc.name);\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const privateForm = {\n      email: email,\n      type: access\n    };\n    setLoading(true);\n    setError(null);\n    shareDoc(id, type === \"private\" ? privateForm : { type: access })\n      .then(res => {\n        mutate(`/v1.1/docs/${id}/share`);\n        setViewShares(true);\n        setError(null);\n        setSuccess(true);\n      })\n      .catch(err => {\n        if (\n          err?.response?.data?.code == \"already_has_permission\" ||\n          err?.response?.data?.code == \"already_has_folder_permission\"\n        ) {\n          setError(\"User already has access\");\n        }\n\n        if (err?.response?.data?.code == \"user_not_found\") {\n          setError(\"User with the given email not found\");\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\" aria-labelledby=\"Share\">\n      <div className={`py-4 w-64 lg:w-96 bg-white`}>\n        {!viewShares && (\n          <form onSubmit={handleSubmit}>\n            <div className=\"px-3 flex justify-between items-center mb-3\">\n              <div />\n              <h4 className=\"text-center m-0 text-lg\">Share</h4>\n\n              <AiOutlineClose\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  if (success === true) {\n                    docsManager.reload();\n                    close();\n                  }\n                  close();\n                }}\n              />\n            </div>\n\n            <hr />\n            <div className=\"px-5 mt-1\">\n              <Select\n                options={\n                  doc.type == \"folder\"\n                    ? [{ value: \"private\", label: \"Private\" }]\n                    : options\n                }\n                className=\"mb-3\"\n                onChange={e => setType(e.value)}\n                placeholder=\"Private\"\n                defaultValue=\"private\"\n              />\n\n              <p className=\"m-0 mb-1 font-medium\">Access Level</p>\n              <Select\n                options={accessOptions}\n                className=\"mb-3\"\n                onChange={e => setAccess(e.value)}\n                defaultValue=\"read\"\n                placeholder=\"Read\"\n              />\n\n              {type === \"public\" && (\n                <CopyToClipboard text={docUrl} onCopy={() => setCopied(true)}>\n                  <div className=\"copy-grid gap-3 items-center w-full\">\n                    <div className=\"-mt-4\">\n                      <InputField required={true} value={docUrl} readOnly />\n                      {/* <span className=\"-mb-2\">Copied</span> */}\n                    </div>\n\n                    <span className=\"text-white font-medium text-center text-sm block py-1 bg-blue-500 cursor-pointer outline-none border-none border-0 \">\n                      Copy\n                    </span>\n                  </div>\n                </CopyToClipboard>\n              )}\n              {copied && <span className=\"-mt-3 block italic\">Copied</span>}\n\n              {type === \"private\" && (\n                <>\n                  <InputField\n                    label=\"Email\"\n                    required={true}\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    handleChange={e => setEmail(e.target.value)}\n                    value={email}\n                  />\n                  {error && !loading && (\n                    <span className=\"-mt-3 block italic text-red-500 text-sm\">\n                      {error}\n                    </span>\n                  )}\n                </>\n              )}\n              <div className=\"mt-3\">\n                {loading ? (\n                  <MiniLoader />\n                ) : (\n                  <div className=\"flex items-center justify-between\">\n                    <p\n                      className=\"m-0 cursor-pointer italic flex items-center space-x-1 \"\n                      onClick={() => setViewShares(true)}\n                    >\n                      <HiInformationCircle className=\"m-0 text-lg\" />\n                      <span>View Shares</span>\n                    </p>\n\n                    <button\n                      type=\"submit\"\n                      className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 \"\n                    >\n                      Share\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </form>\n        )}\n        {viewShares && (\n          <div>\n            <div className=\"px-5 flex justify-between items-center mb-3\">\n              <BiArrowBack\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  setViewShares(false);\n                }}\n              />\n\n              <h4 className=\"text-center m-0 text-lg\">Shares</h4>\n\n              <AiOutlineClose\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  if (success === true) {\n                    docsManager.reload();\n                    close();\n                  }\n                  close();\n                }}\n              />\n            </div>\n            <hr />\n\n            {fetch && <MiniLoader />}\n\n            {!data?.shares?.length && !fetch && (\n              <p className=\"text-center\">No shares yet</p>\n            )}\n\n            {!fetch &&\n              data?.shares.map((m, i) => (\n                <div className=\"share-grid mb-3 px-5 \" key={i}>\n                  <div className=\"flex items-center space-x-2\">\n                    <IoMdMail />\n                    <p className=\"truncate w-24 lg:w-44\">\n                      {m?.email || \"Public\"}\n                    </p>\n                  </div>\n\n                  <p className=\"m-0\">{m?.type}</p>\n\n                  <AiOutlineClose\n                    className=\"text-base cursor-pointer ml-auto\"\n                    onClick={() => {\n                      deleteShare(id, m?.email)\n                        .then(res => {\n                          mutate(`/v1.1/docs/${id}/share`);\n                        })\n                        .catch(err =>\n                          toast.error(err?.response?.data?.message)\n                        );\n                    }}\n                  />\n                </div>\n              ))}\n          </div>\n        )}\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ShareModal;\n","import { getDoc } from \"./ApiRequests\";\nimport uiConfig from \"../common/UIConfig\";\nimport integ from \"../integ/integ\";\n\nvar docInfo = {\n  state: 'loading',\n  docid: '',\n  data: {name: ''},\n  onChange: () => { },\n}\n\nconst onChange = () => {\n  if (docInfo.onChange) {\n    try {\n      docInfo.onChange();\n    } catch(err) {\n      console.log(err)\n    }\n  }\n}\n\ndocInfo.reset = () => {\n  docInfo.state = 'loading';\n  docInfo.data = {name: ''}\n}\n\ndocInfo.get = async () => {\n  if (!uiConfig.isUsingLekhBackend()) {\n    integ.getDocInfo((state, docid, info) => {\n      docInfo.state = state;\n      docInfo.data = info;\n      docInfo.docid = docid;\n      onChange();\n    });\n    return;\n  }\n\n  docInfo.state = 'loading'\n  try {\n    let resp = await getDoc(docInfo.docid);\n    docInfo.data = resp.data;\n    docInfo.state = 'available';\n  } catch(err) {\n    console.log(err);\n    docInfo.state = 'error';\n  }\n  onChange();\n}\n\nexport default docInfo;\n","\nimport { getResource } from \"./ApiRequests\";\nimport canvas from \"../common/Canvas\";\n\nvar resources = new Map();\nvar inProgress = new Set();\nvar failedUrl = new Map();\n\nvar remoteResouceManager = { }\n\nconst onDataFromBackend = (data, url, type) => {\n    if (type == \"image\") {\n        var img = new Image();\n        img.src = window.URL.createObjectURL(data);\n        img.onload = function() {\n            remoteResouceManager.addToResources(url, img);\n        }\n    } else {\n        remoteResouceManager.addToResources(url, data);\n    }\n}\n\nremoteResouceManager.addToResources = (url, data) => {\n    resources.set(url, data);\n    window.setTimeout(()=> {\n        resources.delete(url);\n    }, 30 * 1000);\n    canvas.draw();\n}\n\nremoteResouceManager.getResource = (url, type) => {\n    if (resources.has(url)) {\n        return resources.get(url);\n    }\n    if (failedUrl.has(url)) {\n        var count = failedUrl.get(url);\n        if (count >= 3) {\n            return null;\n        }\n    }\n\n    if (inProgress.has(url)) {\n        return null;\n    }\n\n    if (url.startsWith('res://')) {\n        inProgress.add(url);\n        var resid = url.substr(6);    \n        getResource(resid).then(data => {\n            onDataFromBackend(data.data, url, type);\n        }).catch(err=> {\n            console.log(err);\n        }).finally(()=> {\n            inProgress.delete(url);\n            if (failedUrl.has(url)) {\n                failedUrl.set(url, failedUrl.get(url) + 1);\n            } else {\n                failedUrl.set(url, 1);\n            }\n        });\n        return null;\n    }\n    return null;\n}\n\nexport default remoteResouceManager;","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from '@material-ui/core';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { constant } from \"../../utils/ApiConstants\";\nimport { ApiRequestWithToken } from \"../../utils/ApiRequests\";\nimport docInfo from \"../../utils/DocInfo\";\nimport canvas from \"../../common/Canvas\";\nimport remoteResouceManager from \"../../utils/RemoteResourceManager\";\nimport uiConfig from \"../../common/UIConfig\";\n\nconst MaxSize = 5 * 1024 * 1024;\nvar selectedImage = null;\n\nconst ImageUploader = (props) => {\n  const [file, setFile] = useState(null);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [errMsg, setErrMsg] = useState('');\n  const [uploading, setUploading] = useState(false);\n\n  var btnText = 'Upload';\n  if (uploading) {\n    btnText = \"Uploading..\";\n  }\n  if (!uiConfig.isUsingLekhBackend()) {\n    btnText = \"Insert\";\n  }\n  var btnEnabled = true;\n  if (uploading || width == 0 || height == 0 || file == null || file.size > MaxSize) {\n    btnEnabled = false;\n  }\n  const onChange = (e) => {\n    var changedFile = e.target.files[0];\n    setFile(changedFile);\n    setWidth(0);\n    setHeight(0);\n    if (changedFile.size > MaxSize) {\n      setErrMsg('Must be less than 5M');\n    } else {\n      setErrMsg('');\n    }\n\n    var objectUrl = window.URL.createObjectURL(changedFile);\n    var img = new Image();\n    img.src = objectUrl;\n    img.onload = function() {\n      setWidth(img.width)\n      setHeight(img.height);\n      //window.URL.revokeObjectURL(objectUrl)\n      if (selectedImage != null) {\n        window.URL.revokeObjectURL(selectedImage.src);\n      }\n      selectedImage = img;\n    }\n  }\n\n  const insertImage = () => {\n    var objectUrl = window.URL.createObjectURL(file);\n    var img = new Image();\n    img.src = objectUrl;\n    img.onload = function() {\n      window.Module.insertImage(img, props.at.x, props.at.y, img.width, img.height);\n      window.URL.revokeObjectURL(objectUrl);\n      props.dialogHandler(null);\n      setTimeout(() => {\n        canvas.draw();\n      }, 1);\n    }\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (!uiConfig.isUsingLekhBackend()) {\n      insertImage();\n      return;\n    }\n\n    const dataArray = new FormData();\n    dataArray.append(\"data\", file);\n    dataArray.append(\"type\", 'image');\n    dataArray.append(\"scope\", docInfo.docid);\n\n    setUploading(true);\n    ApiRequestWithToken()\n      .post(constant.baseUrl + \"/v1.1/resources/upload\", dataArray, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      })\n      .then((resp) => {\n        props.dialogHandler(null);\n        var url = 'res://' + resp.data.resid;\n        window.Module.inputReceiver().insertImageWithResource(url, {width:width, height: height}, props.at);\n        remoteResouceManager.addToResources(url, selectedImage);\n        canvas.draw();\n      })\n      .catch((err) => {\n          setErrMsg('Error in upload');\n          console.log(err);\n      });\n  };\n\n  const close = ()=> {\n      props.dialogHandler(null);\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\">\n        <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Insert Image</h4>\n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <form\n            action=\"\"\n            className=\"\"\n            onSubmit={handleSubmit}\n        >\n            <input type='file' accept=\"image/*\" disabled={uploading} className=\"mx-3 mt-4\" onChange={onChange}/>\n            {errMsg && \n              <div className=\"mt-2 mx-3 text-red-600 text-sm\">\n                <label>{errMsg}</label>\n              </div>\n            }\n            <div className=\"flex mb-4 mt-5 mx-3\">\n                <div className=\"mr-4\"><Button variant=\"outlined\" onClick={close}>Cancel</Button></div>\n                <Button variant=\"outlined\" disabled={!btnEnabled} onClick={handleSubmit}>{btnText}</Button>\n            </div>\n        </form>\n    </Dialog>\n  );\n};\n\nexport default ImageUploader;\n","import canvas from \"../../common/Canvas\";\n\nvar pageManager = {\n    curIdx: 0,\n    pages: [\n        {name: \"page 1\", id: \"page1\"},\n        {name: \"page 2 sdf  fd fds fsd fds fdsfsf sdf sdfd fsdfsdfsdf sdf\", id: \"page2\"},\n        {name: \"page 3\", id: \"page3\"},\n        {name: \"page 4\", id: \"page4\"},\n        {name: \"page 5\", id: \"page5\"},\n        {name: \"page 6\", id: \"page6\"},\n        {name: \"page 7\", id: \"page7\"},\n        {name: \"page 8\", id: \"page8\"},\n        {name: \"page 9\", id: \"page9\"},\n        {name: \"page 10\", id: \"page10\"},\n        {name: \"page 11\", id: \"page11\"},\n        {name: \"page 12\", id: \"page12\"},\n        {name: \"page 13\", id: \"page13\"},\n        {name: \"page 14\", id: \"page14\"},\n        {name: \"page 15\", id: \"page15\"},\n        {name: \"page 16\", id: \"page16\"},\n        {name: \"page 17\", id: \"page17\"},\n        {name: \"page 18\", id: \"page18\"},\n        {name: \"page 19\", id: \"page19\"},\n        {name: \"page 20\", id: \"page20\"},\n        {name: \"page 21\", id: \"page21\"},\n        {name: \"page 22\", id: \"page22\"},\n        {name: \"page 23\", id: \"page23\"},\n    ]\n}\n\nvar editor = null;\npageManager.load = () => {\n    if (editor == null) {\n        editor = window.Module.startPageEditing();\n    }\n}\n\npageManager.getPages = () => {\n    var numPages = editor.numPages();\n    var pages = [];\n    for (let i = 0; i < numPages; i++) {\n        var page = {name: editor.getPageName(i), id: editor.getPageId(i)};\n        pages.push(page);\n    }\n    return pages;\n}\n\npageManager.changeOrder = (oldIdx, newIdx) => {\n    if (oldIdx == newIdx) {\n        return;\n    }\n    editor.reorder(oldIdx, newIdx);\n    canvas.draw();\n}\n\npageManager.add = (name) => {\n    if (!name) {\n        name = \"Page \" + (editor.numPages() + 1)\n    }\n    editor.addPage(name);\n    canvas.draw();\n}\n\npageManager.remove = (idx) => {\n    editor.deletePage(idx);\n    canvas.draw();\n}\n\npageManager.rename = (idx, newName) => {\n    editor.setPageName(idx, newName);\n    canvas.draw();\n}\n\npageManager.duplicate = (idx) => {\n    editor.duplicatePage(idx);\n    canvas.draw();\n}\n\npageManager.current = () => {\n    return editor.activePageIndex();\n}\n\npageManager.setCurrent = (idx) => {\n    editor.select(idx);\n    canvas.draw();\n}\n\nexport default pageManager;","import './PageList.css'\n\nimport React, { useState } from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { AiOutlinePlus } from \"react-icons/ai\";\nimport { MdDragHandle } from \"react-icons/md\";\nimport { HiOutlineDotsHorizontal } from \"react-icons/hi\";\nimport pageManager from './PageManager';\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { Dialog } from \"@material-ui/core\";\nimport InputField from \"../InputField/InputField\";\nimport keyboardInput from '../../common/KeyboardInput';\n\nvar showingDialogForKeyboardInput = false;\n\nconst RenameModal = ({close, orig, rename}) => {\n    const [newName, setName] = useState(orig);\n  \n    React.useEffect(() => {\n        showingDialogForKeyboardInput = keyboardInput.showingDialog;\n        keyboardInput.showingDialog = true;\n        return () => {\n            keyboardInput.showingDialog = showingDialogForKeyboardInput;\n        }\n    }, [])\n\n    const handleSubmit = e => {\n      e.preventDefault();\n    };\n  \n    return (\n      <Dialog open={true} className=\"px-5\">\n        <form\n          action=\"\"\n          className=\"py-2 w-64 lg:w-96 bg-white \"\n          onSubmit={handleSubmit}\n        >\n          <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Rename</h4>\n  \n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n          </div>\n  \n          <hr className=\"-mb-5\" />\n  \n          <div className=\"px-2\">\n            <InputField\n              // label=\"Rename\"\n              placeholder=\"Name\"\n              handleChange={e => setName(e.target.value)}\n              value={newName}\n            />\n            <div className=\"text-right\">\n                <button\n                  type=\"submit\"\n                  className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n                  onClick={()=>rename(newName)}\n                >\n                  Rename\n                </button>\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n};\n\nconst ConfirmModal = ({cancel, accept}) => {\n    return (<Dialog open={true}>\n    <div className=\"w-64 lg:w-72 py-8 px-5 space-y-10\">\n      <p className=\"font-sans text-center text-lg\">\n        Are you sure you want to delete?\n      </p>\n\n      <div className=\"grid grid-cols-2 gap-5\">\n        <button\n          className=\"button border border-lkhRed text-center py-3 bg-white \"\n          onClick={() => cancel()}\n        >\n          Cancel\n        </button>\n\n        <button\n          onClick={() => accept()}\n          className=\"button bg-lkhRed text-white border-0\"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </Dialog>)\n}\n\n\nconst PageContextMenu = (props) => {\n    const [showRenameDialog, setShowRenameDialog] = useState(false);\n    const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\n    var page = pageManager.getPages()[props.idx];\n\n    const onRename = (newName) => {\n        setShowRenameDialog(false);\n        pageManager.rename(props.idx, newName)\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    const onDelete = () => {\n        setShowDeleteDialog(false);\n        pageManager.remove(props.idx);\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    const onDpulicte = () => {\n        pageManager.duplicate(props.idx);\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    return (\n        <>\n        {showRenameDialog && <RenameModal orig={page.name} rename={onRename} close={()=>setShowRenameDialog(false)}></RenameModal>}\n        {showDeleteDialog && <ConfirmModal accept={onDelete} cancel={()=>setShowDeleteDialog(false)}></ConfirmModal>}\n        <div className=\"absolute top-0 right-3 py-3 px-7 shadow-lg bg-white space-y-4 text-left z-20\">\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={onDpulicte}>\n            Duplicate\n            </p>\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={() => setShowRenameDialog(true)}>\n            Rename\n            </p>\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={() => setShowDeleteDialog(true)}>\n            Delete\n            </p>\n        </div>\n        </>\n    )\n}\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst PageList = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const [anchorEl, setAnchorEl] = useState(null);\n    const [showMenu, setShowMenu] = useState(false);\n    const [menuIdx, setMenuIdx] = useState(0);\n\n    pageManager.load();\n\n    React.useEffect(() => {\n        window.setTimeout(()=> {\n            var idx = pageManager.current();\n            var item = pageManager.getPages()[idx];\n            var row = document.getElementById('pages-list-row-' + item.id);\n            if (row) {\n                row.scrollIntoView({block: \"nearest\"});\n            }\n        }, 100);\n        window.wsmanager.event.addListener(onWebsocketUpdate);\n        return () => {\n            window.wsmanager.event.removeListener(onWebsocketUpdate);\n        }\n    }, [])\n\n    const onWebsocketUpdate = (data) => {\n        try {\n            var msg = JSON.parse(data);\n            if (msg.updates.type == 'addpages' || msg.updates.type == 'delpages' || msg.updates.type == 'changepageattr') {\n                reload();\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    const reload = function () {\n        setCounter(counterRef.current + 1);\n    }\n\n    const addPage = () => {\n        pageManager.add();\n        window.setTimeout(()=> {\n            var listDiv = document.getElementById(\"page-list-container\");\n            listDiv.scrollTop = listDiv.scrollHeight;\n        }, 200);\n        reload();\n    }\n\n    const setCurrentPage = (idx) => {\n        if (showMenu) {\n            return;\n        }\n        pageManager.setCurrent(idx);\n        window.layoutCanvas()\n        reload();\n    }\n\n    const onDragStart = (evt) => {\n        setShowMenu(false);\n    }\n\n    const onDragEnd = (evt) => {\n        if (!evt.source || !evt.destination) {\n            return;\n        }\n        pageManager.changeOrder(evt.source.index, evt.destination.index);\n        reload();\n    }\n\n    const getRenderItem = (items) => (provided, snapshot, rubric) => {\n        var idx = rubric.source.index;\n        var item = items[idx];\n        var className = \"pages-list-row\";\n        if (idx == pageManager.current()) {\n            className += \" bg-gray-200\"\n        }\n        var rowId = 'pages-list-row-' + item.id;\n        return (\n        <div ref={provided.innerRef}\n            {...provided.draggableProps}\n            id={rowId}\n            className={className} onClick={()=>{setCurrentPage(idx)}}>\n            <div className=\"flex w-full\">\n                <div {...provided.dragHandleProps}><MdDragHandle  className=\"text-xl ml-2\"/></div>\n                <div className=\"pages-list-page-name ml-2\">{item.name}</div>\n                <HiOutlineDotsHorizontal className=\"text-xl cursor-pointer pages-list-page-option mr-2\" onClick={(e)=>onPageOption(e, idx)} />\n            </div>\n        </div>\n        );\n    }\n    const renderItem = getRenderItem(pageManager.getPages());\n\n    const onPageOption = (e, idx) => {\n        setAnchorEl(e.currentTarget);\n        setMenuIdx(idx);\n        setShowMenu(true)\n    }\n\n    const onClickAway = () => {\n        if (!showMenu) {\n            props.close()\n        }\n    }\n\n    const closeContextMenu = () => {\n        setShowMenu(false);\n    }\n\n    var position = props.pos;\n    if (!position) {\n        position = {style: { position: 'fixed', top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}\n    }\n\n    return (\n    <>\n    {showMenu && <ClickAwayListener onClickAway={()=>setShowMenu(false)}>\n        <Popper open={true} placement={'right'} anchorEl={anchorEl}>\n            <PageContextMenu close={closeContextMenu} idx={menuIdx}></PageContextMenu>\n        </Popper>\n    </ClickAwayListener>}\n    <ClickAwayListener onClickAway={onClickAway}>\n        <Popper open={true} {...position}>\n            <div className=\"page-list-container shadow-xl\">\n                <div className=\"flex justify-between items-center my-2 px-2\">\n                    <div />\n                    <h4 className=\"text-center m-0\">Pages</h4>\n                    <AiOutlinePlus className=\"text-xl -mr-10 cursor-pointer\" onClick={addPage} />\n                    <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={props.close} />\n                </div>\n                <hr/>\n                <DragDropContext onDragEnd={onDragEnd} onDragStart={onDragStart}>\n                    <Droppable droppableId=\"list\" renderClone={renderItem}>\n                        {provided => (\n                        <div id=\"page-list-container\" className=\"pages-list w-full\" ref={provided.innerRef} {...provided.droppableProps}>\n                            {pageManager.getPages().map((item, idx) => {\n                                return (\n                                    <Draggable draggableId={item.id} index={idx} key={item.id}>\n                                        {renderItem}\n                                    </Draggable>)\n                            })}\n                            {provided.placeholder}\n                        </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n            </div>\n        </Popper>\n    </ClickAwayListener> </>)\n}\n\nexport default PageList;","var Config = {\n    mediaQuery: \"only screen and (max-width: 640px)\"\n}\n\nexport default Config;","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog, TextField } from \"@material-ui/core\";\nimport Select from \"react-select\";\nimport React, { useEffect } from \"react\";\n\nconst options = [\n    { label: 'Infinite', value: [0, 0] },\n    { label: 'A3 (11.7 x 16.5)', value: [11.7, 16.5] },\n    { label: 'A4 (8.3 x 11.7)', value: [8.3, 11.7] },\n    { label: 'A5 (5.8 x 8.3)', value: [5.8, 8.3] },\n    { label: 'Letter (8.5 x 11)', value: [8.5, 11] },\n    { label: 'Legal (8.5 x 14)', value: [8.5, 14] },\n    { label: 'Executive (7.2 x 10.5)', value: [7.2, 10.5] },\n    { label: 'Tabloid (11 x 17)', value: [11, 17] },\n    { label: 'Folio (8.5 x 13)', value: [8.5, 13] },\n    { label: 'Statement (5.5 x 8.5)', value: [5.5, 8.5] },\n    { label: 'Custom', value: [0, 0] },\n]\n\nvar pageEditor = null;\n\nconst equal = (val1, val2) => {\n    return Math.abs(val1 - val2) < 0.001;\n}\n\nconst PageSizeModal = (props) => {\n    const [selectedOption, setSelectedOption] = React.useState(options[0]);\n    \n    const [customWidth, setCustomWidth] = React.useState(0);\n    const [customHeight, setCustomHeight] = React.useState(0);\n\n    const [marginWidth, setMarginWidth] = React.useState(0);\n    const [marginHeight, setMarginHeight] = React.useState(0);\n\n    if (pageEditor == null) {\n        pageEditor = window.Module.startPageEditing();\n    }\n\n    const handleChange = (newOption) => {\n        var sz = pageEditor.getSize();\n        if  (newOption.label == \"Custom\") {\n            if (sz.width <= 0 || sz.height <= 0) {\n                sz.width = 8.5;\n                sz.height = 11;\n            }\n            var wd = parseFloat(sz.width).toFixed(2);\n            setCustomWidth(wd);\n\n            var ht = parseFloat(sz.height).toFixed(2);\n            setCustomHeight(ht);\n\n            setCustomSize(wd, ht);\n        } else if (newOption.label == 'Infinite') {\n            pageEditor.setSize(window.Module.CanvasSizeType.Infinite, {width: newOption.value[0], height: newOption.value[1], unit: window.Module.Unit.Inch}, newOption.label)\n        } else {\n            pageEditor.setSize(window.Module.CanvasSizeType.Fixed, {width: newOption.value[0], height: newOption.value[1], unit: window.Module.Unit.Inch}, newOption.label)\n        }\n        setSelectedOption(newOption);\n    }\n\n    const setCustomSize = (width, height) => {\n        try {\n            var wd = parseFloat(width);\n            var ht = parseFloat(height);\n        } catch (e) {\n            return;\n        }\n        wd = wd <= 0? 0.5 : wd;\n        ht = ht <= 0? 0.5: ht;\n\n        pageEditor.setSize(window.Module.CanvasSizeType.Fixed, {width: wd, height: ht, unit: window.Module.Unit.Inch}, \"Custom\")\n    }\n\n    const setMarginSize = (width, height) => {\n        try {\n            width = parseFloat(width);\n            height = parseFloat(height);\n        } catch (e) {\n            width = 0;\n            height = 0;\n        }\n        \n        pageEditor.setMarginSize({width: width, height: height, unit: window.Module.Unit.Inch})\n    }\n\n    const onCustomWidth = (e) => {\n        var val = e.currentTarget.value;\n        setCustomWidth(val);\n        setCustomSize(val, customHeight);\n    }\n\n    const onCustomHeight = (e) => {\n        var val = e.currentTarget.value;\n        setCustomHeight(val);\n        setCustomSize(customWidth, val);\n    }\n\n    const onMarginWidth = (e) => {\n        var val = e.currentTarget.value;\n        setMarginWidth(val);\n        setMarginSize(val, marginHeight);\n    }\n\n    const onMarginHeight = (e) => {\n        var val = e.currentTarget.value;\n        setMarginHeight(val);\n        setMarginSize(marginWidth, val);  \n    }\n\n    const isInfinite = selectedOption.label == 'Infinite';\n    const isCustom = selectedOption.label == 'Custom';\n\n    useEffect(() => {\n        pageEditor.start();\n        var cst = pageEditor.getCanvasType();\n        var sz = pageEditor.getSize();\n        if (cst.value == 0 || cst.value == 2) {\n            setSelectedOption(options[0]);\n        } else {\n            var found = false;\n            for (let item of options) {\n                if (equal(item.value[0], sz.width) && equal(item.value[1], sz.height)) {\n                    setSelectedOption(item);\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                setCustomWidth(sz.width);\n                setCustomHeight(sz.height);\n                setSelectedOption(options[options.length - 1]);\n            }\n        }\n\n        var margin = pageEditor.getMarginSize();\n        if (margin.show) {\n            setMarginWidth(margin.size.width);\n            setMarginHeight(margin.size.height);\n        } else {\n            setMarginWidth(0);\n            setMarginHeight(0);\n        }\n    }, []);\n\n    const selectStyles = {\n        menu: base => ({\n          ...base,\n          zIndex: 100\n        })\n      };\n  \n    return (\n        <Dialog open={true} className=\"px-5\" aria-labelledby=\"PageSize\">\n            <div className={`py-4 w-64 lg:w-96 bg-white h-80`}>\n                <div className=\"px-3 flex justify-between items-center mb-3\">\n                    <div />\n                    <h4 className=\"text-center m-0 text-lg\">Set Canvas Size</h4>\n                    <AiOutlineClose\n                        className=\"text-xl cursor-pointer\"\n                        onClick={() => {props.close();}}\n                    />\n                </div>\n                <hr />\n                <div className=\"px-5 mt-1\">\n                    <Select\n                        value = {selectedOption}\n                        options={options}\n                        className=\"mb-3\"\n                        onChange={handleChange}\n                        placeholder=\"\"\n                        defaultValue=\"\"\n                        maxMenuHeight={180}\n                        styles={selectStyles}\n                    />\n                    {isCustom &&\n                    <>\n                        <div className=\"h-4\"></div>\n                        <p className=\"m-0 mb-1 font-medium\">Custom Size (Inch)</p>\n                        <div className=\"flex\">\n                            <TextField id=\"custom-width\" label=\"Width\" variant=\"outlined\" value={customWidth} onChange={onCustomWidth}/>\n                            <div className=\"w-8\"></div>\n                            <TextField id=\"custom-height\" label=\"Height\" variant=\"outlined\" value={customHeight} onChange={onCustomHeight}/>\n                        </div>\n                    </>\n                    }\n                    {!isInfinite &&\n                    <>\n                        <div className=\"h-4\"></div>\n                        <p className=\"m-0 mb-1 font-medium\">Page Margin (Inch)</p>\n                        <div className=\"flex\">\n                        <TextField id=\"margin-width\" label=\"Width\" variant=\"outlined\" value={marginWidth} onChange={onMarginWidth}/>\n                        <div className=\"w-8\"></div>\n                        <TextField id=\"margin-height\" label=\"Height\" variant=\"outlined\" value={marginHeight} onChange={onMarginHeight}/>\n                        </div>\n                    </>\n                    }\n                </div>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default PageSizeModal;\n","import React, { useState } from 'react';\nimport { AppBar, Grid, Toolbar, IconButton, Menu, MenuItem } from \"@material-ui/core\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Style from './HeaderStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport NestedMenuItem from \"material-ui-nested-menu-item\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport canvas from '../../common/Canvas'\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { BiCopy } from \"react-icons/bi\";\nimport { jsPDF } from \"jspdf\";\nimport Feedback from \"./Feedback\"\nimport { tip } from '../Tip/QuickTip'\nimport userInfo from '../../utils/UserInfo'\nimport ShareModal from \"../DashboardItems/ShareModal\";\nimport docInfo from '../../utils/DocInfo';\nimport ImageUploader from '../ImageUploader/ImageUploader';\nimport PageList from '../PageList/PageList';\nimport Config from '../../common/Config';\nimport PageSizeModal from '../PageSize/PageSize'\nimport uiConfig from '../../common/UIConfig';\nimport integ from '../../integ/integ';\n\nvar FileSaver = require('file-saver');\n\nconst useStyles = makeStyles(Style);\n\n/*\nvar blobToBase64 = function(blob, callback) {\n    var reader = new FileReader();\n    reader.onload = function() {\n        var dataUrl = reader.result;\n        var base64 = dataUrl.split(',')[1];\n        callback(base64);\n    };\n    reader.readAsDataURL(blob);\n};\n\nfunction download(filename, data) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:application/pdf;base64,' + data);\n    element.setAttribute('download', filename);\n  \n    element.style.display = 'none';\n    document.body.appendChild(element);\n  \n    element.click();\n  \n    document.body.removeChild(element);\n  }\n  */\n\n\nconst AppMenu = (props) => {\n    const classes = useStyles();\n    const [snap, setSnap] = useState(true);\n    const [grid, setGrid] = useState(canvas.showGrid);\n\n    const [value, setValue] = useState('');\n    const [open, setOpen] = useState(false);\n\n    const exportFile = (format) => {\n        console.log(\"export \", format);\n        setOpen(false)\n\n        if (format == \"pdf\") {\n            exportPdf();\n        } else if (format == \"png\" || format == \"jpeg\") {\n            var img = exportImage(format);\n            if (img != null) {\n                FileSaver.saveAs(img.data, \"drawing.\" + format);\n            }\n        } else if (format == \"svg\") {\n            var content = window.Module.getSvg();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.svg\");\n        } else if (format == \"lekh\") {\n            var content = window.Module.getLekh();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.lekh\");\n        }\n    }\n\n    const subOptions = [\n        { id: \"pdf\", name: 'PDF', handler: exportFile },\n        { id: \"png\", name: 'PNG', handler: exportFile },\n        { id: \"jpeg\", name: 'JPEG', handler: exportFile },\n        { id: \"svg\", name: 'SVG', handler: exportFile },\n        { id: \"lekh\", name: 'LEKH', handler: exportFile },\n    ]\n\n    var options = [\n        /*{ id: 1, name: 'Insert diagram' }, */\n        { id: \"share\", name: 'Share board', checkable: false },\n        { id: \"export\", name: 'Export', submenu:  subOptions},\n        { id: \"insertImage\", name: 'Insert Image', checkable: false},\n        //{ id: \"canvasSize\", name: 'Canvas Size', checkable: false},\n        { id: \"grid\", name: 'Show grid', checkable: true },\n        { id: \"snap\", name: 'Snap objects', checkable: true },\n        { id: \"contact\", name: 'Contact us', checkable: false },\n        { id: \"feedback\", name: 'Feedback', checkable: false },\n        { id: \"tip\", name: 'Show drawing tip', checkable: false },\n        { id: \"help\", name: 'Help', checkable: false},\n    ];\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        options.splice(2, 0, { id: \"managePages\", name: 'Manage Pages', checkable: false})\n    }\n\n    if (uiConfig.isIntegMode()) {\n        options = integ.customizeAppMenu(options);\n    }\n\n    const handleClick = (e) => {\n        setValue(e.currentTarget)\n        setOpen(true)\n    }\n\n    const getChecked = function(id) {\n        if (id == 'grid') {\n            return grid;\n        } else if (id == 'snap') {\n            return snap;\n        }\n        return false;\n    }\n\n    const shareLoggedInBoard = () => {\n        var dialog = <ShareModal state={true} close={() => props.showDialog(null)} doc={docInfo.data} />;\n        props.showDialog(dialog);\n    }\n    const shareBoard = function() {\n        if (userInfo.isLoggedIn() && docInfo.data && docInfo.data.docid) {\n            shareLoggedInBoard();\n            return;\n        }\n        const handleClose = function() {\n            props.showDialog(null);\n        };\n\n        const copyLink = ()=>{\n            document.getElementById(\"share-link\").select(); \n            document.execCommand(\"copy\");\n        };\n\n        const SearchButton = () => (\n            <IconButton onClick={copyLink}>\n              <BiCopy />\n            </IconButton>\n            )\n\n        var url = window.location;\n        var dialog = (\n        <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={true}>\n        <DialogTitle id=\"simple-dialog-title\">Get the shareable link from below</DialogTitle>\n        <TextField id=\"share-link\" variant=\"outlined\" size=\"small\" defaultValue={url} InputProps={{\n              readOnly: true,\n              endAdornment: <SearchButton/>\n            }}/>\n        <Button onClick={handleClose}>OK</Button>\n      </Dialog>\n      )\n      props.showDialog(dialog)\n    }\n    const giveFeedback = function () {\n      const handleClose = function () {\n        props.showDialog(null)\n      }\n\n      const feedback = (\n        <Dialog onClose={handleClose} aria-labelledby=\"feedback\" open={true}>\n          <Feedback handleClose={handleClose} />\n        </Dialog>\n      )\n\n      props.showDialog(feedback)\n    }\n\n    const handleMenuClick = (id) => {\n        if (id == 'insertImage') {\n            var at = canvas.getMidPoint();\n            at = canvas.mapPtUIScroll(at);\n            at = {x: canvas.maprx(at.x), y: canvas.mapry(at.y)};\n            props.showDialog(<ImageUploader dialogHandler={props.showDialog} at={at}/>);\n        }\n\n        if (id == 'managePages') {\n            props.showDialog(<PageList close={()=>{props.showDialog(null)}}/>);\n        }\n\n        if (id == 'canvasSize') {\n            props.showDialog(<PageSizeModal close={()=>{props.showDialog(null)}}/>);\n        }\n\n        if (id == \"grid\") {\n            setGrid(!grid);\n            canvas.showGrid = !grid;\n            canvas.drawGrid();\n        }\n        if (id == \"snap\") {\n            setSnap(!snap);\n            window.Module.setSnap(!snap);\n        }\n        if (id == \"help\") {\n            window.open(\"https://lekh.app/help.html\", '_blank').focus();\n        }\n        \n        if (id == \"contact\") {\n            window.open(\"https://lekh.app/contact.html\", '_blank').focus();\n        }\n\n        if (id == \"share\") {\n            shareBoard();\n        }\n        if (id == \"feedback\") {\n          giveFeedback()\n        }\n\n        if (id == \"tip\") {\n            tip.show();\n        }\n\n        setOpen(false)\n    }\n\n    const exportImage = (format) => {\n        var img = null;\n        try {\n            img = canvas.exportToImage(format);\n        } catch (e) { }\n\n        if (img == null || img.data == \"data:,\") {\n            const handleClose = () => props.showDialog(null);\n            var dialog = (\n                <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={true}>\n                    <DialogTitle id=\"simple-dialog-title\">Unable to export. Canvas is probably too large. Please contact support info@lekhapp.com</DialogTitle>\n                    <Button onClick={handleClose}>OK</Button>\n                </Dialog>\n            )\n            props.showDialog(dialog)\n            return null;\n        }\n\n        return img;\n    }\n\n    const exportPdf  = () => {\n        var img = exportImage(\"jpeg\");\n        if (img == null) {\n            return;\n        }\n        var orient = \"landscape\";\n        if (img.height > img.width) {\n            orient = \"portrait\";\n        }\n        var doc = new jsPDF({\n            orientation: orient,\n            format: [img.width, img.height]\n        })\n        doc.addImage(img.data, 'JPEG', 0, 0, img.width, img.height)\n        doc.save(\"drawing.pdf\");\n\n        // The following code uses canvas2pdf which is not working\n        // Two ways to fix:\n        // 1) Fix the canvas2Pdf and use pdfkit\n        // 2) Use jsPdf which also provide html canvas like API\n        //\n        // In either case we need to change the JSPlatform code to \n        // not use Path2D class as it is marked as experimental\n        //\n        ////Create a new PDF canvas context.\n        //var ctx = new window.canvas2pdf.PdfContext(window.blobStream());\n        //\n        ////draw your canvas like you would normally\n        ////ctx.fillStyle='yellow';\n        ////ctx.fillRect(100,100,100,100);\n        //// more canvas drawing, etc...\n        //window.Module.drawCanvasForExport(ctx, 0, 0);\n\n        ////convert your PDF to a Blob and save to file\n        //ctx.stream.on('finish', function () {\n        //    var blob = ctx.stream.toBlob('application/pdf');\n        //    FileSaver.saveAs(blob, \"drawing.pdf\");\n        //});\n        //ctx.end();\n    }\n\n    const handleLogoClick = (e) => {\n        if (uiConfig.isIntegMode()) {\n            integ.handleLogoClick(e);\n        } else {\n            window.location.href=\"/\";\n        }\n    }\n\n    return (\n        <Grid container>\n            <AppBar className=\"HeaderSection\" position='static' color='transparent' style={{ background: 'transparent', boxShadow: 'none' }}>\n                <Toolbar>\n                    <IconButton className=\"HeaderMenuIcon\" color=\"inherit\" onClick={handleLogoClick}>\n                        <img\n                            src={require(\"../../assests/icons/lekhboard-small.svg\").default}\n                            className=\"w-24\"\n                            alt=\"Logo\"\n                        />\n                    </IconButton>\n                    <div style={{width: 10, height: 30}}></div>\n                    <IconButton className=\"HeaderMenuIcon\" color=\"inherit\" aria-label=\"menu\" onClick={(e) => handleClick(e)}>\n                        <MenuIcon />\n                    </IconButton>\n                    <Menu\n                        onClose={() => setOpen(false)}\n                        open={open}\n                        classes={{\n                            paper: classes.appMenu\n                        }}\n                        value={value}\n                        PaperProps={{\n                            style: {\n                                width: 200,\n                                marginTop: 40\n                            },\n                        }}>\n                        {options?.map((option, index) => {\n                            var checked = null;\n                            if (option.checkable && getChecked(option.id)) {\n                                checked = <span className={classes.checkIcon}><CheckIcon /></span>;\n                            }\n                            if (option.submenu) {\n                                return (<NestedMenuItem\n                                    style={{ left: '15px' }}\n                                    label={option.name}\n                                    parentMenuOpen={open}\n                                    className=\"subIcon\"\n                                    key={option.id}>\n                                    {\n                                    option.submenu.map((subOption, index) => (\n                                        <MenuItem key={index} onClick={()=>{setOpen(false); subOption.handler(subOption.id)}}>{subOption.name}</MenuItem>\n                                    ))}\n                                </NestedMenuItem>);\n                            }\n                            const handleClick = () => {\n                                if (!!option.handler) {\n                                    setOpen(false);\n                                    option.handler(option.id);\n                                } else {\n                                    handleMenuClick(option.id);\n                                }\n                            }\n                            return (\n                                <div key={option.id}>\n                                    { checked }\n                                    <MenuItem style={{ left: '15px' }} value={option.name} \n                                        onClick={handleClick} key={option.id}>\n                                        {option.name}\n                                    </MenuItem>\n                                </div>\n                            )\n                        })}\n                    </Menu>\n                </Toolbar>\n            </AppBar>\n        </Grid>\n    )\n}\n\nexport default AppMenu;\n","import React from 'react';\n\nconst FooterStyle = {\n\n    footer: {\n        justifyContent: 'center',\n        display: 'flex',\n      },\n      backClass:{\n        border: '1px solid',\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        margin: '13px 10px',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      countClass:{\n        border: '1px solid',\n        margin: '13px 10px',\n        width: '173px',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        backgroundColor: '#fff',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        display:'flex',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      valueClass:{\n        margin: '15px 0px',\n        width:'45px',\n        textAlign: 'center',\n      },\n      iconClass:{\n        fontSize:'22px',\n        padding: '8px 8px'\n      },\n      countBtn:{\n        minWidth:'64px',\n        padding: 0,\n      }\n}\n\nexport default FooterStyle;","import './Footer.css'\n\nimport React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport Style from './FooterStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport AddIcon from '@material-ui/icons/Add';\nimport canvas from '../../common/Canvas'\nimport globalState from '../../common/GlobalState'\nimport command from '../../common/Command'\nimport { GrMultiple } from \"react-icons/gr\";\nimport PageList from '../PageList/PageList'\nimport uiConfig from '../../common/UIConfig';\n\nconst useStyles = makeStyles(Style);\nconst Footer = () => {\n    const classes = useStyles();\n    const [count, setCount] = useState(100);\n    const [showPages, setShowPages] = useState(false);\n    const [pagesAnchorEl, setPagesAnchorEl] = useState(null);\n\n    if (!uiConfig.shouldShowFooter()) {\n        return null;\n    }\n\n    const zoomOnlyFooter = uiConfig.isZoomOnlyFooter();\n\n    const handleCount = () => {\n        var curCount = count - 10;\n        curCount = Math.round(curCount / 10) * 10;\n        if (curCount < 10) {\n            curCount = 5;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleAddCount = () => {\n        var curCount = 0;\n        if (count < 10) {\n            curCount = 10;\n        } else {\n            curCount = count + 10;\n            curCount = Math.round(curCount / 10) * 10;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleUndo = () => {\n        command.undo();\n        canvas.draw();\n    }\n\n    const handleRedo = () => {\n        command.redo();\n        canvas.draw();\n    }\n\n    const handlePages = (e) => {\n        setPagesAnchorEl(e.currentTarget)\n        setShowPages(!showPages);\n    }\n\n    globalState.setZoomHandler(function(zoom) {\n        var val = Math.round(zoom * 100);\n        setCount(val);\n    });\n\n    return (\n        <>\n        {showPages && <PageList pos={{placement: 'top', anchorEl: pagesAnchorEl}} close={()=>{setShowPages(false)}}></PageList>}\n        <div className=\"footer-area\">\n            {uiConfig.shouldShowPagesInFooter() && <div className=\"pages-button\">\n                <Button className=\"resButton\" onClick={handlePages}><GrMultiple className={classes.iconClass}/></Button>\n            </div>}\n            {!zoomOnlyFooter && <div className=\"undo-redo-buttons\">\n                <Button className=\"resButton\"><ReplayIcon className={classes.iconClass} onClick={() => handleUndo()}/></Button>\n                <Button className=\"resButton\"><RefreshIcon className={classes.iconClass} onClick={() => handleRedo()}/> </Button>\n            </div>}\n            <div className='zoom-info'>\n                <Button className={classes.countBtn}><RemoveIcon className={classes.iconClass} onClick={() => handleCount()} /></Button>\n                <div className={classes.valueClass}> {count}% </div> \n                <Button className={classes.countBtn}><AddIcon className={classes.iconClass} onClick={() => handleAddCount()} /></Button>\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default Footer;","const SideBarStyle = {\n    sideBar: {\n        boxShadow:'0 0 0 50px transparent',\n        background: 'white',\n        borderRadius: '10px',\n        width: '55px',\n        display: 'inline-block',\n        margin:'0 15px',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n    },\n    sideBarMenu: {\n        padding: '11px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    menuIcons:{\n        marginBottom:10\n    },\n    menuItem:{\n        textAlign: 'center',\n        fontSize: '13px'\n    },\n    sideMenuIcons:{\n        textAlign:'center',\n        fontSize: '14px'\n    },\n    changeColor:{\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    spaceBwt:{\n      height: '45px',\n    },\n    spaceBwtRound:{\n        height: '47px',\n        border: '1px solid #dfe3e8',\n    },\n    expandedMenu: {\n        display: 'flex',\n        flexDirection: 'row'\n    },\n    expandedMenuItem: {\n        padding: '11px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        '&:hover':{\n            cursor:'pointer',\n            'background-color': '#f2f2ff'\n        }\n    },\n    expandedMenuItemActive: {\n        'background-color': '#dedefc'\n    }\n}\n\nexport default SideBarStyle","import React, { useRef, useEffect } from 'react'\nimport canvas from '../../common/Canvas'\n\nconst LibCell = props => {\n  const canvasRef = useRef(null)\n  var dpr = window.devicePixelRatio || 1;\n  var width = props.size;\n  var height = props.size;\n\n  const drawCanvas = (canvasElement) => {\n    canvasElement.width = width * dpr;\n    canvasElement.height = height * dpr;\n    canvasElement.style.width = width + \"px\";\n    canvasElement.style.height = height + \"px\";\n    const context = canvasElement.getContext('2d')  \n    context.scale(dpr, dpr);\n    context.fillStyle = \"#ffffff\";\n    context.fillRect(0, 0, canvasElement.width, canvasElement.height);\n    if (props.enabled) {\n      canvas.drawCell(props.category, props.num, props.size, context);\n    }\n  }\n\n  if (canvasRef != null && canvasRef.current != null) {\n    drawCanvas(canvasRef.current)\n  }\n  \n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    drawCanvas(canvasElement);\n  }, [])\n  \n  return <canvas ref={canvasRef} {...props} width={width+\"px\"} height={height+\"px\"}/>\n}\n\nexport default LibCell","import React from 'react'\nimport { FaShapes, FaMousePointer, FaHandRock, FaEdit, FaEraser, FaPen } from 'react-icons/fa';\nimport { RiDeleteBin5Line, RiCheckboxBlankCircleFill } from \"react-icons/ri\";\nimport {AiOutlineCamera} from 'react-icons/ai'\nimport { MdTitle } from \"react-icons/md\";\nimport { GiTorch } from \"react-icons/gi\";\n\nimport LibCell from './components/LibCell/LibCell'\nimport menuState from './common/MenuState'\n\nconst CircleColors = [\n    \n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"red\" id='0' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"orange\" id='1' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"teal\" id='2' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"green\" id='3' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"yellow\" id='4' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"tan\" id='5' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"brown\" id='6' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gray\" id='7' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"pink\" id='8' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"purple\" id='9' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"black\" id='10' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"violet\" id='11' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"plum\" id='12' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"skyblue\" id='13' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"cyan\" id='14' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"blue\" id='15' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkcyan\" id='16' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkorchid\" id='17' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gold\" id='18' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"royalblue\" id='11' />,\n]\n\nconst ShapesList = [\n    <LibCell category={0} num={0} drag=\"true\" id=\"0\" size={45}/>,\n    <LibCell category={0} num={2} drag=\"true\" id=\"1\" size={45}/>,\n    <LibCell category={0} num={3} drag=\"true\" id=\"2\" size={45}/>,\n    <LibCell category={0} num={5} drag=\"true\" id=\"3\" size={45}/>,\n    <LibCell category={0} num={6} drag=\"true\" id=\"4\" size={45}/>,\n    <LibCell category={0} num={7} drag=\"true\" id=\"5\" size={45}/>,\n    <LibCell category={0} num={8} drag=\"true\" id=\"6\" size={45}/>,\n    <LibCell category={1} num={1} drag=\"true\" id=\"7\" size={45}/>,\n    <LibCell category={1} num={2} drag=\"true\" id=\"8\" size={45}/>,\n    <LibCell category={1} num={5} drag=\"true\" id=\"9\" size={45}/>,\n    <LibCell category={1} num={6} drag=\"true\" id=\"10\" size={45}/>,\n    <LibCell category={1} num={10} drag=\"true\" id=\"11\" size={45}/>,\n    <LibCell category={1} num={20} drag=\"true\" id=\"12\" size={45}/>,\n    <LibCell category={2} num={0} drag=\"true\" id=\"13\" size={45}/>,\n    <LibCell category={2} num={4} drag=\"true\" id=\"14\" size={45}/>,\n    <LibCell category={3} num={0} drag=\"true\" id=\"15\" size={45}/>,\n    <LibCell category={3} num={4} drag=\"true\" id=\"16\" size={45}/>,\n    <LibCell category={3} num={5} drag=\"true\" id=\"17\" size={45}/>,\n    <LibCell category={3} num={6} drag=\"true\" id=\"18\" size={45}/>,\n    <LibCell category={3} num={7} drag=\"true\" id=\"19\" size={45}/>,\n    <LibCell category={3} num={8} drag=\"true\" id=\"20\" size={45}/>,\n    <LibCell category={4} num={0} drag=\"true\" id=\"21\" size={45}/>,\n    <LibCell category={4} num={1} drag=\"true\" id=\"22\" size={45}/>,\n    <LibCell category={4} num={2} drag=\"true\" id=\"23\" size={45}/>,\n]\n\nconst SideBarMenuItems = [\n    {\n        id: menuState.menus.selectionGroup,\n        icon: <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Select',\n    },\n    {\n        id: menuState.menus.laser,\n        icon: <GiTorch size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Laser',\n    },\n    {\n        id: menuState.menus.draw,\n        icon: <FaPen size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: menuState.menus.smartDraw,\n        icon: <FaEdit size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Smart Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: menuState.menus.text,\n        icon: <MdTitle size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Text'\n    },\n    {\n        id: menuState.menus.shapes,\n        icon: <FaShapes size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Shapes',\n        subMenus: ShapesList\n    },\n    {\n        id: menuState.menus.erase,\n        icon: <FaEraser size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase',\n    },\n    {\n        id: menuState.menus.eraseAll,\n        icon: <RiDeleteBin5Line size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase All',\n    },\n]\n\nexport var SideBarMenuItemsWithGestures = SideBarMenuItems.concat(\n[{\n    id: menuState.menus.cameraInput,\n    icon: <AiOutlineCamera size=\"1.2em\" color=\"#000000b8\"/>,\n    name: 'Gestures',\n}]);\n\nexport default SideBarMenuItems","var drawStyle = {\n    colorIndex: 10,\n    dashIndex: 0,\n    widthIndex: 0\n}\n\ndrawStyle.setColor = function(idx, color) {\n    drawStyle.colorIndex = idx;\n    var carr = colorNameToVal(color)\n    window.Module.setStrokeColor(carr[0], carr[1], carr[2], carr[3]);\n}\n\ndrawStyle.setDashIndex = function(idx) {\n    drawStyle.dashIndex = idx;\n    window.Module.setDashType(idx);\n}\n\ndrawStyle.setWidthIndex = function(idx) {\n    drawStyle.widthIndex = idx;\n    window.Module.inputReceiver().currentStyle().setStrokeWidth((idx + 1) * 2);\n}\n\nfunction colorNameToVal(color)\n{\n    var colors = {\"aliceblue\": [240, 248, 255, 255], \"antiquewhite\": [250, 235, 215, 255], \"aqua\": [0, 255, 255, 255], \"aquamarine\": [127, 255, 212, 255], \"azure\": [240, 255, 255, 255], \"beige\": [245, 245, 220, 255], \"bisque\": [255, 228, 196, 255], \"black\": [0, 0, 0, 255], \"blanchedalmond\": [255, 235, 205, 255], \"blue\": [0, 0, 255, 255], \"blueviolet\": [138, 43, 226, 255], \"brown\": [165, 42, 42, 255], \"burlywood\": [222, 184, 135, 255], \"cadetblue\": [95, 158, 160, 255], \"chartreuse\": [127, 255, 0, 255], \"chocolate\": [210, 105, 30, 255], \"coral\": [255, 127, 80, 255], \"cornflowerblue\": [100, 149, 237, 255], \"cornsilk\": [255, 248, 220, 255], \"crimson\": [220, 20, 60, 255], \"cyan\": [0, 255, 255, 255], \"darkblue\": [0, 0, 139, 255], \"darkcyan\": [0, 139, 139, 255], \"darkgoldenrod\": [184, 134, 11, 255], \"darkgray\": [169, 169, 169, 255], \"darkgreen\": [0, 100, 0, 255], \"darkkhaki\": [189, 183, 107, 255], \"darkmagenta\": [139, 0, 139, 255], \"darkolivegreen\": [85, 107, 47, 255], \"darkorange\": [255, 140, 0, 255], \"darkorchid\": [153, 50, 204, 255], \"darkred\": [139, 0, 0, 255], \"darksalmon\": [233, 150, 122, 255], \"darkseagreen\": [143, 188, 143, 255], \"darkslateblue\": [72, 61, 139, 255], \"darkslategray\": [47, 79, 79, 255], \"darkturquoise\": [0, 206, 209, 255], \"darkviolet\": [148, 0, 211, 255], \"deeppink\": [255, 20, 147, 255], \"deepskyblue\": [0, 191, 255, 255], \"dimgray\": [105, 105, 105, 255], \"dodgerblue\": [30, 144, 255, 255], \"firebrick\": [178, 34, 34, 255], \"floralwhite\": [255, 250, 240, 255], \"forestgreen\": [34, 139, 34, 255], \"fuchsia\": [255, 0, 255, 255], \"gainsboro\": [220, 220, 220, 255], \"ghostwhite\": [248, 248, 255, 255], \"gold\": [255, 215, 0, 255], \"goldenrod\": [218, 165, 32, 255], \"gray\": [128, 128, 128, 255], \"green\": [0, 128, 0, 255], \"greenyellow\": [173, 255, 47, 255], \"honeydew\": [240, 255, 240, 255], \"hotpink\": [255, 105, 180, 255], \"indianred \": [205, 92, 92, 255], \"indigo\": [75, 0, 130, 255], \"ivory\": [255, 255, 240, 255], \"khaki\": [240, 230, 140, 255], \"lavender\": [230, 230, 250, 255], \"lavenderblush\": [255, 240, 245, 255], \"lawngreen\": [124, 252, 0, 255], \"lemonchiffon\": [255, 250, 205, 255], \"lightblue\": [173, 216, 230, 255], \"lightcoral\": [240, 128, 128, 255], \"lightcyan\": [224, 255, 255, 255], \"lightgoldenrodyellow\": [250, 250, 210, 255], \"lightgrey\": [211, 211, 211, 255], \"lightgreen\": [144, 238, 144, 255], \"lightpink\": [255, 182, 193, 255], \"lightsalmon\": [255, 160, 122, 255], \"lightseagreen\": [32, 178, 170, 255], \"lightskyblue\": [135, 206, 250, 255], \"lightslategray\": [119, 136, 153, 255], \"lightsteelblue\": [176, 196, 222, 255], \"lightyellow\": [255, 255, 224, 255], \"lime\": [0, 255, 0, 255], \"limegreen\": [50, 205, 50, 255], \"linen\": [250, 240, 230, 255], \"magenta\": [255, 0, 255, 255], \"maroon\": [128, 0, 0, 255], \"mediumaquamarine\": [102, 205, 170, 255], \"mediumblue\": [0, 0, 205, 255], \"mediumorchid\": [186, 85, 211, 255], \"mediumpurple\": [147, 112, 216, 255], \"mediumseagreen\": [60, 179, 113, 255], \"mediumslateblue\": [123, 104, 238, 255], \"mediumspringgreen\": [0, 250, 154, 255], \"mediumturquoise\": [72, 209, 204, 255], \"mediumvioletred\": [199, 21, 133, 255], \"midnightblue\": [25, 25, 112, 255], \"mintcream\": [245, 255, 250, 255], \"mistyrose\": [255, 228, 225, 255], \"moccasin\": [255, 228, 181, 255], \"navajowhite\": [255, 222, 173, 255], \"navy\": [0, 0, 128, 255], \"oldlace\": [253, 245, 230, 255], \"olive\": [128, 128, 0, 255], \"olivedrab\": [107, 142, 35, 255], \"orange\": [255, 165, 0, 255], \"orangered\": [255, 69, 0, 255], \"orchid\": [218, 112, 214, 255], \"palegoldenrod\": [238, 232, 170, 255], \"palegreen\": [152, 251, 152, 255], \"paleturquoise\": [175, 238, 238, 255], \"palevioletred\": [216, 112, 147, 255], \"papayawhip\": [255, 239, 213, 255], \"peachpuff\": [255, 218, 185, 255], \"peru\": [205, 133, 63, 255], \"pink\": [255, 192, 203, 255], \"plum\": [221, 160, 221, 255], \"powderblue\": [176, 224, 230, 255], \"purple\": [128, 0, 128, 255], \"rebeccapurple\": [102, 51, 153, 255], \"red\": [255, 0, 0, 255], \"rosybrown\": [188, 143, 143, 255], \"royalblue\": [65, 105, 225, 255], \"saddlebrown\": [139, 69, 19, 255], \"salmon\": [250, 128, 114, 255], \"sandybrown\": [244, 164, 96, 255], \"seagreen\": [46, 139, 87, 255], \"seashell\": [255, 245, 238, 255], \"sienna\": [160, 82, 45, 255], \"silver\": [192, 192, 192, 255], \"skyblue\": [135, 206, 235, 255], \"slateblue\": [106, 90, 205, 255], \"slategray\": [112, 128, 144, 255], \"snow\": [255, 250, 250, 255], \"springgreen\": [0, 255, 127, 255], \"steelblue\": [70, 130, 180, 255], \"tan\": [210, 180, 140, 255], \"teal\": [0, 128, 128, 255], \"thistle\": [216, 191, 216, 255], \"tomato\": [255, 99, 71, 255], \"turquoise\": [64, 224, 208, 255], \"violet\": [238, 130, 238, 255], \"wheat\": [245, 222, 179, 255], \"white\": [255, 255, 255, 255], \"whitesmoke\": [245, 245, 245, 255], \"yellow\": [255, 255, 0, 255], \"yellowgreen\": [154, 205, 50, 255]};\n    if (typeof colors[color.toLowerCase()] != 'undefined')\n        return colors[color.toLowerCase()];\n    return [255, 255, 255, 255]\n}\n\nexport default drawStyle;\n","import React from 'react'\nimport { FaCheckCircle } from \"react-icons/fa\";\nimport {FaCheck} from \"react-icons/fa\";\nimport { RiCheckboxBlankCircleFill } from \"react-icons/ri\";\n\nconst ChessCircle = (props) => {\n    if (props.checked) {\n        return <div id={props.id} className=\"chess\">\n            <FaCheck strokeWidth={4}/>\n        </div>\n    }\n    return <div id={props.id} className=\"chess\"></div>\n}\n\nconst WhiteCircle = (props) => {\n    var style = {background: \"#ffffff\", border: \"1px solid #101010\"}\n    if (props.checked) {\n        return <div id={props.id} className=\"chess\" style={style}>\n            <FaCheck strokeWidth={4}/>\n        </div>\n    }\n    return <div id={props.id} className=\"chess\" style={style}></div>\n}\n\nexport const ColorNameToVal = (color) => {\n    var colors = {\"aliceblue\": [240, 248, 255, 255], \"antiquewhite\": [250, 235, 215, 255], \"aqua\": [0, 255, 255, 255], \"aquamarine\": [127, 255, 212, 255], \"azure\": [240, 255, 255, 255], \"beige\": [245, 245, 220, 255], \"bisque\": [255, 228, 196, 255], \"black\": [0, 0, 0, 255], \"blanchedalmond\": [255, 235, 205, 255], \"blue\": [0, 0, 255, 255], \"blueviolet\": [138, 43, 226, 255], \"brown\": [165, 42, 42, 255], \"burlywood\": [222, 184, 135, 255], \"cadetblue\": [95, 158, 160, 255], \"chartreuse\": [127, 255, 0, 255], \"chocolate\": [210, 105, 30, 255], \"coral\": [255, 127, 80, 255], \"cornflowerblue\": [100, 149, 237, 255], \"cornsilk\": [255, 248, 220, 255], \"crimson\": [220, 20, 60, 255], \"cyan\": [0, 255, 255, 255], \"darkblue\": [0, 0, 139, 255], \"darkcyan\": [0, 139, 139, 255], \"darkgoldenrod\": [184, 134, 11, 255], \"darkgray\": [169, 169, 169, 255], \"darkgreen\": [0, 100, 0, 255], \"darkkhaki\": [189, 183, 107, 255], \"darkmagenta\": [139, 0, 139, 255], \"darkolivegreen\": [85, 107, 47, 255], \"darkorange\": [255, 140, 0, 255], \"darkorchid\": [153, 50, 204, 255], \"darkred\": [139, 0, 0, 255], \"darksalmon\": [233, 150, 122, 255], \"darkseagreen\": [143, 188, 143, 255], \"darkslateblue\": [72, 61, 139, 255], \"darkslategray\": [47, 79, 79, 255], \"darkturquoise\": [0, 206, 209, 255], \"darkviolet\": [148, 0, 211, 255], \"deeppink\": [255, 20, 147, 255], \"deepskyblue\": [0, 191, 255, 255], \"dimgray\": [105, 105, 105, 255], \"dodgerblue\": [30, 144, 255, 255], \"firebrick\": [178, 34, 34, 255], \"floralwhite\": [255, 250, 240, 255], \"forestgreen\": [34, 139, 34, 255], \"fuchsia\": [255, 0, 255, 255], \"gainsboro\": [220, 220, 220, 255], \"ghostwhite\": [248, 248, 255, 255], \"gold\": [255, 215, 0, 255], \"goldenrod\": [218, 165, 32, 255], \"gray\": [128, 128, 128, 255], \"green\": [0, 128, 0, 255], \"greenyellow\": [173, 255, 47, 255], \"honeydew\": [240, 255, 240, 255], \"hotpink\": [255, 105, 180, 255], \"indianred \": [205, 92, 92, 255], \"indigo\": [75, 0, 130, 255], \"ivory\": [255, 255, 240, 255], \"khaki\": [240, 230, 140, 255], \"lavender\": [230, 230, 250, 255], \"lavenderblush\": [255, 240, 245, 255], \"lawngreen\": [124, 252, 0, 255], \"lemonchiffon\": [255, 250, 205, 255], \"lightblue\": [173, 216, 230, 255], \"lightcoral\": [240, 128, 128, 255], \"lightcyan\": [224, 255, 255, 255], \"lightgoldenrodyellow\": [250, 250, 210, 255], \"lightgrey\": [211, 211, 211, 255], \"lightgreen\": [144, 238, 144, 255], \"lightpink\": [255, 182, 193, 255], \"lightsalmon\": [255, 160, 122, 255], \"lightseagreen\": [32, 178, 170, 255], \"lightskyblue\": [135, 206, 250, 255], \"lightslategray\": [119, 136, 153, 255], \"lightsteelblue\": [176, 196, 222, 255], \"lightyellow\": [255, 255, 224, 255], \"lime\": [0, 255, 0, 255], \"limegreen\": [50, 205, 50, 255], \"linen\": [250, 240, 230, 255], \"magenta\": [255, 0, 255, 255], \"maroon\": [128, 0, 0, 255], \"mediumaquamarine\": [102, 205, 170, 255], \"mediumblue\": [0, 0, 205, 255], \"mediumorchid\": [186, 85, 211, 255], \"mediumpurple\": [147, 112, 216, 255], \"mediumseagreen\": [60, 179, 113, 255], \"mediumslateblue\": [123, 104, 238, 255], \"mediumspringgreen\": [0, 250, 154, 255], \"mediumturquoise\": [72, 209, 204, 255], \"mediumvioletred\": [199, 21, 133, 255], \"midnightblue\": [25, 25, 112, 255], \"mintcream\": [245, 255, 250, 255], \"mistyrose\": [255, 228, 225, 255], \"moccasin\": [255, 228, 181, 255], \"navajowhite\": [255, 222, 173, 255], \"navy\": [0, 0, 128, 255], \"oldlace\": [253, 245, 230, 255], \"olive\": [128, 128, 0, 255], \"olivedrab\": [107, 142, 35, 255], \"orange\": [255, 165, 0, 255], \"orangered\": [255, 69, 0, 255], \"orchid\": [218, 112, 214, 255], \"palegoldenrod\": [238, 232, 170, 255], \"palegreen\": [152, 251, 152, 255], \"paleturquoise\": [175, 238, 238, 255], \"palevioletred\": [216, 112, 147, 255], \"papayawhip\": [255, 239, 213, 255], \"peachpuff\": [255, 218, 185, 255], \"peru\": [205, 133, 63, 255], \"pink\": [255, 192, 203, 255], \"plum\": [221, 160, 221, 255], \"powderblue\": [176, 224, 230, 255], \"purple\": [128, 0, 128, 255], \"rebeccapurple\": [102, 51, 153, 255], \"red\": [255, 0, 0, 255], \"rosybrown\": [188, 143, 143, 255], \"royalblue\": [65, 105, 225, 255], \"saddlebrown\": [139, 69, 19, 255], \"salmon\": [250, 128, 114, 255], \"sandybrown\": [244, 164, 96, 255], \"seagreen\": [46, 139, 87, 255], \"seashell\": [255, 245, 238, 255], \"sienna\": [160, 82, 45, 255], \"silver\": [192, 192, 192, 255], \"skyblue\": [135, 206, 235, 255], \"slateblue\": [106, 90, 205, 255], \"slategray\": [112, 128, 144, 255], \"snow\": [255, 250, 250, 255], \"springgreen\": [0, 255, 127, 255], \"steelblue\": [70, 130, 180, 255], \"tan\": [210, 180, 140, 255], \"teal\": [0, 128, 128, 255], \"thistle\": [216, 191, 216, 255], \"tomato\": [255, 99, 71, 255], \"turquoise\": [64, 224, 208, 255], \"violet\": [238, 130, 238, 255], \"wheat\": [245, 222, 179, 255], \"white\": [255, 255, 255, 255], \"whitesmoke\": [245, 245, 245, 255], \"yellow\": [255, 255, 0, 255], \"yellowgreen\": [154, 205, 50, 255]};\n    if (typeof colors[color.toLowerCase()] != 'undefined')\n        return colors[color.toLowerCase()];\n    return [255, 255, 255, 255]\n}\n\nconst lineColors = [\n    <WhiteCircle size=\"2em\" color=\"white\" id='10'/>,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"black\" id='11' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gray\" id='12' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"red\" id='13' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"orange\" id='14' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"green\" id='15' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"yellow\" id='16' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"tan\" id='17' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"brown\" id='18' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"pink\" id='19' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"purple\" id='20' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"violet\" id='21' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"plum\" id='22' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"skyblue\" id='23' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"cyan\" id='24' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"blue\" id='25' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkcyan\" id='26' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkorchid\" id='27' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gold\" id='28' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"royalblue\" id='29' />,\n]\n\nconst extraColors = [\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"magenta\" id='50' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"olive\" id='51' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"deepskyblue\" id='52' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"chocolate\" id='53' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"azure\" id='54' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"powderblue\" id='55' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkgoldenrod\" id='56' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"greenyellow\" id='57' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"thistle\" id='58' />,\n]\n\nvar fillColors = [\n    <ChessCircle id={0}/>\n]\n\nfillColors = fillColors.concat(lineColors);\nfillColors = fillColors.concat(extraColors);\n\nconst getSelectedIndex = (colors, curColor, type) => {\n    if (curColor.alpha == 0 && type == 'fill') {\n        return 0;\n    }\n    let idx = 0;\n    let dist = 9999999999; //some big number\n    colors.map((component, index) => {\n        if (type == 'fill' && index == 0) {\n            return;\n        }\n        var color = ColorNameToVal(component.props.color);\n        let dr = color[0] - curColor.red;\n        let dg = color[1] - curColor.green;\n        let db = color[2] - curColor.blue;\n        var tmp = Math.sqrt(dr * dr + dg * dg + db * db);\n        if (tmp < dist) {\n            dist = tmp;\n            idx = index;\n        }\n    });\n    return idx;\n}\n\nconst ColorList = (props) => {\n    let colors = [];\n    if (props.type == 'fill') {\n        colors = fillColors;\n    } else {\n        colors = lineColors;\n    }\n\n    var selectedIndex = getSelectedIndex(colors, props.curColor, props.type);\n\n    const onColorChange = (index, color) => {\n        var val = {red: 0, green:0, blue:0, alpha: 0};\n        if (props.type == 'fill' && index == 0) {\n            val = {red: 0, green:0, blue:0, alpha: 0};\n        } else {\n            var cl = ColorNameToVal(color);\n            val = {red: cl[0], green: cl[1], blue: cl[2], alpha: cl[3]};\n        }\n        props.onColorChange(val);\n    }\n\n    return colors?.map((color, index)=>{\n        var item = null;\n        if (index == selectedIndex) {\n            if (props.type == 'fill' && index == 0) {\n                item = <ChessCircle checked={true}/>\n            } else if (color.props.color == 'white') {\n                item = <WhiteCircle checked={true} size=\"2em\" color={color.props.color}/>;\n            } else {\n                item = <FaCheckCircle size=\"2em\" color={color.props.color}/>;\n            }\n        } else {\n            item = color;\n        }\n        return (\n            <span key={color.props.id} onClick={() => onColorChange(index, color.props.color)}>\n              {item}\n            </span>\n        )\n    })\n}\nexport const ColorListOld = (props) => {\n    const {colors} = props;\n    return colors?.map((color, index)=>{\n        var item = null;\n        if (index == props.selectedIndex) {\n            item = <FaCheckCircle size=\"2em\" color={color.props.color}/>;\n        } else {\n            item = color;\n        }\n        return (\n            <span onClick={() => props.onColorChange(index, color.props.color)}>\n              {item}\n            </span>\n        )\n    })\n}\n\nexport default ColorList;\n","import React, { useState } from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Style from './SideBarStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AiOutlineMinus, AiOutlineDash, AiOutlineSmallDash } from \"react-icons/ai\";\nimport { RiCheckboxBlankCircleFill } from \"react-icons/ri\";\nimport drawStyle from '../../common/DrawStyle'\nimport {ColorListOld as ColorList } from '../../common/ColorList'\nimport Config from '../../common/Config'\n\nconst useStyles = makeStyles(Style);\n\nconst StrokeStyle = (props) => {\n    const classes = useStyles();\n\n    const [colorIndex, setColorIndex] = useState(drawStyle.colorIndex)\n    const [dashIndex, setDashIndex] = useState(drawStyle.dashIndex)\n    const [widthIndex, setWidthIndex] = useState(drawStyle.widthIndex)\n\n    const widthCircles = [\n        {icon: <RiCheckboxBlankCircleFill size=\"1em\" id=\"0\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.2em\" id=\"1\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.4em\" id=\"2\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.6em\" id=\"3\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.8em\" id=\"4\" />},\n    ]\n\n    const dashLines = [\n        {icon: <AiOutlineMinus size=\"2.2em\" id=\"0\" />},\n        {icon:<AiOutlineSmallDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"1\"  />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}   id=\"2\" />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"3\" />},\n    ]\n    \n    const onColorChange = (index, color) =>{\n        setColorIndex(index)\n        drawStyle.setColor(index,color);\n    }\n\n    const onDashChange = (index, iconsId) => {\n        setDashIndex(iconsId)\n        drawStyle.setDashIndex(index);\n    }\n\n    const onWidthChange = (index, iconsId) => {\n        setWidthIndex(iconsId)\n        drawStyle.setWidthIndex(index);\n    }\n\n    const getDashLines = () => {\n                      return ( \n                          <div className={classes.spaceBwtRound}>\n                        {\n                           dashLines.map((dashLine, index) =>{\n                                return(\n                                    <span key={index} className={`${dashLine.icon.props.id == dashIndex ? \"changeBorder\" : \"\"} `} \n                                        onClick={() => onDashChange(index, dashLine.icon.props.id) }>\n                                        {dashLine.icon}\n                                    </span>\n                                )\n                            })\n                        }\n                        </div>\n                      )\n    }\n\n    const getWidthCircles = () => {\n        return ( \n            <div className={classes.spaceBwt} >\n          {\n             widthCircles.map((wcircle, index) =>{\n                  return(\n                      <span key={index} className={`${wcircle.icon.props.id == widthIndex ? \"changeBorderRound\" : \"defaultBorder\"} `} \n                        onClick={() => onWidthChange(index, wcircle.icon.props.id) }>\n                          {wcircle.icon}\n                      </span>\n                  )\n              })\n          }\n          </div>\n        )\n    }\n    var {open, anchorEl, placement, subMenuIcons} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition\n            >\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"smart_draw_paper smart_draw_res\">\n                            {getWidthCircles()}\n                            {getDashLines()}\n                            <ColorList colors={subMenuIcons} selectedIndex={colorIndex} \n                                onColorChange={onColorChange}/>\n                         </Paper>\n                    </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default StrokeStyle;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from '../../common/Config'\nimport Style from './SideBarStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport menuState from '../../common/MenuState'\n\nconst useStyles = makeStyles(Style);\n\nconst SelectionGroupPopup = (props) => {\n    const classes = useStyles();\n\n    var {open, anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    var chooseSelectMode = () => {\n        props.setSelectionMode(menuState.menus.selection);\n    }\n\n    var chooseMoveMode = () => {\n        props.setSelectionMode(menuState.menus.move);\n    }\n\n    var itemClass = classes.expandedMenuItem;\n    var itemClassActive = classes.expandedMenuItem + ' ' + classes.expandedMenuItemActive\n    var selectStyle = itemClass;\n    var moveStyle = itemClass;\n    if (menuState.selectionGroupVal == menuState.menus.selection) {\n        selectStyle = itemClassActive;\n    } else {\n        moveStyle = itemClassActive;\n    }\n    var menuClass = classes.expandedMenu;\n    const {menuItem} = classes;\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition\n            >\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"selection_menu_expanded_paper\">\n                            <div className={menuClass}>\n                                <div className={selectStyle} onClick={chooseSelectMode}>\n                                    <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                                        <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>\n                                    </div>\n                                    <div className={menuItem +' '+ 'menuItems'}>Select</div>\n                                </div>\n                                <div className={moveStyle} onClick={chooseMoveMode}>\n                                    <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                                        <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>\n                                    </div>\n                                    <div className={menuItem +' '+ 'menuItems'}>Move</div>\n                                </div>\n                            </div>\n                         </Paper>\n                    </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default SelectionGroupPopup;\n","import * as React from 'react';\n\nvar panel = {\n    dragging: false,\n    update: null,\n    children: null,\n    x: 0,\n    y: 0,\n}\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n      () => { stateRef.current = state },\n      [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst DragPanel = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n\n    React.useEffect(() => {\n        panel.update = () => {\n            setCounter(counterRef.current + 1);\n        }\n        return () => {\n            panel.update = null;\n        };\n    }, []);\n\n    if (!panel.dragging) {\n        return null;\n    }\n\n    var style = {top: panel.y, left: panel.x, position: 'absolute'};\n\n    return <div className=\"dragPanel\"><div style={style}>{panel.children}</div></div>\n}\n\nexport {panel, DragPanel}","import React from 'react'\nimport {DraggableCore} from 'react-draggable';\nimport {panel} from './Panel'\nimport util from '../common/Util'\n\nvar dx = 0;\nvar dy = 0;\n\nconst LekhDraggable = (props) => {\n    const [enabled, setEnabled] = React.useState(true);\n\n    const updatePanel = () => {\n        if (panel.update) {\n            panel.update();\n        }\n    }\n\n    const onDragStart = (e) => {\n        var canvas = document.getElementById(props.id);\n        var rect = canvas.getBoundingClientRect();\n        panel.x = rect.x;\n        panel.y = rect.y;\n       \n        panel.dragging = true;\n        panel.children = React.cloneElement(props.children, {enabled: true});\n\n        var loc = util.mouseLocation(e);\n        if (loc != null) {\n            dx = rect.x - loc.x;\n            dy = rect.y - loc.y;\n        }\n\n        updatePanel();\n        setEnabled(false);\n    }\n\n    const onDrag = (e) => {\n        var loc = util.mouseLocation(e);\n        if (loc != null) {\n            panel.x = loc.x + dx;\n            panel.y = loc.y + dy;\n        }\n        updatePanel();\n    }\n\n    const onDragStop = (e) => {\n        props.onStop(e);\n        window.setTimeout(function() {\n            panel.dragging = false;\n            updatePanel();\n            setEnabled(true);\n        }, 10);\n    }\n\n    var children = React.cloneElement(props.children, {enabled: enabled});\n\n    return (\n        <DraggableCore onStart={onDragStart} onDrag={onDrag} onStop={onDragStop}>\n            {children}\n        </DraggableCore>\n      );\n}\n\nexport {LekhDraggable as default};\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from '../common/Config'\nimport LekhDraggable from '../draggable/LekhDraggable';\nimport shapes from './Shapes'\nimport LibCell from '../components/LibCell/LibCell';\nimport {\n    AiOutlineCaretDown,\n    AiOutlineCaretUp,\n  } from \"react-icons/ai\"\n\nconst MiniLib = (props) => {\n    shapes.search('');\n    const getShapeIcons = () => {\n        return shapes.getMiniGroup().shapes.map((shape, index) => {\n            return (\n                <LekhDraggable id={index} key={index} onStop={(e, data) => {props.onDragStop(e, data, shape.category, shape.num, popperRef)}}>\n                    <LibCell category={shape.category} num={shape.num} id={index} size={45}/>\n                </LekhDraggable>\n            )\n        })\n    }\n\n    var {anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    var popperRef = React.createRef();\n    return (\n        <div>\n            <Popper ref={popperRef} open={true} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            {window.matchMedia(Config.mediaQuery).matches && (\n                            <div className=\"shape-count\">\n                                <AiOutlineCaretUp onClick={() => props.expand(true)}/>\n                            </div>)}\n                            {getShapeIcons()}\n                            {!window.matchMedia(Config.mediaQuery).matches && (\n                            <div className=\"shape-count\">\n                                <AiOutlineCaretDown onClick={() => props.expand(true)}/>\n                            </div>)}\n                         </Paper>\n                     </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default MiniLib;\n","import React, { useState } from \"react\"\nimport { AiOutlineCaretDown, AiOutlineCaretRight } from \"react-icons/ai\"\nimport LekhDraggable from '../draggable/LekhDraggable';\nimport shapes from './Shapes'\nimport LibCell from '../components/LibCell/LibCell';\n\nconst useRefState = initialValue => {\n  const [state, setState] = React.useState(initialValue)\n  const stateRef = React.useRef(state)\n  React.useEffect(\n    () => { stateRef.current = state },\n    [state]\n  )\n  return [state, stateRef, setState];\n}\n\nconst ShapesGroup = ({idx, onDragStop}) => {\n  var group = shapes.getGroup(idx);\n  const [counter, counterRef, setCounter] = useRefState(0);\n\n  if (group == null) {\n    return <div></div>;\n  }\n\n  if (group.shapes.length == 0 && group.contentUrl && group.expanded) {\n    shapes.getShapes(idx, function() {\n      setCounter(counterRef.current + 1);\n    });\n  }\n  const handleCaretClick = () => {\n    shapes.expandGroup(idx, !group.expanded)\n    setCounter(counterRef.current + 1);\n  }\n\n  const getShapeIcons = () => {  \n    return group.shapes.map((shape, index) => {\n      var canvasId = idx + '_' + index;\n      return (\n        <div className=\"libCell\">\n        <LekhDraggable id={canvasId} key={index} onStop={(e, data) => {onDragStop(e, data, shape.category, shape.num)}}>\n          <LibCell category={shape.category} num={shape.num} id={canvasId} size={40}/>\n        </LekhDraggable>\n        <span>{shape.name}</span>\n        </div>\n      )\n    })\n  }\n\n  return (\n    <div className=\"\">\n      <div onClick={handleCaretClick} className=\"shapes-group-inner\">\n        <span className=\"caret\">\n          {!group.expanded && <AiOutlineCaretRight />}\n          {group.expanded && <AiOutlineCaretDown />}\n        </span>\n        <h4 className=\"group-shapes-name\">{group.name}</h4>\n      </div>\n      {group.shapes.length == 0 && group.expanded && <span className=\"libCellLoadingSpan\">Loading..</span>}\n      {group.shapes.length > 0 && group.expanded && <div className=\"group-shapes\">{getShapeIcons()}</div>}\n    </div>\n  )\n}\n\nexport default ShapesGroup\n","import React, { useState } from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from '../common/Config'\nimport shapes from './Shapes'\nimport ShapesGroup from './ShapesGroup';\nimport Dialog from \"@material-ui/core/Dialog\"\nimport Switch from \"@material-ui/core/Switch\"\nimport keyboard from '../common/KeyboardInput'\n\nimport {\n    AiOutlineCaretDown,\n    AiOutlineCaretUp,\n    AiOutlineCaretRight,\n    AiTwotoneSetting,\n    AiOutlineClose\n} from \"react-icons/ai\"\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nvar searchTimer = null;\n\nconst SearchBox = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = function () {\n        setCounter(counterRef.current + 1);\n    }\n    const handleSearch = (e) => {\n        var val = e.target.value;\n        if (!val) {\n            val = '';\n        }\n        shapes.searchText = val;\n        if (searchTimer == null) {\n            searchTimer = window.setTimeout(function() {\n                shapes.search(shapes.searchText);\n                reload();\n                searchTimer = null;\n                props.searchCompleted();\n            }, 500);\n        }\n        reload();\n    }\n    return <input placeholder=\"Search\"\n        id=\"shapeLibSearchBox\"\n        value={shapes.searchText}\n        onChange={handleSearch}\n    />\n}\n\nconst FullLib = (props) => {\n    const [showMoreSettings, showMoreSettingsRef, setShowMoreSttings] = useRefState(false)\n    const [counter, counterRef, setCounter] = useRefState(0);\n\n    var { anchorEl, placement } = props;\n\n    const handleKeyDown = (event) => {\n        var textBox = document.getElementById(\"shapeLibSearchBox\");\n        if (document.activeElement == textBox) {\n            return true;\n        }\n        if (showMoreSettingsRef.current) {\n            let key = event.key.toLowerCase();\n            if (key == 'escape') {\n                setShowMoreSttings(false);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    React.useEffect(() => {\n        keyboard.addListener(handleKeyDown);\n        window.setTimeout(function () {\n            if (shapesGroupRef.current) {\n                shapesGroupRef.current.scrollTop = shapes.scroll;\n                shapesGroupRef.current.addEventListener('scroll', (event) => {\n                    if (shapesGroupRef.current) {\n                        shapes.scroll = shapesGroupRef.current.scrollTop;\n                    }\n                });\n            }\n        }, 5);\n        return () => {\n            keyboard.removeListener(handleKeyDown);\n        }\n    }, [])\n\n    const reload = function () {\n        setCounter(counterRef.current + 1);\n    }\n\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    var popperRef = React.createRef();\n    var shapesGroupRef = React.createRef();\n\n    const onDragStop = (e, data, categ, num) => {\n        props.onDragStop(e, data, categ, num, popperRef);\n    }\n\n    var icons = [];\n    for (let i = 0; i < shapes.groupCount(); i++) {\n        icons.push(<ShapesGroup idx={i} onDragStop={onDragStop} />);\n    }\n    var displaySettings = [];\n    if (showMoreSettings) {\n        displaySettings = shapes.getDisplaySettings();\n    }\n\n    return (\n        <div>\n            <Popper ref={popperRef} open={true} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={0}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            <div className=\"shapes-settings\">\n                                <SearchBox searchCompleted={reload} />\n                                <AiTwotoneSetting\n                                    className=\"shapes-settings-icon\"\n                                    onClick={() => setShowMoreSttings(true)}\n                                />\n                                <AiOutlineClose className=\"shapes-settings-close\" onClick={() => props.expand(false)}/>\n                            </div>\n                            <div ref={shapesGroupRef} className=\"shapes-group-div\">\n                                {icons}\n                            </div>\n                            {!window.matchMedia(Config.mediaQuery).matches && (\n                                <div className=\"shape-count\">\n                                    <AiOutlineCaretUp onClick={() => props.expand(false)} />\n                                </div>\n                            )}\n                        </Paper>\n                    </Fade>\n                )}\n            </Popper>\n            {showMoreSettings && (\n                <Dialog open={showMoreSettings}>\n                    <div className=\"show-more-settings\">\n                        <div className=\"show-more-settings-title\">\n                            <h2>Manage Shapes</h2>\n\n                            <AiOutlineClose\n                                onClick={() => setShowMoreSttings(false)}\n                                className=\"show-more-close\"\n                            />\n                        </div>\n\n                        <div className=\"show-more-settings-inner\">\n                            {displaySettings.map(c => (\n                                <div>\n                                    <h4>{c.name}</h4>\n                                    <Switch color=\"primary\" checked={c.enabled} onChange={(event) => { shapes.setDisplaySetting(c.name, event.target.checked); reload(); }} />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </Dialog>\n            )}\n        </div>\n    )\n}\n\nexport default FullLib;\n","import './ShapeLib.css'\nimport React from 'react'\nimport canvas from '../common/Canvas'\nimport Config from '../common/Config'\nimport util from '../common/Util'\nimport MiniLib from './MiniLib';\nimport FullLib from './FullLib';\nimport shapes from './Shapes'\n\nconst ShapeLibrary = (props) => {\n    const [expanded, setExpanded] = React.useState(shapes.expanded);\n\n    const onDragStop = (event, data, categ, num, containerRef) => {\n        var loc = util.mouseLocation(event);\n        if (loc == null) {\n            return;\n        }\n        var x = loc.x;\n        var y = loc.y;\n        \n        var popUpRect = containerRef.current.getBoundingClientRect()\n        if (y>= popUpRect.top && y<= popUpRect.bottom && x >= popUpRect.left && x <= popUpRect.right) {\n            var mid = canvas.getMidPoint();\n            x = mid.x;\n            y = mid.y;\n        }\n        var uiMappedPt = canvas.mapPtUIScroll({x:x, y: y});\n        x = canvas.maprx(uiMappedPt.x);\n        y = canvas.mapry(uiMappedPt.y);\n        window.Module.libraryStore().addObjectToCanvas(categ, num, x, y);\n        canvas.draw();\n    }\n\n    const onExpand = (val) => {\n        setExpanded(val);\n        shapes.expanded = val;\n    }\n\n    var {anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    if (expanded) {\n        return <FullLib anchorEl={anchorEl} placement={placement} onDragStop={onDragStop} expand={onExpand} />\n    }\n    return (\n        <MiniLib anchorEl={anchorEl} placement={placement} onDragStop={onDragStop} expand={onExpand}/>\n    )\n}\n\nexport default ShapeLibrary;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Config from '../../common/Config'\n\nconst TextModePopup = (props) => {\n    \n    var {open, anchorEl, placement} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            <span>Text can also be added by double clicking on the board</span>\n                         </Paper>\n                     </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default TextModePopup;\n","import canvas from \"../common/Canvas\"\n\nvar propsUtil = { \n    connectionEditMaxHeight: 100,\n    showHelpMaxHeight: 150,\n    propertyEditMaxHeight: 200,\n    styleEditMaxHeight: 300\n}\n\nconst getTopPlacement = (rect) => {\n    const getBoundingClientRect = () =>  {\n        return {\n            x: rect.x,\n            y: rect.y,\n            width:rect.width,\n            height: rect.height,\n            top: rect.y,\n            left: rect.x,\n            bottom: rect.y + rect.height,\n            right: rect.x + rect.width\n        }\n    }\n\n    var anchorEl = {\n        clientWidth: rect.width,\n        clientHeight: rect.height,\n        getBoundingClientRect,\n    }\n\n    return {anchorEl: anchorEl, placement: 'top'}\n}\n\nconst getCenterPlacenemt = (rect) => {\n    return {style: { position: 'fixed', top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}\n}\n\npropsUtil.getPlacement = (rect, maxHeight) => {\n    var vpp = canvas.toViewPort({x: rect.x, y: rect.y});\n    rect.x = vpp.x;\n    rect.y = vpp.y;\n    \n    rect.y -= 8;\n    rect.height += 16;\n\n    var tp = document.getElementById(\"transparentPanel\");\n    if (tp == null) {\n        return getCenterPlacenemt(rect);\n    }\n    var tpRect = tp.getBoundingClientRect();\n    if (rect.y < maxHeight && tpRect.height - (rect.y + rect.width) < maxHeight) {\n        return getCenterPlacenemt(rect);\n\n    }\n    return getTopPlacement(rect);\n}\n\nexport default propsUtil;","import React from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport propsUtil from \"./PropsUtil\";\n\nconst Help = (props) => {\n    if (!window.Module.inputReceiver().needToShowShapeHelp()) {\n        props.reload();\n        return null;\n    }\n\n    var editor = window.Module.startPropertyEditing();\n    if (!editor.isValid()) {\n        window.Module.inputReceiver().setNeedToShowShapeHelp(false);\n        props.reload();\n        return null;\n    }\n    var helpText = editor.getHelpText();\n    helpText = helpText.replace(\" tap \", \" click \");\n    var rect = editor.getBound();\n\n    var pos = propsUtil.getPlacement(rect, propsUtil.showHelpMaxHeight);\n\n    const handleClickAway = () => {\n        window.Module.inputReceiver().setNeedToShowShapeHelp(false);\n        props.reload();\n    }\n\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Popper open={true} {...pos}>\n                <div className=\"shape_help_paper\">\n                    {<div dangerouslySetInnerHTML={{ __html: helpText }} />}\n                </div>\n            </Popper>\n        </ClickAwayListener>\n    );\n}\n\nexport default Help;","import React from \"react\"\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {AiOutlineCheck, AiOutlineLeft} from \"react-icons/ai\";\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport canvas from '../common/Canvas'\n\nconst EnumPicker = (props) => {\n    const [selectedVal, setSelectedVal] = React.useState('')\n    var properties = props.editor.getProperties();\n    var idx = props.idx;\n    var name = properties[idx].name;\n    var value = properties[idx].value;\n    var items = properties[idx].editor.enumItems;\n\n    const selectItem = (item) => {\n        props.editor.setVal(idx, item);\n        setSelectedVal(item);\n        canvas.draw();\n    }\n\n    return (\n        <div className=\"enum_picker\">\n            <div className=\"enum_picker_header\">\n                <IconButton onClick={props.done}> \n                    <AiOutlineLeft size={18}/>\n                </IconButton>\n                <div>{name}</div>\n            </div>\n            <List component=\"nav\" aria-label=\"contacts\">\n                {items.map((item, index) => {\n                    return (\n                        <ListItem key={item} button onClick={()=>selectItem(item)}>\n                            <ListItemText primary={item} />\n                            {item == value &&\n                                <ListItemSecondaryAction>\n                                    <AiOutlineCheck />\n                                </ListItemSecondaryAction>}\n                        </ListItem>)\n                })}\n            </List>\n        </div>\n    );\n}\n\nexport default EnumPicker;\n","import React from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport Switch from \"@material-ui/core/Switch\"\nimport { AiOutlinePlus, AiOutlineMinus, AiOutlineRight } from \"react-icons/ai\";\nimport IconButton from '@material-ui/core/IconButton';\nimport Slider from '@material-ui/core/Slider';\nimport EnumPicker from \"./EnumPicker\"\nimport canvas from '../common/Canvas'\nimport propsUtil from \"./PropsUtil\";\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst Property = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    \n    const [showingEnum, setShowingEnum] = React.useState(false);\n    const [enumPropIdx, setEnumPropIdx] = React.useState(-1);\n\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    if (!window.Module.inputReceiver().needPropertyEditing()) {\n        props.reload();\n        return null;\n    }\n\n    var editor = window.Module.startPropertyEditing();\n    if (!editor.isValid()) {\n        window.Module.inputReceiver().setNeedPropertyEditing(false);\n        props.reload();\n        return null;\n    }\n\n    var properties = editor.getProperties();\n    var rect = editor.getBound();\n    var pos = propsUtil.getPlacement(rect, props.propertyEditMaxHeight);\n\n    const handleClickAway = (event) => {\n        event.preventDefault();\n        window.Module.inputReceiver().setNeedPropertyEditing(false);\n        editor.finalize();\n        props.reload();\n    }\n\n    const handleEnumSelect = (idx) => {\n        setEnumPropIdx(idx);\n        setShowingEnum(true);\n    }\n\n    const changeBoolVal = (idx) => {\n        editor.setVal(idx, !properties[idx].value);\n        canvas.draw();\n        reload();\n    }\n\n    const changeNumberVal = (idx, plus) => {\n        var factor = plus? 1 : -1;\n        var prop = properties[idx];\n        if (prop.editor.type == \"IntMinMax\" || prop.editor.type == \"FloatMinMaxStep\") {\n            var step = prop.editor.step;\n            if (step <= 0) {\n                step = 1;\n            }\n            var val = prop.value + (factor * step);\n            if (val < prop.editor.minVal) {\n                val = prop.editor.minVal;\n            }\n            if (val > prop.editor.maxVal) {\n                val = prop.editor.maxVal;\n            }\n            editor.setVal(idx, val);\n        } else if (prop.editor.type == \"Default\") {\n            var val = prop.value + factor;\n            editor.setVal(idx, val);\n        }\n        canvas.draw();\n        reload();\n    }\n\n    const changeSliderVal = (idx, newVal) => {\n        var prop = properties[idx];\n        var min = prop.editor.minVal;\n        var max = prop.editor.maxVal;\n        var range = max - min;\n        if (range > 0) {\n            var propVal = (newVal * range) / 100 + min;\n            editor.setVal(idx, propVal);\n        }\n        canvas.draw();\n        reload();\n    }\n\n    const getSliderVal = (idx) => {\n        var prop = properties[idx];\n        var min = prop.editor.minVal;\n        var max = prop.editor.maxVal;\n        var val = prop.value;\n        var range = max - min;\n        if (range > 0) {\n            return (100 * (val - min)) / range ;\n        } else {\n            return 0;\n        }\n    }\n\n    var items = [];\n    if (showingEnum) {\n        items.push(<EnumPicker editor={editor} idx={enumPropIdx} done={()=>setShowingEnum(false)}></EnumPicker>);\n    } else {\n        items.push(<div key=\"header\" className=\"shape_property_header\">Properties</div>)\n        for (var i = 0; i < properties.length; i++) {\n            let prop = properties[i];\n            if (prop.editor.type != \"Hidden\") {\n                var name = (<div className=\"shape_property_col_1\">\n                    <span>{prop.name}</span>\n                </div>);\n                var val = null;\n                if (prop.valueType == \"bool\") {\n                    let idx = i;\n                    val = (<div className=\"shape_property_col_2\">\n                        <Switch checked={prop.value} color=\"primary\" onChange={()=>{changeBoolVal(idx)}}></Switch>\n                    </div>)\n\n                } else if (prop.valueType == \"int\" || \n                    (prop.valueType == \"float\" && prop.editor.type == \"FloatMinMaxStep\")) {\n                    let idx = i;\n                    val = (<div className=\"shape_property_col_2\">\n                        <IconButton aria-label=\"plus\" onClick={()=>changeNumberVal(idx, true)}>\n                            <AiOutlinePlus />\n                        </IconButton>\n                        <div className=\"shape_property_col_2_val\">{prop.value}</div>\n                        <IconButton aria-label=\"minus\">\n                            <AiOutlineMinus onClick={()=>changeNumberVal(idx, false)}/>\n                        </IconButton>\n                    </div>)\n                } else if (prop.valueType == \"string\") {\n                    if (prop.editor.type == \"EnumString\") {\n                        let idx = i;\n                        val = (<div className=\"shape_property_col_2\">\n                            <IconButton aria-label=\"choose\" onClick={() => { handleEnumSelect(idx) }}>\n                                <AiOutlineRight />\n                            </IconButton>\n                            <div className=\"shape_property_col_2_val\">{prop.value}</div>\n                        </div>)\n                    }\n                } else if (prop.valueType == \"float\" && prop.editor.type == \"FloatMinMax\") {\n                    let idx = i;\n                    var item = (<div key={idx} className=\"shape_property_row_slider\">\n                        <div className=\"shape_property_row\">\n                            {name}\n                            <div className=\"shape_property_col_separator\"></div>\n                            <div className=\"shape_property_col_2\">\n                                <span>{prop.value.toFixed(2)}</span>\n                            </div>\n                        </div>\n                        <Slider className=\"value_slider\" value={getSliderVal(idx)} onChange={(event, val)=>changeSliderVal(idx, val)}></Slider>\n                    </div>);\n                    items.push(item);\n                    name = null;\n                }\n                if (name != null) {\n                    let idx = i;\n                    items.push(\n                        <div key={idx} className=\"shape_property_row\">\n                            {name}\n                            <div className=\"shape_property_col_separator\"></div>\n                            {val}\n                        </div>\n                    )\n                }\n            }\n        }\n    }\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Popper open={true} {...pos}>\n                <div className=\"shape_property_paper\">\n                    {items}\n                </div>\n            </Popper>\n        </ClickAwayListener>\n    );\n}\n\nexport default Property;","import React from 'react'\nimport { AiOutlinePlus, AiOutlineMinus, AiOutlineDash, AiOutlineSmallDash } from \"react-icons/ai\";\nimport IconButton from '@material-ui/core/IconButton';\nimport ColorList from '../common/ColorList';\nimport canvas from '../common/Canvas'\n\nconst dashLines = [\n    {icon: <AiOutlineMinus size=\"2.2em\" id=\"0\" />},\n    {icon:<AiOutlineSmallDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"1\"  />},\n    {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}   id=\"2\" />},\n    {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"3\" />},\n]\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n      () => { stateRef.current = state },\n      [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst LineStyle = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n    let strokeWidth = props.editor.style().effectiveStrokeWidth();\n    let curColor = props.editor.style().effectiveStrokePaint().solidColor;\n    let dashType = props.editor.getDashType();\n\n    const onDashChange = (val) => {\n        props.editor.setDashType(val);\n        canvas.draw();\n        reload();\n    }\n\n    const onColorChange = (color) => {\n        props.editor.setLineColor(color);\n        canvas.draw();\n        reload();\n    }\n\n    const onStrokeWidthPlus = () => {\n        props.editor.setStrokeWidth(strokeWidth + 0.5);\n        canvas.draw();\n        reload();\n    }\n\n    const onStrokeWidthMinus = () => {\n        const val = strokeWidth - 0.5;\n        if (val <= 0) {\n            return;\n        }\n        props.editor.setStrokeWidth(val);\n        canvas.draw();\n        reload();\n    }\n\n    return (<div className=\"shape_style_line\">\n        <div className=\"shape_style_line_width\">\n            <IconButton aria-label=\"minus\" onClick={onStrokeWidthMinus}>\n                <AiOutlineMinus />\n            </IconButton>\n            <div className=\"shape_style_line_width_text\">{strokeWidth.toFixed(2)}</div>\n            <IconButton aria-label=\"plus\" onClick={onStrokeWidthPlus}>\n                <AiOutlinePlus />\n            </IconButton>\n        </div>\n        <div className=\"shape_style_line_dash\">\n            {dashLines.map((dashLine, index) => {\n                var cls = \"shape_style_line_dash_cell\";\n                if (index == dashType) {\n                    cls = \"shape_style_line_dash_cell changeBorder\"\n                }\n                return (\n                    <div key={index} className={cls} onClick={()=>onDashChange(index)}>\n                        {dashLine.icon}\n                    </div>\n                )\n            })}\n        </div>\n        <div className=\"shape_style_line_colors\">\n            <ColorList curColor={curColor} type='line' onColorChange={onColorChange} />\n        </div>\n    </div>)\n}\n\nexport default LineStyle;\n","import React from \"react\"\nimport ColorList from '../common/ColorList';\nimport canvas from '../common/Canvas'\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst FillColor = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    let curColor = {red:0, green:0, blue:0, alpha: 0};\n    if (props.editor.style().effectiveFillPaint().type.value == 2) {\n        curColor = props.editor.style().effectiveFillPaint().solidColor;\n    }\n    const onColorChange = (color) => {\n        props.editor.setFillColor(color);\n        canvas.draw();\n        reload();\n    }\n\n    return (<div className=\"shape_style_line_colors\" style={{marginTop: 10}}>\n        <ColorList curColor={curColor} type='fill'\n            onColorChange={onColorChange} />\n    </div>);\n}\n\nexport default FillColor;","import React from \"react\"\nimport { AiOutlinePlus, AiOutlineMinus, AiOutlineAlignCenter, \n    AiOutlineAlignLeft, AiOutlineAlignRight, AiOutlineVerticalAlignBottom,\n    AiOutlineVerticalAlignMiddle, AiOutlineVerticalAlignTop } from \"react-icons/ai\";\nimport IconButton from '@material-ui/core/IconButton';\nimport ColorList from '../common/ColorList';\nimport canvas from '../common/Canvas'\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst FontEditor = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n    let curColor = props.editor.style().effectiveTextFill().solidColor;\n    let fontSz = props.editor.style().effectiveFontSize();\n    var alignV = props.editor.style().effectiveTextAlignVertical().value;\n    var alignHz = props.editor.style().effectiveTextAlignHorizontal().value;\n\n    const onColorChange = (color) => {\n        props.editor.setTextColor(color);\n        canvas.draw();\n        reload();\n    }\n\n    const onFontPlus = () => {\n        props.editor.setFontSize(fontSz + 0.5);\n        canvas.draw();\n        reload();\n    }\n\n    const onFontMinus = () => {\n        const val = fontSz - 0.5;\n        if (val <= 0) {\n            return;\n        }\n        props.editor.setFontSize(val);\n        canvas.draw();\n        reload();\n    }\n\n    const changeHzAlign = (val) => {\n        props.editor.setHorizontalAlignment({value:val});\n        canvas.draw();\n        reload();\n    }\n\n    const changeVAlign = (val) => {\n        props.editor.setVerticalAlignment({value:val});\n        canvas.draw();\n        reload();\n    }\n\n    return (<div className=\"shape_style_line\">\n        <div className=\"shape_style_line_width\">\n            <IconButton aria-label=\"plus\" onClick={onFontMinus}>\n                <AiOutlineMinus />\n            </IconButton>\n            <div className=\"shape_style_line_width_text\">{fontSz.toFixed(2)}</div>\n            <IconButton aria-label=\"minus\" onClick={onFontPlus}>\n            <AiOutlinePlus />\n            </IconButton>\n        </div>\n        <div className=\"shape_style_font_align\" style={{paddingTop:5, borderTop: \"1px solid #bebebe\"}}>\n            <div className={alignHz == 2 ? \"shape_style_font_align_left changeBorder\": \"shape_style_font_align_left\"}>\n                <AiOutlineAlignLeft onClick={()=>changeHzAlign(2)}/>\n            </div>\n            <div className={alignHz == 1 ? \"shape_style_font_align_center changeBorder\": \"shape_style_font_align_center\"}>\n                <AiOutlineAlignCenter onClick={()=>changeHzAlign(1)}/>\n            </div>\n            <div className={alignHz == 3 ? \"shape_style_font_align_right changeBorder\": \"shape_style_font_align_right\"}>\n                <AiOutlineAlignRight onClick={()=>changeHzAlign(3)}/>\n            </div>\n        </div>\n        <div className=\"shape_style_font_align\" style={{paddingTop:5, marginTop: 6, borderBottom: \"1px solid #bebebe\"}}>\n            <div className={alignV == 2 ? \"shape_style_font_align_left changeBorder\": \"shape_style_font_align_left\"}>\n                <AiOutlineVerticalAlignTop onClick={()=>changeVAlign(2)}/>\n            </div>\n            <div className={alignV == 1 ? \"shape_style_font_align_center changeBorder\": \"shape_style_font_align_center\"}>\n                <AiOutlineVerticalAlignMiddle onClick={()=>changeVAlign(1)}/>\n            </div>\n            <div className={alignV == 3 ? \"shape_style_font_align_right changeBorder\": \"shape_style_font_align_right\"}>\n                <AiOutlineVerticalAlignBottom onClick={()=>changeVAlign(3)}/>\n            </div>\n        </div>\n        <div className=\"shape_style_line_colors\">\n            <ColorList curColor={curColor} type='text' onColorChange={onColorChange} />\n        </div>\n    </div>)\n}\n\nexport default FontEditor;","import React from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport LineStyle from \"./LineStyle\";\nimport FillColor from \"./FillColor\";\nimport FontEditor from \"./FontEditor\"\nimport propsUtil from \"./PropsUtil\";\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst StyleEditor = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const [selectedTab, setSelectedTab] = React.useState(0);\n    if (!window.Module.inputReceiver().needStyleEditing()) {\n        props.reload();\n        return null;\n    }\n\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    var editor = window.Module.startStyleEditing();\n\n    var rect = editor.getObjectBound();\n    var pos = propsUtil.getPlacement(rect, propsUtil.styleEditMaxHeight);\n\n    var tabs = [\"LINE\", \"FILL\", \"TEXT\"];\n    const handleClickAway = () => {\n        window.Module.inputReceiver().setNeedStyleEditing(false);\n        props.reload();\n    }\n\n    return <ClickAwayListener onClickAway={handleClickAway}>\n        <Popper open={true} {...pos}>\n            <div className=\"shape_style_paper\">\n                <div className=\"shape_style_tabs\">\n                    {tabs.map((tab, index)=> {\n                        if (selectedTab == index) {\n                            return <div key={index} className=\"shape_style_tab shape_style_tab_active\"><span onClick={()=>setSelectedTab(index)} className=\"shape_style_tab_span_active\">{tab}</span></div>\n                        } else {\n                            return <div key={index} className=\"shape_style_tab\"><span className=\"shape_style_tab_span\" onClick={()=>setSelectedTab(index)}>{tab}</span></div>        \n                        }\n                    })}\n                </div>\n                {selectedTab == 0 && <LineStyle editor={editor}/>}\n                {selectedTab == 1 && <FillColor editor={editor}/>}\n                {selectedTab == 2 && <FontEditor editor={editor}/>}\n            </div>\n        </Popper>\n    </ClickAwayListener>\n}\n\nexport default StyleEditor;","import React, { useRef, useEffect } from 'react'\n\nconst ArrowCell = props => {\n  const canvasRef = useRef(null)\n  var dpr = window.devicePixelRatio || 1;\n  var width = props.width;\n  var height = props.height;\n\n  const drawCanvas = (canvasElement) => {\n    canvasElement.width = width * dpr;\n    canvasElement.height = height * dpr;\n    canvasElement.style.width = width + \"px\";\n    canvasElement.style.height = height + \"px\";\n    const context = canvasElement.getContext('2d')  \n    context.scale(dpr, dpr);\n    context.fillStyle = \"#ffffff00\";\n    context.fillRect(0, 0, canvasElement.width, canvasElement.height);\n    window.Module.drawArrowCell(props.side, props.type, width, height, context);\n  }\n\n  if (canvasRef != null && canvasRef.current != null) {\n    drawCanvas(canvasRef.current)\n  }\n  \n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    drawCanvas(canvasElement);\n  }, [])\n  \n  return <canvas ref={canvasRef} {...props} width={width+\"px\"} height={height+\"px\"}/>\n}\n\nexport default ArrowCell","import React from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ArrowCell from \"./ArrowCell\";\nimport canvas from '../common/Canvas'\nimport propsUtil from \"./PropsUtil\";\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst ConnectionEditor = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    \n    if (!window.Module.inputReceiver().needConnectionEditing()) {\n        props.reload();\n        return null;\n    }\n\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    var editor = window.Module.startConnectionEditing();\n\n    var rect = editor.getObjectBound();\n    var pos = propsUtil.getPlacement(rect, propsUtil.connectionEditMaxHeight);\n\n    const handleClickAway = (event) => {\n        var paper = document.getElementById(\"connection_edit_paper\");\n        if (paper == null) {\n            return;\n        }\n        var rect = paper.getBoundingClientRect();\n        if (event.clientX >= rect.left && event.clientX <= rect.right &&\n            event.clientY >= rect.top && event.clientY <= rect.bottom) {\n            return;\n        }\n        window.Module.inputReceiver().setNeedConnectionEditing(false);\n        props.reload();\n    }\n\n    const onChange = (side, event) => {\n        event.preventDefault();\n        if (side == 0) {\n            editor.setStartArrow(event.target.value);\n        } else {\n            editor.setEndArrow(event.target.value);\n        }\n        reload();\n        canvas.draw();\n    }\n\n    var arrowCount = editor.arrowCount();\n    var start = editor.startArrowType();\n    var end = editor.endArrowType();\n\n    var arrowsLeft = []\n    var arrowsRight = []\n    for (var idx = 0; idx < arrowCount; idx++) {\n        var i = idx;\n        arrowsLeft.push(<MenuItem value={i}><ArrowCell side={1} type={i} width={50} height={15}></ArrowCell></MenuItem>);\n        arrowsRight.push(<MenuItem value={i}><ArrowCell side={0} type={i} width={50} height={15}></ArrowCell></MenuItem>);\n    }\n    return (<ClickAwayListener onClickAway={handleClickAway}>\n        <Popper open={true} {...pos}>\n            <div id=\"connection_edit_paper\" className=\"connection_edit_paper\">\n                <div className=\"connection_edit_header\">\n                    <span>Arrows</span>\n                </div>\n                <div className=\"connection_edit_options\">\n                    <Select\n                        disableUnderline\n                        className=\"connection_edit_options_cell\"\n                        id=\"demo-simple-select\"\n                        value={start}\n                        onChange={(event)=>onChange(0, event)}\n                    >\n                        {arrowsLeft}\n                    </Select>\n                    <div className=\"connection_edit_options_cell_space\"></div>\n                    <Select\n                        disableUnderline\n                        className=\"connection_edit_options_cell\"\n                        id=\"demo-simple-select\"\n                        value={end}\n                        onChange={(event)=>onChange(1, event)}\n                    >\n                        {arrowsRight}\n                    </Select>\n                </div>\n            </div>\n        </Popper>\n    </ClickAwayListener>)\n}\n\nexport default ConnectionEditor;","import './ShapeProps.css'\n\nimport React from \"react\"\nimport Help  from \"./Help\"\nimport Property  from \"./Property\"\nimport StyleEditor from './StyleEditor'\nimport AppInput from \"../common/AppInput\"\nimport keyboardInput from '../common/KeyboardInput'\nimport ConnectionEditor from './ConnectionEditor'\n\nvar shapePropsUtil = { }\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst ShapeProps = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    const handleKey = (event) => {\n        let key = event.key.toLowerCase();\n        if (key == 'escape') {\n            if (shapePropsUtil.isPropertyWindowOpen()) {\n                shapePropsUtil.dismissWindow();\n                event.preventDefault();\n                reload();\n                return true\n            }\n        }\n        return false;\n    }\n\n    React.useEffect(() => {\n        keyboardInput.addListener(handleKey);\n        AppInput.showShapeProps = () => {reload()}\n        return () => {\n            keyboardInput.removeListener(handleKey);\n            AppInput.showShapeProps = () => {}\n        }\n      }, [])\n\n    if (!window.Module.inputReceiver) {\n        return null;\n    }\n    var propsEdit = false;\n    var showHelp = false;\n    var styleEdit = false;\n    var connectionEdit = false;\n    if (window.Module.inputReceiver().needPropertyEditing()) {\n        propsEdit = true;\n    } else if (window.Module.inputReceiver().needToShowShapeHelp()) {\n        showHelp = true;\n    } else if (window.Module.inputReceiver().needStyleEditing()) {\n        styleEdit = true;\n    } else if (window.Module.inputReceiver().needConnectionEditing()) {\n        connectionEdit = true;\n    }\n\n    if (propsEdit == false && showHelp == false && styleEdit == false && connectionEdit == false) {\n        return null;\n    }\n\n    if (propsEdit) {\n        return <Property reload={reload} />;\n    } else if (showHelp) {\n        return <Help reload={reload} />;\n    } else if (styleEdit) {\n        return <StyleEditor reload={reload} />\n    } else if (connectionEdit) {\n        return <ConnectionEditor reload={reload} />\n    }\n    return null;\n}\n\nshapePropsUtil.isPropertyWindowOpen = function() {\n    return window.Module.inputReceiver().needPropertyEditing() ||\n        window.Module.inputReceiver().needToShowShapeHelp() ||\n        window.Module.inputReceiver().needStyleEditing() ||\n        window.Module.inputReceiver().needConnectionEditing();\n}\n\nshapePropsUtil.dismissWindow = function() {\n    window.Module.inputReceiver().setNeedPropertyEditing(false);\n    window.Module.inputReceiver().setNeedToShowShapeHelp(false);\n    window.Module.inputReceiver().setNeedStyleEditing(false);\n    window.Module.inputReceiver().setNeedConnectionEditing(false);\n}\n\nexport {shapePropsUtil, ShapeProps};","import React from 'react'\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Style from './SideBarStyle';\nimport SideBarMenuItems, {SideBarMenuItemsWithGestures} from \"../../Constant\"\nimport StrokeStyle from './StrokeStyle'\nimport SelectionGroupPopup from './SelectionGroupPopup'\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport menuState from '../../common/MenuState'\nimport ShapeLibrary from '../../shapelib/ShapeLibrary'\nimport TextModePopup from './TextModePopup'\nimport AppInput from '../../common/AppInput'\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport keyboardInput from '../../common/KeyboardInput'\nimport command from '../../common/Command'\nimport { shapePropsUtil } from '../../shapeprops/ShapeProps';\nimport userInfo from '../../utils/UserInfo';\nimport DeviceDetector from \"device-detector-js\";\nimport uiConfig from '../../common/UIConfig';\nimport integ from '../../integ/integ';\n\nvar isDesktop = null;\n\nconst canUseGestures = () => {\n    if (isDesktop == null) {\n        const deviceDetector = new DeviceDetector();\n        const detectedDevice = deviceDetector.parse(navigator.userAgent);\n        if (detectedDevice.device &&\n            new String(detectedDevice.device.type).toLocaleLowerCase() === 'desktop') {\n                isDesktop = true;\n        } else {\n            isDesktop = false;\n        }\n    }\n\n    return isDesktop && userInfo.canUseGestures();\n}\n\nconst useStyles = makeStyles(Style);\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n      () => { stateRef.current = state },\n      [state]\n    )\n    return [state, stateRef, setState];\n}\n\nexport var reloadSideBar = null;\n\nconst SideBarMenu = () => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [placement, setPlacement] = React.useState();\n    const [subMenuIcons, setSubMenuIcons] = React.useState();\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const classes = useStyles();\n\n    const reload = () => {\n        setCounter(counterRef.current + 1);\n    }\n\n    const handleKeyDown = (event) => {\n        let key = event.key.toLowerCase();\n        var handled = false;\n        if (key == 'escape' && !shapePropsUtil.isPropertyWindowOpen()) {\n            if (menuState.hasPopup()) {\n                menuState.removePopup();\n                handled = true;\n            } else if (menuState.selected == menuState.menus.laser ||\n                menuState.selected == menuState.menus.erase ||\n                menuState.selected == menuState.menus.text) {\n                menuState.handleMenuClick(menuState.menus.selection);\n                handled = true;\n            }\n\n            if (handled) {\n                event.preventDefault();\n                AppInput.ignoreNextClick(false);\n                reload();\n            }\n        }\n        return handled;\n    };\n\n    const afterKeyHandling = (event) => {\n        if (command.inputModeChanged) {\n            command.inputModeChanged = false;\n            reload();\n        }\n    }\n    \n    React.useEffect(() => {\n        keyboardInput.addListener(handleKeyDown);\n        keyboardInput.addPostListener(afterKeyHandling);\n        reloadSideBar = reload;\n    \n        // cleanup this component\n        return () => {\n            keyboardInput.removeListener(handleKeyDown);\n            keyboardInput.removePostListener(afterKeyHandling);\n            reloadSideBar = null;\n        };\n    }, []);\n    \n    const handleClick = (event, subMenus, newPlacement,id) => {\n        if (id == menuState.menus.eraseAll) {\n            menuState.handleMenuClick(id);\n            return;\n        }\n        menuState.handleMenuClick(id);\n        setAnchorEl(event.currentTarget);\n\n        setPlacement(newPlacement);\n        setSubMenuIcons(subMenus)\n        reload();\n    };\n\n    const handleClickAway = (e) => {\n        if (menuState.popup == menuState.menus.selectionGroup ||\n            menuState.popup == menuState.menus.text) {\n            menuState.removePopup();\n            reload();\n        }\n    }\n\n    const setSelectionMode = (val) => {\n        menuState.handleMenuClick(val);\n        reload();\n    };\n    \n    const getIconAndName = (sidebar, classes) => {\n        var {icon, name} = sidebar;\n        const {menuItem} = classes;\n        if (sidebar.id == menuState.menus.selectionGroup) {\n            if (menuState.selectionGroupVal == menuState.menus.selection) {\n                icon = <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>;\n                name = \"Select\";\n            } else {\n                icon = <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>;\n                name = \"Move\";\n            }\n        }\n        return (\n            <div>\n                <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                    {icon}\n                </div>\n                <div className={menuItem +' '+ 'menuItems'}>{name}</div>\n            </div>\n        )\n    }\n    var sideMenuItems = SideBarMenuItems;\n    if (canUseGestures()) {\n        sideMenuItems = SideBarMenuItemsWithGestures;\n    }\n    if (uiConfig.isIntegMode()) {\n        sideMenuItems = integ.customizeSidebar(sideMenuItems)\n    }\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n        <div>\n           { (menuState.popup === menuState.menus.selectionGroup) && <SelectionGroupPopup\n                open={true}\n                anchorEl={anchorEl}\n                placement={placement}\n                setSelectionMode={setSelectionMode}\n            /> }\n           { (menuState.popup === menuState.menus.draw || menuState.popup === menuState.menus.smartDraw) && <StrokeStyle\n                open={true}\n                anchorEl={anchorEl}\n                placement={placement}\n                subMenuIcons ={subMenuIcons}\n            /> }\n            { menuState.popup === menuState.menus.text && <TextModePopup\n                open={true}\n                anchorEl={anchorEl}\n                placement=\"right-end\"\n            /> }\n            { menuState.popup === menuState.menus.shapes && <ShapeLibrary\n                open={true}\n                anchorEl={anchorEl}\n                placement=\"right-end\"\n                subMenuIcons ={subMenuIcons}\n            /> }\n            \n            <div className={`${classes.sideBar} side_menus`}>\n                {sideMenuItems.map((sidebar, index) => {\n                    var itemClass = classes.sideBarMenu +' '+ 'sideBarMenu';\n                    if (sidebar.id === menuState.menus.shapes && menuState.popup === menuState.menus.shapes) {\n                        itemClass = classes.sideBarMenu +' '+ 'sideBarMenu selected';\n                    }\n                    if (sidebar.id === menuState.selected ||\n                       (sidebar.id === menuState.menus.selection && menuState.inputMode == menuState.modes.selection) ||\n                       (sidebar.id === menuState.menus.move && menuState.inputMode == menuState.modes.move)) {\n                        itemClass = classes.sideBarMenu +' '+ 'sideBarMenu active';\n                    }\n                    if (sidebar.id === menuState.menus.cameraInput && menuState.cameraActive) {\n                        itemClass = classes.sideBarMenu +' '+ 'sideBarMenu active';\n                    }\n                    return (\n                        <div className={itemClass} key={index} onClick={(event)=>handleClick(event, sidebar.subMenus,'right',sidebar.id)} >\n                            {getIconAndName(sidebar, classes)}\n                        </div>\n                    )\n                })}\n\n            </div>\n        </div>\n        </ClickAwayListener>\n        \n    )\n}\nexport default SideBarMenu","import React from 'react'\nimport menuState from '../../common/MenuState';\n\nconst  Content = () =>  {\n    return (\n        <div className=\"canvasContainer\" id=\"drawContent\">\n            <div id=\"viewport\" className=\"viewport\">\n                <canvas id=\"gridCanvas\" className=\"canvasGridClass\" />\n                {menuState.cameraActive && <canvas id=\"cameraCanvas\" className=\"cameraCanvas\" width=\"1280px\" height=\"720px\"/>}\n                <canvas id=\"drawCanvas\" className=\"canvasClass\" />\n            </div>\n          <canvas id=\"transparentPanel\" className=\"viewport\" />\n        </div>\n    )\n}\n\nexport default Content;\n","import axios from \"axios\";\nimport { constant } from \"./ApiConstants\";\nimport userInfo from \"./UserInfo\";\n\nconst b64toBlob = (base64, type = 'application/octet-stream') => \n  fetch(`data:${type};base64,${base64}`).then(res => res.blob());\n\nconst blobToBase64 = async (blob) => {\n    return new Promise(resole => {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            resole(reader.result);\n        }\n        reader.readAsDataURL(blob);\n    });\n}\n\nconst blobToStr = async (blob) => {\n    return new Promise(resole => {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            resole(reader.result);\n        }\n        reader.readAsText(blob); \n    });\n}\n\nconst toBlob = (data) => {\n    if (data instanceof Blob) {\n        return data;\n    }\n\n    if (typeof(data) == 'string') {\n        return new Blob([data]);\n    }\n    \n    if (typeof(data) == 'object') {\n        return new Blob([JSON.stringify(data)]);\n    }\n    return new Blob(['']);\n}\n\nconst toStr = async (data) => {\n    if (typeof(data) == 'string') {\n        return data;\n    }\n    if (data instanceof Blob) {\n        return await blobToStr(data);\n    }\n    if (typeof(data) == 'object') {\n        return JSON.stringify(data);\n    }\n    return '';\n}\n\nconst requestHttp = async (reqId, request) => { \n    let headers = { }\n    let keys = request.headers.keys();\n    for (let i = 0; i < keys.size(); i++) {\n        let hk = keys.get(i);\n        let hv = request.headers.get(hk);\n        headers[hk] = hv;\n    }\n    headers['x-auth-token'] = userInfo.token;\n    let url = new URL(request.url);\n    const config = {\n        baseURL: constant.baseUrl,\n        url: url.pathname + url.search,\n        method: request.method,\n        headers: headers,\n        timeout: request.timeoutSec* 1000,\n        responseType: 'blob'\n    };\n\n    if (!request.encodeResponseBase64) {\n        config.responseType = 'text';\n    }\n\n    if (request.multiPart.size() > 0) {\n        const dataArray = new FormData();\n        for (let idx = 0; idx < request.multiPart.size(); idx++) {\n            let mp = request.multiPart.get(idx);\n            if (mp.decodeValueBase64) {\n                var mime = mp.mime? mp.mime: 'application/octet-stream';\n                var blob = await b64toBlob(mp.value, mime);\n                dataArray.append(mp.name, blob);\n            } else {\n                if (mp.mime) {\n                    dataArray.append(mp.name, new Blob([mp.value], {type: mp.mime}));\n                } else {\n                    dataArray.append(mp.name, mp.value);\n                }\n            }\n        }\n        config.data = dataArray;\n    } else if (request.method.toLowerCase() != 'get' && !!request.body) {\n        if (request.decodeRequestBase64) {\n            config.data = await b64toBlob(request.body);\n        } else {\n            config.data = request.body;\n        }\n    }\n\n    var httpResp = {\n        error: true,\n        status: 0,\n        body: '',\n        headers: new window.Module.MapStringString(),\n    }\n    var resp = null;\n    try {\n        resp = await axios(config);\n    } catch (e) {\n    }\n\n    if (resp != null) {\n        httpResp.error = false;\n        httpResp.status = resp.status;\n\n        for (let item in resp.headers) {\n            if (typeof(resp.headers[item]) == 'string') {\n                httpResp.headers.set(item, resp.headers[item]);\n            }\n        }\n\n        if (request.encodeResponseBase64) {\n            let body = await blobToBase64(toBlob(resp.data));\n            if (body.startsWith('data:') && body.indexOf('base64,') >= 0) {\n                body = body.substring(body.indexOf('base64,') + 7);\n            }\n            httpResp.body = body;\n        } else {\n            let body = await toStr(resp.data)\n            httpResp.body = body;\n        }\n    }\n    \n    window.Module.httpResponse(reqId, httpResp);\n}\n\nvar httpUtil = {\n    initPlatformImpl:  () => {\n        window.requestLekhHttp = (reqId, request) => { requestHttp(reqId, request); };\n    }\n}\n\nexport default httpUtil;","import canvas from './Canvas'\n\nimport appEvent from './AppEvent'\nimport shapes from '../shapelib/Shapes'\n\nimport luaScripts from '../data/lua_script.json'\nimport userInfo from '../utils/UserInfo'\nimport {constant} from '../utils/ApiConstants'\nimport remoteResouceManager from '../utils/RemoteResourceManager'\nimport uiConfig from './UIConfig'\nimport integ from '../integ/integ'\nimport util from './Util'\nimport httpUtil from '../utils/HttpUtil';\nimport messaging from './Messaging'\n\nimport EventListener from '../utils/EventListener'\n\nvar initializer = { };\n\nvar shapesInitDone = false;\nvar docDetailFetched = false;\nvar docStarted = false;\n\nvar apiBasePath = constant.baseUrl + \"/\" + constant.backendVersion;\n\n// Adding into window as this is being used by c++ code\nwindow.wsmanager = {\n    // state values: init, ready, disconnected, notfound, offline, prompt\n    state: \"init\",\n    cb: null,\n    docid: null,\n    event: new EventListener(),\n    setState: function(state) {\n        window.wsmanager.state = state;\n        if (window.wsmanager.cb != null) { window.wsmanager.cb(state); }\n        canvas.onConnectionStateChanged();\n    },\n    permission: 'write',\n    readOnly: () => window.wsmanager.permission != 'write',\n}\n\nwindow.toggleDebug = function() {\n    window.Module.toggleDebug();\n}\n\nwindow.getLekhResource = function(name) {\n    var sc = luaScripts[name];\n    if (sc) {\n        return sc;\n    }\n    return \"\";\n}\n\nwindow.getBase64FromImage = (img) => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n    var data = canvas.toDataURL();\n    if (data.indexOf('base64,') >= 0) {\n        data = data.substr(data.indexOf('base64,') + 7)\n    }\n    return data;\n}\n\nwindow.getRemoteResource = remoteResouceManager.getResource;\n\nvar runtimeInitialized = false;\nvar initialInitDone = false;\nvar reactAppReady = false;\n\nconst appendScript = (scriptToAppend) => {\n    const script = document.createElement(\"script\");\n    script.src = scriptToAppend;\n    script.async = false;\n    document.body.appendChild(script);\n}\n\nconst setStyleAfterDocLoad = () => {\n    //window.Module.inputReceiver().currentStyle().setStrokeWidth(4);\n    window.Module.inputReceiver().currentStyle().setFontSize(18);\n}\n\nwindow.Module = {\n    onRuntimeInitialized: function () {\n        runtimeInitialized = true;\n        initializer.initInternal();\n    }\n};\n\ninitializer.init = function(cb) {\n    reactAppReady = true;\n    window.wsmanager.cb = cb;\n    //appendScript(\"a1/bean.min.js\");\n    httpUtil.initPlatformImpl();\n    messaging.init();\n    appendScript(\"a1/lekhapp.js\");\n    initializer.initInternal();\n}\n\ninitializer.onDocDetailFetch = () => {\n    docDetailFetched = true;\n    startDoc();\n}\n\ninitializer.initInternal = function() {\n    if (initialInitDone || !reactAppReady || !runtimeInitialized) {\n        return;\n    }\n    initialInitDone = true;\n    var panel = document.getElementById(\"gridCanvas\");\n    if (!panel) {\n        return;\n    }\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    initialInitDone = true;\n\n    window.Module.init(canvasElement);\n    //window.Module.setZoom(70)\n    canvas.setSize();\n    canvas.drawGrid();\n    \n    shapes.initialize().then(function() {\n        appEvent.attachEventHandlers();\n        shapesInitDone = true;\n        startDoc();\n    });\n}\n\ninitializer.createNewDoc = () => {\n    var url = new URL(window.location);\n    var ref = url.searchParams.get('ref');\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n        if (this.readyState == 4) {\n            if (this.status == 200) {\n                var obj = JSON.parse(xhttp.responseText);\n                var url = new URL(window.location);\n                var newUrl = url.origin + \"/?docid=\" + obj.docid;\n                window.location = newUrl;\n            } else {\n                window.wsmanager.setState('error');\n            }\n        }\n    };\n    var url = apiBasePath + \"/docs\"\n    if (ref) {\n        url += \"?ref=\" + ref;\n    }\n    xhttp.open(\"POST\", url);\n    xhttp.withCredentials = true;\n    xhttp.send();\n}\n\nfunction startDoc() {\n    if (!shapesInitDone || !docDetailFetched || docStarted) {\n        return;\n    }\n    docStarted = true;\n\n    if (!uiConfig.isUsingLekhBackend()) {\n        integ.loadDoc();\n        return;\n    }\n\n    var url = new URL(window.location);\n    var docid = url.searchParams.get('docid');\n    var np = url.searchParams.get('_new');\n    var ref = url.searchParams.get('ref');\n    var offline = url.searchParams.get('offline');\n    if (docid) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var touch = 'false';\n              try {\n                if (util.hasTouch()) {\n                    touch = 'true';\n                }\n              } catch(e) {\n              }\n              var obj = JSON.parse(xhttp.responseText);\n              let url = obj.location+'?_touch=' + touch;\n              if (userInfo.isLoggedIn()) {\n                url += '&access_token=' + userInfo.token;\n              }\n              window.wsmanager.start(docid, url);\n            } else {\n                if (this.status == 404) {\n                    window.wsmanager.setState('notfound');\n                } else if (this.status == 403) {\n                    window.wsmanager.setState('forbidden');\n                } else {\n                  window.wsmanager.setState('error');\n                }\n            }\n          }\n        };\n        var url = apiBasePath + \"/docs/\" + docid;\n        xhttp.open(\"POST\", url);\n        xhttp.withCredentials = true;\n        if (userInfo.isLoggedIn()) {\n          xhttp.setRequestHeader('x-auth-token', userInfo.token);\n        }\n        xhttp.send();\n    } else if (np == 'true') {\n      window.wsmanager.setState('newwait');\n    } else if (offline == 'true') {\n        window.wsmanager.setState('offline');\n    } else {\n        window.wsmanager.setState('prompt');\n    }\n}\n\nwindow.wsmanager.start = function (docid, location) {\n    var timer;\n  \n    const ws = new window.WebSocket(location);\n    window.Module.startDoc(docid);\n  \n    window.wsmanager.send = function(docid, data) {\n      ws.send(data);\n      return true;\n    }\n  \n    ws.onopen = function(event) {\n        console.log('connection opened: ', event);\n        timer = window.setInterval(function() {\n            ws.send('{}');\n        }, 15000);\n    };\n  \n    ws.onmessage = function(event) {\n        window.Module.updateDoc(event.data);\n        window.wsmanager.event.trigger(event.data);\n        canvas.draw();\n        if (window.wsmanager.state == 'init') {\n            // The first update is supposed to load update\n            // after loading the doc, we can change the default style\n            var updateObj = JSON.parse(event.data);\n            if (updateObj.type == 'update' && updateObj.updates &&\n                updateObj.updates.type == 'load' && updateObj.updates.permission) {\n                window.wsmanager.permission = updateObj.updates.permission;\n            }\n            setStyleAfterDocLoad();\n            window.wsmanager.docid = docid;\n            window.wsmanager.setState('ready');\n        }\n    };\n  \n    ws.onclose = function(event) {\n        console.log('connection closed:', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n  \n    ws.onerror = function(event) {\n        console.log('connection error: ', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n}\n\nexport default initializer;\n","import initializer from '../../common/AppInit'\n\nfunction reload() {\n    window.location.reload();\n}\n\nfunction continueTrial() {\n    initializer.createNewDoc();\n}\n\nconst Layover = (props) => {\n    // init, disconnected, notfound, prompt, forbidden, newwait\n    var item = null;\n    if (props.wsstate == \"init\" || props.wsstate == \"ready\") {\n        item = <div className=\"layover-box\">Loading..</div>;\n    } else if (props.wsstate == \"disconnected\") {\n        item = <div className=\"layover-box\">\n            <p><span>Disconnected from server </span><a href=\"#\" onClick={reload}>Reconnect</a></p>\n            </div>;\n    } else if (props.wsstate == \"notfound\") {\n        item = <div className=\"layover-box\">\n            <span>Requested board does not exist</span>\n            </div>;\n    } else if (props.wsstate == \"forbidden\") {\n        item = <div className=\"layover-box\">\n                <span>You do not have permission to access this board</span><br/>\n                <span><a href=\"javascript:void(0)\" onClick={reload}>Reload</a> the page to check access again</span>\n            </div>;\n    } else if (props.wsstate == \"prompt\") {\n        item = <div className=\"layover-box\">\n            <a href=\"/?_new=true\">Start a collaborative board</a>\n            <a href=\"/?offline=true\">Start an offline board</a>\n            </div>;\n    } else if (props.wsstate == 'newwait') {\n        item = <div className=\"layover-box\">\n            <span>You are opening a trial board without login.<br/>This board will be deleted in a few days.<br/><br/>Please login to save your work</span>\n            <a href=\"/#/login\">Login</a>\n            <a href=\"javascript:void(0)\" onClick={continueTrial}>Continue trial</a>\n            </div>;\n    } else if (props.wsstate == 'saving') {\n        item = <div className=\"layover-box\">Saving..</div>;\n    } else if  (props.wsstate == 'closing') {\n        item = <div className=\"layover-box\">Closing..</div>;\n    } else if (props.wsstate == 'importing') {\n        item = <div className=\"layover-box\">Importing..</div>;\n    } else if (props.wsstate == 'exporting') {\n        item = <div className=\"layover-box\">Exporting..</div>;\n    } else {\n        item = <div className=\"layover-box\">\n            <span>Something went wrong</span>\n            <a href=\"#\" onClick={reload}>Reload</a>\n            <a href=\"/?offline=true\">Start an offline board</a>\n            </div>;\n    }\n\n    return (\n        <div className=\"layover-col\">\n            {item}\n        </div>\n    )\n}\n\nexport default Layover\n","import React from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport NestedMenuItem from \"material-ui-nested-menu-item\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport canvas from './Canvas'\nimport command from './Command'\nimport ArrowRight from '@material-ui/icons/ArrowRight'\nimport ImageUploader from '../components/ImageUploader/ImageUploader';\n\nconst shapesMenus = [\n    {id:'box', name: 'Box', key1:'Ctrl + B', key2: '⌘ B', disabled: false},\n    {id:'ellipse', name: 'Circle', key1:' Ctrl + E', key2: '⌘ E', disabled: false},\n    /*{id:'table', name: 'Table', key1:'ctrl l', key2: '⌘ L', disabled: false},*/\n    {id:'user', name: 'User', key1:'Ctrl + U', key2: '⌘ U', disabled: false},\n    {id:'note', name: 'Note', key1:'', key2: '', disabled: false},\n    {id:'db', name: 'Database', key1:'', key2: '', disabled: false},\n    {id:'cloud', name: 'Cloud', key1:'', key2: '', disabled: false},\n    /*{id:'more', name: 'More', key1:'', key2: '', disabled: false},*/\n]\n\nconst arrangeMenus = [\n  {id:'moveToFront', name: 'Move To Front', key1:'', key2: '', disabled: false},\n  {id:'moveToBack', name: 'Move To Back', key1:' ', key2: '', disabled: false},\n]\n\nvar menus = [\n    {id:'add', name: 'Add Shapes', key1: '', key2: '', div: false, disabled: false, submenu: shapesMenus},\n    {id:'arrange', name: 'Arrange', key1: '', key2: '', div: true, disabled: false, submenu: arrangeMenus},\n    {id:'select', name: 'Select All', key1: 'Ctrl + A', key2: '⌘ A', div: true, disabled: false},\n    {id:'cut', name: 'Cut', key1: 'Ctrl + X', key2: '⌘ X', div: false, disabled: false},\n    {id:'copy', name: 'Copy', key1: 'Ctrl + C', key2: '⌘ C', div: false, disabled: false},\n    {id:'paste', name: 'Paste', key1: 'Ctrl + V', key2: '⌘ V', div: false, disabled: false},\n    {id:'del', name: 'Delete', key1: 'Del', key2: 'Delete', div: true, disabled: false},\n    {id:'insertImage', name: 'Insert Image', key1: '', key2: '', div: false, disabled: false},\n    //{id:'line', name: 'Line Style', key1: '', key2: '', div: false, disabled: false},\n    //{id:'fill', name: 'Fill Color', key1: '', key2: '', div: false, disabled: false},\n    //{id:'font', name: 'Font', key1: '', key2: '', div: false, disabled: false},\n]\n\nexport default function ContextMenu(props) {\n  const handleClose = () => {\n    props.showHandler(false);\n  };\n\n  var uiMapped = canvas.mapPtUIScroll({x: props.pos.x, y:props.pos.y});\n  var mappedPt = {y: canvas.mapry(uiMapped.y), x: canvas.maprx(uiMapped.x)};\n\n  const handleMenu = (id) => {\n      if (id == \"copy\") {\n        command.copy();\n      } else if (id == \"paste\") {\n        command.pasteAt(mappedPt);\n      } else if (id == \"cut\") {\n        command.cut();\n      } else if (id == \"del\") {\n        command.del();\n      } else if (id == \"select\") {\n        command.selectAll();\n      } else if (id == \"box\") {\n        command.addBox({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"ellipse\") {\n        command.addCircle({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"table\") {        \n      } else if (id == \"user\") {\n        command.addUser({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"db\") {\n        command.addDb({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"cloud\") {\n        command.addCloud({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"note\") {\n        command.addNote({x:mappedPt.x, y:mappedPt.y});\n      } else if (id == \"moveToFront\") {\n        command.moveToFront();\n      } else if (id == \"moveToBack\") {\n        command.moveToBack();\n      } else if (id == \"insertImage\") {\n        props.dialogHandler(<ImageUploader dialogHandler={props.dialogHandler} at={{x:mappedPt.x, y:mappedPt.y}}/>);\n      }\n\n      canvas.draw();\n      props.showHandler(false);\n  };\n\n  var cmStatus = window.Module.getContextMenuStatus(mappedPt);\n  menus[1].disabled = !cmStatus.canArrage;\n  menus[2].disabled = !cmStatus.canSelectAll;\n  menus[3].disabled = !cmStatus.canCut;\n  menus[4].disabled = !cmStatus.canCopy;\n  menus[5].disabled = !cmStatus.canPaste;\n  menus[6].disabled = !cmStatus.canDelete;\n  canvas.draw();\n\n  var keyName = 'key1';\n  if (navigator.userAgent.indexOf(\"OS X\") > 0) {\n      // This is MAC\n      keyName = \"key2\";\n  }\n  return (\n      <Menu\n        keepMounted\n        open={true}\n        onClose={handleClose}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={{top: props.pos.y, left: props.pos.x}}\n        PaperProps={{\n            style: {\n                border: '2px solid #d3d4d5'\n            },\n        }}>\n      {menus?.map((option, index) => {\n          var subMenus = option.submenu;\n          var rightIcon =  <ArrowRight />;\n          if (index == 1) {\n            rightIcon =  <ArrowRight style={{marginLeft: '126px'}}/>;\n            if (option.disabled) {\n              subMenus = null;\n            }\n          }\n          if (subMenus) {\n            return (<NestedMenuItem\n                label={option.name}\n                style={{ left: '4px' }}\n                parentMenuOpen={true}\n                divider={option.div}\n                rightIcon={rightIcon}\n                className=\"subIcon\"\n                disabled={option.disabled}\n                key={option.id}>\n                {\n                option.submenu.map((subOption, index) => (\n                    <MenuItem onClick={()=>{handleMenu(subOption.id)}} key={subOption.id} divider={subOption.div} disabled={subOption.disabled}>\n                        <ListItemText primary={subOption.name} />\n                        <ListItemSecondaryAction className=\"shortcutKeys\">{subOption[keyName]}</ListItemSecondaryAction>\n                    </MenuItem>\n                    \n                ))}\n            </NestedMenuItem>);\n          }\n          return (\n            <MenuItem onClick={()=>{handleMenu(option.id)}} key={option.id} divider={option.div} disabled={option.disabled} style={{ left: '4px' }}>\n                <ListItemText primary={option.name} />\n                <ListItemSecondaryAction className=\"shortcutKeys\">{option[keyName]}</ListItemSecondaryAction>\n            </MenuItem>\n          )\n       })\n       }\n      </Menu>\n  );\n}\n\n/*\n⌘ – &#x2318; – &#8984; – the Command Key symbol\n⌥ – &#x2325; – &#8997; – the Option Key symbol\n⇧ – &#x21E7; – &#8679; – the Shift Key symbol\n⌃ – &#x2303; – &#8963; – the Control Key symbol\n⎋ – &#x238B; – &#9099; – the ESC Key symbol\n⇪ – &#x21ea; – &#8682; – the Capslock symbol\n⏎ – &#x23ce; – &#9166; – the Return symbol\n⌫ – &#x232b; – &#9003; – the Delete / Backspace symbol\n⇥ – &#x21E5; – &#8677; – the Tab Key symbol\n*/\n\n","var canvasElement = null;\nvar cameraCanvas = null;\n\nvar canvasCtx = null;\nvar cameraCtx = null;\n\nvar canvasWidth = 1280;\nvar canvasHeight = 720;\n\nvar landmarkLines = [\n    [0, 1, 2, 3, 4],\n    [0, 5, 6, 7, 8],\n    [9, 10 , 11, 12],\n    [13, 14, 15, 16],\n    [0, 17, 18, 19, 20],\n    [5, 9, 13, 17]\n];\n\nexport function setCanvas(ce, cameraElement) {\n    canvasElement = ce;\n    canvasCtx = canvasElement.getContext('2d');\n\n    cameraCanvas = cameraElement;\n    cameraCtx = cameraCanvas.getContext('2d');\n}\n\nexport function mirrorPoint(pt) {\n    var npt = {x:pt.x, y:pt.y}\n    npt.x -= 1280;\n    npt.x *= -1;\n    npt.x += 100;\n    npt.y += 70;\n    return npt;\n}\n\nexport function drawActivePoint(pt) {\n    var npt = mkpt(pt);\n    npt.x -= 1280;\n    npt.x *= -1;\n\n    canvasCtx.save();\n    canvasCtx.strokeStyle = '#FF0000';\n    canvasCtx.beginPath();\n    canvasCtx.arc(npt.x, npt.y, 10, 0, 2 * Math.PI);\n    canvasCtx.stroke()\n    canvasCtx.restore();\n}\nexport function drawLandmarks(landmarks) {\n    var pts = [];\n    for (let item of landmarks) {\n        var npt = mkpt(item);\n        npt.x -= 1280;\n        npt.x *= -1;\n        pts.push(npt);\n    }\n\n    canvasCtx.save();\n    canvasCtx.strokeStyle = '#00FF00';\n    canvasCtx.lineWidth = 4;\n    for (let line of landmarkLines) {\n        canvasCtx.beginPath();\n        canvasCtx.moveTo(pts[line[0]].x, pts[line[0]].y);\n        for (let i = 1; i < line.length; i++) {\n            canvasCtx.lineTo(pts[line[i]].x, pts[line[i]].y)\n        }\n        canvasCtx.stroke();\n    }\n    canvasCtx.restore();\n\n    canvasCtx.save();\n    canvasCtx.lineWidth = 1;\n    canvasCtx.fillStyle = '#FF0000';\n    canvasCtx.strokeStyle = '#FF0000';\n    for (let pt of pts) {\n        canvasCtx.beginPath();\n        canvasCtx.arc(pt.x, pt.y, 5, 0, 2 * Math.PI);\n        canvasCtx.fill()\n    }\n    canvasCtx.restore()\n}\n\nexport function clearLandmarkCanvas() {\n    canvasCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n}\n\nexport function clearCameraCanvas() {\n    cameraCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n}\n\nfunction drawCenterText(text) {\n    var fz = 40;\n   \n    canvasCtx.save();\n    canvasCtx.fillStyle = \"#FFFFFFB0\"\n    canvasCtx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    canvasCtx.font = canvasCtx.font.replace(/\\d+px/, fz + \"px\");\n    canvasCtx.fillStyle = \"red\";\n    canvasCtx.strokeStyle = 'white';\n    canvasCtx.textAlign = \"center\";\n    canvasCtx.fillText(text, canvasWidth/2, canvasHeight/2); \n    canvasCtx.strokeText(text, canvasWidth/2, canvasHeight/2);\n    canvasCtx.restore();\n}\nexport function showInit() {\n    var text = \"Starting camera..\";\n    drawCenterText(text);\n}\n\nexport function showFlashMessage() {\n    var text = \"Make sure you are in front of the camera\";\n    drawCenterText(text);\n}\n\nexport function showCameraImage(image) {\n    if (image == null) {\n        return;\n    }\n    cameraCtx.save();\n    cameraCtx.translate(canvasWidth, 0);\n    cameraCtx.scale(-1, 1);\n    cameraCtx.drawImage(image, 0, 0, canvasWidth, canvasHeight);\n    cameraCtx.restore();\n}\n\nexport function mkpt(p) {\n    return {x: p.x * canvasWidth, y: p.y* canvasHeight, z: p.z * canvasWidth}\n}\n\nexport function pt2d(x, y) {\n    return {x: x, y:y , z: 0}\n}\n","import { pt2d } from \"./Frame\";\n\nconst RANGE_DELTA = 0.5;\n\nexport function dist(p1, p2) {\n    var dx, dy;\n    dx = (p2.x - p1.x);\n    dy = (p2.y - p1.y);\n    return Math.sqrt(((dx * dx) + (dy * dy)));\n}\n\nexport function dist2(p1, p2) {\n    var dx, dy, dz;\n    dx = (p2.x - p1.x);\n    dy = (p2.y - p1.y);\n    dz = (p2.z - p1.z);\n    return Math.sqrt((((dx * dx) + (dy * dy)) + (dz * dz)));\n}\n\nexport function inOrder(pts) {\n    if (pts.length < 3) {\n        return true;\n    }\n\n    function inord(p1, p2, p3) {\n        var eq = new LineEq(p1, p2);\n        eq = eq.perp(p2);\n        return eq.crosses(p1, p3);\n    }\n    for (let i = 0; i < pts.length - 2; i++) {\n        if (!inord(pts[i], pts[i + 1], pts[i + 2])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function turnAngle(pts) {\n    if (pts.length < 3) {\n        return 0;\n    }\n\n    function ta(p1, p2, p3) {\n        var dp = (p2.x - p1.x) * (p3.x - p2.x) + (p2.y - p1.y) * (p3.y - p2.y);\n        var d1 = dist(p1, p2);\n        var d2 = dist(p2, p3);\n        var D = d1 * d2;\n        // if D is very small\n        if (Math.abs(D) < 0.0001) {\n            return 0;\n        }\n        var theta = Math.acos(dp / D);\n        var cp = crossProduct(p1, p2, p3);\n        if (cp < 0) {\n            return -theta;\n        }\n        return theta;\n    }\n\n    var turn = 0;\n    for (let i = 0; i < pts.length - 2; i++) {\n        turn += ta(pts[i], pts[i+1], pts[i+2]);\n    }\n    return turn;\n}\n\nexport function crossProduct(p1, p2, p3) {\n    var v1x = p2.x - p1.x;\n    var v1y = p2.y - p1.y;\n\n    var v2x = p3.x - p2.x;\n    var v2y = p3.y - p2.y;\n\n    return v1x * v2y - v2x * v1y;\n}\n\nexport class LineEq {\n    constructor(p1, p2) {\n        this.A = (p2.y - p1.y);\n        this.B = (p1.x - p2.x);\n        this.C = ((p1.y * p2.x) - (p1.x * p2.y));\n    }\n\n    distFrom(pt) {\n        var dist = (Math.abs((((this.A * pt.x) + (this.B * pt.y)) + this.C)) / Math.sqrt(((this.A * this.A) + (this.B * this.B))));\n        return dist;\n    }\n\n    solve(eq2) {\n        var D = ((this.A * eq2.B) - (eq2.A * this.B));\n        var Dx = ((eq2.B * (- this.C)) - (this.B * (- eq2.C)));\n        var Dy = ((this.A * (- eq2.C)) - (eq2.A * (- this.C)));\n        if ((D === 0)) {\n            return [false, null];\n        }\n        return [true, pt2d(Dx / D, Dy / D)];\n    }\n\n    angleWithHz() {\n        return Math.atan2(this.A, (- this.B));\n    }\n\n    crosses(p1, p2) {\n        var d1 = (((this.A * p1.x) + (this.B * p1.y)) + this.C);\n        var d2 = (((this.A * p2.x) + (this.B * p2.y)) + this.C);\n        return ((d1 * d2) <= 0);\n    }\n\n    perp(p) {\n        var eq = new LineEq(pt2d(0, 0), pt2d(1, 1));\n        eq.A = (- this.B);\n        eq.B = this.A;\n        eq.C = (((- eq.A) * p.x) - (eq.B * p.y));\n        return eq;\n    }\n\n    pval(pt) {\n        return pt.x * this.A + pt.y*this.B + this.C;\n    }\n}\n\nexport class LineSegment {\n    constructor(p1, p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    length() {\n        return dist(this.p1, this.p2);\n    }\n\n    eq() {\n        return new LineEq(this.p1, this.p2);\n    }\n\n    contains(pt) {\n        var d1 = dist(pt, this.p1);\n        var d2 = dist(pt, this.p2);\n        var len = this.length();\n        var diff = Math.abs((len - (d1 + d2)));\n        return (diff < RANGE_DELTA);\n    }\n\n    distFrom(point) {\n        var _, d1, d2, eq, eq2, near;\n        eq = new LineEq(this.p1, this.p2);\n        eq2 = eq.perp(point);\n        [_, near] = eq.solve(eq2);\n        if (this.contains(near)) {\n            return eq.distFrom(point);\n        }\n        d1 = dist(this.p1, point);\n        d2 = dist(this.p2, point);\n        return Math.min(d1, d2);\n    }\n\n    intersect(seg) {\n        var at, eq1, eq2, got;\n        eq1 = new LineEq(this.p1, this.p2);\n        eq2 = new LineEq(seg.p1, seg.p2);\n        [got, at] = eq1.solve(eq2);\n        if ((((! got) || (! this.contains(at))) || (! seg.contains(at)))) {\n            return [false, pt2d(0, 0)];\n        }\n        return [true, at];\n    }\n\n    intersectEq(eq) {\n        var at, eq1, got;\n        eq1 = new LineEq(this.p1, this.p2);\n        [got, at] = eq1.solve(eq);\n        if (((! got) || (! this.contains(at)))) {\n            return [false, pt2d(0, 0)];\n        }\n        return [true, at];\n    }\n}\n\n","import {dist} from './Geometry';\nimport { mirrorPoint } from './Frame';\n\nexport class Dragger {\n    constructor() {\n        this.reset();\n        this.MOVE_DIST_REF = 10.0;\n        this.MOVE_DIST_SMALL_REF = 5.0;\n        this.MOVE_DIST_SMALL = 8.0;\n    }\n\n    reset() {\n        this.last = null;\n        this.lastRef = null;\n        this.moving = false;\n        this.points = [];\n    }\n\n    start() {\n        this.reset();\n    }\n\n    addPoint(pt) {\n        this.points.push(mirrorPoint(pt));\n    }\n\n    checkMove(pt, ptref) {\n        if (this.lastRef === null) {\n            this.lastRef = ptref;\n            this.last = pt;\n            return;\n        }\n\n        var d = dist(ptref, this.lastRef);\n        if (d > this.MOVE_DIST_REF) {\n            this.moving = true;\n            this.addPoint(this.last);\n            this.last = pt;\n            this.lastRef = ptref;\n        }\n    }\n\n    validMove(pt, ptref) {\n        var dx1 = (ptref.x - this.lastRef.x);\n        var dx2 = (pt.x - this.last.x);\n        var dy1 = (ptref.y - this.lastRef.y);\n        var dy2 = (pt.y - this.last.y);\n        var valid_x = (((dx1 <= 0) && (dx2 <= 0)) || ((dx1 >= 0) && (dx2 >= 0)));\n        var valid_y = (((dy1 <= 0) && (dy2 <= 0)) || ((dy1 >= 0) && (dy2 >= 0)));\n        return (valid_x && valid_y);\n    }\n\n    handleMove(pt, ptref) {\n        var d = dist(ptref, this.lastRef);\n        if ((d > this.MOVE_DIST_SMALL_REF)) {\n            d = dist(pt, this.last);\n            if (d > this.MOVE_DIST_SMALL) {\n                this.addPoint(pt);\n                this.last = pt;\n                this.lastRef = ptref;\n            }\n        }\n    }\n\n    track(pt, ptref) {\n        if (this.moving) {\n            this.handleMove(pt, ptref);\n        } else {\n            this.checkMove(pt, ptref);\n        }\n    }\n}\n\n","import {Dragger} from './Dragger';\nimport AppInput from '../common/AppInput'\nimport canvas from '../common/Canvas'\nimport { mirrorPoint } from './Frame';\nimport menuState from '../common/MenuState';\nimport { reloadSideBar } from '../components/SideBarMenu/SideBarMenu';\n\nvar lastDrawMode = menuState.menus.smartDraw;\n\nvar clickTimer = null;\nconst DOUBLE_CLICK_DURATION = 0;\n\nfunction handleClick(pt) {\n    var mpt = mirrorPoint(pt);\n    if (clickTimer != null) {\n        window.clearTimeout(clickTimer);\n        clickTimer = null;\n        AppInput.dbclick(mpt.x, mpt.y);\n    } else {\n        clickTimer = window.setTimeout(() => {\n            clickTimer = null;\n            AppInput.click(mpt.x, mpt.y);\n        }, DOUBLE_CLICK_DURATION);\n    }\n}\n\nfunction updateSidebarMenus() {\n    if (reloadSideBar) {\n        reloadSideBar();\n    }\n}\n\nfunction captureDrawMode() {\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            lastDrawMode = menuState.selected;\n    }\n}\n\nfunction setDrawMode() {\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            return;\n    }\n    if (!(lastDrawMode == menuState.menus.draw ||\n        lastDrawMode == menuState.menus.smartDraw)) {\n            lastDrawMode = menuState.menus.smartDraw;\n    }\n    menuState.handleMenuClick(lastDrawMode);\n    menuState.popup = null;\n    updateSidebarMenus();\n}\n\nfunction setSelectionMode() {\n    if (menuState.selected == menuState.menus.selectionGroup &&\n        menuState.inputMode == menuState.modes.selection) {\n        return;\n    }\n\n    captureDrawMode();\n    menuState.handleMenuClick(menuState.menus.selection);\n    menuState.popup = null;\n    updateSidebarMenus();\n}\n\nfunction setEraseMode() {\n    if (menuState.selected == menuState.menus.erase) {\n        return;\n    }\n    \n    captureDrawMode();\n    menuState.handleMenuClick(menuState.menus.erase);\n    menuState.popup = null;\n    updateSidebarMenus();\n}\n\nfunction checkModeBeforeClick() {\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            return;\n    }\n    setSelectionMode();\n}\n\nexport class Gesture {\n    constructor(id) {\n        this.dragger = new Dragger();\n        this.id = id;\n        this.ptidx = 0;\n    }\n    \n    done() {\n    }\n\n    move(landmarks) {\n    }\n\n    setMode() {\n    }\n\n    sendPoints() {\n        var pts = this.dragger.points;\n        if (pts.length > this.ptidx) {\n            if (this.ptidx == 0) {\n                this.setMode();\n                AppInput.drag(pts[0].x, pts[0].y, 0);\n                this.ptidx = 1;\n            }\n            while (this.ptidx < pts.length) {\n                AppInput.drag(pts[this.ptidx].x, pts[this.ptidx].y, 1);\n                this.ptidx++;\n            }\n        }\n    }\n\n    checkClick() {\n        if (!this.dragger.moving && this.dragger.last != null)  {\n            checkModeBeforeClick();\n            handleClick(this.dragger.last);\n            this.dragger.points = []\n        }\n    }\n\n    sendLastPoint() {\n        var pts = this.dragger.points;\n        if (pts.length > 0 && this.ptidx > 0) {\n            var lastpt = pts[pts.length - 1];\n            AppInput.drag(lastpt.x, lastpt.y, 2);\n        }\n        this.ptidx = 0;\n        this.dragger.reset();\n    }\n\n    activePoint() {\n        return -1;\n    }\n}\n\nexport class Drag1Gesture extends Gesture {\n    constructor() {\n        super(\"drag1\");\n    }\n\n    setMode() {\n        setSelectionMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[4], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.checkClick();\n        this.sendLastPoint();\n    }\n\n    activePoint() {\n        return 4;\n    }\n}\n\nexport class Drag2Gesture extends Gesture {\n    constructor() {\n        super(\"drag2\");\n        \n    }\n\n    setMode() {\n        setDrawMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[8], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.checkClick();\n        this.sendLastPoint()\n    }\n\n    activePoint() {\n        return 8;\n    }\n}\n\nexport class ThumbGesture extends Gesture {\n    constructor() {\n        super(\"thumb\");\n        this.dragger.MOVE_DIST_REF = 1.0;\n    }\n\n    setMode() {\n        setEraseMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[4], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.sendLastPoint();\n    }\n\n    activePoint() {\n        return 4;\n    }\n}\n\nexport class PinchGesture extends Gesture {\n    constructor() {\n        super(\"pinch\");\n        this.dragger.MOVE_DIST_REF = 1.0;\n        this.dragger.MOVE_DIST_SMALL = 1.0;\n        this.dragger.MOVE_DIST_SMALL_REF = 2.0;\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[0], landmarks[0]);\n        var pts = this.dragger.points;\n        while (this.ptidx < pts.length) {\n            if (this.ptidx > 0) {\n                let p2 = pts[this.ptidx];\n                let p1 = pts[this.ptidx - 1];\n                canvas.moveDelta(p2.x - p1.x, p2.y - p1.y)\n            }\n            this.ptidx++;\n        }\n    \n    }\n\n    done() {\n        this.ptidx = 0;\n        this.dragger.reset();\n    }\n}\n\n","import {LineEq, inOrder, turnAngle} from './Geometry'\n\nclass Features {\n    constructor() {\n        this.backSide = false;\n\n        this.indexBent = false;\n        this.middleBent = false;\n        this.ringBent = false;\n\n        this.indexInOrder = false;\n        this.middleInOrder = false;\n        this.ringInOrder = false;\n\n        this.indexCurved = false;\n        this.middleCurved = false;\n        this.ringCurved = false;\n    }\n    print() {\n        console.log(\"idb:\", this.indexBent, \", midb\", \n        this.middleBent, \", rb\", this.ringBent, ', back:', this.backSide,\n        ', idxs', this.indexInOrder)\n    }\n}\n\nfunction getSide(p1, p2, p3) {\n    var eq = new LineEq(p1, p2);\n    return eq.pval(p3) >= 0;\n}\n\nfunction isCurved(p1, p2, p3, p4) {\n    var ta = turnAngle([p1, p2, p3, p4]);\n    var deg = (ta * 180) / Math.PI;\n    return Math.abs(deg) >= 90;\n}\n\nexport function getFeatures(pts, hand) {\n    var features = new Features();\n    \n    features.indexBent = !inOrder([pts[0], pts[5], pts[8]]);\n    features.middleBent = !inOrder([pts[0], pts[9], pts[12]]);\n    features.ringBent = !inOrder([pts[0], pts[13], pts[16]]);\n\n    features.indexInOrder = inOrder([pts[5], pts[6], pts[7], pts[8]]);\n    //features.middleInOrder = inOrder([pts[9], pts[10], pts[11], pts[12]]);\n    //features.ringInOrder = inOrder([pts[13], pts[14], pts[15], pts[16]]);\n\n    features.indexCurved = isCurved(pts[5], pts[6], pts[7], pts[8]);\n    features.middleCurved = isCurved(pts[9], pts[10], pts[11], pts[12]);\n    features.ringCurved = isCurved(pts[13], pts[14], pts[15], pts[16]);\n                             \n    features.backSide = !getSide(pts[0], pts[5], pts[9]) || \n                        !getSide(pts[0], pts[5], pts[13]) ||\n                        !getSide(pts[0], pts[5], pts[17])\n    if (hand == 'left') {\n        features.backSide = !features.backSide;\n    }\n    return features;\n}","import {Drag1Gesture, Drag2Gesture, ThumbGesture, PinchGesture, Gesture} from './Gestures'\nimport { mkpt } from './Frame';\nimport { getFeatures } from './LandmarksFeatures';\nimport { dist, LineSegment, inOrder } from './Geometry';\nimport command from '../common/Command'\n\nvar drag1Active = false;\nvar drag2Active = false;\n\nclass RepeatedGesture {\n    constructor(type, noop, gap, times, handler) {\n        this.type = type;\n        this.noop = noop;\n        this.gap = gap;\n        this.lastGesture = null;\n        this.lastAt = 0;\n        this.count = 0;\n        this.handler = handler;\n        this.times = times;\n    }\n\n    check(gesture) {\n        if (this.lastGesture == null) {\n            this.lastGesture = gesture;\n            return;\n        }\n\n        if (gesture == this.noop) {\n            if (this.lastGesture == this.type && !this.lastGesture.dragger.moving) {\n                var now = Date.now();\n                if (now - this.lastAt > this.gap) {\n                    this.count = 1;\n                } else {\n                    this.count++;\n                }\n                this.lastAt = now;\n                if (this.count == this.times) {\n                    this.count = 0;\n                    this.lastAt = 0;\n                    this.handler();\n                }\n            }\n\n        } else {\n            if (gesture != this.type) {\n                this.count = 0;\n                this.lastAt = 0;\n            }\n        }\n\n        this.lastGesture = gesture;\n    }\n}\n\nfunction isDrag2(pts, features) {\n    if (features.backSide) {\n        return false;\n    }\n\n    if (features.indexBent || !features.middleBent ||\n        !features.ringBent || !features.indexInOrder) {\n        return false;\n    }\n    //const THREASHOLD_1 = 0.32;\n    //const THREASHOLD_2 = 0.42;\n    //var d1 = dist(pts[0], pts[5]);\n\n    const THREASHOLD_1 = 1.1;\n    const THREASHOLD_2 = 1.2;\n    var d1 = dist(pts[5], pts[9]);\n\n    if (dist(pts[10], pts[11]) < 0.0001) {\n        return false;\n    }\n    var seg = new LineSegment(pts[10], pts[11]);\n    var d2 = seg.distFrom(pts[4]);\n\n    var target1 = d1 * THREASHOLD_1;\n    var target2 = d1 * THREASHOLD_2;\n\n    if (!drag2Active) {\n        if (d2 < target1) {\n            drag2Active = true;\n        }\n    } else {\n        if (d2 > target2) {\n            drag2Active = false;\n        }\n    }\n    return drag2Active;\n}\n\nfunction isDrag1(pts, features) {\n    if (features.middleBent || features.ringBent || features.backSide) {\n        return false;\n    }\n\n    const THRESHOLD_1 = 0.3;\n    const THRESHOLD_2 = 0.4;\n    const THREASHOLD_3 = 0.5;\n\n    var d1 = dist(pts[0], pts[5]);\n\n    var dPinch = d1 * THREASHOLD_3;\n    var pinchLike = true;\n    for (let id of [8, 12, 16, 20]) {\n        let tmp = dist(pts[id], pts[4]);\n        if (tmp > dPinch) {\n            pinchLike = false;\n            break;\n        }\n    }\n    if (pinchLike) {\n        return false;\n    }\n\n    var d2 = dist(pts[4], pts[8]);\n    var factor = 100.0;\n    if (d1 !== 0) {\n        factor = d2 / d1;\n    }\n    if (drag1Active) {\n        if (factor > THRESHOLD_2) {\n            drag1Active = false;\n        }\n    } else {\n        if (factor < THRESHOLD_1) {\n            drag1Active = true;\n        }\n    }\n    return drag1Active;\n}\n\nfunction isThumb(pts, features) {\n    const FACTOR = 0.3;\n    var d1 = dist(pts[0], pts[5]) * FACTOR;\n    var d2 = dist(pts[4], pts[8]);\n    if (d2 < d1) {\n        return false;\n    }\n\n    if (features.indexBent && features.middleBent && features.ringBent) {\n        if (features.indexCurved || features.middleCurved || features.ringCurved) {\n            return true;\n        }\n    }\n    if (pts[4].y < pts[5].y && pts[4].y < pts[9].y && pts[4].y < pts[13].y) {\n        if (inOrder([pts[5], pts[8], pts[6]]) &&\n            inOrder([pts[9], pts[12], pts[10]]) &&\n            inOrder([pts[13], pts[16], pts[14]])) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction isPinch(pts, features) {\n    const FACTOR = 0.4;\n    var d1 = dist(pts[0], pts[5]) * FACTOR;\n    for (let id of [8, 12, 16, 20]) {\n        let d2 = dist(pts[id], pts[4]);\n        if (d2 > d1) {\n            return false\n        } \n\n    }\n    return true;\n}\n\nexport class GestureRecognizer {\n    constructor(model) {\n        this.model = model;\n        this.drag1Gesture = new Drag1Gesture();\n        this.drag2Gesture = new Drag2Gesture();\n        this.thumbGesture = new ThumbGesture();\n        this.pinchGesture = new PinchGesture();\n        this.noopGesture = new Gesture(\"noop\");\n        this.undoGesture = new RepeatedGesture(this.drag2Gesture, this.noopGesture, 500, 3, ()=>command.undo());\n    }\n\n    handleRepeated(gesture) {\n        this.undoGesture.check(gesture);\n    }\n\n    get(landmarks, hand) {\n        var gesture = this.getGesture(landmarks, hand);\n        this.handleRepeated(gesture);\n        return gesture;\n    }\n\n    getGesture(landmarks, hand) {\n        var pts = [];\n        for (let item of landmarks) {\n            pts.push(mkpt(item))\n        }\n    \n        var features = getFeatures(pts, hand);\n        //features.print()\n\n        if (isPinch(pts, features)) {\n            return this.pinchGesture;\n        }\n\n        if (isThumb(pts, features)) {\n            return this.thumbGesture;\n        }\n\n        if (features.backSide) {\n            if (drag1Active) {\n                return this.drag1Gesture;\n            }\n            if (drag2Active) {\n                return this.drag2Gesture;\n            }\n\n            return this.noopGesture;\n        }\n\n        if (isDrag2(pts, features)) {\n            drag1Active = false;\n            return this.drag2Gesture;\n        }\n\n        if (isDrag1(pts, features)) {\n            drag2Active = false;\n            return this.drag1Gesture;\n        }\n\n        return this.noopGesture;\n    }\n}\n\n/*\n\n// older drag2 detector\n\nfunction isDrag2_1(pts, features) {\n    if (features.backSide) {\n        return false;\n    }\n\n    if (features.indexBent || !features.middleBent ||\n        !features.ringBent || !features.indexInOrder) {\n        return false;\n    }\n    const THREASHOLD_1 = 1.1\n    const THREASHOLD_2 = 0.9\n\n    function thumbMiddleOpposite(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        return eq.crosses(pts[2], pts[10]);\n    }\n    \n    function thumbCorsses(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        var seg = new LineSegment(pts[3], pts[4]);\n        var [it, _] = seg.intersectEq(eq);\n        return it;\n    }\n\n    function checkForCross(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        var d1 = eq.distFrom(pts[4]);\n        var d2 = eq.distFrom(pts[10]);\n        if (d1 > (d2 / 4)) {\n            return true;\n        }\n        return false;\n    }\n\n    var opp = thumbMiddleOpposite(pts);\n    var crosses = thumbCorsses(pts);\n    if (opp && crosses) {\n        if (checkForCross(pts)) {\n            drag2Active = true;\n            return true;\n        }\n    }\n\n    var d1 = dist(pts[4], pts[10]);\n    var d2 = dist(pts[10], pts[11]);\n    var factor = 100.0;\n    if (d1 !== 0) {\n        factor = (d2 / d1);\n    }\n\n    if (drag2Active) {\n        if (factor < THREASHOLD_2) {\n            drag2Active = false;\n        }\n    } else {\n        if (factor > THREASHOLD_1) {\n            drag2Active = true;\n        }\n    }\n    return drag2Active;\n}\n\n// Neural network based gesture identification\n\nvar gesturesNames = {\n    0: \"drag1\",\n    1: \"drag2\",\n    2: \"thumb\",\n    3: \"pinch\",\n    4: \"thumb_index\",\n    5: \"open\",\n    6: \"other\"\n};\n\n    predict(landmarks) {\n        var arr = [];\n        for (let item of landmarks) {\n            arr.push(item.x);\n            arr.push(item.y);\n            arr.push(item.z);\n        }\n        if (arr.length != 63) {\n            return 6;\n        }\n        var inp = window.tf.tensor2d([arr]);\n        var out = this.model.predict(inp);\n        var idx = out.argMax(-1).arraySync()[0]\n        return idx\n    }\n\n    get2(landmarks) {\n        var ges, idx, pts;\n        idx = this.predict(landmarks);\n        pts = [];\n        for (let item of landmarks) {\n            pts.push(mkpt(item))\n        }\n    \n        var features = getFeatures(pts);\n        features.print();\n\n        ges = this.checkDrag2(idx, pts);\n        if (ges !== null) {\n            deactivateDrag1();\n            return ges;\n        }\n        ges = this.checkDrag1(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        ges = this.checkThumb(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        ges = this.checkPinch(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        return this.noopGesture;\n    }\n\n    checkPinch(idx, pts) {\n        if (idx === 3) {\n            return this.pinchGesture;\n        }\n        return null;\n    }\n\n    checkThumb(idx, pts) {\n        if (idx === 2) {\n            return this.thumbGesture;\n        }\n        return null;\n    }\n\n    checkDrag1(idx, pts) {\n        if (!(idx === 0 || idx === 4) || idx === 5) {\n            deactivateDrag1();\n            return null;\n        }\n\n        if (checkDrag1(pts)) {\n            return this.drag1Gesture;\n        }\n        return null;\n    }\n\n    checkDrag2(idx, pts) {\n        if (!(idx === 1 || idx === 2 || idx === 4)) {\n            deactivateDrag2();\n            return null;\n        }\n\n        if (checkDrag2(pts)) {\n            return this.drag2Gesture;\n        }\n        return null;\n    }\n\n// ------------ Drag1Recognizer.js -----------\nimport {dist} from './Geometry';\n\nvar active = false;\n\nconst THRESHOLD_1 = 0.3;\nconst THRESHOLD_2 = 0.4;\n\nexport function deactivateDrag1() {\n    active = false;\n}\n\nexport function checkDrag1(pts) {\n    var d1, d2, factor;\n    d1 = dist(pts[0], pts[5]);\n    d2 = dist(pts[4], pts[8]);\n    factor = 100.0;\n    if (d1 !== 0) {\n        factor = d2 / d1;\n    }\n    if (active) {\n        if (factor > THRESHOLD_2) {\n            active = false;\n        }\n    } else {\n        if (factor < THRESHOLD_1) {\n            active = true;\n        }\n    }\n    return active;\n}\n\n// ------------ Drag2Recognizer.js -----------\nimport {LineEq, LineSegment, dist} from './Geometry';\n\nvar active = false;\nconst THRESHOLD_1 = 1.1;\nconst THRESHOLD_2 = 0.9;\n\nfunction bentForward(pts) {\n    var eq, eq2;\n    eq = new LineEq(pts[0], pts[9]);\n    eq2 = eq.perp(pts[9]);\n    return (! eq2.crosses(pts[0], pts[10]));\n}\n\nfunction thumbMiddleOpposite(pts) {\n    var eq;\n    eq = new LineEq(pts[5], pts[6]);\n    return eq.crosses(pts[2], pts[10]);\n}\n\nfunction thumbCorsses(pts) {\n    var _, eq, it, seg;\n    eq = new LineEq(pts[5], pts[6]);\n    seg = new LineSegment(pts[3], pts[4]);\n    [it, _] = seg.intersectEq(eq);\n    return it;\n}\n\nexport function deactivateDrag2() {\n    active = false;\n}\n\nfunction checkForCross(pts) {\n    var d1, d2, eq;\n    eq = new LineEq(pts[5], pts[6]);\n    d1 = eq.distFrom(pts[4]);\n    d2 = eq.distFrom(pts[10]);\n    if ((d1 > (d2 / 4))) {\n        return true;\n    }\n    return false;\n}\n\nexport function checkDrag2(pts) {\n    var bent, crosses, d1, d2, factor, opp;\n    bent = bentForward(pts);\n    opp = thumbMiddleOpposite(pts);\n    crosses = thumbCorsses(pts);\n    if ((((! bent) && opp) && crosses)) {\n        if (checkForCross(pts)) {\n            active = true;\n            return active;\n        }\n    }\n    d1 = dist(pts[4], pts[10]);\n    d2 = dist(pts[10], pts[11]);\n    factor = 100.0;\n    if ((d1 !== 0)) {\n        factor = (d2 / d1);\n    }\n    if (active) {\n        if (factor < THRESHOLD_2) {\n            active = false;\n        }\n    } else {\n        if (factor > THRESHOLD_1) {\n            active = true;\n        }\n    }\n    return active;\n}\n\n\n\n*/","import {GestureRecognizer} from './GestureRecognizer';\n\nimport { \n    mkpt, \n    setCanvas,\n    drawLandmarks,\n    showInit,\n    showCameraImage,\n    clearCameraCanvas,\n    clearLandmarkCanvas,\n    showFlashMessage,\n    drawActivePoint\n    } from './Frame';\n\nvar PENDING_THRESHOLD = 30;\n\nvar gestureRecognizer = null;\nvar prevGesture = null;\nvar timer = null;\nvar pendingGesture = null;\n\nvar initStartTime = null;\nvar flashDuration = -1;\n\nvar showingVideo = false;\nvar flashing = true;\n\nfunction handleLast(curGesture) {\n    if (pendingGesture != null && curGesture.id != 'noop') {\n        if (timer != null) {\n            window.clearTimeout(timer);\n            timer = null;\n        }\n        if (pendingGesture.id != curGesture.id) {\n            pendingGesture.done();\n        }\n        pendingGesture = null;\n    }\n\n    if (prevGesture != null && prevGesture.id != curGesture.id) {\n        if ((prevGesture.id == 'drag1' || prevGesture.id == 'drag2') &&\n            prevGesture.dragger.moving &&\n            curGesture.id == 'noop') {\n            pendingGesture = prevGesture;\n            timer = window.setTimeout(()=> {\n                if (pendingGesture != null) {\n                    pendingGesture.done()\n                    pendingGesture = null;\n                    timer = null;\n                }\n            }, PENDING_THRESHOLD);\n        } else {\n            prevGesture.done();\n        }\n    }\n\n    prevGesture = curGesture;\n}\n\nfunction handle(landmarks, hand) {\n    //if ((hand.toLowerCase() === \"right\")) {\n    //    return;\n    //}\n    drawLandmarks(landmarks);\n\n    var pts = []\n    for (let item of landmarks) {\n        pts.push(mkpt(item))\n    }\n\n    var curGesture = gestureRecognizer.get(landmarks, hand);\n    handleLast(curGesture);\n    curGesture.move(pts);\n    var activeptIdx = curGesture.activePoint();\n    if (activeptIdx >= 0) {\n        drawActivePoint(landmarks[activeptIdx]);\n    }\n}\n\nfunction showVideo(results) {\n    if (!showingVideo && !flashing) {\n        return;\n    }\n    showCameraImage(results.image)\n\n    if (flashing) {\n        var now = Date.now()\n        if (now - initStartTime > flashDuration) {\n            flashing = false;\n            clearCameraCanvas();\n        } else {\n            showFlashMessage();\n        }\n    }\n}\n\nexport var handleLandmarkResults = (results) => {\n    clearLandmarkCanvas();\n    showVideo(results);\n    \n    if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {\n        var lms = {left: [], right: []}\n        //var used = new Set();\n        for (let item of results.multiHandedness) {\n            /*\n            let idx = item.index;\n            if (results.multiHandLandmarks.length > idx && !used.has(idx)) {\n                used.add(idx);\n                let hand = item.label.toLowerCase();\n                if (hand == \"left\") {\n                    lms.left.push(results.multiHandLandmarks[idx]);\n                } else if (hand == \"right\"){\n                    lms.right.push(results.multiHandLandmarks[idx]);\n                }\n            }*/\n            // Right now we have enabled only one hand\n            if (results.multiHandLandmarks.length > 0) {\n                let hand = item.label.toLowerCase();\n                // Left and right are revered becuase we are seeing front camera\n                if (hand == \"left\") {\n                    lms.right.push(results.multiHandLandmarks[0]);\n                } else if (hand == \"right\"){\n                    lms.left.push(results.multiHandLandmarks[0]);\n                }\n                break;\n            }\n\n        }\n        for (let item of lms.left) {\n            handle(item, 'left')\n        }\n        for (let item of lms.right) {\n            handle(item, 'right')\n        }\n    }\n}\n\nexport function initLandmarkHandler(canvasElement, cameraCanvas) {\n    initStartTime = Date.now();\n    if (gestureRecognizer == null) {\n        gestureRecognizer = new GestureRecognizer(null);\n    }\n    if (flashing) {\n        flashDuration = 7 * 1000;\n    } else {\n        flashDuration = 0;\n    }\n    showingVideo = false;\n\n    setCanvas(canvasElement, cameraCanvas);\n    showInit();\n}\n\nexport function showCameraVideo(val) {\n    clearCameraCanvas();\n    showingVideo = val;\n}\n\nexport default handleLandmarkResults;\n\n\n//var model = null;\n//var loadingModel = false;\n//\n//function loadModel() {\n//    window.tf.loadGraphModel('/mlmodels/v1/model.json').then((m) =>{\n//        model = m;\n//        gestureRecognizer = new GestureRecognizer(m);\n//    }).catch((e) => {\n//        loadingModel = false;\n//        console.log(e);\n//    });\n//}","import \"./Gestures.css\"\n\nimport {handleLandmarkResults, initLandmarkHandler, showCameraVideo} from \"./LandmarkHandler\";\nimport React, { useRef, useEffect } from 'react'\nimport {FaAngleDown, FaVideo} from 'react-icons/fa'\nimport { Button} from '@material-ui/core';\n\nvar devices = [];\nconst getDevices = () => {\n    devices = [];\n    navigator.mediaDevices.enumerateDevices()\n    .then((deviceInfos) => {\n        for (const deviceInfo of deviceInfos) {\n            if (deviceInfo.kind === 'videoinput') {\n              var dev = {name: deviceInfo.label, id: deviceInfo.deviceId}\n              devices.push(dev);\n            }\n          }\n    })\n}\n\nconst GesturePanel = () => {\n    var [showList, setShowList] = React.useState(false);\n    var [showCamera, setShowCamera] = React.useState(false);\n    var [initialized, setInitialized] = React.useState(false)\n    \n    useEffect(() => {\n        getDevices();\n        startCamera();\n    }, []);\n\n    function startMediapipe(devId) {\n        console.log(\"Initializing mediapipe\");\n        window.frames[0].startCamera(devId, (results) => {\n            handleLandmarkResults(results)\n        });\n    }\n    function startCamera() {\n        var outCanvas = document.getElementById('gestureCanvas');\n        var cameraCanvas = document.getElementById('cameraCanvas');\n        const iframe = document.getElementById('mpframe');\n        if (!iframe || !outCanvas || !cameraCanvas) {\n            window.setTimeout(() => {\n                startCamera();\n            }, 10)\n        }\n        initLandmarkHandler(outCanvas, cameraCanvas);\n        iframe.addEventListener('load', () => {\n            setInitialized(true);\n            startMediapipe(null);\n        }, true);\n    }\n\n    const onListChange = (event) => {\n        console.log(event.target.value)\n        setShowList(false);\n        startMediapipe(event.target.value)\n    }\n\n    const onShowCamera = (event) => {\n        if (initialized) {\n            showCameraVideo(!showCamera)\n            setShowCamera(!showCamera);\n        }\n    }\n\n    const onShowList = (event) => {\n        if (initialized && devices.length > 0) {\n            setShowList(!showList);\n        }\n    }\n\n    return <><div className=\"gesture_panel\">\n            <canvas id=\"gestureCanvas\" width=\"1280px\" height=\"720px\"></canvas>\n            <iframe src=\"/mediapipe/mp.html\" title=\"A\" id=\"mpframe\" width=\"0\" height=\"0\"></iframe> \n        </div>\n        <Button className=\"listCameraButton\" onClick={onShowList}><FaAngleDown /></Button>\n        <Button className=\"showCameraVideoButton\" onClick={onShowCamera}><FaVideo /></Button>\n        {showList &&\n        <select name='option' className=\"cameraDropDown\" size=\"4\" onChange={onListChange}>\n            {devices.map((dev) => {\n                return <option key={dev.id} value={dev.id}>{dev.name}</option>\n            })}\n        </select>\n        }\n    </>\n}\n\nexport default GesturePanel;\n\n\n/*\nfunction includeScript() {\n    var lib = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js';\n    var loaded = document.querySelectorAll('[src=\"' + lib + '\"]').length > 0;\n    if (!loaded) {\n        const script = document.createElement(\"script\");\n        script.src = lib;\n        script.async = false;\n        script.crossorigin = 'anonymous';\n        document.body.appendChild(script);\n    }\n}\n*/","import './App.css';\nimport AppMenu from './components/Header/Menu';\nimport Footer from './components/Footer/Footer';\nimport SideBarMenu from './components/SideBarMenu/SideBarMenu';\nimport Content from './components/SideBarMenu/Content';\nimport Layover from './components/Layover/Layover';\nimport React from \"react\";\nimport initializer from './common/AppInit'\nimport ContextMenu from './common/ContextMenu'\nimport AppInput from './common/AppInput'\nimport menuState from './common/MenuState'\nimport keyboardInput from './common/KeyboardInput'\nimport {DragPanel} from './draggable/Panel'\nimport {ShapeProps} from './shapeprops/ShapeProps';\nimport QuickTip from './components/Tip/QuickTip';\nimport userInfo from './utils/UserInfo';\nimport docInfo from './utils/DocInfo'\nimport {claimDoc} from './utils/ApiRequests'\nimport GesturePanel from './gestures/GesturePanel';\nimport uiConfig from './common/UIConfig';\nimport integ from './integ/integ';\nimport { Button } from '@material-ui/core';\n\nclass AppComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wsState: \"init\",\n      dialog: null, \n      ctxMenu: false,\n      ctxMenuPos:{x:0, y:0}, \n      sideMenuSelectedItem: menuState.selected,\n      isLoggedIn: userInfo.isLoggedIn(),\n      docInfoState: docInfo.state,\n      cameraActive: false\n    };\n    this.wsCallback = this.handleWSState.bind(this);\n    this.showDialog = this.showDialog.bind(this);\n    this.showContextMenu = this.showContextMenu.bind(this);\n\n    menuState.event.addListener((e) => {\n      if (this.state.cameraActive != menuState.cameraActive) {\n        this.setState({cameraActive: menuState.cameraActive})\n      }\n    });\n\n    userInfo.event.addListener(() => {\n      if (this.state.isLoggedIn && !userInfo.isLoggedIn()) {\n        // user logged out, reload the page\n        window.location.reload();\n        return;\n      }\n      if (this.state.isLoggedIn && userInfo.isLoggedIn()) {\n        return;\n      }\n\n      this.setState({isLoggedIn: userInfo.isLoggedIn()});\n      docInfo.get();\n    });\n\n    docInfo.onChange = () => {\n      this.setState({docInfoState: docInfo.state});\n      initializer.onDocDetailFetch();\n    }\n    userInfo.get();\n  }\n\n  handleWSState(state) {\n    this.setState({wsState: state});\n  }\n\n  showDialog(dialog) {\n    this.setState({dialog:dialog});\n  }\n\n  showContextMenu(show, x, y) {\n    if (show) {\n      this.setState({ctxMenu: true, ctxMenuPos:{x:x, y:y}});  \n    } else {\n      this.setState({ctxMenu: false});\n    }\n  }\n\n  publishChangesForIntegMode() {\n    integ.publishEditorChanges().catch(e => {\n\n    });\n  }\n\n  render() {\n    const loading =\n      (this.state.wsState != \"ready\" && this.state.wsState != \"offline\") || \n      userInfo.state == 'loading' ||\n      (userInfo.isLoggedIn() && docInfo.state == 'loading');\n  \n    var layover = null;\n    if (loading) {\n      layover = <div className=\"layover\"><Layover wsstate={this.state.wsState}/></div>;\n    }\n    keyboardInput.showingDialog = this.state.dialog != null || layover != null || this.state.ctxMenu;\n    var readOnly = window.wsmanager && window.wsmanager.readOnly();\n    var docName = docInfo.data.name || '';\n    if (docName.length > 34) {\n      docName = docName.substr(0, 32) + '..';\n    }\n    const moveDoc = () => {\n      claimDoc(docInfo.docid).then(()=>{\n        window.location.reload();\n      }).catch((err) =>{\n      })\n    }\n\n    let loginLink = <a target=\"_blank\" href=\"/#/login\" className=\"help-link\">Login</a>;\n    let moveLink = <a href=\"javascript:void(0)\" onClick={moveDoc} className=\"help-link\">Move</a>;\n    \n    return (\n      <div className=\"container\">\n        <Content />\n        <div className=\"top-right\">\n          {!loading && !userInfo.isLoggedIn() && <a target=\"_blank\" href=\"/#/login\" className=\"help-link top-right-login\">Login</a>}\n          {uiConfig.shouldShowPublishCancelButton() && <Button variant=\"contained\" style={{ fontWeight: 'bold', backgroundColor: '#0052cc', color: 'white', marginRight: '14px' }} onClick={this.publishChangesForIntegMode.bind(this)}>Publish</Button>}\n          {uiConfig.shouldShowPublishCancelButton() && <Button variant=\"outlined\" style={{ fontWeight: 'bold', backgroundColor: '#e8e9ec', color: 'black', marginRight: '8px' }} onClick={integ.closeEditor}>Close</Button>}\n          {!uiConfig.shouldShowPublishCancelButton() && <a target=\"_blank\" href=\"https://lekh.app/help.html\" className=\"help-link\">Help</a>}\n        </div>\n        <div className=\"top-left-menu\">\n          <AppMenu showDialog={this.showDialog}/>\n        </div>\n        <div className=\"top-center-info\">\n          {userInfo.isLoggedIn() && !docInfo.data.public && <span>{docName}</span>}\n          {userInfo.isLoggedIn() && docInfo.data.public && <span>{moveLink} this trial board into your account</span>}\n          {!loading && !userInfo.isLoggedIn() && !docInfo.data.public && <span>{docName}</span>}\n          {!loading && !userInfo.isLoggedIn() && docInfo.data.public && <span>{loginLink} to save this trial board</span>}\n        </div>\n        {!readOnly && <div className=\"side-bar\">\n           <SideBarMenu />\n        </div>}\n        <Footer/>\n        {menuState.cameraActive && <GesturePanel></GesturePanel>}\n        {layover}\n        {this.state.dialog}\n        {this.state.ctxMenu && <ContextMenu showHandler={this.showContextMenu} pos={this.state.ctxMenuPos} dialogHandler={this.showDialog}/>}\n        <DragPanel></DragPanel>\n        <ShapeProps></ShapeProps>\n        {!loading && <QuickTip></QuickTip>}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.wsCallback);\n    AppInput.showContextMenu = this.showContextMenu;\n    if (uiConfig.isIntegMode()) {\n      integ.setShowDialogHandler(this.showDialog, this.wsCallback);\n    }\n  }\n}\n\nexport default AppComponent;\n","import Footer from '../components/Footer/Footer';\nimport Content from '../components/SideBarMenu/Content';\nimport React from \"react\";\nimport initializer from '../common/AppInit'\nimport integ from '../integ/integ';\nimport uiConfig from './UIConfig';\nimport canvas from './Canvas';\n\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.wsCallback = this.handleWSState.bind(this);\n  }\n\n  handleWSState(state) {\n    if (this.props.wsStateHandler) {\n      this.props.wsStateHandler(state);\n    }\n  }\n\n  setMouseCursor(attempt) {\n    const fn = (tpanel) => {\n      if (uiConfig.isViewerLink()) {\n        tpanel.style.cursor = 'pointer';\n        window.bean.on(tpanel, 'click', function (e) {\n          if (e.button == 0) {\n            e.preventDefault();\n            integ.handleClickOnViewer(e);\n          }\n        });\n      } else if (uiConfig.isFullViewer()) {\n        tpanel.style.cursor = 'all-scroll';\n      }\n    };\n\n    var tpanel = document.getElementById(\"transparentPanel\");\n    if (tpanel == null) {\n      if (attempt > 3) {\n        return;\n      }\n      var self = this;\n      setTimeout(()=> {\n        self.setMouseCursor(attempt + 1);\n      }, 50);\n    } else {\n      fn(tpanel);\n    }\n  }\n\n  render() {\n    canvas.showGrid = false;\n    return (\n      <div className=\"container\">\n        <Content />\n        <Footer />\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.wsCallback);\n    initializer.onDocDetailFetch();\n    this.setMouseCursor(0);\n  }\n}\n\nexport default Viewer;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\n// import \"../../assests/index.css\"\n// import \"../../assests/page.css\"\n\nconst AuthLayout = ({ children }) => {\n  return (\n    <div className=\"w-full h-full bg-white\">\n      <div className=\"global-container\">{children}</div>\n    </div>\n  )\n}\n\nexport default AuthLayout\n","import React from \"react\";\n\nconst ModalContainer = ({ children, parentOnClick }) => {\n  return (\n    <div\n      className=\"fixed top-30 left-0 right-0 bottom-0 w-screen h-screen bg-gray-200 bg-opacity-30 z-30\"\n      onClick={parentOnClick}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default ModalContainer;\n","import React from \"react\"\nimport ModalContainer from \"../ModalContainer/ModalContainer\"\n// import MiniLoader from \"./MiniLoader\"\n\nconst FullLoader = () => {\n  return (\n    <ModalContainer>\n      <div className=\"h-full w-full flex justify-center items-center\">\n        <div className=\"loading-spinner loading-spinner-big\"></div>\n      </div>\n    </ModalContainer>\n  )\n}\n\nexport default FullLoader\n","const { useLocation } = require(\"react-router-dom\")\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search)\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n// import InputField from \"../../components/InputField/InputField\"\n// import { Link } from \"react-router-dom\"\n// import MiniLoader from \"../../components/Loaders/MiniLoader\"\nimport { confirmAccount } from \"../../utils/ApiRequests\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { toast } from \"react-toastify\";\n\nconst ConfirmUser = () => {\n  const [loading, setLoading] = useState(true);\n  const query = useQuery();\n  const history = useHistory();\n  const code = query.get(\"code\");\n  // console.log(code)\n  useEffect(() => {\n    confirmAccount({\n      code: code\n    })\n      .then(res => {\n        // console.log(res.data)\n        history.push(\"/login\");\n      })\n      .catch(err => {\n        history.push(\"/login\");\n        toast.error(\"Link is expired\");\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [code]);\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      {loading && <FullLoader />}\n    </div>\n  );\n};\n\nexport default ConfirmUser;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { login } from \"../../utils/ApiRequests\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { toast } from \"react-toastify\";\n\nconst ConfirmLogin = () => {\n  const [loading, setLoading] = useState(true);\n  const query = useQuery();\n  const history = useHistory();\n  const code = query.get(\"code\");\n\n  useEffect(() => {\n    login({\n      code: code\n    })\n      .then(res => {\n        // console.log(res.data)\n        // toast.success(\"Login Successful\");\n        setRefreshTokenToStorage(res.data.refresh_token);\n        setExpiryTimeToStorage(res.data.expires_at);\n        history.push(\"/docs/mydocs\");\n      })\n      .catch(err => {\n        history.push(\"/login\");\n        toast.error(err?.response?.data?.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [code]);\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      {loading && <FullLoader />}\n    </div>\n  );\n};\n\nexport default ConfirmLogin;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n  // setTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { GrMail } from \"react-icons/gr\";\nimport { useHistory } from \"react-router-dom\";\n\nconst EmailLogin = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (loginForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    login(loginForm)\n      .then(res => {\n        showSuccessText(true);\n      })\n      .catch(err => {\n        // console.log(err.response)\n        // toast.error(\"Invalid email or password\")\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          <InputField\n            name=\"email\"\n            label=\"Email\"\n            placeholder=\"you@address.com\"\n            required={true}\n            type=\"email\"\n            handleChange={handleChange}\n            value={loginForm.email}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          {successText && (\n            <p className=\"-mt-3 italic font-medium\">\n              Please open the link you received in the email to login\n            </p>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Log In\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2 mt-5 lg:flex-row flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/login\");\n            }}\n          >\n            {/* <GrMail /> */}\n            <span>Return to Sign In</span>\n          </button>\n\n          {/* <GoogleLogin\n            render={render => (\n              <button className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\">\n                <img\n                  src={require(\"../../assests/icons/google.svg\").default}\n                  alt=\"Google\"\n                />{\" \"}\n                <span>Sign in with Google</span>\n              </button>\n            )}\n          /> */}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EmailLogin;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { forgotPassword } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\n\nconst Forgot = () => {\n  const [passwordForm, setpasswordForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setpasswordForm({ ...passwordForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (passwordForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    forgotPassword(passwordForm)\n      .then(res => {\n        setSuccess(true);\n      })\n      .catch(err => {\n        setError(\"Invalid email\");\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Forgot Password{\" \"}\n        </h1>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          handleChange={handleChange}\n          value={passwordForm.email}\n        />\n        {success && !loading && (\n          <>\n          <p className=\"-mt-3 font-medium\">\n            Please proceed to your mail\n          </p>\n          <p className=\"-mt-3 italic text-sm\">\n          (Please check the <strong>\"All Mail\"</strong> folder if you don’t find the email in Inbox)\n          </p>\n        </>\n        )}\n        {error && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {error}\n          </span>\n        )}\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Forgot Password\n            </button>\n          )}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          {/* <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link> */}\n          <p className=\"text-lg font-medium\">\n            Have an account?{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Forgot;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login, loginWithGoogle, loginWithApple } from \"../../utils/ApiRequests\";\nimport util from \"../../common/Util\";\nimport { GoogleLogin } from \"react-google-login\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n  // setTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { GrMail, GrApple } from \"react-icons/gr\";\nimport { useHistory } from \"react-router-dom\";\nimport { constant } from \"../../utils/ApiConstants\";\n\nvar attemptedLoadingAppleScript = false;\nvar appleAuthInitialized = false;\n\nconst loadAppleScript = async () => {\n  if (attemptedLoadingAppleScript) {\n    return;\n  }\n  attemptedLoadingAppleScript = true;\n  await util.loadScript('apple/appleid.auth.js');\n  //try {\n    //await util.loadScript('https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js');\n  //} catch(err) {\n  //}\n}\n\nconst initAppleAuth = () => {\n  if (appleAuthInitialized) {\n    return;\n  }\n  appleAuthInitialized = true;\n  window.AppleID.auth.init({\n    clientId: \"com.avabodh.lekh.signin\",\n    scope: \"name email\",\n    redirectURI: constant.appUrl,\n    state: \"lekhapp\",\n    usePopup: true,\n  });\n}\n\nconst Login = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\",\n    password: \"\",\n    code: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [formType, setFormType] = useState(\"regular\");\n  const [error, setError] = useState(null);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [appleScriptLoaded, setAppleScriptLoaded] = useState(false);\n\n  if (!appleScriptLoaded) {\n    loadAppleScript().then(() => {\n      if (window.AppleID) {\n        initAppleAuth();\n        setAppleScriptLoaded(true);\n      }\n    })\n  }\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (\n      (loginForm.email === \"\" || loginForm.password === \"\") &&\n      formType === \"regular\"\n    ) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    if (formType === \"email\") {\n      setloginForm({ ...loginForm, ...{ password: null } });\n    }\n\n    login(loginForm)\n      .then(res => {\n        if (formType === \"email\") {\n          showSuccessText(true);\n        } else {\n          setRefreshTokenToStorage(res.data.refresh_token);\n          setExpiryTimeToStorage(res.data.expires_at);\n          history.push(\"/docs/mydocs\");\n        }\n      })\n      .catch(err => {\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  const handleGoogleLoginFailure = async googleData => {\n    console.log(googleData);\n    setError(\"Google Login Failed\");\n    setLoading(false);\n  }\n\n  const handleGoogleLogin = async googleData => {\n    let res = null;\n    try {\n      res = await loginWithGoogle({token: googleData.tokenId});\n    } catch (err) {\n      setError(err?.response?.data?.message);\n      setLoading(false);\n      return;\n    }\n    setRefreshTokenToStorage(res.data.refresh_token);\n    setExpiryTimeToStorage(res.data.expires_at);\n    history.push(\"/docs/mydocs\");\n    setLoading(false);\n  }\n\n  const handleAppleLogin = async () => {\n    var response;\n    try {\n      response = await window.AppleID.auth.signIn();\n    } catch (err) {\n      console.log(err);\n      setError(\"Unable to authenticate with Apple\");\n      setLoading(false);\n      return;\n    }\n      \n    let token = '';\n    let firstName = '';\n    let lastName = '';\n    let code = '';\n    if (response.authorization) {\n      token = response.authorization.id_token;\n      code = response.authorization.code;\n    }\n    if (response.user && response.user.name) {\n      firstName = response.user.name.firstName;\n      lastName = response.user.name.lastName;\n    }\n    let data = {\n      token: token,\n      code: code,\n      first_name: firstName,\n      last_name: lastName\n    }\n    try {\n      var res = await loginWithApple(data);\n    } catch (err) {\n      console.log(err)\n      setError(\"Unknown error!\");\n      setLoading(false);\n      return;\n    }\n    setRefreshTokenToStorage(res.data.refresh_token);\n    setExpiryTimeToStorage(res.data.expires_at);\n    history.push(\"/docs/mydocs\");\n    setLoading(false);\n  }\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          <InputField\n            name=\"email\"\n            label=\"Email\"\n            placeholder=\"you@address.com\"\n            required={true}\n            type=\"email\"\n            handleChange={handleChange}\n            value={loginForm.email}\n          />\n\n          <InputField\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n            required={true}\n            label=\"Password\"\n            value={loginForm.password}\n            handleChange={handleChange}\n          />\n\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Log In\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex items-start gap-2 mt-5 flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/passwordless-login\");\n            }}\n          >\n            <GrMail />\n            <span>Login without password</span>\n          </button>\n        \n          {<GoogleLogin\n            render={renderProps => (\n              <button className=\"flex items-center space-x-2 py-1 mt-2 bg-white border-1 outline-none px-4 text-lg\"\n                onClick={renderProps.onClick} disabled={renderProps.disabled}>\n                <img src={require(\"../../assests/icons/google.svg\").default} alt=\"Google\" />{\" \"}\n                <span>Sign in with Google &nbsp;&nbsp;&nbsp;&nbsp;</span>\n            </button>\n            )}\n            clientId={\"10145530965-qqoheu39gba07e38hi7obqjhtihhrpb9.apps.googleusercontent.com\"}\n            onSuccess={handleGoogleLogin}\n            onFailure={handleGoogleLoginFailure}\n            cookiePolicy={'single_host_origin'}\n          />}\n\n          <button\n            disabled={!appleScriptLoaded}\n            className=\"flex items-center space-x-2 py-1 mt-2 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              e.preventDefault()\n              handleAppleLogin()\n            }}\n          >\n            <GrApple />\n            <span>Sign in with Apple &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n          </button>\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login } from \"../../utils/ApiRequests\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n} from \"../../utils/ApiUtils\";\n\nconst OTPLogin = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [error, setError] = useState(null);\n  //   const [step, setStep] = useState(1);\n\n  //   I am here\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (loginForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    login(\n      successText\n        ? { email: loginForm.email, code_type: \"otp\", code: loginForm.code }\n        : {\n            email: loginForm.email,\n            type: \"otp\"\n          }\n    )\n      .then(res => {\n        showSuccessText(true);\n\n        if (loginForm.code) {\n          toast.success(\"Login Successful\");\n          setRefreshTokenToStorage(res.data.refresh_token);\n          setExpiryTimeToStorage(res.data.expires_at);\n          history.push(\"/docs/mydocs\");\n        }\n      })\n      .catch(err => {\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          {!successText && (\n            <InputField\n              name=\"email\"\n              label=\"Email\"\n              placeholder=\"you@address.com\"\n              required={true}\n              type=\"email\"\n              handleChange={handleChange}\n              value={loginForm.email}\n            />\n          )}\n\n          {successText && (\n            <>\n              <InputField\n                name=\"code\"\n                label=\"OTP\"\n                placeholder=\"000000\"\n                required={true}\n                type=\"number\"\n                handleChange={handleChange}\n                value={loginForm.code}\n              />\n\n              <p className=\"-mt-3 font-medium\">\n              Please enter the code you received in your email or open the link from the email.\n              </p>\n              <p className=\"-mt-3 italic text-sm\">\n              (Please check the <strong>\"All Mail\"</strong> folder if you don’t find the email in Inbox)\n              </p>\n            </>\n          )}\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <div className=\"flex items-center gap-5\">\n              <button\n                type=\"submit\"\n                className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                  !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n                }`}\n                disabled={!proceed()}\n              >\n                {successText ? \"Login\" : \"Proceed\"}\n              </button>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2 mt-5 lg:flex-row flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/login\");\n            }}\n          >\n            {/* <GrMail /> */}\n            <span>Return to Sign In</span>\n          </button>\n\n          {/* <GoogleLogin\n            render={render => (\n              <button className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\">\n                <img\n                  src={require(\"../../assests/icons/google.svg\").default}\n                  alt=\"Google\"\n                />{\" \"}\n                <span>Sign in with Google</span>\n              </button>\n            )}\n          /> */}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default OTPLogin;\n","export var passwordCheck = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/;","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { resetPassword } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { passwordCheck } from \"./AuthUtil\";\n\nconst Reset = () => {\n  const query = useQuery();\n  const code = query.get(\"code\");\n  const [passwordForm, setpasswordForm] = useState({\n    password: \"\",\n    code: code,\n    cPassword: \"\"\n  });\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(true);\n  const [apiError, setApiError] = useState(null);\n  \n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n\n    setpasswordForm({ ...passwordForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (passwordForm.cPassword !== passwordForm.password) {\n      return false;\n    }\n\n    if (passwordForm.password === \"\") {\n      return false;\n    }\n    if (!error) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    resetPassword(passwordForm)\n      .then(res => {\n        history.push(\"/login\");\n      })\n      .catch(err => {\n        setApiError(\"Unable to reset password\");\n        history.push(\"/forgot\");\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Reset password{\" \"}\n        </h1>\n\n        <InputField\n          name=\"password\"\n          label=\"Password\"\n          placeholder=\"New Password\"\n          required={true}\n          type=\"password\"\n          handleChange={handleChange}\n          value={passwordForm.password}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"cPassword\"\n          label=\"Confirm Password\"\n          placeholder=\"Confirm Password\"\n          required={true}\n          type=\"password\"\n          handleChange={handleChange}\n          value={passwordForm.cPassword}\n          error={passwordForm.password !== passwordForm.cPassword}\n          errorText=\"Passwords do not match\"\n        />\n\n        {apiError && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {apiError}\n          </span>\n        )}\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Reset password\n            </button>\n          )}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          {/* <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot password?\n          </Link> */}\n          <p className=\"text-lg font-medium\">\n            Have an account?{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Reset;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { signUp } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport { passwordCheck } from \"./AuthUtil\";\n\nconst SignUp = () => {\n  const [signUpForm, setSignUpForm] = useState({\n    email: \"\",\n    password: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    cPassword: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [error, setError] = useState(true);\n  const [apiError, setApiError] = useState(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  // console.log(error)\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setSignUpForm({ ...signUpForm, ...newEntry });\n  };\n\n  const handlePasswordChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n    setSignUpForm({ ...signUpForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (signUpForm.email === \"\" || signUpForm.password === \"\") {\n      return false;\n    }\n    if (signUpForm.password !== signUpForm.cPassword) {\n      return false;\n    }\n    if (!error) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    signUp(signUpForm)\n      .then(res => {\n        // console.log(res.data)\n        //toast.success(\"Please follow the email to active your account\");\n        //history.push(\"/login\");\n        setSubmitSuccess(true);\n      })\n      .catch(err => {\n        // console.log(err.response);\n        setApiError(err.response.data.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign up to Lekh{\" \"}\n        </h1>\n\n        {!submitSuccess &&<><div className=\"w-full grid grid-cols-2 gap-5\">\n          <InputField\n            name=\"first_name\"\n            label=\"First Name\"\n            placeholder=\"First Name\"\n            handleChange={handleChange}\n            value={signUpForm.first_name}\n          />\n          <InputField\n            name=\"last_name\"\n            label=\"Last name\"\n            placeholder=\"Last Name\"\n            handleChange={handleChange}\n            value={signUpForm.last_name}\n          />\n        </div>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          handleChange={handleChange}\n          value={signUpForm.email}\n        />\n        <InputField\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Password\"\n          required={true}\n          label=\"Password\"\n          value={signUpForm.password}\n          handleChange={handlePasswordChange}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"cPassword\"\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n          required={true}\n          label=\"Confirm Password\"\n          value={signUpForm.cPassword}\n          handleChange={handleChange}\n          error={signUpForm.password !== signUpForm.cPassword}\n          errorText=\"Passwords do not match\"\n        />\n\n        {apiError && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {apiError}\n          </span>\n        )}\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Create an account\n            </button>\n          )}\n        </div></>}\n        {submitSuccess && <>\n          <p className=\"-mt-3 font-medium\">\n          Please follow the instructions in the email to activate your account.\n          </p>\n          <p className=\"-mt-3 italic text-sm\">\n          (Please check the <strong>\"All Mail\"</strong> folder if you don’t find the email in Inbox)\n          </p>\n\n          <p className=\"text-lg font-medium\">\n            Back to{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </>}\n\n        <p className=\"text-lg font-medium\">\n          Have an account?{\" \"}\n          <Link to=\"/login\" className=\"font-normal\">\n            Log in\n          </Link>\n        </p>\n        <p className=\"text-lg font-medium\">\n          <Link to=\"/passwordless-login\" className=\"font-normal\">\n          Log in\n          </Link>\n          {\" \"}without signing up\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default SignUp;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { checkLogin } from \"../utils/ApiUtils\";\n\nconst PublicRoute = ({ component: Component, ...rest }) => {\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        checkLogin() ? <Redirect to=\"/docs/mydocs\" /> : <Component {...props} />\n      }\n    />\n  );\n};\n\nexport default PublicRoute;\n","import { Switch, Route } from \"react-router-dom\";\nimport AuthLayout from \"../components/AuthLayout/AuthLayout\";\nimport ConfirmUser from \"../pages/auth/Confirm\";\nimport ConfirmLogin from \"../pages/auth/ConfirmLogin\";\nimport EmailLogin from \"../pages/auth/EmailLogin\";\nimport Forgot from \"../pages/auth/Forgot\";\nimport Login from \"../pages/auth/Login\";\nimport OTPLogin from \"../pages/auth/OTPLogin\";\nimport Reset from \"../pages/auth/Reset\";\nimport SignUp from \"../pages/auth/SignUp\";\nimport PublicRoute from \"./PublicRoute\";\n\nexport const AuthRouteList = [\n  { path: \"/login\", component: Login, exact: true },\n  { path: \"/email-login\", component: EmailLogin, exact: true },\n  { path: \"/passwordless-login\", component: OTPLogin, exact: true },\n  { path: \"/sign-up\", component: SignUp, exact: true },\n  { path: \"/forgot\", component: Forgot, exact: true },\n  { path: \"/user/reset\", component: Reset, exact: true },\n  { path: \"/user/confirm\", component: ConfirmUser, exact: true },\n  { path: \"/user/passwordless-login\", component: ConfirmLogin, exact: true }\n];\n\n// To add a private route HOC when approved\n\nconst AuthRoutes = () => {\n  return (\n    <Switch>\n      <main className=\"inner-route-body\">\n        <AuthLayout>\n          {AuthRouteList.map(r => (\n            <PublicRoute\n              key={r.path}\n              component={r.component}\n              exact={r.exact}\n              path={r.path}\n            />\n          ))}\n        </AuthLayout>\n      </main>\n    </Switch>\n  );\n};\n\nexport default AuthRoutes;\n","import React from \"react\"\n\nconst useClickOutside = (ref, callback) => {\n  const handleClick = e => {\n    if (ref.current && !ref.current.contains(e.target)) {\n      callback()\n    }\n  }\n  React.useEffect(() => {\n    document.addEventListener(\"click\", handleClick)\n    return () => {\n      document.removeEventListener(\"click\", handleClick)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport default useClickOutside\n","import React, { useState } from \"react\";\nimport { AiOutlineClose, AiOutlinePlus } from \"react-icons/ai\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport InputField from \"../../components/InputField/InputField\";\nimport Select from \"react-select\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { Link, NavLink, useHistory, useLocation } from \"react-router-dom\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { useEffect } from \"react\";\n\nexport const NewBoard = ({ state, close }) => {\n  const [type, setType] = useState(\"board\");\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  // const history = useHistory();\n\n  useEffect(() => {\n    setType(\"board\");\n    setName(\"\");\n    setLoading(false);\n    setError(null);\n  }, [close]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    docsManager\n      .createDoc(docsManager.parent || userInfo?.data?.userid, type, name)\n      .then(res => {\n        close();\n      })\n      .catch(err => {\n        if (err?.response?.data?.code === \"doc_name_exists\") {\n          setError(\"Name exists\");\n        } else {\n          setError(err?.response?.data?.message);\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  const options = [\n    { value: \"board\", label: \"Board\" },\n    { value: \"folder\", label: \"Folder\" }\n    // { value: \"diagram\", label: \"Diagram\" },\n  ];\n\n  return (\n    <Dialog open={state} aria-labelledby=\"New Document\" className=\"px-5\">\n      {loading && <FullLoader />}\n      <form\n        action=\"\"\n        className=\"py-3 w-64 lg:w-96 bg-white \"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"flex justify-between items-center mb-5 px-2\">\n          <div />\n          <h4 className=\"text-center text-xl m-0\">Create New</h4>\n\n          <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <div className=\"px-3 lg:px-5\">\n          <Select\n            options={options}\n            className=\"mb-3\"\n            onChange={e => setType(e.value)}\n            defaultValue=\"board\"\n            placeholder=\"Board\"\n          />\n          <InputField\n            label=\"Name\"\n            placeholder=\"Name\"\n            handleChange={e => setName(e.target.value)}\n            value={name}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          <div className=\"text-right\">\n            <button\n              type=\"submit\"\n              className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n            >\n              Create\n            </button>\n          </div>\n        </div>\n      </form>\n    </Dialog>\n  );\n};\n\nconst DashSidebar = ({ close }) => {\n  const location = useLocation();\n  const [openNew, setOpenNew] = useState(false);\n  const [docsState, setDocsState] = React.useState(docsManager.state);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    var docsManagerCb = () => { setDocsState(docsManager.state) }\n    docsManager.event.addListener(docsManagerCb);\n    return () => {\n      docsManager.event.removeListener(docsManagerCb);\n    };\n  }, []);\n\n  return (\n    <aside\n      className=\"w-60 fixed top-0 left-0 bg-gray-100 h-screen px-6 py-5 transition-all\"\n      // ref={sideRef}\n    >\n      <NewBoard state={openNew} close={() => setOpenNew(false)} />\n      <div className=\"text-right m-0 mb-0 lg:hidden\">\n        <AiOutlineClose className=\"text-2xl\" onClick={close} />\n      </div>\n\n      <Link\n        to=\"/docs/mydocs\"\n        className=\"flex items-center justify-center mb-10\"\n      >\n        <img\n          src={require(\"../../assests/icons/Logo.svg\").default}\n          className=\"w-8/12\"\n          alt=\"Logo\"\n        />\n      </Link>\n      <div className=\"w-full flex justify-center\">\n        <button\n          className={`flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto ${\n            !docsManager.canCreateNewDoc()\n              ? \"cursor-not-allowed bg-opacity-30 mx-auto\"\n              : \"\"\n          }`}\n          onClick={() => {\n            if (docsManager.canCreateNewDoc()) {\n              setOpenNew(true);\n            } else {\n              return;\n            }\n          }}\n        >\n          <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n          <span className=\"m-0\">New</span>\n        </button>\n      </div>\n\n      <NavLink\n        to=\"/docs/mydocs\"\n        className=\"block text-center mt-10 font-semibold text-lg\"\n        activeClassName=\"bg-white py-2\"\n      >\n        My Documents\n      </NavLink>\n\n      <NavLink\n        className=\"cursor-pointer block text-center mt-5 font-medium text-base \"\n        activeClassName=\"bg-white py-2\"\n        onClick={() => {}}\n        to=\"/docs/shared\"\n        exact={true}\n      >\n        Shared with me\n      </NavLink>\n    </aside>\n  );\n};\n\nexport default DashSidebar;\n","import React, { useRef, useState } from \"react\";\nimport { AiOutlineSearch } from \"react-icons/ai\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport { GiHamburgerMenu } from \"react-icons/gi\";\nimport ModalContainer from \"../ModalContainer/ModalContainer\";\nimport DashSidebar from \"./DashSidebar\";\nimport userInfo from \"../../utils/UserInfo\";\nimport docsManager from \"../../utils/DocsManager\";\n\nconst MobileMenu = ({ close }) => {\n  return (\n    <ModalContainer>\n      <DashSidebar close={close} />\n    </ModalContainer>\n  );\n};\n\nconst DashboardTop = () => {\n  const settingsRef = useRef();\n  const [openSettings, setOpenSettings] = useState(false);\n  const [openMenu, setOpenMenu] = useState(false);\n  const [text, setText] = useState(\"\");\n  useClickOutside(settingsRef, () => setOpenSettings(false));\n  const history = useHistory();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    docsManager.setSearchMode(text);\n    history.push(docsManager.getRoute());\n    docsManager.reload();\n  };\n\n  return (\n    <div className=\"sticky top-0 left-0 pb-5  shadow-md w-full flex justify-between items-center px-5 z-10 mb-5 lg:flex-row flex-col bg-white\">\n      {openMenu && <MobileMenu close={() => setOpenMenu(false)} />}\n      <div className=\"lg:hidden w-full flex justify-between items-center\">\n        <Link\n          to=\"/docs/mydocs\"\n          className=\"flex items-center justify-center mb-3\"\n        >\n          <img\n            src={require(\"../../assests/icons/Logo.svg\").default}\n            className=\"w-24\"\n            alt=\"Logo\"\n          />\n        </Link>\n\n        <GiHamburgerMenu\n          className=\"text-xl\"\n          onClick={() => setOpenMenu(true)}\n        />\n      </div>\n\n      <div>\n        <h1 className=\"text-xl font-medium m-0\">{`Welcome, ${\n          userInfo?.data?.first_name || userInfo?.data.email\n        }!`}</h1>\n      </div>\n\n      <div className=\"flex items-center lg:space-x-2 justify-between w-full lg:w-auto lg:justify-start\">\n        <form\n          className=\"flex items-center px-1 py-0 mx-auto\"\n          style={{ border: \"1px solid black\" }}\n          onSubmit={handleSubmit}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"Search\"\n            className=\"border-none outline-none\"\n            value={text}\n            onChange={e => setText(e.target.value)}\n          />\n\n          <button\n            className=\"bg-transparent outline-none border-none m-0 p-0  \"\n            type=\"submit\"\n          >\n            <AiOutlineSearch className=\"text-lg\" />\n          </button>\n        </form>\n\n        {/* <img\n          src={require(\"../../assests/icons/help.svg\").default}\n          alt=\"avatar\"\n          className=\"w-7 h-6\"\n          // onClick={() => setOpenSettings(!openSettings)}\n        /> */}\n\n        <div className=\"relative\" ref={settingsRef}>\n          <img\n            src={require(\"../../assests/icons/avatar.svg\").default}\n            alt=\"avatar\"\n            className=\"w-7 h-7\"\n            onClick={() => setOpenSettings(!openSettings)}\n          />\n\n          {openSettings && (\n            <div className=\"absolute bg-white shadow-md transition-all  w-28 py-2 px-2 right-0 space-y-2 flex flex-col text-center\">\n              {/* <h1>Settings</h1> */}\n              <Link to=\"/user/settings\" className=\"text-gray-500\">\n                Settings\n              </Link>\n\n              <button\n                to=\"/login\"\n                onClick={() => {\n                  userInfo.logout();\n                  history.push(\"/login\");\n                }}\n                className=\"text-gray-500 cursor-pointer p-0 bg-transparent border-0 outline-none  text-base \"\n              >\n                Logout\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardTop;\n","import React from \"react\";\nimport DashboardTop from \"./DashboardTop\";\nimport DashSidebar from \"./DashSidebar\";\n\nconst DashLayout = ({ children }) => {\n  // const [loading, setLoading] = useState(true);\n\n  return (\n    <main className=\"flex w-full min-h-screen overflow-auto\">\n      {/* {loading && <FullLoader />} */}\n      {\n        <>\n          <div className=\"hidden lg:block\">\n            <DashSidebar />\n          </div>\n\n          <div className=\" lg:ml-60 bg-white w-full py-2 lg:py-7 h-screen \">\n            <DashboardTop />\n            <div\n              className=\"px-5 overflow-auto py-3\"\n              style={{ height: \"calc(100vh - 170px)\" }}\n            >\n              {children}\n            </div>\n          </div>\n        </>\n      }\n    </main>\n  );\n};\n\nexport default DashLayout;\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport userInfo from \"../../utils/UserInfo\";\nimport ModalContainer from \"../ModalContainer/ModalContainer\";\nimport { IoFolderOutline } from \"react-icons/io5\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport docsManager from \"../../utils/DocsManager\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\n\nconst DetailsModal = ({ open, close, m }) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const inScope = m?.in_my_scope === true;\n  const ref = useRef(null);\n\n  // useClickOutside(open ? ref : null, close);\n\n  // if (open)\n  useEffect(() => {\n    if (!inScope) {\n      return;\n    }\n    docsManager\n      .getFullPath(m?.docid, userInfo.data.userid)\n      .then(res => setData(res))\n      .catch(err => console.log(err.response))\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (inScope) {\n      return;\n    }\n\n    docsManager\n      .getADoc(m?.docid)\n      .then(res => setData(res))\n      .catch(err => console.log(err.response))\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // const handleKeyDown = event => {\n  //   if (event.key.toLowerCase()) {\n  //     close();\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   document.addEventListener(\"keydown\", handleKeyDown);\n\n  //   return () => {\n  //     document.removeEventListener(\"keydown\", handleKeyDown);\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  return (\n    <ModalContainer>\n      <div className=\"h-full lg:w-80 w-64 py-7 px-2 bg-white fixed right-0 top-0 z-20 \">\n        <div ref={open ? ref : null}>\n          <div className=\"\">\n            <AiOutlineClose\n              className=\"text-3xl cursor-pointer\"\n              onClick={() => close()}\n            />\n          </div>\n\n          <h1 className=\"text-center text-xl\">{m.name}</h1>\n          {m.type === \"board\" && (\n            <img\n              src={require(\"../../assests/icons/Logo-grey.png\").default}\n              alt=\"Board Icon\"\n              className=\"w-full h-20 lg:h-40 object-scale-down my-7\"\n            />\n          )}\n\n          {m.type === \"folder\" && (\n            <IoFolderOutline className=\"w-full h-20 lg:h-40  object-scale-down my-7\"></IoFolderOutline>\n          )}\n\n          <div className=\"w-full space-y-3\">\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Type:</h2>\n\n              <p className=\"capitalize m-0\">{m.type}</p>\n            </div>\n\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Created at:</h2>\n\n              <p className=\"capitalize m-0\">\n                {new Date(m.created_at).toDateString()}\n              </p>\n            </div>\n\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Updated at:</h2>\n\n              <p className=\"capitalize m-0\">\n                {new Date(m.updated_at).toDateString()}\n              </p>\n            </div>\n            {m.in_my_scope === true && !loading && (\n              <div className=\"details-grid\">\n                <h2 className=\"m-0 font-medium text-base\">Location:</h2>\n\n                <p className=\"m-0 break-all\">\n                  {userInfo?.data?.userid === m.parent ? (\n                    \"My Documents\"\n                  ) : (\n                    <>\n                      <span>My Documents</span>{\" \"}\n                      {data?.map(m => (\n                        <span key={m?.name}>/{m?.name}</span>\n                      ))}\n                    </>\n                  )}\n                </p>\n              </div>\n            )}\n\n            {m.in_my_scope === false && !loading && (\n              <div className=\"details-grid\">\n                <h2 className=\"m-0 font-medium text-base\">Shared by:</h2>\n                <p className=\"m-0 break-all\">{data?.owner}</p>\n              </div>\n            )}\n\n            {loading && <MiniLoader />}\n          </div>\n        </div>\n      </div>\n    </ModalContainer>\n  );\n};\n\nexport default DetailsModal;\n","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { toast } from \"react-toastify\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { RenameDoc } from \"../../utils/ApiRequests\";\nimport docsManager from \"../../utils/DocsManager\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\n\nconst RenameModal = ({ state, close, m }) => {\n  const [newName, setName] = useState(m?.name);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setError(null);\n    setLoading(false);\n  }, [close]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    RenameDoc(m?.docid, {\n      name: newName,\n      parent: m?.parent\n    })\n      .then(res => {\n        // toast.success(\"Renamed Successfully\");\n        docsManager.reload();\n      })\n      .catch(err => setError(err?.response?.data?.message))\n      .finally(() => {\n        setLoading(false);\n        // docsManager.relo\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\">\n      <form\n        action=\"\"\n        className=\"py-2 w-64 lg:w-96 bg-white \"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"flex justify-between items-center my-2 px-2\">\n          <div />\n          <h4 className=\"text-center m-0\">Rename</h4>\n\n          <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n\n        <hr className=\"-mb-5\" />\n\n        <div className=\"px-2\">\n          <InputField\n            // label=\"Rename\"\n            placeholder=\"Name\"\n            handleChange={e => setName(e.target.value)}\n            value={newName}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          <div className=\"text-right\">\n            {loading ? (\n              <MiniLoader />\n            ) : (\n              <button\n                type=\"submit\"\n                className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n              >\n                Rename\n              </button>\n            )}\n          </div>\n        </div>\n      </form>\n    </Dialog>\n  );\n};\n\nexport default RenameModal;\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog } from \"@material-ui/core\";\n// import Select from \"react-select\";\nimport { useEffect, useState } from \"react\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport { toast } from \"react-toastify\";\nimport docsManager from \"../../utils/DocsManager\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { MoveDoc } from \"../../utils/ApiRequests\";\nimport { AiFillFolder, AiOutlineRight } from \"react-icons/ai\";\nimport { BiArrowBack } from \"react-icons/bi\";\n// import { IoArrowBackCircleSharp } from \"react-icons/io5\";\n\nconst MoveModal = ({ state, close, m }) => {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState();\n  const [parent, setParent] = useState(userInfo?.data?.userid);\n  const [error, setError] = useState(null);\n  const [parentDoc, setParentDoc] = useState(null);\n\n  const [cache, setCache] = useState(new Map());\n  const [childCache, setChildCache] = useState(new Map());\n\n  const getDoc = async (docid) => {\n    if (!docid || docid == userInfo?.data?.userid) {\n      return {docid: docid, name: 'Root Folder', parent: null}\n    }\n    if (cache.has(docid)) {\n      return cache.get(docid);\n    }\n    var doc = await docsManager.getADoc(docid);\n    cache.set(docid, doc);\n    return doc;\n  }\n\n  const getChildren = async (docid) => {\n    if (childCache.has(docid)) {\n      return childCache.get(docid);\n    }\n    var children = await docsManager.getChildFolders(docid);\n    childCache.set(docid, children);\n    for (let item of children) {\n      cache.set(item.docid, item);\n    }\n    return children;\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    getDoc(parent)\n    .then(resp=>{\n      setParentDoc(resp);\n    })\n    .then(()=> getChildren(parent || userInfo?.data?.userid))\n    .then(res => {\n      setData(res);\n      setLoading(false);\n    })\n    .catch(err => console.log(err.response));\n  }, [parent]);\n\n  // console.log(options);\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    MoveDoc(m?.docid, { parent: parent || userInfo?.data?.userid, name: m?.name })\n      .then(res => {\n        docsManager.reload();\n        close();\n      })\n      .catch(err => toast.error(err?.response?.data?.message))\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\" aria-labelledby=\"Share\">\n      <form\n        className={`py-2 h-72 w-64 lg:w-96 bg-white`}\n        onSubmit={handleSubmit}\n        // onClick\n      >\n        <div className=\"flex items-center justify-between my-2 px-3\">\n          {parent != userInfo?.data?.userid ? (\n            <BiArrowBack\n              className=\"text-xl cursor-pointer\"\n              onClick={() => {\n                setParent(parentDoc.parent);\n              }}\n            />\n          ) : (\n            <div />\n          )}\n\n          <h4 className=\"text-center m-0 w-44 truncate\">\n            {\" \"}\n            {parentDoc?.name || \"Root Folder\"}\n          </h4>\n\n          <AiOutlineClose\n            className=\"text-xl cursor-pointer\"\n            onClick={() => close()}\n          />\n        </div>\n        <hr />\n\n        {loading && (\n          <div className=\"mt-6\">\n            <MiniLoader />\n          </div>\n        )}\n        {!loading && (\n          <>\n            <div className=\"h-1/2 space-y-6 py-2 overflow-y-auto px-3\">\n              {data?.map((m, i) => (\n                <div\n                  className={`move-grid text-lg cursor-pointer hover:bg-gray-200`}\n                  key={i}\n                >\n                  <div\n                    className=\"flex items-center space-x-2 cursor-pointer\"\n                    onClick={() => {\n                      setParent(m.docid);\n                    }}\n                  >\n                    <AiFillFolder />\n                    <span className=\"w-40  lg:w-44 truncate\">{m.name}</span>\n                  </div>\n                  <AiOutlineRight\n                    className=\"cursor-pointer text-right ml-auto\"\n                    onClick={() => setParent(m.docid)}\n                  />\n                </div>\n              ))}\n            </div>\n\n            <div className=\"text-right mt-8 px-3\">\n              <button\n                type=\"submit\"\n                className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n              >\n                Move Here\n              </button>\n            </div>\n          </>\n        )}\n      </form>\n    </Dialog>\n  );\n};\n\nexport default MoveModal;\n","import React, { useRef, useState } from \"react\";\n// import { truncateString } from \"../../utils/Helpers\";\nimport { BsThreeDotsVertical } from \"react-icons/bs\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport { toast } from \"react-toastify\";\nimport FullLoader from \"../Loaders/FullLoader\";\nimport ShareModal from \"./ShareModal\";\nimport DetailsModal from \"./DetailsModal\";\nimport docsManager from \"../../utils/DocsManager\";\nimport RenameModal from \"./RenameModal\";\nimport MoveModal from \"./MoveModal\";\nimport { useHistory } from \"react-router-dom\";\nimport { IoFolderOutline, IoPeople } from \"react-icons/io5\";\nimport { Dialog } from \"@material-ui/core\";\n\nconst DocumentListItem = ({ m }) => {\n  const [open, setOpen] = useState(false);\n  const ref = useRef();\n  useClickOutside(ref, () => setOpen(false));\n  const [loading, setLoading] = useState(false);\n  const [share, setShare] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [rename, setRename] = useState(false);\n  const [move, setMove] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const history = useHistory();\n\n  // console.log(m);\n\n  const handleOpen = () => {\n    if (share || showDetails || rename || move) {\n      return;\n    }\n    if (m.type === \"board\") {\n      const win = window.open(`/?docid=${m.docid}`, \"_blank\");\n      //win.focus();\n    } else if (m.type === \"folder\") {\n      docsManager.pushParent(m.docid);\n      history.push(docsManager.getRoute());\n      docsManager.reload();\n    }\n  };\n\n  const duplicate = () => {\n    docsManager\n      .duplicate(m.docid)\n      .then(() => {\n        docsManager.reload();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <div\n      className=\"w-full h-40 lg:h-52 rounded-2xl shadow-md  flex flex-col justify-between\"\n      ref={ref}\n    >\n      {loading && <FullLoader />}\n      {share && (\n        <ShareModal state={share} close={() => setShare(false)} doc={m} />\n      )}\n      {showDetails && (\n        <DetailsModal\n          m={m}\n          close={() => setShowDetails(false)}\n          open={showDetails}\n        />\n      )}\n      <RenameModal state={rename} close={() => setRename(false)} m={m} />\n      {move && <MoveModal state={move} close={() => setMove(false)} m={m} />}\n\n      <Dialog open={deleting}>\n        <div className=\"w-64 lg:w-72 py-8 px-5 space-y-10\">\n          <p className=\"font-sans text-center text-lg\">\n            Are you sure you want to delete?\n          </p>\n\n          <div className=\"grid grid-cols-2 gap-5\">\n            <button\n              className=\"button border border-lkhRed text-center py-3 bg-white \"\n              onClick={() => setDeleting(false)}\n            >\n              Cancel\n            </button>\n\n            <button\n              onClick={() => {\n                setDeleting(false);\n                setLoading(true);\n                docsManager\n                  .deleteDoc(m.docid)\n                  .then(res => {})\n                  .catch(err => {\n                    toast(err?.response?.data?.code);\n                  })\n                  .finally(() => {\n                    setLoading(false);\n                  });\n              }}\n              className=\"button bg-lkhRed text-white border-0\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </Dialog>\n\n      <div\n        className=\"h-3/4 relative transition-all hover:bg-gray-100 px-5 py-5  cursor-pointer\"\n        onClick={handleOpen}\n      >\n        {m.type === \"board\" && (\n          <img\n            src={require(\"../../assests/icons/Logo-grey.png\").default}\n            alt=\"Board Icon\"\n            className=\"w-5/6 h-5/6 object-scale-down\"\n          />\n        )}\n\n        {m.type === \"folder\" && (\n          <IoFolderOutline className=\"w-5/6 h-5/6 scale-y-90 scale-x-90 object-scale-down\"></IoFolderOutline>\n        )}\n\n        {m?.shared && m.in_my_scope && (\n          <IoPeople className=\"absolute right-3 text-lg top-5\" />\n        )}\n      </div>\n\n      <div className=\"flex items-center justify-between h-1/4 px-4 py-3 bg-gray-50\">\n        <h1 className=\"m-0 text-sm break-all font-medium line-clamp-2\">\n          {m.name}\n        </h1>\n\n        <div className=\"relative\">\n          <BsThreeDotsVertical\n            onClick={() => setOpen(!open)}\n            className=\"cursor-pointer\"\n          />\n\n          {open && (\n            <div className=\"absolute top-0 right-3 py-3 px-7 shadow-md bg-white space-y-4 text-left z-20\">\n              <p\n                className=\"text-sm cursor-pointer m-0 mb-2\"\n                onClick={() => {\n                  handleOpen();\n                }}\n              >\n                Open\n              </p>\n\n              <p\n                className=\"text-sm cursor-pointer m-0 mb-2\"\n                onClick={() => setShowDetails(true)}\n              >\n                Details\n              </p>\n\n              {m.in_my_scope && (\n                <>\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setShare(true)}\n                  >\n                    Share\n                  </p>\n\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setRename(true)}\n                  >\n                    Rename\n                  </p>\n\n                  {m.type != \"folder\" && (\n                    <p\n                      className=\"text-sm cursor-pointer\"\n                      onClick={() => {\n                        setOpen(!open);\n                        duplicate();\n                      }}\n                    >\n                      Duplicate\n                    </p>\n                  )}\n\n                  {m.type == \"board\" && (\n                    <p\n                      className=\"text-sm cursor-pointer\"\n                      onClick={() => setMove(true)}\n                    >\n                      Move\n                    </p>\n                  )}\n\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setDeleting(true)}\n                  >\n                    Delete\n                  </p>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentListItem;\n","import React, { useState } from \"react\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\n// import { toast } from \"react-toastify\";\nimport DocumentListItem from \"../../components/DashboardItems/DocumentListItem\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { AiOutlineRight, AiOutlinePlus } from \"react-icons/ai\";\nimport { useHistory } from \"react-router-dom\";\nimport { NewBoard } from \"../../components/DashLayout/DashSidebar\";\n\nconst Dashboard = props => {\n  const [docsState, setDocsState] = React.useState(docsManager.state);\n  const [openNew, setOpenNew] = useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    var docsManagerCb = () => { setDocsState(docsManager.state) }\n    docsManager.event.addListener(docsManagerCb);\n    docsManager.setRoute(props.location.pathname, props.location.search);\n    docsManager.reload();\n\n    return () => {\n      docsManager.event.removeListener(docsManagerCb);\n    };\n  }, []);\n\n  return (\n    <div className=\"pb-40\">\n      {docsManager.state == \"loading\" && <FullLoader />}\n      <NewBoard state={openNew} close={() => setOpenNew(false)} />\n      {docsManager.state == \"available\" && (\n        <>\n          <div className=\"flex items-center space-x-2\">\n            <h1\n              className=\"text-xl font-medium m-0 mb-3 lg:mb-10 cursor-pointer\"\n              onClick={() => {\n                docsManager.popParentTo(null);\n                history.push(docsManager.getRoute());\n                docsManager.reload();\n              }}\n            >\n              {docsManager.getRootName()}\n            </h1>\n\n            {docsManager?.path &&\n              docsManager.path.map((m, i) => (\n                <h1\n                  className={`flex items-center space-x-2 text-xl font-medium m-0 mb-2 lg:mb-10 ${\n                    i !== docsManager.path.length - 1 ? \"cursor-pointer\" : \"\"\n                  }`}\n                  onClick={() => {\n                    if (i !== docsManager.path.length - 1) {\n                      docsManager.popParentTo(m.docid);\n                      history.push(docsManager.getRoute());\n                      docsManager.reload();\n                    }\n                  }}\n                  key={i}\n                >\n                  <AiOutlineRight className=\"text-xl font-semibold\" />\n                  <span> {m?.name} </span>\n                </h1>\n              ))}\n          </div>\n\n          {docsManager.state == \"available\" &&\n            docsManager.canCreateNewDoc() &&\n            docsManager?.docs?.length > 0 && (\n              <button\n                className={`mb-5 lg:hidden flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0`}\n                onClick={() => {\n                  setOpenNew(true);\n                }}\n              >\n                <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n                <span className=\"m-0\">New</span>\n              </button>\n            )}\n          <div className=\"w-full grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 pb-20\">\n            {docsManager.docs.map((m, i) => {\n              return <DocumentListItem m={m} key={i} />;\n            })}\n          </div>\n        </>\n      )}\n      {docsManager.state == \"available\" &&\n        docsManager.mode == \"mydocs\" &&\n        !(docsManager?.docs?.length > 0) && (\n          <div className=\"w-full flex flex-col items-center justify-center space-y-2\">\n            <div className=\"w-full flex justify-center flex-col items-center\">\n              <h3 className=\"text-lkhDGrey\">\n                You do not have any document in this folder. Please add a\n                document\n              </h3>\n              <button\n                className={`flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto`}\n                onClick={() => {\n                  setOpenNew(true);\n                }}\n              >\n                <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n                <span className=\"m-0\">New</span>\n              </button>\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import React, { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport InputField from \"../../components/InputField/InputField\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { updateCurrentUser } from \"../../utils/ApiRequests\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { passwordCheck } from \"../auth/AuthUtil\";\n\nconst Settings = () => {\n  const [loading, setLoading] = useState(false);\n  const [updateForm, setupdateForm] = useState({\n    email: userInfo?.data?.email,\n    current_password: \"\",\n    first_name: userInfo?.data?.first_name,\n    last_name: userInfo?.data?.last_name\n  });\n  const [error, setError] = useState(true);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setupdateForm({ ...updateForm, ...newEntry });\n  };\n\n  const handlePasswordChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n    setupdateForm({ ...updateForm, ...newEntry });\n  };\n\n  const updateUser = e => {\n    e.preventDefault();\n    setLoading(true);\n    updateCurrentUser(updateForm)\n      .then(res => toast.success(\"Profile updated successfully\"))\n      .catch(err => toast.error(err.response.data.message))\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div>\n      {loading && <FullLoader />}\n      <h1 className=\"lg:text-2xl font-medium m-0 mb-10\">Update Profile</h1>\n\n      <form\n        className=\"w-full lg:w-5/12 shadow-md p-5 mb-10\"\n        onSubmit={updateUser}\n      >\n        <div className=\"w-full grid grid-cols-2 gap-5\">\n          <InputField\n            name=\"first_name\"\n            label=\"First Name\"\n            placeholder=\"First Name\"\n            handleChange={handleChange}\n            value={updateForm.first_name}\n          />\n          <InputField\n            name=\"last_name\"\n            label=\"Last name\"\n            placeholder=\"Last Name\"\n            handleChange={handleChange}\n            value={updateForm.last_name}\n          />\n        </div>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          // handleChange={handleChange}\n          readOnly={true}\n          value={updateForm.email}\n        />\n\n        <InputField\n          name=\"current_password\"\n          type=\"password\"\n          placeholder=\"Current Password\"\n          //   required={true}\n          label=\"Current Password\"\n          value={updateForm.current_password}\n          handleChange={handleChange}\n          //   error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"new_password\"\n          type=\"password\"\n          placeholder=\"New Password\"\n          //   required={true}\n          label=\"New Password\"\n          value={updateForm.new_password}\n          handleChange={handlePasswordChange}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <button\n          type=\"submit\"\n          className=\"flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n        >\n          Update\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Settings;\n","import { Switch, Route, Redirect } from \"react-router-dom\";\nimport DashLayout from \"../components/DashLayout/DashLayout\";\nimport Dashboard from \"../pages/Dashboard/Dashboard\";\nimport Settings from \"../pages/Dashboard/Settings\";\nimport FullLoader from \"../components/Loaders/FullLoader\";\nimport { useEffect, useState } from \"react\";\nimport userInfo from \"../utils/UserInfo\";\nimport \"../assests/index.css\";\nimport \"../assests/page.css\";\n\nexport const DashRouteList = [\n  { path: \"/user/settings\", component: Settings, exact: true },\n  { path: \"/docs/mydocs\", component: Dashboard, exact: true },\n  { path: \"/docs/shared\", component: Dashboard, exact: true },\n  { path: \"/docs/search\", component: Dashboard, exact: true }\n];\n\nconst DashRoutes = () => {\n  const [userState, setUserState] = useState(userInfo.state);\n\n  const onUserInfoChange = () => {\n    setUserState(userInfo.state);\n  }\n  useEffect(() => {\n    userInfo.event.addListener(onUserInfoChange);\n    userInfo.get();\n\n    return () => {\n      userInfo.event.removeListener(onUserInfoChange);\n    };\n  }, []);\n\n  const PrivateRoute = ({ component: Component, ...rest }) => {\n    return (\n      <Route\n        {...rest}\n        render={props =>\n          userInfo.state === \"available\" ? (\n            <Component {...props} />\n          ) : (\n            <Redirect to=\"/login\" />\n          )\n        }\n      />\n    );\n  };\n\n  return (\n    <>\n      {userInfo.state === \"loading\" && <FullLoader />}\n      <Switch>\n        {userInfo.state !== \"loading\" && (\n          <main className=\"inner-route-body\">\n            <DashLayout>\n              {DashRouteList.map(r => (\n                <PrivateRoute\n                  key={r.path}\n                  component={r.component}\n                  exact={r.exact}\n                  path={r.path}\n                />\n              ))}\n            </DashLayout>\n          </main>\n        )}\n      </Switch>\n    </>\n  );\n};\n\nexport default DashRoutes;\n","export const dateStr = (ts) => {\n    var date = new Date(ts * 1000);\n    \n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var seconds = date.getSeconds();\n    \n    return year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\n}","import React, { useState, useEffect, useRef } from 'react';\nimport userInfo from '../../utils/UserInfo';\nimport Viewer from '../../common/Viewer'\nimport uiConfig from \"../../common/UIConfig\";\nimport canvas from '../../common/Canvas';\nimport { Button } from '@material-ui/core';\nimport { GrNext, GrPause, GrPlay, GrRefresh } from \"react-icons/gr\";\n\nimport qs from 'qs';\n\nimport { getADocsLogSession, getDocsLogUpdate } from '../../utils/ApiRequests';\n\nconst SessionViewer = props => {\n    const [session, setSession] = useState(null);\n    const [token, setToken] = useState(null);\n    const [updates, setUpdates] = useState(null);\n    const [loadingMsg, setLoadingMsg] = useState('Loading..');\n    const [loading, setLoading] = useState(true);\n    \n    const playing = useRef(false);\n\n    const onUserInfoChange = () => {\n        setToken(userInfo.token);\n        getSession();\n    }\n\n    const getSession = () => {\n        if (session != null) {\n            return;\n        }\n\n        var search = window.location.hash.substring(window.location.hash.indexOf('?'))\n        var params = qs.parse(search, { ignoreQueryPrefix: true })\n        var sessionid = params.sessionid;\n        setSession(sessionid);\n        getADocsLogSession(sessionid).then(resp => {\n            console.log('Got ' + resp.data.updates.length + ' versions')\n            let updatesArr = resp.data.updates;\n            updatesArr.sort((a, b) => {\n                return a.version < b.version;\n            });\n            getUpdates(updatesArr, 0);\n        });\n    }\n\n    const getUpdates = (updateArr, idx) => {\n        const batchSize = 75;\n        if (idx < updateArr.length) {\n            let from = idx;\n            let to = Math.min(idx + batchSize, updateArr.length - 1);\n\n            setLoadingMsg('Loading ' + (from + 1) + '-' + (to + 1) + ' out of ' + updateArr.length + ' updates')\n\n            let verStr = updateArr[from].version;\n            if (from != to) {\n                verStr = updateArr[from].version + \"-\" + updateArr[to].version;\n            }\n            getDocsLogUpdate(updateArr[idx].docid, verStr).then(resp => {\n                let respIdx = 0;\n                while (from <= to) {\n                    updateArr[from].content = resp.data.data[respIdx];\n                    from++;\n                    respIdx++;\n                }\n                getUpdates(updateArr, to + 1)\n            });\n        } else {\n            setUpdates(updateArr);\n            onUpdatesLoaded(updateArr);\n        }\n    }\n\n    const onUpdatesLoaded = (updates) => {\n        uiConfig.initForOfflineMode();\n        if (updates.length > 0 && !updates[0].is_delta) {\n            setLoading(false);\n        } else {\n            setLoadingMsg('Updates are not correct');\n        }\n    }\n\n    const onWsStateChange = (state) => {\n        if (playing.current) {\n            return;\n        }\n        playing.current = true;\n        var content = JSON.stringify(JSON.parse(updates[0].content).doc);\n        window.Module.startDoc(updates[0].docid)\n        window.Module.loadDoc(content);\n        canvas.draw();\n    }\n\n    useEffect(() => {\n        userInfo.event.addListener(onUserInfoChange);\n        userInfo.get();\n        return () => {\n          userInfo.event.removeListener(onUserInfoChange);\n        };\n    }, []);\n\n    if (!loading) {\n        window.wsmanager.permission = 'read';\n        console.log(updates)\n    }\n\n    return <div>\n        {!loading && <Viewer wsStateHandler={onWsStateChange}/>}\n        <div style={{width: '100%', position: 'absolute', top: 0, left: 0, marginLeft: 10, marginTop: 10}}>\n            {loading &&<div>{loadingMsg}</div>}\n            {!loading && <TopBar updates={updates} />}\n        </div>\n    </div>\n}\n\nconst TopBar = ({updates}) => {\n    const [counter, setCounter] = useState(0);\n    \n    const counterRef = useRef(0);\n    const autoPlay = useRef(false);\n    const curVersionIdx = useRef(0);\n    const playInterval = useRef(500);\n\n    const redraw = () => {\n        counterRef.current += 1;\n        setCounter(counterRef.current);\n    }\n\n    const restart = () => {\n        var content = JSON.stringify(JSON.parse(updates[0].content).doc);\n        window.Module.startDoc(updates[0].docid)\n        window.Module.loadDoc(content);\n        canvas.draw();\n\n        playInterval.current = window.playInterval || playInterval.current;\n        curVersionIdx.current = 0;\n        autoPlay.current = false;\n\n        redraw();\n    }\n\n    const toggleAutoPlay = () => {\n        autoPlay.current = !autoPlay.current;\n        onTimer();\n    }\n\n    const onTimer = () => {\n        if (curVersionIdx.current < updates.length - 1 && autoPlay.current) {\n            applyNext();\n            window.setTimeout(onTimer, playInterval.current);\n        } else {\n            redraw();\n        }\n    }\n\n    const applyNext = () => {\n        curVersionIdx.current += 1;\n        redraw();\n        if (curVersionIdx.current < updates.length) {\n            var content = updates[curVersionIdx.current].content;\n            if (typeof content == 'string') {\n                window.Module.updateDoc(content);\n                canvas.draw();\n            } else {\n                window.alert(content + ' is not string');\n            }\n        }\n    }\n\n    var msg = '[ ' + (curVersionIdx.current + 1) + ' of ' + updates.length + ' updates ] ';\n    var hasNext = curVersionIdx.current < updates.length - 1;\n    return <div style={{display: 'flex'}}>\n        <span>{msg}</span>\n        <Button onClick={restart}><GrRefresh/></Button>\n        {hasNext && autoPlay.current && <Button onClick={toggleAutoPlay}><GrPause/></Button>}\n        {hasNext && !autoPlay.current && <Button onClick={toggleAutoPlay}><GrPlay/></Button>}\n        {hasNext && !autoPlay.current && <Button onClick={applyNext}><GrNext/></Button>}\n    </div>;\n}\n\nexport default SessionViewer;\n\n","import OfflineList from \"./OfflineList\";\nimport OfflineViewer from \"./OfflineViewer\";\nimport SessionList from \"./SessionList\";\nimport SessionViewer from \"./SessionViewer\";\n\nconst DocsLogRoutes = [\n    { path: \"/docslog/sessionlist\", component: SessionList, exact: true },\n    { path: \"/docslog/sessionviewer\", component: SessionViewer, exact: true },\n    { path: \"/docslog/offlinelist\", component: OfflineList, exact: true },\n    { path: \"/docslog/offlineviewer\", component: OfflineViewer, exact: true }\n]\n\nexport default DocsLogRoutes;","\nimport React, { useState, useEffect } from 'react';\nimport { Button } from '@material-ui/core';\nimport { GrNext } from \"react-icons/gr\";\nimport userInfo from '../../utils/UserInfo';\nimport { dateStr } from './DocsLogUtil';\n\nimport { getDocsLogSessions } from '../../utils/ApiRequests';\n\nconst SessionList = props => {\n    let date = new Date();\n    let defKey = date.getFullYear() + \"-\" + date.getMonth();\n    const [key, setKey] = useState(defKey);\n    const [sessions, setSessions] = useState(null);\n    const [token, setToken] = useState(null);\n    const [nextToken, setNextToken] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const handleKeyChange = (e) => {\n        setNextToken(null);\n        setKey(e.target.value);\n    }\n\n    const fetchData = () => {\n        setLoading(true);\n        setSessions(null);\n        var elm = document.getElementById('key_text');\n        var parts = elm.value.split(\"-\");\n        var qstr = '';\n        if (parts.length == 2) {\n            qstr = 'year=' + parts[0] + '&month=' + parts[1];\n        } else {\n            qstr = 'docid=' + elm.value;\n        }\n        if (nextToken) {\n            qstr += '&next_token=' + encodeURIComponent(nextToken);\n        }\n        getDocsLogSessions(qstr).then(resp => {\n            setLoading(false);\n            if (resp.data) {\n                setSessions(resp.data.sessions);\n                console.log(resp.data)\n                setNextToken(resp.data.next_token);\n            }\n        });\n    }\n\n    const onUserInfoChange = () => {\n        setToken(userInfo.token);\n    }\n\n    useEffect(() => {\n        userInfo.event.addListener(onUserInfoChange);\n        userInfo.get();\n        return () => {\n          userInfo.event.removeListener(onUserInfoChange);\n        };\n    }, []);\n\n    var items = [];\n    if (sessions) {\n        let count = 0;\n        for (let sess of sessions) {\n            let ds = dateStr(sess.timestamp);\n            items.push(<div className='mt-4 ml-4' key={ds}>\n                <span>[{count}]</span><span> </span>\n                <span>{sess.email}</span><span> </span>\n                <span> [Updates: {sess.num_updates}] </span><span> </span>\n                <span><a target=\"_blank\" className=\"text-blue-700\" href={\"/#/docslog/sessionviewer?sessionid=\" + sess.id}>{'id:' + sess.id}</a></span><span> </span>\n                <span>{'docid:' + sess.docid}</span><span> </span>\n                <span className=\"text-purple-500\">{ds}</span><span> </span>\n                </div>)\n            count++;\n        }\n    }\n    return (<>\n    <div className=\"flex justify-around mt-4\">\n        <input type=\"text\" id=\"key_text\" value={key} onChange={handleKeyChange} className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5\"></input>\n        <div className=\"mt-2\">1 - 100</div>\n        <Button onClick={fetchData} disabled={token == null}><GrNext/></Button>\n    </div>\n    <hr/>\n    {loading &&<div>Loading..</div>}\n    {!loading && <div style={{overflow: 'auto', height: 'calc(100% - 110px)'}}>{items}</div>}\n    </>);\n}\n\nexport default SessionList;","const OfflineList = props => {\n    return <div>Offline List</div>;\n}\n\nexport default OfflineList;","const OfflineViewer = props => {\n    return <div>Offline Viewer</div>;\n}\n\nexport default OfflineViewer;","import { Switch, Redirect, Route } from \"react-router-dom\";\nimport AuthRoutes, { AuthRouteList } from \"./AuthRoutes\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.min.css\";\nimport DashRoutes, { DashRouteList } from \"./DashRoutes\";\nimport DocsLogRoutes from \"../components/DocsLog/DocsLogRoutes\";\n\nconst RouteList = [\n  { path: DashRouteList.map(r => r.path), component: DashRoutes, exact: true },\n  { path: AuthRouteList.map(r => r.path), component: AuthRoutes, exact: true },\n  ...DocsLogRoutes\n];\n\nconst Routes = () => {\n  return (\n    <>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        pauseOnHover\n      ></ToastContainer>\n      <Switch>\n        {RouteList.map(r => (\n          <Route\n            key={r.path}\n            exact={r.exact}\n            component={r.component}\n            path={r.path}\n          />\n        ))}\n        <Route path=\"/\" exact={true}>\n          <Redirect to=\"/docs/mydocs\" />\n        </Route>\n      </Switch>\n    </>\n  );\n};\n\nexport default Routes;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./App.css\";\nimport AppComponent from \"./App\"\nimport Viewer from \"./common/Viewer\";\nimport { HashRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport Routes from \"./routes/Routes\";\nimport qs from 'qs';\nimport docInfo from './utils/DocInfo'\nimport {hello} from './utils/ApiRequests'\nimport integ from \"./integ/integ\";\nimport uiConfig from \"./common/UIConfig\";\n\nvar openDoc = false;\nvar viewer = false;\nvar params = qs.parse(window.location.search, { ignoreQueryPrefix: true })\n\nvar docid = params.docid;\nvar _new = params._new;\nvar offline = params.offline;\nvar ref = params.ref;\n\nif (integ.isIntegration(params)) {\n  uiConfig.initForIntegMode(params);\n  openDoc = true;\n  viewer = uiConfig.isIntegViewer();\n} else {\n  if (offline) {\n    uiConfig.initForOfflineMode();\n  } else {\n    uiConfig.initForLekhBackendMode();\n  }\n\n  if (ref) {\n    hello(ref);\n    if (!docid && !_new && window.location.pathname == '/' && window.location.hash == '') {\n      window.history.replaceState({}, \"\", \"/\")\n    }\n  }\n\n  if (window.location.pathname == '/' && (!!docid || _new == 'true' || offline == 'true')) {\n    docInfo.docid = docid;\n    openDoc = true;\n  }\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    {openDoc && !viewer && <AppComponent />}\n    {openDoc && viewer && <Viewer />}\n    {!openDoc &&<HashRouter>\n      <Routes />\n    </HashRouter>}\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}