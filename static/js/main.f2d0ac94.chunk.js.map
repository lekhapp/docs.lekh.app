{"version":3,"sources":["common/Header/HeaderStyle.js","common/Header/Header.js","common/Canvas.js","common/Header/Menu.js","common/Footer/FooterStyle.js","common/Footer/Footer.js","common/SideBarMenu/SideBarStyle.js","common/LibCell.js","Constant.js","common/DrawStyle.js","common/ColorList.js","common/Config.js","common/StrokeStyle.js","common/InputMode.js","common/ShapeLibrary.js","common/SideBarMenu/SideBarMenu.js","common/SideBarMenu/Content.js","common/Layover.js","common/Util.js","common/AppInput.js","common/AppEvent.js","common/AppInit.js","App.js","reportWebVitals.js","index.js"],"names":["HeaderStyle","root","flexGrow","title","arrowUp","top","position","MainGrid","display","outClass","margin","bottom","border","paper","background","borderRadius","padding","textAlign","color","marginRight","right","minHeight","content","width","height","borderLeft","borderRight","borderBottom","marginLeft","fontSize","zIndex","responsicePaper","textIcon","paddingRight","checkIcon","useStyles","makeStyles","Style","Header","classes","className","Typography","size","target","href","canvas","libraryColCount","moving","fromX","fromY","origScrollX","origScrollY","showGrid","gridType","canvasElement","toggleGrid","drawGrid","onResize","setSize","draw","move","x","y","type","zm","window","Module","getZoom","scroll","getScroll","dx","dy","sx","sy","setScroll","maprx","mapry","zoomAt","factor","z1","z2","setZoom","zoom","rect","document","getElementById","getBoundingClientRect","fixCanvas","cnv","dpr","devicePixelRatio","style","getContext","scale","panel","tp","exportToImage","format","getBoundsOfAll","cel","createElement","ctx","fillStyle","fillRect","drawCanvasForExport","data","toDataURL","wd","ht","clearRect","rad","step","startx","starty","beginPath","strokeStyle","i","j","moveTo","arc","Math","PI","fill","stroke","lineWidth","lineTo","drawCanvas","drawCell","categ","num","sz","row","col","FileSaver","require","AppMenu","useState","snap","setSnap","grid","setGrid","value","setValue","open","setOpen","options","id","name","handleMenuClick","focus","exportFile","console","log","img","orient","doc","jsPDF","orientation","addImage","save","exportPdf","saveAs","getSvg","blob","Blob","getLekh","Grid","container","AppBar","boxShadow","Toolbar","IconButton","aria-label","onClick","e","currentTarget","handleClick","Menu","onClose","PaperProps","marginTop","left","label","parentMenuOpen","map","subOption","index","MenuItem","option","checked","FooterStyle","footer","justifyContent","backClass","backgroundColor","borderColor","filter","cursor","countClass","valueClass","iconClass","countBtn","minWidth","Footer","count","setCount","Button","inputReceiver","undo","redo","curCount","handleCount","handleAddCount","SideBarStyle","sideBar","sideBarMenu","alignItems","flexDirection","menuIcons","marginBottom","menuItem","sideMenuIcons","changeColor","spaceBwt","spaceBwtRound","LibCell","props","canvasRef","useRef","useEffect","current","context","category","ref","CircleColors","ShapesList","drag","SideBarMenuItems","icon","subMenus","drawStyle","colorIndex","dashIndex","widthIndex","setColor","idx","carr","colors","toLowerCase","colorNameToVal","setStrokeColor","setDashIndex","setDashType","setWidthIndex","currentStyle","setStrokeWidth","ColorList","item","selectedIndex","onColorChange","Config","mediaQuery","StrokeStyle","setColorIndex","widthCircles","dashLines","getDashLines","dashLine","iconsId","onDashChange","getWidthCircles","wcircle","onWidthChange","anchorEl","placement","subMenuIcons","matchMedia","matches","Popper","transition","TransitionProps","Fade","timeout","Paper","inputMode","mode","setMode","InputMode","SELECTION","DRAWING","enableRecognition","eraseAll","ShapeLibrary","getSubIcons","subMenu","onStop","event","pageX","pageY","libraryStore","addObjectToCanvas","onDragStop","SideBarMenu","React","setAnchorEl","setPlacement","setSubMenuIcons","selectedItemId","setSelectedItemId","selectedRestMenuItem","setSelectedRestMenuItem","newPlacement","getIconAndName","sidebar","ClickAwayListener","onClickAway","setOpenState","close","Object","keys","length","isSubMenus","Content","reload","location","Layover","state","util","loadTemplate","a","fetch","then","response","json","initObjects","JSON","stringify","generateUUID","d","Date","getTime","d2","performance","now","replace","c","r","random","floor","toString","loadBasicTemplates","columns","loadAll","init","onDisplaySettingChange","AppInput","drawPoints","drawing","transparentPanel","drawTemp","setCurrentStyleToCtx","dp","click","pt","inputFilter","tap","dbclick","needTextEditing","getTextEditRect","cx","cy","tid","tnode","$","val","getTextForEditing","getTextEditStyle","isFLoating","isEditingFloatingText","tattrs","effectiveTextAlignHorizontal","updateSize","text","getTextEditSize","css","append","trigger","on","finishTextEditing","remove","initShapeTextEditor","down","up","kind","dragMoveMode","it","InputType","START","OTHER","END","mpt","inDrawMode","willDrawAt","push","pan","flushTempDrawing","dragNative","contextmenu","enter","leave","appEvent","attachEventHandlers","dist","x1","y1","x2","y2","sqrt","clickTimer","mdown","moved","initialX","initialY","lastX","lastY","touchEndFn","ev","bean","button","clearTimeout","offsetX","offsetY","setTimeout","eventLoc","touch","targetTouches","clientX","clientY","addEventListener","preventDefault","attachTouchEvents","initializer","wsmanager","cb","setState","apiBasePath","runtimeInitialized","initialInitDone","docReady","appendScript","scriptToAppend","script","src","async","body","appendChild","onRuntimeInitialized","initInternal","docid","url","URL","searchParams","get","np","offline","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","obj","parse","responseText","start","send","newUrl","origin","startDoc","timer","ws","WebSocket","onopen","setInterval","onmessage","updateDoc","onclose","clearInterval","onerror","AppComponent","wsState","wsCallback","handleWSState","bind","layover","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.f2d0ac94.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\n\nconst HeaderStyle = {\n    root: {\n        flexGrow: 1,\n    },\n    title: {\n        flexGrow: 1,\n    },\n    arrowUp: {\n        top: '54px',\n        position: 'absolute',\n    },\n    MainGrid: {\n        display: 'flex',\n        position: 'relative',\n    },\n    outClass: {\n        position: 'relative',\n        margin: '0 auto',\n        bottom: '2px',\n        border: '1px solid #d1d1d1',\n    },\n    paper: {\n        background: '#fff',\n        borderRadius: '8px',\n        padding: '15px 126px',\n        textAlign: 'center',\n        color: '#000',\n        position: 'absolute',\n        margin: '20px',\n        marginRight: '0',\n        right: '-10px',\n        top: '4px',\n        minHeight: '180px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    responsicePaper:{\n            width: '0px',\n            background: '#fff',\n            borderRadius: '8px',\n            padding: '0px 66px',\n            textAlign: 'center',\n            color: '#000',\n            margin: '20px',\n            marginRight: '0',\n            right: '19px',\n            top: '13px',\n            minHeight: '123px',\n        '&::before': {\n            content: '\"s\"',\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            borderLeft: '19px solid transparent',\n            borderRight: '19px solid transparent',\n            borderBottom: '28px solid #fff',\n            top: '-28px',\n            right: '27px',\n            marginLeft: 'auto',\n            fontSize: 0,\n            zIndex: 9,\n        }\n    },\n    textIcon:{\n    margin: '-7px',\n    paddingRight: '8px',\n    },\n    checkIcon:{\n        position:'absolute',\n        margin:'5px'\n    }\n\n}\n\nexport default HeaderStyle;","import React, { useState } from 'react';\nimport { Typography, Link } from \"@material-ui/core\";\nimport Style from './HeaderStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FaRegLightbulb } from 'react-icons/fa';\n\nconst useStyles = makeStyles(Style);\nconst Header = () => {\n    const classes = useStyles();\n    return (\n            <div className={`${classes.outClass} header_text`}>\n                <Typography>\n                    <span>\n                        <FaRegLightbulb size=\"2em\" className=\"headerIcon\" />\n                        <span className=\"headerText\">Use pencil/mouse to draw or double click to add text</span>\n                    </span>\n                    <a  target=\"_blank\" href=\"https://lekh.app/help/lekhboard.html\" className=\"help-link\"> Help</a>\n                </Typography>\n            </div>\n    )\n}\n\nexport default Header\n","var canvas = {\n    libraryColCount: 4,\n    moving: false,\n    fromX: 0,\n    fromY: 0,\n    origScrollX: 0,\n    origScrollY: 0,\n    showGrid: true,\n    gridType: 2,\n };\n\nvar canvasElement = null;\n\ncanvas.toggleGrid = function() {\n    canvas.showGrid = !canvas.showGrid;\n    canvas.drawGrid();\n}\n\ncanvas.onResize = function() {\n    canvasElement = null;\n    canvas.setSize();\n    canvas.draw();\n    canvas.drawGrid();\n}\n\ncanvas.move = function(x, y, type) {\n    var zm = window.Module.getZoom();\n     if (type == 0) {\n         var scroll = window.Module.getScroll();\n         canvas.moving = true;\n         canvas.fromX = x;\n         canvas.fromY = y;\n         canvas.origScrollX = scroll.x;\n         canvas.origScrollY = scroll.y;\n     }\n     if (type == 1 && canvas.moving) {\n        var dx = x - canvas.fromX;\n        var dy = y - canvas.fromY;\n        var sx = canvas.origScrollX + dx / zm;\n        var sy = canvas.origScrollY + dy / zm;\n        window.Module.setScroll({x: sx, y: sy});\n     }\n\n     if (type == 2 && canvas.moving) {\n         canvas.moving = false;\n     }\n}\n\ncanvas.maprx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return x / zm - scroll.x;\n}\n\ncanvas.mapry = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return y / zm - scroll.y;\n}\n\ncanvas.getZoom = function() {\n    return window.Module.getZoom();\n}\n\ncanvas.zoomAt = function(x, y, factor) {\n    // (x + d1) * z1 = x'\n    // (x + d2) * z2 = x'\n    // from these two equations, calculate d2\n    var z1 = window.Module.getZoom();\n    var z2 = factor;\n    var scroll = window.Module.getScroll();\n\n    var dx = ((x - scroll.x * z1) * (z1 - z2)) / (z1 * z2) + scroll.x * (z1 / z2);\n    var dy = ((y - scroll.y * z1) * (z1 - z2)) / (z1 * z2) + scroll.y * (z1 / z2);\n\n    window.Module.setScroll({x: dx, y: dy});\n    window.Module.setZoom(factor);\n\n    canvas.drawGrid();\n    canvas.draw();\n }\n\ncanvas.zoom = function(factor) {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    canvas.zoomAt(rect.width / 2, rect.height / 2, factor);\n}\n\nconst fixCanvas = function(cnv, width, height) {\n    var dpr = window.devicePixelRatio || 1;\n    cnv.width = width * dpr;\n    cnv.height = height * dpr;\n    cnv.style.width = width + \"px\";\n    cnv.style.height = height + \"px\";\n    var ctx = cnv.getContext(\"2d\");\n    ctx.scale(dpr, dpr);\n}\ncanvas.setSize = function() {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    var panel = document.getElementById(\"gridCanvas\");\n    fixCanvas(panel, rect.width, rect.height);\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    fixCanvas(canvasElement, rect.width, rect.height);\n    var tp = document.getElementById(\"transparentPanel\");\n    fixCanvas(tp, rect.width, rect.height);\n}\n\ncanvas.exportToImage = function(format) {\n    var padding = 10;\n    var rect = window.Module.getBoundsOfAll();\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    var width = rect.width + 2 * padding;\n    var height = rect.height + 2 * padding;\n\n    var cel = document.createElement(\"canvas\");\n    fixCanvas(cel, width, height);\n    var ctx = cel.getContext(\"2d\");\n\n    if (format == \"jpg\" || format == \"jpeg\") {\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, width, height);\n    }\n    window.Module.drawCanvasForExport(ctx, sx, sy);\n    return {data: cel.toDataURL(\"image/\" + format), width: width, height: height }\n}\n\ncanvas.drawGrid = function() {\n    var panel = document.getElementById(\"gridCanvas\");\n    var wd = panel.width;\n    var ht = panel.height;\n    var ctx = panel.getContext('2d');\n    ctx.clearRect(0, 0, panel.width, panel.height);\n    if (!canvas.showGrid) {\n        return;   \n    }\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    var rad = 1 * zm;\n    var step = 48 * zm;\n\n    var startx = (scroll.x * zm) % step;\n    var starty = (scroll.y * zm) % step;\n\n    if (canvas.gridType == 1) {\n        if (step < 16) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.fillStyle = \"#c0c0c0\";\n        ctx.strokeStyle = \"#c0c0c0\";\n        for (var i = starty; i < ht; i+= step) {\n            for (var j = startx; j < wd; j+= step) {\n                ctx.moveTo(j + rad, i);\n                ctx.arc(j, i, rad, 0, 2 * Math.PI, false);\n            }\n        }\n        ctx.fill();\n        ctx.stroke();\n    } else {\n        if (step < 8) {\n            return;\n        }\n        ctx.lineWidth = 0.1;\n        ctx.strokeStyle = \"#606060\";\n        ctx.beginPath();\n        for (var i = starty; i < ht; i+= step) {\n          ctx.moveTo(0, i);\n          ctx.lineTo(wd, i);\n        }\n        for (i = startx; i < wd; i+= step) {\n          ctx.moveTo(i, 0);\n          ctx.lineTo(i, ht);\n        }\n        ctx.stroke();\n    }\n}\n  \ncanvas.draw = function() {\n    if (canvasElement == null) {\n        canvasElement = document.getElementById(\"drawCanvas\");\n    }\n    \n    var ctx = canvasElement.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    window.Module.drawCanvas(ctx);\n}\n\ncanvas.drawCell = function(categ, num, sz, ctx) {\n    var row = num / canvas.libraryColCount;\n    var col = num % canvas.libraryColCount;\n    var padding = 8;\n    window.Module.drawCell(categ, row, col, sz - padding, sz / 2, sz / 2, ctx);\n}\n\nexport default canvas;","import React, { useState } from 'react';\nimport { AppBar, Grid, Toolbar, IconButton, Menu, MenuItem } from \"@material-ui/core\";\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Style from './HeaderStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport NestedMenuItem from \"material-ui-nested-menu-item\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport canvas from '../Canvas'\nimport { jsPDF } from \"jspdf\";\n\nvar FileSaver = require('file-saver');\n\nconst useStyles = makeStyles(Style);\n\n/*\nvar blobToBase64 = function(blob, callback) {\n    var reader = new FileReader();\n    reader.onload = function() {\n        var dataUrl = reader.result;\n        var base64 = dataUrl.split(',')[1];\n        callback(base64);\n    };\n    reader.readAsDataURL(blob);\n};\n\nfunction download(filename, data) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:application/pdf;base64,' + data);\n    element.setAttribute('download', filename);\n  \n    element.style.display = 'none';\n    document.body.appendChild(element);\n  \n    element.click();\n  \n    document.body.removeChild(element);\n  }\n  */\n\n\nconst AppMenu = () => {\n    const classes = useStyles();\n    const [snap, setSnap] = useState(true);\n    const [grid, setGrid] = useState(canvas.showGrid);\n\n    const [value, setValue] = useState('');\n    const [open, setOpen] = useState(false);\n\n    const options = [\n        /*{ id: 1, name: 'Insert diagram' }, */\n        /*{ id: 2, name: 'Default font' }, */\n        { id: \"grid\", name: 'Show grid' },\n        { id: \"snap\", name: 'Snap objects' },\n        { id: \"help\", name: 'Help'},\n    ];\n\n    const subOptions = [\n        { id: \"pdf\", name: 'PDF' },\n        { id: \"png\", name: 'PNG' },\n        { id: \"jpeg\", name: 'JPEG' },\n        { id: \"svg\", name: 'SVG' },\n        { id: \"lekh\", name: 'LEKH' },\n    ]\n\n    const handleClick = (e) => {\n        setValue(e.currentTarget)\n        setOpen(true)\n    }\n\n    const handleMenuClick = (id) => {\n        if (id == \"grid\") {\n            setGrid(!grid);\n            canvas.showGrid = !grid;\n            canvas.drawGrid();\n        }\n        if (id == \"snap\") {\n            setSnap(!snap);\n            window.Module.setSnap(!snap);\n        }\n        if (id == \"help\") {\n            window.open(\"https://lekh.app/help/lekhboard.html\", '_blank').focus();\n        }\n        setOpen(false)\n    }\n\n    const exportPdf  = () => {\n        var img = canvas.exportToImage(\"jpeg\");\n        var orient = \"landscape\";\n        if (img.height > img.width) {\n            orient = \"portrait\";\n        }\n        var doc = new jsPDF({\n            orientation: orient,\n            format: [img.width, img.height]\n        })\n        doc.addImage(img.data, 'JPEG', 0, 0, img.width, img.height)\n        doc.save(\"drawing.pdf\");\n\n        // The following code uses canvas2pdf which is not working\n        // Two ways to fix:\n        // 1) Fix the canvas2Pdf and use pdfkit\n        // 2) Use jsPdf which also provide html canvas like API\n        //\n        // In either case we need to change the JSPlatform code to \n        // not use Path2D class as it is marked as experimental\n        //\n        ////Create a new PDF canvas context.\n        //var ctx = new window.canvas2pdf.PdfContext(window.blobStream());\n        //\n        ////draw your canvas like you would normally\n        ////ctx.fillStyle='yellow';\n        ////ctx.fillRect(100,100,100,100);\n        //// more canvas drawing, etc...\n        //window.Module.drawCanvasForExport(ctx, 0, 0);\n\n        ////convert your PDF to a Blob and save to file\n        //ctx.stream.on('finish', function () {\n        //    var blob = ctx.stream.toBlob('application/pdf');\n        //    FileSaver.saveAs(blob, \"drawing.pdf\");\n        //});\n        //ctx.end();\n    }\n    const exportFile = (format) => {\n        console.log(\"export \", format);\n        setOpen(false)\n\n        if (format == \"pdf\") {\n            exportPdf();\n        } else if (format == \"png\" || format == \"jpeg\") {\n            var img = canvas.exportToImage(format);\n            FileSaver.saveAs(img.data, \"drawing.\" + format);\n        } else if (format == \"svg\") {\n            var content = window.Module.getSvg();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.svg\");\n        } else if (format == \"lekh\") {\n            var content = window.Module.getLekh();\n            var blob = new Blob([content], {type: \"text/plain;charset=utf-8\"});\n            FileSaver.saveAs(blob, \"drawing.lekh\");\n        }\n    }\n\n    return (\n        <Grid container>\n            <AppBar className=\"HeaderSection\" position='static' color='transparent' style={{ background: 'transparent', boxShadow: 'none' }}>\n                <Toolbar>\n                    <IconButton className=\"HeaderMenuIcon\" color=\"inherit\" aria-label=\"menu\" onClick={(e) => handleClick(e)}>\n                        <MenuIcon />\n                    </IconButton>\n                    <Menu\n                        onClose={() => setOpen(false)}\n                        open={open}\n                        value={value}\n                        PaperProps={{\n                            style: {\n                                width: 200,\n                                marginTop: 40\n                            },\n                        }}\n                    >\n                        <NestedMenuItem\n                            style={{ left: '15px' }}\n                            label=\"Export\"\n                            onClick={() => handleMenuClick('export')}\n                            parentMenuOpen={open}\n                            className=\"subIcon\"\n                            key=\"export\"\n                        >\n                            {\n                                subOptions.map((subOption, index) => (\n                                    <MenuItem key={index} onClick={()=>exportFile(subOption.id)}>{subOption.name}</MenuItem>\n                                ))}\n                        </NestedMenuItem>\n                        {options?.map((option, index) => {\n                            var checked = null;\n                            if ((option.id == \"snap\" && snap) || (option.id == \"grid\" && grid)) {\n                                checked = <span className={classes.checkIcon}><CheckIcon /></span>;\n                            }\n                            return (\n                                <div key={option.id}>\n                                    { checked }\n                                    <MenuItem style={{ left: '15px' }} value={option.name} \n                                        onClick={() => handleMenuClick(option.id)} key={option.id}>\n                                        {option.name}\n                                    </MenuItem>\n                                </div>\n                            )\n                        })}\n                    </Menu>\n                </Toolbar>\n            </AppBar>\n        </Grid>\n    )\n}\n\nexport default AppMenu;\n","import React from 'react';\n\nconst FooterStyle = {\n\n    footer: {\n        justifyContent: 'center',\n        display: 'flex',\n      },\n      backClass:{\n        border: '1px solid',\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        margin: '13px 10px',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      countClass:{\n        border: '1px solid',\n        margin: '13px 10px',\n        width: '173px',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        backgroundColor: '#fff',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        display:'flex',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      valueClass:{\n        margin: '15px 0px',\n        width:'45px',\n        textAlign: 'center',\n      },\n      iconClass:{\n        fontSize:'22px',\n        padding: '8px 8px'\n      },\n      countBtn:{\n        minWidth:'64px',\n        padding: 0,\n      }\n}\n\nexport default FooterStyle;","import React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport Style from './FooterStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport AddIcon from '@material-ui/icons/Add';\nimport canvas from '../Canvas'\n\nconst useStyles = makeStyles(Style);\nconst Footer = () => {\n    const classes = useStyles();\n    const [count, setCount] = useState(100);\n\n    /*\n     * Count Increase\n    */\n    const handleCount = () => {\n        var curCount = count - 10;\n        if (curCount < 10) {\n            curCount = 5;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    /*\n     * Count Decrease\n    */\n    const handleAddCount = () => {\n        var curCount = 0;\n        if (count < 10) {\n            curCount = 10;\n        } else {\n            curCount = count + 10;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleUndo = () => {\n        window.Module.inputReceiver().undo();\n        canvas.draw();\n    }\n\n    const handleRedo = () => {\n        window.Module.inputReceiver().redo();\n        canvas.draw();\n    }\n\n    return (\n        <>\n        <div className=\"undo-redo-buttons\">\n            <Button className=\"resButton\"><ReplayIcon className={classes.iconClass} onClick={() => handleUndo()}/></Button>\n            <Button className=\"resButton\"><RefreshIcon className={classes.iconClass} onClick={() => handleRedo()}/> </Button>\n        </div>\n        <div className='zoom-info'>\n            <Button className={classes.countBtn}><RemoveIcon className={classes.iconClass} onClick={() => handleCount()} /></Button>\n            <div className={classes.valueClass}> {count}% </div> \n            <Button className={classes.countBtn}><AddIcon className={classes.iconClass} onClick={() => handleAddCount()} /></Button>\n        </div>\n        </>\n    );\n}\n\nexport default Footer;","const SideBarStyle = {\n    sideBar: {\n        boxShadow:'0 0 0 50px transparent',\n        background: 'white',\n        borderRadius: '10px',\n        width: '55px',\n        display: 'inline-block',\n        margin:'0 15px',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n    },\n    sideBarMenu: {\n        padding: '11px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    menuIcons:{\n        marginBottom:10\n    },\n    menuItem:{\n        textAlign: 'center',\n        fontSize: '13px'\n    },\n    sideMenuIcons:{\n        textAlign:'center',\n        fontSize: '14px'\n    },\n    changeColor:{\n        '&:hover':{\n            cursor:'pointer'\n        }\n    },\n    spaceBwt:{\n    height: '45px',\n  },\n  spaceBwtRound:{\n    height: '47px',\n    border: '1px solid #dfe3e8',\n\n  }\n}\n\nexport default SideBarStyle","import React, { useRef, useEffect } from 'react'\nimport canvas from './Canvas'\n\nconst LibCell = props => {\n  \n  const canvasRef = useRef(null)\n  var dpr = window.devicePixelRatio || 1;\n  var width = props.size;\n  var height = props.size;\n  \n  useEffect(() => {\n    const canvasElement = canvasRef.current\n    \n    canvasElement.width = width * dpr;\n    canvasElement.height = height * dpr;\n    canvasElement.style.width = width + \"px\";\n    canvasElement.style.height = height + \"px\";\n    const context = canvasElement.getContext('2d')  \n    context.scale(dpr, dpr);\n    canvas.drawCell(props.category, props.num, props.size, context);\n  }, [])\n  \n  return <canvas ref={canvasRef} {...props} width={width+\"px\"} height={height+\"px\"}/>\n}\n\nexport default LibCell","import React from 'react'\nimport { FaShapes, FaMousePointer, FaHandRock, FaEdit, FaEraser, FaPen } from 'react-icons/fa';\nimport { RiDeleteBin5Line, RiCheckboxBlankCircleFill } from \"react-icons/ri\";\n\nimport LibCell from './common/LibCell'\n\n\nconst CircleColors = [\n    \n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"red\" id='0' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"orange\" id='1' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"teal\" id='2' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"green\" id='3' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"yellow\" id='4' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"tan\" id='5' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"brown\" id='6' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"grey\" id='7' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"pink\" id='8' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"purple\" id='9' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"black\" id='10' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"violet\" id='11' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"plum\" id='12' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"skyblue\" id='13' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"cyan\" id='14' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"blue\" id='15' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkcyan\" id='16' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"darkorchid\" id='17' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"gold\" id='18' />,\n    <RiCheckboxBlankCircleFill size=\"2em\" color=\"royalblue\" id='11' />,\n]\n\nconst ShapesList = [\n    <LibCell category={0} num={0} drag=\"true\" id=\"0\" size={45}/>,\n    <LibCell category={0} num={2} drag=\"true\" id=\"1\" size={45}/>,\n    <LibCell category={0} num={3} drag=\"true\" id=\"2\" size={45}/>,\n    <LibCell category={0} num={5} drag=\"true\" id=\"3\" size={45}/>,\n    <LibCell category={0} num={6} drag=\"true\" id=\"4\" size={45}/>,\n    <LibCell category={0} num={7} drag=\"true\" id=\"5\" size={45}/>,\n    <LibCell category={0} num={8} drag=\"true\" id=\"6\" size={45}/>,\n    <LibCell category={1} num={1} drag=\"true\" id=\"7\" size={45}/>,\n    <LibCell category={1} num={2} drag=\"true\" id=\"8\" size={45}/>,\n    <LibCell category={1} num={5} drag=\"true\" id=\"9\" size={45}/>,\n    <LibCell category={1} num={6} drag=\"true\" id=\"10\" size={45}/>,\n    <LibCell category={1} num={10} drag=\"true\" id=\"11\" size={45}/>,\n    <LibCell category={1} num={20} drag=\"true\" id=\"12\" size={45}/>,\n    <LibCell category={2} num={0} drag=\"true\" id=\"13\" size={45}/>,\n    <LibCell category={2} num={4} drag=\"true\" id=\"14\" size={45}/>,\n    <LibCell category={3} num={0} drag=\"true\" id=\"15\" size={45}/>,\n    <LibCell category={3} num={4} drag=\"true\" id=\"16\" size={45}/>,\n    <LibCell category={3} num={5} drag=\"true\" id=\"17\" size={45}/>,\n    <LibCell category={3} num={6} drag=\"true\" id=\"18\" size={45}/>,\n    <LibCell category={3} num={7} drag=\"true\" id=\"19\" size={45}/>,\n    <LibCell category={3} num={8} drag=\"true\" id=\"20\" size={45}/>,\n    <LibCell category={4} num={0} drag=\"true\" id=\"21\" size={45}/>,\n    <LibCell category={4} num={1} drag=\"true\" id=\"22\" size={45}/>,\n    <LibCell category={4} num={2} drag=\"true\" id=\"23\" size={45}/>,\n]\n\nconst SideBarMenuItems = [\n    {\n        id: 1,\n        icon: <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Select',\n    },\n    {\n        id: 2,\n        icon: <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Move',\n    },\n    {\n        id: 3,\n        icon: <FaPen size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: 4,\n        icon: <FaEdit size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Smart Draw',\n        subMenus:CircleColors\n    },\n    {\n        id: 5,\n        icon: <FaEraser size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase',\n    },\n    {\n        id: 6,\n        icon: <RiDeleteBin5Line size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Erase All',\n    },\n    {\n        id: 7,\n        icon: <FaShapes size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Shapes',\n        subMenus: ShapesList\n    },\n\n]\nexport default SideBarMenuItems","var drawStyle = {\n    colorIndex: 10,\n    dashIndex: 0,\n    widthIndex: 0\n}\n\ndrawStyle.setColor = function(idx, color) {\n    drawStyle.colorIndex = idx;\n    var carr = colorNameToVal(color)\n    window.Module.setStrokeColor(carr[0], carr[1], carr[2], carr[3]);\n}\n\ndrawStyle.setDashIndex = function(idx) {\n    drawStyle.dashIndex = idx;\n    window.Module.setDashType(idx);\n}\n\ndrawStyle.setWidthIndex = function(idx) {\n    drawStyle.widthIndex = idx;\n    window.Module.inputReceiver().currentStyle().setStrokeWidth((idx + 1) * 2);\n}\n\nfunction colorNameToVal(color)\n{\n    var colors = {\"aliceblue\": [240, 248, 255, 255], \"antiquewhite\": [250, 235, 215, 255], \"aqua\": [0, 255, 255, 255], \"aquamarine\": [127, 255, 212, 255], \"azure\": [240, 255, 255, 255], \"beige\": [245, 245, 220, 255], \"bisque\": [255, 228, 196, 255], \"black\": [0, 0, 0, 255], \"blanchedalmond\": [255, 235, 205, 255], \"blue\": [0, 0, 255, 255], \"blueviolet\": [138, 43, 226, 255], \"brown\": [165, 42, 42, 255], \"burlywood\": [222, 184, 135, 255], \"cadetblue\": [95, 158, 160, 255], \"chartreuse\": [127, 255, 0, 255], \"chocolate\": [210, 105, 30, 255], \"coral\": [255, 127, 80, 255], \"cornflowerblue\": [100, 149, 237, 255], \"cornsilk\": [255, 248, 220, 255], \"crimson\": [220, 20, 60, 255], \"cyan\": [0, 255, 255, 255], \"darkblue\": [0, 0, 139, 255], \"darkcyan\": [0, 139, 139, 255], \"darkgoldenrod\": [184, 134, 11, 255], \"darkgray\": [169, 169, 169, 255], \"darkgreen\": [0, 100, 0, 255], \"darkkhaki\": [189, 183, 107, 255], \"darkmagenta\": [139, 0, 139, 255], \"darkolivegreen\": [85, 107, 47, 255], \"darkorange\": [255, 140, 0, 255], \"darkorchid\": [153, 50, 204, 255], \"darkred\": [139, 0, 0, 255], \"darksalmon\": [233, 150, 122, 255], \"darkseagreen\": [143, 188, 143, 255], \"darkslateblue\": [72, 61, 139, 255], \"darkslategray\": [47, 79, 79, 255], \"darkturquoise\": [0, 206, 209, 255], \"darkviolet\": [148, 0, 211, 255], \"deeppink\": [255, 20, 147, 255], \"deepskyblue\": [0, 191, 255, 255], \"dimgray\": [105, 105, 105, 255], \"dodgerblue\": [30, 144, 255, 255], \"firebrick\": [178, 34, 34, 255], \"floralwhite\": [255, 250, 240, 255], \"forestgreen\": [34, 139, 34, 255], \"fuchsia\": [255, 0, 255, 255], \"gainsboro\": [220, 220, 220, 255], \"ghostwhite\": [248, 248, 255, 255], \"gold\": [255, 215, 0, 255], \"goldenrod\": [218, 165, 32, 255], \"gray\": [128, 128, 128, 255], \"green\": [0, 128, 0, 255], \"greenyellow\": [173, 255, 47, 255], \"honeydew\": [240, 255, 240, 255], \"hotpink\": [255, 105, 180, 255], \"indianred \": [205, 92, 92, 255], \"indigo\": [75, 0, 130, 255], \"ivory\": [255, 255, 240, 255], \"khaki\": [240, 230, 140, 255], \"lavender\": [230, 230, 250, 255], \"lavenderblush\": [255, 240, 245, 255], \"lawngreen\": [124, 252, 0, 255], \"lemonchiffon\": [255, 250, 205, 255], \"lightblue\": [173, 216, 230, 255], \"lightcoral\": [240, 128, 128, 255], \"lightcyan\": [224, 255, 255, 255], \"lightgoldenrodyellow\": [250, 250, 210, 255], \"lightgrey\": [211, 211, 211, 255], \"lightgreen\": [144, 238, 144, 255], \"lightpink\": [255, 182, 193, 255], \"lightsalmon\": [255, 160, 122, 255], \"lightseagreen\": [32, 178, 170, 255], \"lightskyblue\": [135, 206, 250, 255], \"lightslategray\": [119, 136, 153, 255], \"lightsteelblue\": [176, 196, 222, 255], \"lightyellow\": [255, 255, 224, 255], \"lime\": [0, 255, 0, 255], \"limegreen\": [50, 205, 50, 255], \"linen\": [250, 240, 230, 255], \"magenta\": [255, 0, 255, 255], \"maroon\": [128, 0, 0, 255], \"mediumaquamarine\": [102, 205, 170, 255], \"mediumblue\": [0, 0, 205, 255], \"mediumorchid\": [186, 85, 211, 255], \"mediumpurple\": [147, 112, 216, 255], \"mediumseagreen\": [60, 179, 113, 255], \"mediumslateblue\": [123, 104, 238, 255], \"mediumspringgreen\": [0, 250, 154, 255], \"mediumturquoise\": [72, 209, 204, 255], \"mediumvioletred\": [199, 21, 133, 255], \"midnightblue\": [25, 25, 112, 255], \"mintcream\": [245, 255, 250, 255], \"mistyrose\": [255, 228, 225, 255], \"moccasin\": [255, 228, 181, 255], \"navajowhite\": [255, 222, 173, 255], \"navy\": [0, 0, 128, 255], \"oldlace\": [253, 245, 230, 255], \"olive\": [128, 128, 0, 255], \"olivedrab\": [107, 142, 35, 255], \"orange\": [255, 165, 0, 255], \"orangered\": [255, 69, 0, 255], \"orchid\": [218, 112, 214, 255], \"palegoldenrod\": [238, 232, 170, 255], \"palegreen\": [152, 251, 152, 255], \"paleturquoise\": [175, 238, 238, 255], \"palevioletred\": [216, 112, 147, 255], \"papayawhip\": [255, 239, 213, 255], \"peachpuff\": [255, 218, 185, 255], \"peru\": [205, 133, 63, 255], \"pink\": [255, 192, 203, 255], \"plum\": [221, 160, 221, 255], \"powderblue\": [176, 224, 230, 255], \"purple\": [128, 0, 128, 255], \"rebeccapurple\": [102, 51, 153, 255], \"red\": [255, 0, 0, 255], \"rosybrown\": [188, 143, 143, 255], \"royalblue\": [65, 105, 225, 255], \"saddlebrown\": [139, 69, 19, 255], \"salmon\": [250, 128, 114, 255], \"sandybrown\": [244, 164, 96, 255], \"seagreen\": [46, 139, 87, 255], \"seashell\": [255, 245, 238, 255], \"sienna\": [160, 82, 45, 255], \"silver\": [192, 192, 192, 255], \"skyblue\": [135, 206, 235, 255], \"slateblue\": [106, 90, 205, 255], \"slategray\": [112, 128, 144, 255], \"snow\": [255, 250, 250, 255], \"springgreen\": [0, 255, 127, 255], \"steelblue\": [70, 130, 180, 255], \"tan\": [210, 180, 140, 255], \"teal\": [0, 128, 128, 255], \"thistle\": [216, 191, 216, 255], \"tomato\": [255, 99, 71, 255], \"turquoise\": [64, 224, 208, 255], \"violet\": [238, 130, 238, 255], \"wheat\": [245, 222, 179, 255], \"white\": [255, 255, 255, 255], \"whitesmoke\": [245, 245, 245, 255], \"yellow\": [255, 255, 0, 255], \"yellowgreen\": [154, 205, 50, 255]};\n    if (typeof colors[color.toLowerCase()] != 'undefined')\n        return colors[color.toLowerCase()];\n    return [255, 255, 255, 255]\n}\n\nexport default drawStyle;\n","import React from 'react'\nimport { FaCheckCircle } from \"react-icons/fa\";\n\nconst ColorList = (props) => {\n    const {colors} = props;\n    return colors?.map((color, index)=>{\n        var item = null;\n        if (index == props.selectedIndex) {\n            item = <FaCheckCircle size=\"2em\" color={color.props.color}/>;\n        } else {\n            item = color;\n        }\n        return (\n            <span onClick={() => props.onColorChange(index, color.props.color)}>\n              {item}\n            </span>\n        )\n    })\n}\n\nexport default ColorList;\n","var Config = {\n    mediaQuery: \"only screen and (max-width: 640px)\"\n}\n\nexport default Config;","import React, { useState } from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport Style from './SideBarMenu/SideBarStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AiOutlineMinus, AiOutlineDash, AiOutlineSmallDash } from \"react-icons/ai\";\nimport { RiCheckboxBlankCircleFill } from \"react-icons/ri\";\nimport drawStyle from './DrawStyle'\nimport ColorList from './ColorList'\nimport Config from './Config'\n\nconst useStyles = makeStyles(Style);\n\nconst StrokeStyle = (props) => {\n    const classes = useStyles();\n\n    const [colorIndex, setColorIndex] = useState(drawStyle.colorIndex)\n    const [dashIndex, setDashIndex] = useState(drawStyle.dashIndex)\n    const [widthIndex, setWidthIndex] = useState(drawStyle.widthIndex)\n\n    const widthCircles = [\n        {icon: <RiCheckboxBlankCircleFill size=\"1em\" id=\"0\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.2em\" id=\"1\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.4em\" id=\"2\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.6em\" id=\"3\" />},\n        {icon: <RiCheckboxBlankCircleFill size=\"1.8em\" id=\"4\" />},\n    ]\n\n    const dashLines = [\n        {icon: <AiOutlineMinus size=\"2.2em\" id=\"0\" />},\n        {icon:<AiOutlineSmallDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"1\"  />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}   id=\"2\" />},\n        {icon: <AiOutlineDash size=\"2em\" style={{marginBottom:'3px'}}  id=\"3\" />},\n    ]\n    \n    const onColorChange = (index, color) =>{\n        setColorIndex(index)\n        drawStyle.setColor(index,color);\n    }\n\n    const onDashChange = (index, iconsId) => {\n        setDashIndex(iconsId)\n        drawStyle.setDashIndex(index);\n    }\n\n    const onWidthChange = (index, iconsId) => {\n        setWidthIndex(iconsId)\n        drawStyle.setWidthIndex(index);\n    }\n\n    const getDashLines = () => {\n                      return ( \n                          <div className={classes.spaceBwtRound}>\n                        {\n                           dashLines.map((dashLine, index) =>{\n                                return(\n                                    <span key={index} className={`${dashLine.icon.props.id == dashIndex ? \"changeBorder\" : \"\"} `} \n                                        onClick={() => onDashChange(index, dashLine.icon.props.id) }>\n                                        {dashLine.icon}\n                                    </span>\n                                )\n                            })\n                        }\n                        </div>\n                      )\n    }\n\n    const getWidthCircles = () => {\n        return ( \n            <div className={classes.spaceBwt} >\n          {\n             widthCircles.map((wcircle, index) =>{\n                  return(\n                      <span key={index} className={`${wcircle.icon.props.id == widthIndex ? \"changeBorderRound\" : \"defaultBorder\"} `} \n                        onClick={() => onWidthChange(index, wcircle.icon.props.id) }>\n                          {wcircle.icon}\n                      </span>\n                  )\n              })\n          }\n          </div>\n        )\n    }\n    var {open, anchorEl, placement, subMenuIcons} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition\n            >\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"smart_draw_paper smart_draw_res\">\n                            {getWidthCircles()}\n                            {getDashLines()}\n                            <ColorList colors={subMenuIcons} selectedIndex={colorIndex} \n                                onColorChange={onColorChange}/>\n                         </Paper>\n                    </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default StrokeStyle;\n","import canvas from './Canvas'\n\nvar inputMode = {\n    mode: 4,\n}\n\ninputMode.inDrawMode = function() {\n    return inputMode.mode == 3 || inputMode.mode == 4;\n}\n\ninputMode.setMode = function(mode) {\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    if (mode <= 5) {\n        inputMode.mode = mode;\n    }\n    if (mode == 1) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        canvasElement.style.cursor = 'auto';\n    } else if (mode == 2) {\n        canvasElement.style.cursor = 'all-scroll';\n    } else if (mode == 3) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(false);\n        //canvasElement.style.cursor = 'url(\"/pen-solid.svg\") 0 20, auto';\n        canvasElement.style.cursor = 'auto';\n    } else if (mode == 4) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(true);\n        //canvasElement.style.cursor = 'url(\"/pen-solid.svg\") 0 20, auto';\n        canvasElement.style.cursor = 'auto';\n    } else if (mode == 5) {\n        canvasElement.style.cursor = 'url(\"/eraser-solid.svg\"), auto';\n    } else if (mode == 6) {\n        window.Module.eraseAll();\n        canvas.draw();\n    }\n}\n\nexport default inputMode;\n","import React from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\nimport canvas from './Canvas'\nimport Draggable from 'react-draggable';\nimport Config from './Config'\n\nconst ShapeLibrary = (props) => {\n    const onDragStop = (event, subMenu) => {\n        var categ = subMenu.props.category;\n        var num = subMenu.props.num;\n        var x = canvas.maprx(event.pageX);\n        var y = canvas.mapry(event.pageY);\n        window.Module.libraryStore().addObjectToCanvas(categ, num, x, y);\n        canvas.draw();\n    }\n    const getSubIcons = (subMenuIcons) =>{\n        return subMenuIcons?.map((subMenu,index)=>{\n            return (\n                <Draggable key={index} position={{x: 0, y: 0}} onStop={(event) => onDragStop(event, subMenu)}>\n                  <div style={{display:\"inline-block\"}}>\n                    {subMenu}\n                  </div>\n                </Draggable>\n            )\n        })\n    }\n\n    var {open, anchorEl, placement, subMenuIcons} = props;\n    if (window.matchMedia(Config.mediaQuery).matches) {\n        placement = \"top\";\n    }\n    return (\n        <div>\n            <Popper open={open} anchorEl={anchorEl} placement={placement} transition>\n                {({ TransitionProps }) => (\n                    <Fade {...TransitionProps} timeout={350}>\n                        <Paper className=\"popper_paper poper_paper_res\">\n                            {getSubIcons(subMenuIcons)}\n                         </Paper>\n                     </Fade>\n                )}\n            </Popper>\n        </div>\n    )\n}\n\nexport default ShapeLibrary;\n","import React from 'react'\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Style from './SideBarStyle';\nimport SideBarMenuItems from \"../../Constant\"\nimport StrokeStyle from '../StrokeStyle'\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport inputMode from '../InputMode.js'\nimport ShapeLibrary from '../ShapeLibrary'\n\nconst useStyles = makeStyles(Style);\n\nconst isSubMenus = (sidebar) =>{\n    if(Object.keys(sidebar).length > 0 && \"subMenus\" in sidebar)\n    {\n        return true;\n    }\n    return false;\n}\nconst SideBarMenu = () => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [open, setOpen] = React.useState(false);\n    const [placement, setPlacement] = React.useState();\n    const [subMenuIcons, setSubMenuIcons] = React.useState();\n    const [selectedItemId, setSelectedItemId] = React.useState(inputMode.mode);\n    const [selectedRestMenuItem,setSelectedRestMenuItem] = React.useState();\n    const classes = useStyles();\n    \n    const handleClick = (event, subMenus, newPlacement,id) => {\n        if (id == 6) {\n            // Erase All\n            inputMode.setMode(id);\n            return;\n        }\n        setAnchorEl(event.currentTarget);\n        //setOpen((prev) => placement !== newPlacement || !prev);\n        if(id === selectedItemId) {\n            setOpen(!open);\n        }else {\n            setOpen(true);\n        }\n        setPlacement(newPlacement);\n        setSubMenuIcons(subMenus)\n        setSelectedItemId(id)\n        let selectedItem = (id - 1);\n        setSelectedRestMenuItem(selectedItem)\n        inputMode.setMode(id);\n    };\n    \n    const getIconAndName = (sidebar, classes) => {\n        const {icon, name} = sidebar;\n        const {menuItem} = classes; \n        return (\n            <div>\n                <div className={menuItem + ' ' + 'sideMenuIcons'}>\n                    {icon}\n                </div>\n                <div className={menuItem +' '+ 'menuItems'}>{name}</div>\n            </div>\n        )\n    }\n    return (\n        <ClickAwayListener onClickAway={() => setOpen(false)}>\n        <div>\n           { (selectedItemId === 3 || selectedItemId === 4) && <StrokeStyle\n                open={open}\n                anchorEl={anchorEl}\n                placement={placement}\n                subMenuIcons ={subMenuIcons}\n                setOpenState={()=>setOpen(!open)}\n                close={() => console.log('close')}\n                selectedItemId={selectedItemId}\n            /> }\n            { selectedItemId === 7 && <ShapeLibrary\n                open={open}\n                anchorEl={anchorEl}\n                placement=\"right-end\"\n                subMenuIcons ={subMenuIcons}\n            /> }\n            \n            <div className={`${classes.sideBar} side_menus`}>\n                {SideBarMenuItems.map((sidebar, index) => {\n                    if (isSubMenus(sidebar)) {\n                        return (\n                            <div className={sidebar.id === selectedItemId ? classes.sideBarMenu +' '+ 'sideBarMenu active' : classes.sideBarMenu +' '+ 'sideBarMenu'} key={index} onClick={(event)=>handleClick(event, sidebar.subMenus,'right',sidebar.id)} >\n                                {getIconAndName(sidebar, classes)}\n                            </div>\n                        )\n                    }\n                    return (\n                        <div className={index != 5 && index === selectedRestMenuItem ? classes.sideBarMenu +' '+ 'sideBarMenu active' : classes.sideBarMenu +' '+ 'sideBarMenu'} key={index} onClick={(event)=>handleClick(event, sidebar.subMenus,'right',sidebar.id)}>\n                           {getIconAndName(sidebar, classes)}\n                        </div>\n                    )\n                })}\n\n            </div>\n        </div>\n        </ClickAwayListener>\n        \n    )\n}\nexport default SideBarMenu","import React from 'react'\n\nconst  Content = () =>  {\n    return (\n        <div className=\"canvasContainer\">\n            <div id=\"viewport\" className=\"viewport\">\n                <canvas id=\"gridCanvas\" className=\"canvasGridClass\" />\n                <canvas id=\"drawCanvas\" className=\"canvasClass\" />\n            </div>\n          <canvas id=\"transparentPanel\" className=\"viewport\" />\n        </div>\n    )\n}\n\nexport default Content;\n","function reload() {\n    window.location.reload();\n}\n\nconst Layover = (props) => {\n    // init, disconnected, notfound, prompt\n    var item = null;\n    if (props.state == \"init\") {\n        item = <div className=\"layover-box\">Loading..</div>;\n    } else if (props.state == \"disconnected\") {\n        item = <div className=\"layover-box\">\n            <p><span>Disconnected from server </span><a href=\"#\" onClick={reload}>Reconnect</a></p>\n            </div>;\n    } else if (props.state == \"notfound\") {\n        item = <div className=\"layover-box\">\n            <span>Requested board does not exist</span>\n            <a href=\"/?_new=true\">Start a collaborative board</a>\n            <a href=\"/?offline=true\">Start a offline board</a>\n            </div>;\n    } else if (props.state == \"prompt\") {\n        item = <div className=\"layover-box\">\n            <a href=\"/?_new=true\">Start a collaborative board</a>\n            <a href=\"/?offline=true\">Start a offline board</a>\n            </div>;\n    } else {\n        item = <div className=\"layover-box\">\n            <span>Something went wrong</span>\n            <a href=\"#\" onClick={reload}>Reload</a>\n            <a href=\"/?offline=true\">Start a offline board</a>\n            </div>;\n    }\n\n    return (\n        <div className=\"layover-col\">\n            {item}\n        </div>\n    )\n}\n\nexport default Layover\n","import $ from 'jquery'\nimport canvas from './Canvas'\n\nvar util = { };\n\n// Adding into window as this is being used by c++ code\nwindow.generateUUID = function() {\n    var d = new Date().getTime();//Timestamp\n    var d2 = (window.performance && window.performance.now && (window.performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}\n\nasync function loadTemplate(name) {\n    await fetch(name)\n      .then(response => response.json())\n      .then(response => {\n        window.Module.libraryStore().initObjects(JSON.stringify(response));\n      })\n}\n  \nasync function loadAll() {\n    await loadTemplate(\"templates/v4/templates.json\")\n    await loadTemplate(\"templates/v4/basic.json\")\n    await loadTemplate(\"templates/v4/flowchart.json\")\n    await loadTemplate(\"templates/v4/arrow.json\")\n    await loadTemplate(\"templates/v4/misc.json\")\n    await loadTemplate(\"templates/v4/misc2.json\")\n    await loadTemplate(\"templates/v4/connection_arrows.json\")\n}\n  \nutil.loadBasicTemplates = function(columns) {\n    loadAll()\n      .then(function () {\n        window.Module.libraryStore().init(columns);\n        window.Module.libraryStore().onDisplaySettingChange();\n        //collectAndPopulateShapeLibrary(columns);\n      });\n}\n  \nasync function collectAndPopulateShapeLibrary(columns) {\n    const shapeLibrary = await collectShapeLibrary(columns);\n    populateShapeLibrary(shapeLibrary, columns);\n    drawShapes(shapeLibrary, columns);\n}\n  \nasync function collectShapeLibrary(columns) {\n    var cc = window.Module.libraryStore().categoryCount();\n    const libraryDetails = {};\n    for (var i = 0; i < cc; i++) {\n      var name = window.Module.getCategoryName(i);\n      if (!libraryDetails[name]) {\n        libraryDetails[name] = [];\n      }\n      var rc = window.Module.libraryStore().rowCount(i);\n      for (var j = 0; j < rc; j++) {\n        for (var k = 0; k < columns; k++) {\n          if (window.Module.libraryStore().hasObject(i, j, k)) {\n            var nm = window.Module.getObjectName(i, j, k);\n            libraryDetails[name].push({\n              category: i,\n              row: j,\n              col: k,\n              nm\n            })\n            // console.log(nm);\n          }\n        }\n      }\n    }\n    return libraryDetails;\n}\n  \nfunction populateShapeLibrary(shapeLib, columns) {\n    let colKeys = Object.keys(shapeLib);\n    for (let colKey of colKeys) {\n      const colData = shapeLib[colKey];\n      let d = `<li class=\"nav-item left-pane-li\">\n      <a class=\"nav-link\" href=\"#\">${colKey}</a>\n      <div id=\"stdiv-${colKey}\"></div></li>`;\n      $(\"#shapeLibUl\").append(d);\n    }\n}\n  \nfunction drawShapes(shapeLib, columns) {\n    let colKeys = Object.keys(shapeLib);\n    for (let colKey of colKeys) {\n      const colData = shapeLib[colKey];\n      const divEl = document.getElementById(`stdiv-${colKey}`);\n      for (let data of colData) {\n        const id = `st${data.category}${data.row}${data.col}`;\n        var canv = document.createElement(\"canvas\");\n        canv.setAttribute('width', 50);\n        canv.setAttribute('height', 50);\n        canv.setAttribute('id', id);\n        canv.setAttribute('data-category', data.category);\n        canv.setAttribute('data-row', data.row);\n        canv.setAttribute('data-col', data.col);\n        canv.classList.add('draggable');\n        canv.drop = function(x, y) {\n          var objNum = columns * data.row + data.col;\n          window.Module.libraryStore().addObjectToCanvas(data.category, objNum, x, y);\n          canvas.draw();\n        }\n        divEl.appendChild(canv);\n        //\n        const panel = canv;\n        const ctx = panel.getContext('2d');\n        window.Module.drawCell(data.category, data.row, data.col, 35, 25, 25, ctx);\n  \n        $(canv).draggable({\n          helper: \"clone\"\n        });\n      }\n    }\n}\n  \nexport default util;\n  ","import $ from 'jquery';\nimport canvas from './Canvas'\nimport inputMode from './InputMode'\n\nvar AppInput = { };\n\nvar drawPoints = [];\nvar drawing = false;\nvar transparentPanel = null;\n\nconst TextAlignHorizontalDefault = 0;\nconst TextAlignHorizontalCenter = 1;\nconst TextAlignHorizontalLeft = 2;\nconst TextAlignHorizontalRight = 3;\n\nfunction initShapeTextEditor() {\n  var rect = window.Module.getTextEditRect();\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n\n  var tid = Math.random() + \"t\";\n  var tnode = $(\"<textarea id='\" + tid + \"'></textarea>\");\n  tnode.val(window.Module.getTextForEditing());\n  var style = window.Module.getTextEditStyle();\n  var fontSize = 15;\n  var isFLoating = window.Module.isEditingFloatingText();\n\n  var tattrs = {\n    \"resize\": \"none\",\n    \"overflow\": \"hidden\",\n    \"position\": \"absolute\",\n    \"font-sze\": fontSize + \"px\",\n    \"line-height\": fontSize + \"px\",\n    \"background-color\": \"transparent\",\n    \"left\": (rect.x)+ \"px\", \n    \"top\": (rect.y) + \"px\", \n    \"width\": rect.width + \"px\",\n    \"height\": rect.height + \"px\",\n    \"z-index\": \"2\"\n  }\n\n  switch (style.effectiveTextAlignHorizontal().value) {\n    case TextAlignHorizontalDefault:\n    case TextAlignHorizontalCenter:\n      tattrs[\"text-align\"] = \"center\";\n      break;\n    case TextAlignHorizontalLeft:\n      tattrs[\"text-align\"] = \"left\";\n      break;\n    case TextAlignHorizontalRight:\n      tattrs[\"text-align\"] = \"right\";\n      break;\n    default:\n      break;\n  }\n  tnode.css(tattrs);\n  $(\"#viewport\").append(tnode);\n  tnode.trigger(\"focus\");\n  tnode.on(\"blur\", function(e) {\n    window.Module.finishTextEditing(tnode.val());\n    tnode.remove();\n    canvas.draw();\n  });\n\n  function updateSize() {\n    var text = tnode.val();\n    var sz = window.Module.getTextEditSize(text, isFLoating);\n    if (sz.height == 0) {\n      sz.height = fontSize;\n    }\n    if (sz.width < 50) {\n      sz.width = 50;\n    }\n    sz.height += fontSize / 2;\n    tnode.css(\"top\", (cy - sz.height / 2) + \"px\");\n    tnode.css(\"height\", sz.height + \"px\");\n    if (isFLoating) {\n      var width = sz.width + 150;\n      tnode.css(\"width\", width + \"px\");\n      tnode.css(\"left\", (cx - width / 2) + \"px\");\n    }\n    //console.log(sz);\n  }\n \n  tnode.on('change keyup paste', updateSize);\n  updateSize();\n}\n\nconst drawTemp = function() {\n  if (transparentPanel == null) {\n    transparentPanel = document.getElementById('transparentPanel')\n  }\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.clearRect(0, 0, transparentPanel.width, transparentPanel.height);\n\n  if (drawPoints.length > 0) {\n    window.Module.setCurrentStyleToCtx(ctx);\n    ctx.beginPath();\n    var dp = drawPoints[0];\n    ctx.moveTo(dp.x, dp.y);\n    \n    for (var i = 0; i < drawPoints.length; i++) {\n      ctx.lineTo(drawPoints[i].x, drawPoints[i].y);  \n    }\n    \n    ctx.stroke(); \n  }\n}\n\nAppInput.onResize = function() {\n  transparentPanel = null;\n}\n\nAppInput.click = function(x, y) {\n    var pt = {x: x, y: y }\n    window.Module.inputFilter().tap(pt, 1);\n    canvas.draw();\n}\n\nAppInput.dbclick = function(x, y) {\n    var pt = {x: x, y: y }\n    window.Module.inputFilter().tap(pt, 2);\n    canvas.draw();\n    if (window.Module.inputReceiver().needTextEditing()) {\n        initShapeTextEditor()\n    }\n}\n\nAppInput.down = function(x, y) {\n}\n\nAppInput.up = function(x, y) {\n}\n\nAppInput.move = function(x, y) {\n}\n\nAppInput.drag = function(x, y, kind) {\n    //console.log(x + \", \" + y + \"  ==  \" + kind);\n    if (inputMode.mode == 2) {\n        dragMoveMode(x, y, kind);\n    } else {\n        dragNative(x, y, kind);\n    }\n}\n\nfunction dragNative(x, y, kind) {\n    var it = window.Module.InputType.START;\n    if (kind == 1) {\n        it = window.Module.InputType.OTHER;\n    } else if (kind == 2) {\n        it = window.Module.InputType.END\n    }\n    var pt = {x: x, y: y }\n    var mpt = {x: canvas.maprx(x), y: canvas.mapry(y)};\n\n    if (it == window.Module.InputType.START && inputMode.inDrawMode()) {\n      if (window.Module.willDrawAt(mpt)) {\n        drawing = true;\n      }\n    }\n\n    if (drawing) {\n      drawPoints.push(pt);\n      drawTemp();\n    } else {\n      window.Module.inputFilter().pan(pt, it);\n      canvas.draw();\n    }\n\n    if (it == window.Module.InputType.END && drawing) {\n      drawing = false;\n      flushTempDrawing();\n    }\n}\n\nfunction flushTempDrawing() {\n  if (drawPoints.length > 2) {\n    window.Module.inputFilter().pan(drawPoints[0], window.Module.InputType.START);\n    for (var i = 1; i < drawPoints.length - 1; i++) {\n      window.Module.inputFilter().pan(drawPoints[i], window.Module.InputType.OTHER);\n    }\n    var pt = drawPoints[drawPoints.length - 1];\n    window.Module.inputFilter().pan(pt, window.Module.InputType.END);\n  }\n  canvas.draw();\n  drawPoints = [];\n  drawTemp();\n}\n\nfunction dragMoveMode(x, y, kind) {\n    canvas.move(x, y, kind);\n    canvas.drawGrid();\n    canvas.draw();\n}\n\nAppInput.contextmenu = function(x, y) {\n}\n\nAppInput.enter = function(e) {\n}\n\nAppInput.leave = function(e) {\n}\n\nexport default AppInput;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport AppInput from './AppInput'\n\nvar appEvent = { };\n\nfunction attachResizeHandler() {\n  $(window).on(\"resize\", function() {\n    canvas.onResize();\n    AppInput.onResize();\n  });\n}\n\nappEvent.attachEventHandlers = function() {\n  attachResizeHandler();\n\n  var canvasElement = document.getElementById(\"transparentPanel\");\n\n  function dist(x1, y1, x2, y2) {\n    var dx = x1 - x2;\n    var dy = y1 - y2;\n    return Math.sqrt(dx*dx + dy*dy);\n  }\n\n  //var inputFilter = window.Module.inputFilter();\n  //var inputReceiver = window.Module.inputReceiver();\n  var clickTimer = null;\n  var mdown = false;\n  var moved = false;\n  var initialX = null;\n  var initialY = null;\n  var lastX = null;\n  var lastY = null;\n  var dragMinDist = 4;\n\n  var attachBeanEvents = function () {\n    window.bean.on(canvasElement, 'click', function (e) {\n      if (e.button == 2) {\n        AppInput.contextmenu(e);\n        return;\n      }\n      if (e.button != 0) {\n        return;\n      }\n      if (moved) {\n        moved = false;\n        return;\n      }\n\n      if (clickTimer != null) {\n        clearTimeout(clickTimer);\n        clickTimer = null;\n        AppInput.dbclick(e.offsetX, e.offsetY);\n      } else {\n        clickTimer = setTimeout(function () {\n          clickTimer = null;\n          AppInput.click(e.offsetX, e.offsetY);\n        }, 350);\n      }\n    });\n\n    window.bean.on(canvasElement, 'mousedown', function (e) {\n      if (e.button != 0) {\n        return;\n      }\n      initialX = e.offsetX;\n      initialY = e.offsetY;\n      mdown = true;\n      AppInput.down(initialX, initialY);\n    });\n\n    window.bean.on(canvasElement, 'mouseup', function (e) {\n      if (e.button == 0) {\n        mdown = false;\n        AppInput.up(e.offsetX, e.offsetY);\n        if (moved) {\n          AppInput.drag(e.offsetX, e.offsetY, 2);\n        }\n      }\n    });\n\n    window.bean.on(canvasElement, 'mousemove', function (e) {\n      if (mdown && e.button != 0) {\n        return;\n      }\n\n      if (!mdown) {\n        AppInput.move(e.offsetX, e.offsetY);\n        return;\n      }\n      if (moved) {\n        AppInput.drag(e.offsetX, e.offsetY, 1);\n      } else {\n        if (dist(initialX, initialY, e.offsetX, e.offsetY) >= dragMinDist) {\n          moved = true;\n          AppInput.drag(initialX, initialY, 0);\n          AppInput.drag(e.offsetX, e.offsetY, 1);\n        }\n      }\n    });\n\n    window.bean.on(canvasElement, 'mouseenter', function (e) {\n      //console.log('mouseenter');\n    });\n\n    window.bean.on(canvasElement, 'mouseleave', function (e) {\n      if (moved) {\n        AppInput.drag(e.offsetX, e.offsetY, 2);\n        moved = false;\n        mdown = false;\n      }\n    });\n\n    window.bean.on(canvasElement, 'contextmenu', function (e) {\n      console.log('contextmenu');\n    });\n\n    //bean.on(canvasElement, 'dblclick', function (e) {\n    //console.log('dblclick--' + e.timeStamp);\n    //});\n  }\n\n  var touchEndFn = function(ev) {\n    mdown = false;\n    AppInput.up(lastX, lastY);\n    if (moved) {\n      AppInput.drag(lastX, lastY, 2);\n      moved = false;\n    }\n  }\n\n  var attachTouchEvents = function() {\n    var eventLoc = function(ev) {\n      var touch = ev.targetTouches[0];\n      // FIXME: check whether to use clientX, clientY or pageX, pageY\n      return [touch.clientX, touch.clientY];\n    }\n\n    canvasElement.addEventListener('touchstart', function(ev) {\n      if (ev.targetTouches.length == 1) {\n        [lastX, lastY] = eventLoc(ev);\n        initialX = lastX;\n        initialY = lastY;\n        mdown = true;\n        AppInput.down(initialX, initialY);\n      }\n    });\n    canvasElement.addEventListener('touchmove', function(ev) {\n      ev.preventDefault();\n      if (ev.targetTouches.length == 1) {\n        var touch = ev.targetTouches[0];\n        [lastX, lastY] = eventLoc(ev);\n        if (!mdown) {\n          AppInput.move(lastX, lastY);\n          return;\n        }\n        if (moved) {\n          AppInput.drag(lastX, lastY, 1);\n        } else {\n          if (dist(initialX, initialY, lastX, lastY) >= dragMinDist) {\n            moved = true;\n            AppInput.drag(initialX, initialY, 0);\n            AppInput.drag(lastX, lastY, 1);\n          }\n        }\n      }\n    });\n    canvasElement.addEventListener('touchend', function(ev) {\n      touchEndFn(ev);\n    });\n    canvasElement.addEventListener('touchleave', function(ev) {\n      touchEndFn(ev);\n    });\n    canvasElement.addEventListener('touchcancel', function(ev) {\n      touchEndFn(ev);\n    });\n  }\n\n  attachBeanEvents();\n  attachTouchEvents();\n}\n\nexport default appEvent;\n\n/*\n\nvar attachHammerEvents = function() {\n    var hammertime = new Hammer(canvasElement, {});\n\n    hammertime.on('panstart', function(ev) {\n      drag(ev.center.x, ev.center.y, 0);\n    });\n\n    hammertime.on('panmove', function(ev) {\n      drag(ev.center.x, ev.center.y, 1);\n    });\n\n    hammertime.on('panend', function(ev) {\n      drag(ev.center.x, ev.center.y, 2);\n    });\n\n    hammertime.on('pancancel', function(ev) {\n      drag(ev.center.x, ev.center.y, 2);\n    });\n\n    var singleTap = new Hammer.Tap({ event: 'singletap' });\n    var doubleTap = new Hammer.Tap({ event: 'doubletap', taps: 2 });\n\n    hammertime.add([doubleTap, singleTap]);\n\n    doubleTap.recognizeWith(singleTap);\n    singleTap.requireFailure(doubleTap);\n\n    hammertime.on('singletap', function(ev) {\n      //drag(ev.center.x, ev.center.y, 2);\n      console.log(ev)\n    });\n  }\n\n*/","import util from './Util'\nimport canvas from './Canvas'\n\nimport appEvent from './AppEvent'\n\nvar initializer = { };\n\n// Adding into window as this is being used by c++ code\nwindow.wsmanager = {\n    // state values: init, ready, disconnected, notfound, offline, prompt\n    state: \"init\",\n    cb: null,\n    setState: function(state) {\n        window.wsmanager.state = state;\n        if (window.wsmanager.cb != null) { window.wsmanager.cb(state); } \n    }\n}\n\nvar apiBasePath = 'https://api.lekh.app/v1';\n//var apiBasePath = 'http://localhost:3000/v1';\n\nvar runtimeInitialized = false;\nvar initialInitDone = false;\nvar docReady = false;\n\nconst appendScript = (scriptToAppend) => {\n    const script = document.createElement(\"script\");\n    script.src = scriptToAppend;\n    script.async = false;\n    document.body.appendChild(script);\n}\n\nwindow.Module = {\n    onRuntimeInitialized: function () {\n        runtimeInitialized = true;\n        initializer.initInternal();\n    }\n};\n\ninitializer.init = function(cb) {\n    docReady = true;\n    window.wsmanager.cb = cb;\n    appendScript(\"a1/bean.min.js\");\n    appendScript(\"a1/lekhapp.js\");\n    initializer.initInternal();\n}\n\ninitializer.initInternal = function() {\n    if (initialInitDone || !docReady || !runtimeInitialized) {\n        return;\n    }\n    initialInitDone = true;\n    var panel = document.getElementById(\"gridCanvas\");\n    if (!panel) {\n        return;\n    }\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    initialInitDone = true;\n\n    window.Module.init(canvasElement);\n    canvas.setSize();\n    canvas.drawGrid();\n    \n    util.loadBasicTemplates(canvas.libraryColCount);\n    appEvent.attachEventHandlers();\n    startDoc();\n}\n\nfunction startDoc() {\n    var url = new URL(window.location);\n    var docid = url.searchParams.get('docid');\n    var np = url.searchParams.get('_new');\n    var offline = url.searchParams.get('offline');\n    if (docid) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var obj = JSON.parse(xhttp.responseText);\n              window.wsmanager.start(docid, obj.location);\n            } else {\n                if (this.status == 404) {\n                    window.wsmanager.setState('notfound');\n                } else {\n                  window.wsmanager.setState('error');\n                }\n            }\n          }\n        };\n        var url = apiBasePath + \"/docs/\" + docid;\n        xhttp.open(\"POST\", url);\n        xhttp.send();\n    } else if (np == 'true') {\n      var xhttp = new XMLHttpRequest();\n      xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var obj = JSON.parse(xhttp.responseText);\n              var url = new URL(window.location);\n              var newUrl = url.origin + \"/?docid=\" + obj.docid;\n              window.location = newUrl;\n            } else {\n                window.wsmanager.setState('error');\n            }\n          }\n      };\n      var url = apiBasePath + \"/docs\"\n      xhttp.open(\"POST\", url);\n      xhttp.send();\n    } else if (offline == 'true') {\n        window.wsmanager.setState('offline');\n    } else {\n        window.wsmanager.setState('prompt');\n    }\n}\n\nwindow.wsmanager.start = function (docid, location) {\n    var timer;\n  \n    const ws = new window.WebSocket(location);\n    window.Module.startDoc(docid);\n  \n    window.wsmanager.send = function(docid, data) {\n      ws.send(data);\n      return true;\n    }\n  \n    ws.onopen = function(event) {\n        console.log('connection opened: ', event);\n        timer = window.setInterval(function() {\n            ws.send('{}');\n        }, 15000);\n    };\n  \n    ws.onmessage = function(event) {\n        window.Module.updateDoc(event.data);\n        canvas.draw();\n        if (window.wsmanager.state == 'init') {\n            window.wsmanager.setState('ready');\n        }\n    };\n  \n    ws.onclose = function(event) {\n        console.log('connection closed:', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n  \n    ws.onerror = function(event) {\n        console.log('connection error: ', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n}\n\nexport default initializer;","import './App.css';\nimport Header from './common/Header/Header';\nimport AppMenu from './common/Header/Menu';\nimport Footer from './common/Footer/Footer';\nimport SideBarMenu from './common/SideBarMenu/SideBarMenu';\nimport Content from './common/SideBarMenu/Content';\nimport Layover from './common/Layover';\nimport React from \"react\";\nimport initializer from './common/AppInit'\n\nclass AppComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {wsState: \"init\"};\n    this.wsCallback = this.handleWSState.bind(this);\n  }\n\n  handleWSState(state) {\n    this.setState({wsState: state});\n  }\n\n  render() {\n    console.log(\"state=\", this.state.wsState);\n    var layover = null;\n    if (this.state.wsState != \"ready\" && this.state.wsState != \"offline\") {\n      layover = <div className=\"layover\"><Layover state={this.state.wsState}/></div>;\n    }\n    return (\n      <div className=\"container\">\n        <Content />\n        <div className=\"header-area\">\n          <Header />\n        </div>\n        <div className=\"top-right\">\n          <a target=\"_blank\" href=\"https://lekh.app/help/lekhboard.html\" className=\"help-link\">Help</a>\n        </div>\n        <div className=\"top-left-menu\">\n          <AppMenu/>\n        </div>\n        <div className=\"side-bar\">\n           <SideBarMenu />\n          </div>\n        <div className=\"footer-area\">\n          <Footer/>\n        </div>\n        {layover}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.wsCallback);\n  }\n}\n\nexport default AppComponent;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}