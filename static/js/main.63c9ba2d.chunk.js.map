{"version":3,"sources":["assests/icons/Logo.svg","assests/icons/Logo-grey.png","assests/icons/lekhboard-small.svg","assests/icons/google.svg","assests/icons/avatar.svg","components/ViewPort/Content.js","common/GlobalState.js","shapelib/Stencils.js","shapelib/Shapes.js","common/Canvas.js","utils/EventListener.js","common/MenuState.js","common/AppInput.js","common/Util.js","common/TouchInput.js","common/MouseInput.js","common/KeyboardInput.js","common/AppEvent.js","integ/AtlasianIntegUI.js","components/LekhImporter/LekhImporter.jsx","components/Loaders/MiniLoader.jsx","utils/ApiConstants.jsx","utils/ApiUtils.jsx","utils/UserInfo.js","utils/ApiRequests.jsx","utils/DocsManager.js","common/Messaging.js","components/Picker/LekhItemPicker.jsx","integ/atlassian.js","integ/integ.js","common/UIConfig.js","components/ViewPort/TextEditor.js","utils/HttpUtil.js","common/WSManager.js","common/Exporter.js","common/Platform.js","utils/DocInfo.js","utils/RemoteResourceManager.js","components/ImageUploader/ImageUploader.jsx","components/ViewPort/ShapeHelp.js","components/InputField/InputField.jsx","hooks/useFetch.jsx","components/DashboardItems/ShareModal.jsx","components/ContextHelp/Captions.js","components/ContextHelp/ContextHelp.js","components/ViewPort/ViewPort.js","common/Initializer.js","gestures/Frame.js","gestures/Geometry.js","gestures/Dragger.js","gestures/Gestures.js","gestures/LandmarksFeatures.js","gestures/GestureRecognizer.js","gestures/LandmarkHandler.js","gestures/GesturePanel.jsx","App.js","components/Footer/FooterStyle.js","experimental/SpeechCommand.js","common/Command.js","components/PageList/PageManager.js","components/PageList/PageList.jsx","components/Footer/Footer.js","components/SideBarMenu/Content.js","common/AppInit.js","common/Viewer.js","reportWebVitals.js","components/AuthLayout/AuthLayout.jsx","components/ModalContainer/ModalContainer.jsx","components/Loaders/FullLoader.jsx","hooks/useQuery.jsx","pages/auth/Confirm.jsx","pages/auth/ConfirmLogin.jsx","pages/auth/EmailLogin.jsx","pages/auth/Forgot.jsx","pages/auth/Login.jsx","pages/auth/OTPLogin.jsx","pages/auth/AuthUtil.jsx","pages/auth/Reset.jsx","pages/auth/SignUp.jsx","routes/PublicRoute.jsx","routes/AuthRoutes.jsx","hooks/useOnClickOutside.jsx","components/DashLayout/DashSidebar.jsx","components/DashLayout/DashboardTop.jsx","components/DashLayout/DashLayout.jsx","components/DashboardItems/DetailsModal.jsx","components/DashboardItems/RenameModal.jsx","components/DashboardItems/MoveModal.jsx","components/DashboardItems/DocumentListItem.jsx","pages/Dashboard/Dashboard.jsx","pages/Dashboard/Settings.jsx","routes/DashRoutes.jsx","components/DocsLog/DocsLogUtil.js","components/DocsLog/SessionViewer.jsx","components/DocsLog/DocsLogRoutes.jsx","components/DocsLog/SessionList.jsx","components/DocsLog/OfflineList.jsx","components/DocsLog/OfflineViewer.jsx","routes/Routes.jsx","index.js"],"names":["Content","props","className","id","cameraActive","width","height","tabIndex","globalState","zoomHandler","setZoomHandler","cb","onZoom","window","Module","getZoom","stencilUrl","name","stencils","shapes","expanded","libraryColCount","scroll","searchText","loadingUrls","Set","miniGroup","category","num","initEmptyCategs","item","libraryStore","initEmptyCateg","loadAll","a","initNames","JSON","stringify","libnames","contents","loadTemplate","idx","fetch","then","response","json","promise","Promise","all","initObjects","initialize","uiConfig","shouldLoadShapes","init","onDisplaySettingChange","groupCount","getShapeLibGroupCount","getGroup","getShapeLibGroup","expandGroup","flag","expandShapeLibGroup","getShapes","group","contentUrl","has","add","delete","getMiniGroup","getDisplaySettings","getShapeLibDisplaySettings","setDisplaySetting","addDisplaySetting","search","text","filterObjects","canvas","showGrid","gridType","canvasElement","isScrolling","savedScroll","x","y","scrollingFrom","infiniteScroll","uiScrollX","uiScrollY","effectiveScrollX","effectiveScrollY","effectiveWidth","effectiveHeight","canvasWidth","canvasHeight","viewPortWidth","viewPortHeight","pageLayoutDoneOnce","fixCanvas","cnv","dpr","devicePixelRatio","style","getContext","scale","setSize","document","getElementById","vport","gridPanel","transparentPanel","rect","getBoundingClientRect","wsmanager","state","pageEditor","startPageEditing","sz","getSize","pixlesPerInch","pointsPerInch","getCanvasType","value","unit","zm","effectiveMinWidth","Math","min","effectiveMinHeight","computeSize","position","left","top","sx","sy","setScroll","toggleGrid","drawGrid","onResize","layout","onConnectionStateChanged","draw","moveDelta","dx","dy","getScroll","moveDeltaForInfiniteScroll","move","type","moveForInfiniteScroll","getMidPoint","right","bottom","isVisible","pad","mapx","mapy","maprx","mapry","mapPtUIScroll","pt","toViewPort","zoomAt","factor","z1","round","z2","setZoom","uiPt","canvasPtX","canvasPtY","ptx","pty","zoom","exportToImage","format","getBoundsOfAll","cel","createElement","ctx","fillStyle","fillRect","drawCanvasForExport","data","toDataURL","panel","wd","ht","clearRect","rad","step","startx","starty","beginPath","strokeStyle","i","j","moveTo","arc","PI","fill","stroke","lineWidth","lineTo","drawCanvas","drawCell","categ","row","col","drawArrow","size","layoutCanvas","EventListener","this","listeners","addListener","indexOf","push","removeListener","splice","trigger","e","console","log","modes","selection","smartDraw","erase","laser","menus","selectionGroup","eraseAll","cameraInput","menuState","popup","selected","inputMode","selectionGroupVal","event","handleMenuClick","menu","mode","tpanel","inputReceiver","setMode","InputMode","SELECTION","cursor","POINTING","DRAWING","enableRecognition","ERASING","handleMode","setTimeout","hasPopup","removePopup","inDrawMode","AppInput","showContextMenu","showShapeProps","drawPoints","drawing","tnode","ignoreNextClick","updateCursorLoc","docid","uiMappedPt","inputFilter","pan","InputType","OTHER","finishTextEditing","val","remove","clearTransparentPanel","drawTemp","lineJoin","lineCap","length","setCurrentStyleToCtx","dp","dbclick","readOnly","tap","needTextEditing","getTextEditRect","vpp","cx","cy","tid","random","$","getTextForEditing","getTextEditStyle","fontSize","effectiveFontSize","effectiveFontMultiplier","isFLoating","isEditingFloatingText","tattrs","effectivePlatformFontFamily","effectiveTextAlignHorizontal","updateSize","getTextEditSize","css","append","on","code","key","initShapeTextEditor","dragMoveMode","kind","isEditingText","click","mpt","addClickCircle","drag","drawLaserCircle","dragLaser","it","START","END","willDrawAt","mapPt","flushTempDrawing","dragNative","contextmenu","enter","leave","util","dataUrlRegex","coreUtil","generateUUID","d","Date","getTime","d2","performance","now","replace","c","r","floor","toString","getBase64FromImage","img","src","startsWith","test","drawImage","substring","mouseLocation","pageX","pageY","changedTouches","touch","hasTouch","hasTouchScreen","navigator","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","UA","userAgent","loadScript","path","resolve","reject","script","async","onload","onerror","err","body","appendChild","getModifiersFromEvent","shiftKey","ctrlKey","altKey","metaKey","setModifiersFromEvent","pe","modifiers","avabodh_lekh_event_Modifiers","setModifiers","fontStr","str","effectiveFontStyle","avabodh_lekh_Style_FontStyle","FontStyleItalic","effectiveFontWeight","avabodh_lekh_Style_FontWeight","FontWeightBold","fz","mult","ff","effectiveFontFamily","colorStr","cl","disabled","avabodh_lekh_app_CoreUtil_instance","disabledColor","red","green","blue","alpha","listFont","fontCheck","sort","fontAvailable","values","font","fonts","check","readFile","rootType","resp","errorCode","content","avabodh_lekh_FileInfo_RootType","Document","localStorage","getItem","writeFile","setItem","resizeImage","imgToResize","context","Image","touchInput","mod","hostEnv","eventPointFromTouch","ts","pointerId","identifier","pressure","altitude","azimuth","timestamp","pointerType","avabodh_lekh_event_PointerType","Finger","button","avabodh_lekh_event_MouseButton","None","avabodh_lekh_event_EventPoint_Flag","handleEvent","ev","avabodh_lekh_event_PointerEvent","list","List_avabodh_lekh_event_EventPoint","push_back","timeStamp","setPoints","onPointerEvent","attachEvents","avabodh_lekh_app_HostEnv_instance","addEventListener","preventDefault","avabodh_lekh_event_EventPointState","Down","Move","Up","resetPointerInputState","mouseInput","downCount","eventPointsFromEvent","btn","Left","Middle","Right","Back","offsetX","offsetY","Mouse","se","avabodh_lekh_event_ScrollEvent","setDelta","deltaX","deltaY","setType","avabodh_lekh_event_ScrollEvent_Type","Generic","setLocation","setHasValidLocation","onScrollEvent","bean","pts","keyboardInput","showingDialog","postListeners","isMac","addPostListener","removePostListener","handleKeyDown","cmd","avabodh_lekh_app_Command_instance","CmdKey","avabodh_lekh_event_CmdKey","Modifiers","toLowerCase","executeKeys2","Delete","Escape","Enter","RightArrow","LeftArrow","UpArrow","DownArrow","modVal","executeKeys","appEvent","resizeListener","attachEventHandlers","evt","shouldAttachMouseEventHandler","shouldAttachKeyboardEventHandler","FileNameInputDialog","title","cancelText","okText","onCancel","onAccept","initialValue","useState","setValue","okDisabled","trim","Dialog","onClose","aria-labelledby","open","zIndex","DialogTitle","DialogContent","TextField","autoFocus","margin","fullWidth","variant","onChange","target","DialogActions","Button","onClick","ConfirmDialog","msg","MessageDialog","LekhImporter","showDialog","onImport","file","setFile","errMsg","setErrMsg","btnEnabled","handleSubmit","reader","FileReader","importLekh","result","readAsText","close","action","onSubmit","accept","changedFile","files","MiniLoader","constant","tokenName","expiryName","refreshToken","baseUrl","appUrl","backendVersion","userInfoLoading","userInfoError","userInfoAvailable","setRefreshTokenToStorage","token","setExpiryTimeToStorage","date","getRefreshTokenFromStorage","removeRefreshTokenFromStorage","removeItem","available","loading","error","getCalled","userInfo","isUsingLekhBackend","handleStorageChange","fetchInfo","integ","getUser","info","getAccessTokenOnDemand","refreshTokenStr","access_token","getCurrentUser","canUseGestures","isLoggedIn","features","gesture","loggedIn","onStoreChange","setErr","wasLoggedin","tryToRefreshToken","new_refresh_token","do_retry","retry","refresh_token","renewTokenBeforeExpiry","ApiRequestWithToken","config","baseURL","headers","axios","create","ApiRequestWithoutToken","withCredentials","fetcher","url","get","res","login","post","loginWithApple","getDocs","qstr","getDoc","docsManager","parent","order","orderBy","docs","arr","split","obj","encodeURIComponent","route","qparam","reset","qpath","qs","parse","ignoreQueryPrefix","setPath","qsearch","serializePath","join","searchTerm","pop","deleteDoc","reload","canCreateNewDoc","createDoc","getADoc","getFullPath","root","doc","unshift","duplicate","getChildFolders","folderId","getChildItems","folders","messaging","onMessage","origin","LekhItemPicker","pick","defaultTitle","pickText","folderOnly","setLoading","setData","userid","setParent","loginState","setLoginState","parentDoc","setParentDoc","selectedIdx","setSelectedIdx","Map","cache","childCache","useRef","signedIn","useEffect","getChildren","catch","fetchAccessToken","pickClass","signInMessage","href","rtoken","current","set","children","iframe","prefix","iframeUrl","display","frameBorder","scrolling","vspace","hspace","marginHeight","marginWidth","map","m","isFolder","backClass","IconButton","color","require","default","macroType","macroKey","endsWith","draftAttachment","atlassian","integMode","customContentInfo","previousComputedHeight","docInfo","atlassianUserId","pageLocation","pageId","macroData","setAppState","contextToken","lekhAttachment","lekhAttachmentReadErr","editorInitTimer","numUpdatesInEditor","numPageAttrUpdate","draftSavedAtCounter","saveDraftTimer","draftSaveFailureWarnDone","has_touch","eventListener","waitList","eventTypes","logDebug","fn","cond","waitFor","sendEventToBackend","makeStr","String","attachmentName","diagramName","location","userId","product","showNotification","AP","getPageContext","editor","closeEditor","getLocation","loc","contentId","user","atlassianAccountId","getToken","readLekhAttachment","readDraftAttachment","handleAtlassianInit","confluence","getMacroData","Object","keys","customContentId","getContentInfo","decodeURIComponent","storage","clearTimeout","status","v4","counter","integVersion","viewer","full","setViewerSize","clientRect","viewerHeight","viewerWidth","newHeight","ceil","abs","resize","fileName","readAttachment","errObj","statusText","draftName","request","success","fetchBody","contentType","saveAttachment","comment","attFile","Blob","reqData","minorEdit","draftFlag","deleteDraft","tmp","results","getAttachmentInfo","saveDraft","curUpdatesCounter","lekhContent","getLekh","onDiagramChange","updates","finally","saveDraftAndClose","dialog","getDiagramsInPage","diagrams","processNode","node","tagName","isLekh","attributes","attrib","diagram","childNodes","param","innerHTML","processMacroNode","xmlDoc","DOMParser","parseFromString","publish","attName","customObj","spaceKey","version","number","saveCustomContent","custErr","custResp","respObj","imgData","blob","saveImage","imgErr","saveMacro","renameDiagram","curName","importLekhFile","setPageSize","importFromCloud","picker","getRemoteLekhContent","copyToLekhCloud","diagName","isUnique","count","newName","uploadDoc","CanvasSizeType","Infinite","Unit","Inch","setShowDialogHandler","dialogHandler","setStateForApp","params","useLekhBackend","showOptions","fileNameEditable","viewertype","makeLink","showEditOption","checkLicenseAndGetPageContext","lic","checkCustomContent","custom","head","getElementsByTagName","getIntegMode","getDocInfo","handleClickOnViewer","chrome","header","publishEditorChanges","loadDoc","LekhErrJson","send","startDoc","setState","customizeSidebar","sidebarMenu","icon","concat","slice","customizeAppMenu","appMenu","checkable","handler","submenu","newMenu","handleLogoClick","shouldShowQuickTip","integImpl","isIntegration","offline","initForIntegMode","initForLekhBackendMode","initForOfflineMode","isIntegMode","isIntegViewer","isViewerLink","isFullViewer","shouldShowFooter","isZoomOnlyFooter","shouldShowPagesInFooter","shouldShowUndoRedoInFooter","shouldShowPublishCancelButton","textEditor","textArea","textInput","lekhCore","inRect","avabodh_lekh_app_LekhCore_instance","finishSingleLine","isUpdate","updateMultiline","finishMultiLine","border","padding","ha","avabodh_lekh_Style_TextAlignHorizontal","TextAlignHorizontalDefault","TextAlignHorizontalCenter","TextAlignHorizontalLeft","TextAlignHorizontalRight","defaultAlignAlways","self","platformTextEditorTextChanged","updateSingleLine","multiLine","editMultiline","editSingleLine","platformTextEditorFinished","httpUtil","b64toBlob","base64","blobToBase64","resole","onloadend","readAsDataURL","blobToStr","toStr","requestHttp","hk","hv","method","timeout","timeoutSec","responseType","encodeResponseBase64","multiPart","dataArray","FormData","mp","decodeValueBase64","mime","decodeRequestBase64","httpResp","Map_std_string_std_string","setTimer","setInterval","ws","coreIO","onWebSocketDisconnect","WebSocket","onopen","onWebSocketConnect","onmessage","onWebSocketMessage","onclose","FileSaver","Exporter","input","avabodh_lekh_ExportInput_ExportFormat","PDF","exportPdf","PNG","exportImage","JPG","SVG","exportSvg","LEKH","exportLekh","handleClose","viewPort","pdfDoc","pages","getImage","checkError","orient","jsPDF","orientation","addPage","addImage","save","pageInfo","imageScale","saveAs","pageIdx","includeBackground","back","getPageBackground","pageIndex","avabodh_lekh_LekhBackground_Type","TypeColor","getColor","jsp","JSDrawingPlatform","drawForExporting","cppObj","translateX","translateY","JSPlatform","PlatformImpl","initForWeb","constr","getTextSize","measureText","lines","avabodh_lekh_CanvasType","Drawing","output","img2","drawingDp","jsObj","restore","sc","luaScripts","out","milli","callback","clone","exec","setCanvasSize","editText","from","to","openDialog","openView","export","pickImage","List_std_string","fontSet","connect","disconnect","reactTo","setPointerIconType","DrawingPlatformImpl","effectiveStrokePaint","solidColor","effectiveDisabled","isJoinStyleDefined","js","effectiveJoinStyle","avabodh_lekh_Style_JoinStyle","JoinStyleBevelJoin","JoinStyleMiterJoin","JoinStyleRoundJoin","dashArray","effectiveDashArray","isCapStyleDefined","lc","effectiveCapStyle","avabodh_lekh_Style_CapStyle","CapStyleButtCap","CapStyleSquareCap","CapStyleRoundCap","dc","setLineDash","lineDashOffset","background","point","Path2D","effectiveFillPaint","effectiveStrokeWidth","shadow","effectiveShadow","hasShadow","radius","avabodh_lekh_Style_Paint_Type","PaintTypeNoPaint","setStrokeStyle","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","closePath","center","ellipse","startAngle","endAngle","angle","curve","numPoints","quadraticCurveTo","point2","point3","bezierCurveTo","point4","floating","at","splits","ahz","atx","align","lineHeight","aty","textBaseline","textAlign","effectiveTextFill","translate","rotate","underline","isUnderlineText","strikeThrough","isStrikeThroughText","delta","fillText","tw","x1","x2","pathSteps","cp","tp","avabodh_geometry_PathStep_Type","p","p1","Line","Quad","p2","Cubic","p3","Close","Arc","clip","platform","resources","inProgress","failedUrl","remoteResouceManager","addToResources","getResource","resid","substr","URL","createObjectURL","onDataFromBackend","MaxSize","selectedImage","ImageUploader","setWidth","setHeight","uploading","btnText","objectUrl","revokeObjectURL","Help","handleClickAway","showShapeHelp","handleKey","React","fromRect","pos","anchorEl","clientWidth","clientHeight","placement","getTopPlacement","helpText","ClickAwayListener","onClickAway","Popper","dangerouslySetInnerHTML","__html","InputField","label","handleChange","placeholder","pattern","required","errorText","htmlFor","useFetch","useSWR","ShareModal","email","setEmail","access","setAccess","viewShares","setViewShares","copied","setCopied","setSuccess","setError","docUrl","privateForm","shareDoc","mutate","options","defaultValue","onCopy","shares","deleteShare","toast","message","titles","start","end","startCaption","vid","spanElement","curTitles","showingIndex","removeCaption","updateForIndex","index","paused","play","currentTime","updateCaption","checkAndStartCaption","span","setAttribute","ContextHelp","autoPlay","muted","playsInline","InputDialog","cancel","allowEmpty","grid","middle","ui","gridDp","drawDp","middleDp","uiDp","gridNeedsUpdate","drawNeedsUpdate","middleNeedsUpdate","uiNeedsUpdate","canvasTypeEnum","showAirGesture","avabodh_lekh_ReactParam","ConfigChange","setScreenSize","UI","metrics","attachResizerHandler","attachScreenModeHandler","initial","initUI","Grid","requestAnimationFrame","pointers","avabodh_lekh_PointerIconType","Action","Draw","Scroll","Text","Laser","Erase","types","avabodh_lekh_DialogInput_Type","OkCancel","avabodh_lekh_DialogResponse_Type","Cancelled","Accepted","showOkCancel","TextInput","showInputDialog","showMsg","avabodh_lekh_OpenViewInput_Type","avabodh_lekh_OpenViewInput_PopuDir","Popup","arg","focus","currentlyOpenedRemoteDoc","modal","HTMLContent","AirGesture","PageReload","isDark","getBrightnessConfig","setBrightnessMode","avabodh_lekh_app_HostEnv_BrightnessMode","Dark","Light","initializer","runtimeInitialized","initialInitDone","reactAppReady","shapesInitDone","uiInitDone","docStarted","userInfoFetched","onRuntimeInitialized","initInternal","toggleDebug","initShapes","ready","library","shapeManager","initGroupsAndSetDisplaySettings","searchParams","openRemoteDocById","scriptToAppend","appendScript","backendFlow","setAccessToken","uiCanvas","initEventHandlers","blockView","canvasCtx","cameraCtx","landmarkLines","mirrorPoint","npt","clearCameraCanvas","drawCenterText","strokeText","mkpt","z","pt2d","dist","sqrt","inOrder","inord","eq","LineEq","perp","crosses","A","B","C","eq2","D","Dx","Dy","atan2","LineSegment","d1","len","near","solve","contains","distFrom","seg","eq1","got","Dragger","MOVE_DIST_REF","MOVE_DIST_SMALL_REF","MOVE_DIST_SMALL","last","lastRef","moving","points","ptref","addPoint","dx1","dx2","dy1","dy2","handleMove","checkMove","lastDrawMode","toolMenu","InputModeEnum","EventPointState","sendPoint","captureDrawMode","SmartDraw","setSelectionMode","Select","setInputMode","Gesture","dragger","ptidx","landmarks","lastpt","Drag1Gesture","track","sendPoints","checkClick","sendLastPoint","Drag2Gesture","ThumbGesture","PinchGesture","Features","backSide","indexBent","middleBent","ringBent","indexInOrder","middleInOrder","ringInOrder","indexCurved","middleCurved","ringCurved","getSide","pval","isCurved","p4","deg","ta","theta","acos","v1x","v1y","v2x","crossProduct","turn","turnAngle","drag1Active","drag2Active","undo","RepeatedGesture","noop","gap","times","lastGesture","lastAt","GestureRecognizer","model","drag1Gesture","drag2Gesture","thumbGesture","pinchGesture","noopGesture","undoGesture","hand","getGesture","handleRepeated","getFeatures","isPinch","isThumb","isDrag2","dPinch","pinchLike","isDrag1","gestureRecognizer","prevGesture","timer","pendingGesture","initStartTime","flashDuration","showingVideo","flashing","handle","line","drawLandmarks","curGesture","done","handleLast","activeptIdx","activePoint","drawActivePoint","showVideo","image","handleLandmarkResults","multiHandLandmarks","lms","multiHandedness","initLandmarkHandler","cameraCanvas","cameraElement","devices","GesturePanel","showList","setShowList","showCamera","setShowCamera","initialized","setInitialized","startMediapipe","devId","frames","startCamera","outCanvas","avabodh_lekh_app_ToolMenu_instance","avabodh_lekh_app_ToolMenu_InputMode","mediaDevices","enumerateDevices","deviceInfos","deviceInfo","dev","deviceId","AppComponent","shapeHelp","airGestureShowing","bind","help","Component","FooterStyle","footer","justifyContent","backgroundColor","borderColor","borderRadius","boxShadow","filter","countClass","valueClass","iconClass","countBtn","minWidth","speechCommand","cmdMap","addShape","recognition","SpeechRecognition","webkitSpeechRecognition","continuous","lang","interimResults","maxAlternatives","onresult","shape","handleText","transcript","command","inputModeChanged","getShapeAddLocation","pointerLocation","del","copy","cut","paste","pasteAt","selectAll","addBox","addObjectToCanvas","addCircle","addUser","addDb","addCloud","addNote","escape","handleEscapeKey","redo","moveToFront","moveObjectToFront","moveToBack","moveObjectToBack","startSpeech","pageManager","curIdx","load","getPages","numPages","page","getPageName","getPageId","changeOrder","oldIdx","newIdx","reorder","deletePage","rename","setPageName","duplicatePage","activePageIndex","setCurrent","select","showingDialogForKeyboardInput","RenameModal","orig","setName","ConfirmModal","PageContextMenu","showRenameDialog","setShowRenameDialog","showDeleteDialog","setShowDeleteDialog","PageList","stateRef","useRefState","counterRef","setCounter","setAnchorEl","showMenu","setShowMenu","menuIdx","setMenuIdx","scrollIntoView","block","onWebsocketUpdate","items","renderItem","provided","snapshot","rubric","source","rowId","ref","innerRef","draggableProps","setCurrentPage","dragHandleProps","onPageOption","currentTarget","transform","listDiv","scrollTop","scrollHeight","onDragEnd","destination","onDragStart","droppableId","renderClone","droppableProps","draggableId","useStyles","makeStyles","Style","Footer","classes","setCount","showPages","setShowPages","pagesAnchorEl","setPagesAnchorEl","zoomOnlyFooter","curCount","handleCount","handleAddCount","docDetailFetched","apiBasePath","permission","getLekhResource","getRemoteResource","np","xhttp","XMLHttpRequest","onreadystatechange","readyState","responseText","setRequestHeader","initPlatformImpl","onDocDetailFetch","createNewDoc","newUrl","updateDoc","updateObj","currentStyle","setFontSize","clearInterval","Viewer","wsCallback","handleWSState","wsStateHandler","attempt","setMouseCursor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AuthLayout","ModalContainer","parentOnClick","FullLoader","useLocation","useQuery","URLSearchParams","ConfirmUser","query","history","useHistory","ConfirmLogin","expires_at","EmailLogin","loginForm","setloginForm","successText","showSuccessText","proceed","newEntry","Forgot","password","passwordForm","setpasswordForm","attemptedLoadingAppleScript","appleAuthInitialized","loadAppleScript","Login","formType","appleScriptLoaded","setAppleScriptLoaded","AppleID","auth","clientId","scope","redirectURI","usePopup","handleGoogleLoginFailure","googleData","handleGoogleLogin","tokenId","handleAppleLogin","signIn","firstName","lastName","authorization","id_token","first_name","last_name","render","renderProps","alt","onSuccess","onFailure","cookiePolicy","OTPLogin","code_type","passwordCheck","Reset","cPassword","apiError","setApiError","SignUp","signUpForm","setSignUpForm","submitSuccess","setSubmitSuccess","PublicRoute","component","rest","AuthRouteList","exact","AuthRoutes","useClickOutside","handleClick","removeEventListener","NewBoard","DashSidebar","openNew","setOpenNew","setDocsState","docsManagerCb","activeClassName","MobileMenu","DashboardTop","settingsRef","openSettings","setOpenSettings","openMenu","setOpenMenu","setText","setSearchMode","getRoute","logout","DashLayout","DetailsModal","inScope","in_my_scope","created_at","toDateString","updated_at","owner","MoveModal","MoveDoc","DocumentListItem","setOpen","share","setShare","showDetails","setShowDetails","setRename","setMove","deleting","setDeleting","handleOpen","pushParent","shared","Dashboard","setRoute","pathname","popParentTo","getRootName","Settings","current_password","updateForm","setupdateForm","new_password","DashRouteList","DashRoutes","setUserState","onUserInfoChange","PrivateRoute","dateStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","TopBar","curVersionIdx","playInterval","redraw","toggleAutoPlay","onTimer","applyNext","alert","hasNext","DocsLogRoutes","defKey","setKey","sessions","setSessions","setToken","nextToken","setNextToken","sess","ds","num_updates","elm","parts","getDocsLogSessions","next_token","overflow","session","setSession","setUpdates","loadingMsg","setLoadingMsg","playing","getSession","hash","sessionid","getADocsLogSession","updatesArr","b","getUpdates","updateArr","verStr","respIdx","onUpdatesLoaded","is_delta","marginLeft","marginTop","RouteList","Routes","autoClose","hideProgressBar","newestOnTop","closeOnClick","pauseOnHover","openDoc","_new","replaceState","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.63c9ba2d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo.30a79e97.svg\";","export default \"data:image/png;base64,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PgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczppcHRjRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo0YzMwZGYyNi1iODAwLTQzYjktYTg0Ny05NmYzMjhkODgwMjAiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NWNmNWNlYTctZGIzNy00M2Y4LTgyOGYtMmY0ZTI4ZjcyODRmIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MDBlMTVhODUtMDVlZS00YWZkLWE1MDQtYWM2ODEwYmZkNDgxIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJNYWMgT1MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjI5NzE1NTUxMTIwNjE4IgogICBHSU1QOlZlcnNpb249IjIuMTAuOCIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIzODIiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI1NDkiCiAgIHRpZmY6SW1hZ2VIZWlnaHQ9IjU0OSIKICAgdGlmZjpJbWFnZVdpZHRoPSIzODIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIj4KICAgPGlwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25DcmVhdGVkPgogICA8aXB0Y0V4dDpMb2NhdGlvblNob3duPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgPGlwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6QXJ0d29ya09yT2JqZWN0PgogICA8aXB0Y0V4dDpSZWdpc3RyeUlkPgogICAgPHJkZjpCYWcvPgogICA8L2lwdGNFeHQ6UmVnaXN0cnlJZD4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2ExY2ZhNjUtNTJiOC00YWM3LWIzMzMtNWU3Y2FjZGFhZGJlIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKE1hYyBPUykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDgtMjNUMTY6MTU6NTErMDU6MzAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogICA8cGx1czpJbWFnZVN1cHBsaWVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VTdXBwbGllcj4KICAgPHBsdXM6SW1hZ2VDcmVhdG9yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VDcmVhdG9yPgogICA8cGx1czpDb3B5cmlnaHRPd25lcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkNvcHlyaWdodE93bmVyPgogICA8cGx1czpMaWNlbnNvcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkxpY2Vuc29yPgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+hRHudAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5QgXCi0ykomKzwAAByZJREFUeNrt1r/L1WUYwOH72JkSQsGttVXQqdV/QN0NWlykou3lVXBoCV8572ZEW5G4NzdETdH/0NpsYeAQclqkrfDXie85n+s6yxm/z/18eLhX25k5PTeP5/7R7dlz24EXd+aff8ebE+OgGb/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHL/8Cccvf8Lxy59w/PInHP/M8eaLzcoIKcY/8/F8KX+a8c/ckj/V+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+OVPOH75E45f/oTjlz/h+GduzcPNWy6GYvwzH8y38qcZ/8wN+VONX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/6E45c/4fjlTzh++ROOX/68gvXBnOTGzOmHR89c6W5tvfxef8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8Qvf8T/BvL/2kXTjH/mmoumGj+IH8QP4kf8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gf8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfpiZWRvBTtyci4d5sNX+H+HO9qn4d+nqXDeEhfpsnlp7sPOD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfsQP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/gRP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH88LLWRrAT9+abvf32R/O2+Hl1v+zxt/9l7QHxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxI34QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iB/GD+EH8IH4QP4gfxA/iR/wgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/ED+IH8YP4QfwgfhA/iB/Ej/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED+IH8QP4gfxg/hB/CB+ED//4pH4qfpkvhI/Tdv5qJG/+MnmL36y+YufbP7i57/yfyB+qvl/OvfFT9Xtw81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81f/GTzFz/Z/MVPNn/xk81/nbiIs5vvDvyEz+b46NfF5T9zvOShrbYzc3puHnuq9txvc2Vx+c+cLDD/89vfrT2H5d35cfOe5cfOL3/5i1/+8he//OUvfvnLX/zyz+cv/sPM/+fNRfmLv+nC/CB/8ctf/uKXv/zFL3/5i1/+7fzFL/9s/uKXfzZ/8cs/m7/45Z/NX/zyz+Z/ZjUrYcg/lf/q+c/LL//s6y9++WfzF7/8l5H/5+Knmv/duSN+qvmf/N/5i1/+2fzFL/9s/uKXfzZ/8cs/m7/45Z/NX/zyz+YvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uInm7/4yeYvfrL5i59s/uJnV/lfWnr+4mdX+f+0eX+R+W/Fz669M98vMv8/xE81f2sP8hc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzZ/8ZPNX/xk8xc/2fzFTzb/9czMPJnLZsyC/WkEALy+vwEv5uzdltH5GQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/lekhboard-small.d3d7afbf.svg\";","export default __webpack_public_path__ + \"static/media/google.97c84023.svg\";","export default __webpack_public_path__ + \"static/media/avatar.75fdf75c.svg\";","import React from 'react'\n\nconst Content = (props) => {\n    return (\n        <div className=\"canvasContainer\" id=\"drawContent\">\n            <canvas id=\"gridCanvas\" className=\"viewport\" />\n            {props.cameraActive && <canvas id=\"cameraCanvas\" className=\"cameraCanvas\" width=\"1280px\" height=\"720px\"/>}\n            <canvas id=\"drawCanvas\" className=\"viewport\" />\n            <canvas id=\"middleCanvas\" className=\"viewport\" />\n            <canvas id=\"uiCanvas\" tabIndex=\"0\" className=\"viewport\" />\n        </div>\n    )\n}\n\nexport default Content;\n","var globalState = { }\n\nvar zoomHandler = null;\n\nglobalState.setZoomHandler = function(cb) {\n    zoomHandler = cb;\n}\n\nglobalState.onZoom = function() {\n    if (zoomHandler != null) {\n        zoomHandler(window.Module.getZoom());\n    }\n}\n\nexport default globalState;\n","function stencilUrl(name) {\n    return \"https://rajeevku02.github.io/lekhboard/stencils/v3/\" + name;\n}\n\nvar stencils = [\n    [\"Font Awesome Brands\", \"fab\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_brands.json\")],\n    [\"Font Awesome Solid\", \"fa\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_solid.json\")],\n    [\"Font Awesome Regular\", \"far\", \"UI Mockup\", \"Font Awesome\", stencilUrl(\"fa_regular.json\")],\n    [\"Wireframe Big\", \"avabodh.wireframe.big\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Buttons\", \"avabodh.wireframe.buttons\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Forms\", \"avabodh.wireframe.forms\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Text\", \"avabodh.wireframe.text\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Layout\", \"avabodh.wireframe.layout\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Markup\", \"avabodh.wireframe.markup\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Media\", \"avabodh.wireframe.media\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe iOS\", \"avabodh.wireframe.ios\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Android\", \"avabodh.wireframe.android\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe Misc\", \"avabodh.wireframe.misc\", \"Software\", \"UI Wireframe\", stencilUrl(\"wireframe.json\")],\n    [\"Wireframe iOS Icons\", \"avabodh.wireframe.iosicons\", \"Software\", \"UI Wireframe\", stencilUrl(\"ios_icons.json\")],\n    [\"Network Infrastructure\", \"avabodh.networks\", \"Network\", \"Network Infrastructure\", stencilUrl(\"networks.json\")],\n    [\"Office Clouds\", \"avabodh.office.clouds\", \"Network\", \"Office\", stencilUrl(\"office_cloud.json\")],\n    [\"Office Communications\", \"avabodh.office.communications\", \"Network\", \"Office\", stencilUrl(\"office_communications.json\")],\n    [\"Office Concepts\", \"avabodh.office.concepts\", \"Network\", \"Office\", stencilUrl(\"office_concepts.json\")],\n    [\"Office Databases\", \"avabodh.office.databases\", \"Network\", \"Office\", stencilUrl(\"office_databases.json\")],\n    [\"Office Devices\", \"avabodh.office.devices\", \"Network\", \"Office\", stencilUrl(\"office_devices.json\")],\n    [\"Office Security\", \"avabodh.office.security\", \"Network\", \"Office\", stencilUrl(\"office_security.json\")],\n    [\"Office Servers\", \"avabodh.office.servers\", \"Network\", \"Office\", stencilUrl(\"office_servers.json\")],\n    [\"Office Services\", \"avabodh.office.services\", \"Network\", \"Office\", stencilUrl(\"office_services.json\")],\n    [\"Office Sites\", \"avabodh.office.sites\", \"Network\", \"Office\", stencilUrl(\"office_sites.json\")],\n    [\"Office Users\", \"avabodh.office.users\", \"Network\", \"Office\", stencilUrl(\"office_users.json\")],\n    [\"AWS Analytics\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Analytics\", \"Network\", \"AWS\", stencilUrl(\"aws_analytics.json\")],\n    [\"AWS Application Services\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Application Services\", \"Network\", \"AWS\", stencilUrl(\"aws_application_services.json\")],\n    [\"AWS Artificial Intelligence\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Artificial Intelligence\", \"Network\", \"AWS\", stencilUrl(\"aws_artificial_intelligence.json\")],\n    [\"AWS Business Productivity\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Business Productivity\", \"Network\", \"AWS\", stencilUrl(\"aws_business_productivity.json\")],\n    [\"AWS Compute\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Compute\", \"Network\", \"AWS\", stencilUrl(\"aws_compute.json\")],\n    [\"AWS Database\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Database\", \"Network\", \"AWS\", stencilUrl(\"aws_database.json\")],\n    [\"AWS Desktop & Streaming\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Desktop App Streaming\", \"Network\", \"AWS\", stencilUrl(\"aws_desktop_app_streaming.json\")],\n    [\"AWS Developer Tools\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Developer Tools\", \"Network\", \"AWS\", stencilUrl(\"aws_developer_tools.json\")],\n    [\"AWS Game Development\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Game Development\", \"Network\", \"AWS\", stencilUrl(\"aws_game_development.json\")],\n    [\"AWS General\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.General\", \"Network\", \"AWS\", stencilUrl(\"aws_general.json\")],\n    [\"AWS Internet of Things\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Internet of Things\", \"Network\", \"AWS\", stencilUrl(\"aws_internet_of_things.json\")],\n    [\"AWS Management Tools\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Management Tools\", \"Network\", \"AWS\", stencilUrl(\"aws_management_tools.json\")],\n    [\"AWS Messaging\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Messaging\", \"Network\", \"AWS\", stencilUrl(\"aws_messaging.json\")],\n    [\"AWS Migration\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Migration\", \"Network\", \"AWS\", stencilUrl(\"aws_migration.json\")],\n    [\"AWS Mobile Services\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Mobile Services\", \"Network\", \"AWS\", stencilUrl(\"aws_mobile_services.json\")],\n    [\"AWS Networking & Content Delivery\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Networking And Content Delivery\", \"Network\", \"AWS\", stencilUrl(\"aws_networking_and_content_delivery.json\")],\n    [\"AWS On Demand Workforce\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.On Demand Workforce\", \"Network\", \"AWS\", stencilUrl(\"aws_on_demand_workforce.json\")],\n    [\"AWS SDKs\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.SDKs\", \"Network\", \"AWS\", stencilUrl(\"aws_sdks.json\")],\n    [\"AWS Security Identity & Compliance\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Security Identity And Compliance\", \"Network\", \"AWS\", stencilUrl(\"aws_security_identity_and_compliance.json\")],\n    [\"AWS Storage\", \"avabodh.AWS_Simple_Icons_EPS-SVG_v17.1.6.Storage\", \"Network\", \"AWS\", stencilUrl(\"aws_storage.json\")],\n    [\"Azure Common\", \"avabodh.azure\", \"Network\", \"Azure\", stencilUrl(\"azure.json\")],\n    [\"Azure Cloud\", \"avabodh.azure.cloud\", \"Network\", \"Azure\", stencilUrl(\"mscae_cloud.json\")],\n    [\"Azure General\", \"avabodh.azure.general\", \"Network\", \"Azure\", stencilUrl(\"mscae_general.json\")],\n    [\"Azure Enterprise\", \"avabodh.azure.enterprise\", \"Network\", \"Azure\", stencilUrl(\"mscae_enterprise.json\")],\n    [\"Azure Intune\", \"avabodh.azure.intune\", \"Network\", \"Azure\", stencilUrl(\"mscae_intune.json\")],\n    [\"Azure System Center\", \"avabodh.azure.system_center\", \"Network\", \"Azure\", stencilUrl(\"mscae_system_center.json\")],\n    [\"Azure Other\", \"avabodh.azure.other\", \"Network\", \"Azure\", stencilUrl(\"mscae_other.json\")],\n    [\"GCP Big Data\", \"avabodh.GCP.Big Data\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_big_data.json\")],\n    [\"GCP Compute\", \"avabodh.GCP.Compute\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_compute.json\")],\n    [\"GCP Developer Tools\", \"avabodh.GCP.Developer Tools\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_developer_tools.json\")],\n    [\"GCP Extras\", \"avabodh.GCP.Extras\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_extras.json\")],\n    [\"GCP Identity & Security\", \"avabodh.GCP.Identity And Security\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_identity_and_security.json\")],\n    [\"GCP Machine Learning\", \"avabodh.GCP.Machine Learning\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_machine_learning.json\")],\n    [\"GCP Management Tools\", \"avabodh.GCP.Management Tools\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_management_tools.json\")],\n    [\"GCP Networking\", \"avabodh.GCP.Networking\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_networking.json\")],\n    [\"GCP Storage & Databases\", \"avabodh.GCP.Storage And Databases\", \"Network\", \"Google Cloud Platform\", stencilUrl(\"gcp_storage_and_databases.json\")],\n    [\"Citrix\", \"avabodh.citrix\", \"Network\", \"Citrix\", stencilUrl(\"citrix.json\")],\n    [\"Cisco Buildings\", \"avabodh.cisco.buildings\", \"Network\", \"Cisco\", stencilUrl(\"cisco_buildings.json\")],\n    [\"Cisco Computers & Peripherals\", \"avabodh.cisco.computers_and_peripherals\", \"Network\", \"Cisco\", stencilUrl(\"cisco_computers_and_peripherals.json\")],\n    [\"Cisco Controllers & Modules\", \"avabodh.cisco.controllers_and_modules\", \"Network\", \"Cisco\", stencilUrl(\"cisco_controllers_and_modules.json\")],\n    [\"Cisco Directors\", \"avabodh.cisco.directors\", \"Network\", \"Cisco\", stencilUrl(\"cisco_directors.json\")],\n    [\"Cisco Hubs & Gateways\", \"avabodh.cisco.hubs_and_gateways\", \"Network\", \"Cisco\", stencilUrl(\"cisco_hubs_and_gateways.json\")],\n    [\"Cisco Misc\", \"avabodh.cisco.misc\", \"Network\", \"Cisco\", stencilUrl(\"cisco_misc.json\")],\n    [\"Cisco Modems & Phones\", \"avabodh.cisco.modems_and_phones\", \"Network\", \"Cisco\", stencilUrl(\"cisco_modems_and_phones.json\")],\n    [\"Cisco People\", \"avabodh.cisco.people\", \"Network\", \"Cisco\", stencilUrl(\"cisco_people.json\")],\n    [\"Cisco Routers\", \"avabodh.cisco.routers\", \"Network\", \"Cisco\", stencilUrl(\"cisco_routers.json\")],\n    [\"Cisco Security\", \"avabodh.cisco.security\", \"Network\", \"Cisco\", stencilUrl(\"cisco_security.json\")],\n    [\"Cisco Servers\", \"avabodh.cisco.servers\", \"Network\", \"Cisco\", stencilUrl(\"cisco_servers.json\")],\n    [\"Cisco Storage\", \"avabodh.cisco.storage\", \"Network\", \"Cisco\", stencilUrl(\"cisco_storage.json\")],\n    [\"Cisco Switches\", \"avabodh.cisco.switches\", \"Network\", \"Cisco\", stencilUrl(\"cisco_switches.json\")],\n    [\"Cisco Wireless\", \"avabodh.cisco.wireless\", \"Network\", \"Cisco\", stencilUrl(\"cisco_wireless.json\")],\n    [\"Rack APC\", \"avabodh.rack.APC\", \"Network\", \"Server Rack\", stencilUrl(\"rack_apc.json\")],\n    [\"Rack Cisco\", \"avabodh.rack.cisco\", \"Network\", \"Server Rack\", stencilUrl(\"rack_cisco.json\")],\n    [\"Rack Dell\", \"avabodh.rack.Dell\", \"Network\", \"Server Rack\", stencilUrl(\"rack_dell.json\")],\n    [\"Rack F5\", \"avabodh.rack.f5\", \"Network\", \"Server Rack\", stencilUrl(\"rack_f5.json\")],\n    [\"Rack General\", \"avabodh.rack.General\", \"Network\", \"Server Rack\", stencilUrl(\"rack_general.json\")],\n    [\"Rack HP\", \"avabodh.rack.HP\", \"Network\", \"Server Rack\", stencilUrl(\"rack_hp.json\")],\n    [\"Rack IBM\", \"avabodh.rack.IBM\", \"Network\", \"Server Rack\", stencilUrl(\"rack_ibm.json\")],\n    [\"Rack Oracle\", \"avabodh.rack.Oracle\", \"Network\", \"Server Rack\", stencilUrl(\"rack_oracle.json\")],\n    [\"Web Icons\", \"avabodh.webicons\", \"Network\", \"Web Icons\", stencilUrl(\"web_icons.json\")],\n    [\"Web Logos\", \"avabodh.weblogos\", \"Network\", \"Web Icons\", stencilUrl(\"web_logos.json\")],\n    [\"Sign Animals\", \"avabodh.signs.animals\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_animals.json\")],\n    [\"Sign Food\", \"avabodh.signs.food\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_food.json\")],\n    [\"Sign Healthcare\", \"avabodh.signs.healthcare\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_healthcare.json\")],\n    [\"Sign Nature\", \"avabodh.signs.nature\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_nature.json\")],\n    [\"Sign People\", \"avabodh.signs.people\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_people.json\")],\n    [\"Sign Safety\", \"avabodh.signs.safety\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_safety.json\")],\n    [\"Sign Science\", \"avabodh.signs.science\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_science.json\")],\n    [\"Sign Sports\", \"avabodh.signs.sports\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_sports.json\")],\n    [\"Sign Tech\", \"avabodh.signs.tech\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_tech.json\")],\n    [\"Sign Transportation\", \"avabodh.signs.transportation\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_transportation.json\")],\n    [\"Sign Travel\", \"avabodh.signs.travel\", \"Other\", \"Signs And Pictograph\", stencilUrl(\"sign_travel.json\")]\n]\n\nexport default stencils;","import stencils from \"./Stencils\"\nimport libnames from '../data/libnames.json'\nimport uiConfig from \"../common/UIConfig\"\n\nvar shapes = {\n    expanded: false,\n    libraryColCount: 4,\n    scroll: 0,\n    searchText: ''\n}\n\nconst loadingUrls = new Set()\n\nvar miniGroup = {\n    name: 'Default',\n    shapes: [\n        {category: 0, num: 0, name: ''},\n        {category: 0, num: 2, name: ''},\n        {category: 0, num: 3, name: ''},\n        {category: 0, num: 5, name: ''},\n        {category: 0, num: 6, name: ''},\n        {category: 0, num: 7, name: ''},\n        {category: 0, num: 8, name: ''},\n        {category: 2, num: 1, name: ''},\n        {category: 2, num: 2, name: ''},\n        {category: 2, num: 5, name: ''},\n        {category: 2, num: 6, name: ''},\n        {category: 2, num: 10, name: ''},\n        {category: 2, num: 20, name: ''},\n        {category: 3, num: 0, name: ''},\n        {category: 3, num: 4, name: ''},\n        {category: 5, num: 0, name: ''},\n        {category: 5, num: 4, name: ''},\n        {category: 5, num: 5, name: ''},\n        {category: 5, num: 6, name: ''},\n        {category: 5, num: 7, name: ''},\n        {category: 5, num: 8, name: ''},\n        {category: 5, num: 9, name: ''},\n        {category: 5, num: 10, name: ''},\n        {category: 4, num: 1, name: ''}\n    ]\n}\n\nfunction initEmptyCategs() {\n    for (let item of stencils) {\n        window.Module.libraryStore().initEmptyCateg(item[0], item[1], item[2], item[3], item[4]);\n    }\n}\n\nasync function loadAll() {\n    window.Module.libraryStore().initNames(JSON.stringify(libnames));\n    let contents = { }\n    let loadTemplate = async (idx, name) => {\n        await fetch(name)\n        .then(response => response.json())\n        .then(response => {\n          contents[idx] = JSON.stringify(response);\n        })\n    }\n    var promise = Promise.all([\n        loadTemplate(0, \"templates/v4/templates.json\"),\n        loadTemplate(1, \"templates/v4/connection_arrows.json\"),\n        loadTemplate(2, \"templates/v4/basic.json\"),\n        loadTemplate(3, \"templates/v4/container.json\"),\n        loadTemplate(4, \"templates/v4/flowchart.json\"),\n        loadTemplate(5, \"templates/v4/arrow.json\"),\n        loadTemplate(6, \"templates/v4/callout.json\"),\n        loadTemplate(7, \"templates/v4/misc.json\"),\n        loadTemplate(8, \"templates/v4/uml.json\")\n    ]);\n    await promise;\n\n    for (let idx = 0; idx < 9; idx++) {\n        if (contents[idx]) {\n            window.Module.libraryStore().initObjects(contents[idx]);\n        }\n    }\n}\n\nshapes.initialize = async function() {\n    if (!uiConfig.shouldLoadShapes()) {\n        return;\n    }\n    await loadAll();  \n    window.Module.libraryStore().init(shapes.libraryColCount);\n    initEmptyCategs();\n    window.Module.libraryStore().onDisplaySettingChange();\n}\n\nshapes.groupCount = function() {\n    return window.Module.getShapeLibGroupCount();\n}\n\nshapes.getGroup = function(idx) {\n    var group = window.Module.getShapeLibGroup(idx);\n    return group;\n}\n\nshapes.expandGroup = function(idx, flag) {\n    window.Module.expandShapeLibGroup(idx, flag);\n}\n\nshapes.getShapes = function(idx, cb) {\n    var group = window.Module.getShapeLibGroup(idx);\n    if (group == null) {\n        return;\n    }\n    if (group.contentUrl) {\n        if (loadingUrls.has(group.contentUrl)) {\n            return;\n        }\n        loadingUrls.add(group.contentUrl);\n        fetch(group.contentUrl)\n            .then(response => response.json())\n            .then(response => {\n                window.Module.libraryStore().initObjects(JSON.stringify(response));\n                cb();\n                loadingUrls.delete(group.contentUrl);\n            });\n    }\n}\n\nshapes.getMiniGroup = function() {\n    return miniGroup;\n}\n\nshapes.getDisplaySettings = function() {\n    return window.Module.getShapeLibDisplaySettings();\n}\n\nshapes.setDisplaySetting = function(name, flag) {\n    window.Module.libraryStore().addDisplaySetting(name, flag);\n    window.Module.libraryStore().onDisplaySettingChange();\n}\n\nshapes.search = function(text) {\n    shapes.searchText = text;\n    window.Module.libraryStore().filterObjects(text);\n}\n\nexport default shapes\n","import globalState from './GlobalState'\nimport shapes from '../shapelib/Shapes'\n\nvar canvas = {\n    showGrid: true,\n    gridType: 2,\n };\n\nconst CANVAS_FIXED = 1;\nconst UNIT_PT = 0;\nconst UNIT_PX = 1;\nconst UNIT_IN = 2;\nconst UNIT_CM = 3;\n\nconst minWidth = 200;\nconst minHeight = 200;\n\nvar canvasElement = null;\n\nvar isScrolling = false;\nvar savedScroll = {x:0, y: 0};\nvar scrollingFrom = {x: 0, y: 0};\n\nvar infiniteScroll = true;\nvar uiScrollX = 0;\nvar uiScrollY = 0;\nvar effectiveScrollX = 0;\nvar effectiveScrollY = 0;\n\nvar effectiveWidth = 0;\nvar effectiveHeight = 0;\n\nvar canvasWidth = 0;\nvar canvasHeight = 0;\n\nvar viewPortWidth = 0;\nvar viewPortHeight = 0;\n\nvar pageLayoutDoneOnce = false;\n\nconst fixCanvas = function(cnv, width, height) {\n    var dpr = window.devicePixelRatio || 1;\n    cnv.width = width * dpr;\n    cnv.height = height * dpr;\n    cnv.style.width = width + \"px\";\n    cnv.style.height = height + \"px\";\n    var ctx = cnv.getContext(\"2d\");\n    ctx.scale(dpr, dpr);\n}\n\nconst computeSize = (vport) => {\n    var rect = vport.getBoundingClientRect();\n    \n    viewPortWidth = rect.width;\n    viewPortHeight = rect.height;\n\n    // Initialize assuming it is infinite scroll\n    canvasWidth = viewPortWidth;\n    canvasHeight = viewPortHeight;\n\n    effectiveHeight = canvasHeight;\n    effectiveWidth = canvasWidth;\n\n    effectiveScrollX = 0;\n    effectiveScrollY = 0;\n    \n    infiniteScroll = true;\n\n    // Check if there is fixed canvas size\n    if (window.wsmanager && window.wsmanager.state == 'ready') {\n        var pageEditor = window.Module.startPageEditing();\n        var sz = pageEditor.getSize();\n        var tp = pageEditor.getCanvasType();\n        \n        // In CSS: a pt is 1/72 of an inch, and a px is 1/96 of an inch.\n        // In Lekh, a pt in 1/144 of an inch and we map 1 Lekh pt to 1 css px \n        var pointsPerInch = 144;\n        var pixelsPerPoint = 1;\n        var pixlesPerInch = pointsPerInch * pixelsPerPoint;\n        if (tp.value == CANVAS_FIXED) {\n            infiniteScroll = false;\n            if (sz.unit.value == UNIT_PT) {\n                //canvasWidth = (sz.width * 96) / 72;\n                //canvasHeight = (sz.height * 96) / 72;\n                canvasWidth = sz.width;\n                canvasHeight = sz.height;\n            } else if (sz.unit.value == UNIT_PX) {\n                canvasWidth = sz.width;\n                canvasHeight = sz.height;\n            } else if (sz.unit.value == UNIT_IN) {\n                canvasWidth = sz.width * pixlesPerInch;\n                canvasHeight = sz.height * pixlesPerInch;\n            } else if (sz.unit.value == UNIT_CM) {\n                canvasWidth = (sz.width / 2.54) * pixlesPerInch;\n                canvasHeight = (sz.height / 2.54) * pixlesPerInch;\n            }\n            var zm = window.Module.getZoom();\n            canvasWidth *= zm;\n            canvasHeight *= zm;\n\n            if (!pageLayoutDoneOnce) {\n                pageLayoutDoneOnce = true;\n                if (canvasWidth < viewPortWidth) {\n                    uiScrollX = (viewPortWidth - canvasWidth) / 2;\n                }\n                if (canvasHeight < viewPortHeight) {\n                    uiScrollY = (viewPortHeight - canvasHeight) / 2;\n                }\n            }\n\n            var effectiveMinWidth = Math.min(minWidth, viewPortWidth)\n            var effectiveMinHeight = Math.min(minHeight, viewPortHeight)\n            // check canvas moving out of view port to left and top\n            if (canvasWidth <= effectiveMinWidth) {\n                uiScrollX = uiScrollX < 0 ? 0 : uiScrollX;\n            } else if (canvasWidth + uiScrollX < effectiveMinWidth) {\n                uiScrollX =  effectiveMinWidth - canvasWidth;\n            }\n\n            if (canvasHeight < effectiveMinHeight) {\n                uiScrollY = uiScrollY < 0 ? 0 : uiScrollY;\n            } else if (canvasHeight + uiScrollY < effectiveMinHeight) {\n                uiScrollY = effectiveMinHeight - canvasHeight;\n            }\n\n            // check canvas moving out of view port to right and bottom\n            if (uiScrollX > viewPortWidth - effectiveMinWidth) {\n                uiScrollX = viewPortWidth - effectiveMinWidth;\n            }\n\n            if (uiScrollY > viewPortHeight - effectiveMinHeight) {\n                uiScrollY = viewPortHeight - effectiveMinHeight;\n            }\n\n            effectiveScrollX = uiScrollX;\n            effectiveScrollY = uiScrollY;\n\n            effectiveWidth = canvasWidth;\n            effectiveHeight = canvasHeight;\n\n            // check clipping in left and top\n            if (effectiveScrollX < 0) {\n                effectiveWidth += effectiveScrollX;\n                effectiveScrollX = 0;\n            }\n            if (effectiveScrollY < 0) {\n                effectiveHeight += effectiveScrollY;\n                effectiveScrollY = 0;\n            }\n\n            // check clipping to right and bottom\n            if (uiScrollX + canvasWidth > viewPortWidth) {\n                effectiveWidth -= canvasWidth + uiScrollX - viewPortWidth;\n            }\n\n            if (uiScrollY + canvasHeight > viewPortHeight) {\n                effectiveHeight -= canvasHeight + uiScrollY - viewPortHeight;\n            }\n        }\n    }\n}\n\ncanvas.setSize = () => {\n    canvasElement = document.getElementById(\"drawCanvas\");\n    var vport = document.getElementById(\"viewport\");\n    var gridPanel = document.getElementById(\"gridCanvas\");\n    var transparentPanel = document.getElementById(\"transparentPanel\");\n\n    if (!canvasElement || !vport || !gridPanel || !transparentPanel) {\n        return;\n    }\n\n    computeSize(vport);\n\n    fixCanvas(gridPanel, effectiveWidth, effectiveHeight);\n    fixCanvas(canvasElement, effectiveWidth, effectiveHeight);\n    fixCanvas(transparentPanel, viewPortWidth, viewPortHeight);\n    \n    gridPanel.style.position = 'absolute';\n    canvasElement.style.position = 'absolute';\n\n    if (infiniteScroll) {\n        gridPanel.style.left = '0px';\n        gridPanel.style.top = '0px';\n\n        canvasElement.style.left = '0px';\n        canvasElement.style.top = '0px';\n    } else {    \n        gridPanel.style.left = effectiveScrollX + 'px';\n        gridPanel.style.top = effectiveScrollY + 'px';\n\n        canvasElement.style.left = effectiveScrollX + 'px';\n        canvasElement.style.top = effectiveScrollY + 'px';\n\n        if (uiScrollX < 0 || uiScrollY < 0) {\n            var zm = window.Module.getZoom();\n            var sx = uiScrollX < 0? uiScrollX : 0;\n            var sy = uiScrollY < 0? uiScrollY : 0;\n            window.Module.setScroll({x: sx / zm, y: sy / zm});\n        } else {\n            window.Module.setScroll({x: 0, y: 0});\n        }\n    }\n}\n\nconst moveDelta = (dx, dy) => {\n    uiScrollX += dx;\n    uiScrollY += dy;\n    canvas.setSize();\n}\n\nconst moveDeltaForInfiniteScroll = (dx, dy) => {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    dx = dx / zm;\n    dy = dy / zm;\n    window.Module.setScroll({x: scroll.x + dx, y: scroll.y + dy});\n}\n\nconst move = (x, y, type) => {\n    if (type == 0) {\n        isScrolling = true;\n        savedScroll = {x: uiScrollX, y: uiScrollY}\n        scrollingFrom = {x: x, y: y}\n    }\n\n    if (type == 1 && isScrolling) {\n        var dx = x - scrollingFrom.x;\n        var dy = y - scrollingFrom.y;\n\n        uiScrollX = savedScroll.x + dx;\n        uiScrollY = savedScroll.y + dy;\n\n        canvas.setSize();\n    }\n\n    if (type == 2 && isScrolling) {\n        isScrolling = false;\n    }\n}\n\nconst moveForInfiniteScroll = (x, y, type) => {\n    if (type == 0) {\n        isScrolling = true;\n        savedScroll = window.Module.getScroll();\n        scrollingFrom = {x: x, y: y}\n    }\n\n    if (type == 1 && isScrolling) {\n        var dx = x - scrollingFrom.x;\n        var dy = y - scrollingFrom.y;\n\n        var zm = window.Module.getZoom();\n        var sx = savedScroll.x + dx / zm;\n        var sy = savedScroll.y + dy / zm;\n        window.Module.setScroll({ x: sx, y: sy });\n    }\n\n    if (type == 2 && isScrolling) {\n        isScrolling = false;\n    }\n}\n\ncanvas.toggleGrid = function() {\n    canvas.showGrid = !canvas.showGrid;\n    canvas.drawGrid();\n}\n\ncanvas.onResize = function() {\n    canvas.layout();\n}\n\ncanvas.onConnectionStateChanged = () => {\n    if (!window.wsmanager || \n        (window.wsmanager.state != 'init' &&\n        window.wsmanager.state != 'ready')) {\n        return;\n    }\n    canvas.layout();\n}\n\ncanvas.layout = function() {\n    canvas.setSize();\n    canvas.drawGrid();\n    if(window.wsmanager && window.wsmanager.state == 'ready') {\n        canvas.draw();\n    }\n}\n\ncanvas.moveDelta = function(dx, dy) {\n    if (infiniteScroll) {\n        moveDeltaForInfiniteScroll(dx, dy);\n    } else {\n        moveDelta(dx, dy);\n    }\n    canvas.drawGrid();\n    canvas.draw();\n}\n\ncanvas.move = function(x, y, type) {\n    if (infiniteScroll) {\n        moveForInfiniteScroll(x, y, type);\n    } else {\n        move(x, y, type);\n    }\n    canvas.drawGrid();\n    canvas.draw();\n}\n\ncanvas.getMidPoint = () => {\n    if (infiniteScroll) {\n        var tp = document.getElementById('transparentPanel');\n        var rect = tp.getBoundingClientRect();\n        var x = (rect.left + rect.right) / 2;\n        var y = (rect.top + rect.bottom) / 2;\n        return {x: x, y: y};\n    }\n    return {x: effectiveScrollX + effectiveWidth / 2, y: effectiveScrollY + effectiveHeight / 2}\n}\n\ncanvas.isVisible = (x, y, pad) => {\n    var tp = document.getElementById('transparentPanel');\n    var rect = tp.getBoundingClientRect();\n    if (infiniteScroll) {\n        return x-pad >= rect.left && x+pad <= rect.right && y-pad >= rect.top && y+pad <= rect.bottom;\n    }\n    return x-pad >= effectiveScrollX && x+pad <= effectiveScrollX + effectiveWidth &&\n        y-pad >= effectiveScrollY && y+pad <= effectiveScrollY + effectiveHeight;\n}\n\ncanvas.mapx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (x  + scroll.x) * zm;\n}\n\ncanvas.mapy = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return (y  + scroll.y) * zm;\n}\n\ncanvas.maprx = function(x) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return x / zm - scroll.x;\n}\n\ncanvas.mapry = function(y) {\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    return y / zm - scroll.y;\n}\n\ncanvas.mapPtUIScroll = (pt) => {\n    if (infiniteScroll) {\n        return pt;\n    }\n    return {x: pt.x - effectiveScrollX, y:pt.y - effectiveScrollY};\n}\n\ncanvas.toViewPort = (pt) => {\n    if (infiniteScroll) {\n        return pt;\n    }\n    return {x: pt.x + effectiveScrollX, y:pt.y + effectiveScrollY};\n}\n\ncanvas.getZoom = function() {\n    return window.Module.getZoom();\n}\n\ncanvas.zoomAt = function(x, y, factor) {\n    // (x + d1) * z1 = x'\n    // (x + d2) * z2 = x'\n    // from these two equations, calculate d2\n    var z1 = window.Module.getZoom();\n    z1 = Math.round(z1 * 100) / 100;\n    var z2 = Math.round(factor * 100) / 100;\n    \n    // If new zoom and old zoom are same in scale of [1 100]\n    // then do not do anything\n    if (Math.round(z1 * 100) == Math.round(z2 * 100)) {\n        return;\n    }\n    \n    if (infiniteScroll) {\n        var scroll = window.Module.getScroll();\n\n        var dx = (x / z2) - (x / z1) + scroll.x;\n        var dy = (y / z2) - (y / z1) + scroll.y;\n\n        window.Module.setScroll({x: dx, y: dy});\n        window.Module.setZoom(Math.round(z2 * 100));\n    } else {\n        var uiPt = canvas.mapPtUIScroll({x: x, y: y});\n        uiPt.x = uiPt.x < 0 ? 0: uiPt.x;\n        uiPt.y = uiPt.y < 0 ? 0: uiPt.y;\n        uiPt.x = uiPt.x > effectiveWidth? effectiveWidth: uiPt.x;\n        uiPt.y = uiPt.y > effectiveHeight? effectiveHeight: uiPt.y;\n\n        var canvasPtX = canvas.maprx(uiPt.x);\n        var canvasPtY = canvas.mapry(uiPt.y);\n\n        window.Module.setZoom(Math.round(z2 * 100));\n        canvas.setSize();\n        var ptx = canvas.mapx(canvasPtX)\n        var pty = canvas.mapy(canvasPtY);\n        \n        uiScrollX -= ptx - uiPt.x;\n        uiScrollY -= pty - uiPt.y;\n        canvas.setSize();\n    }\n\n    globalState.onZoom();\n    canvas.drawGrid();\n    canvas.draw();\n }\n\ncanvas.zoom = function(factor) {\n    var vport = document.getElementById(\"viewport\");\n    var rect = vport.getBoundingClientRect();\n    canvas.zoomAt(rect.width / 2, rect.height / 2, factor);\n}\n\ncanvas.exportToImage = function(format) {\n    var padding = 10;\n    var rect = window.Module.getBoundsOfAll();\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    var width = rect.width + 2 * padding;\n    var height = rect.height + 2 * padding;\n\n    var cel = document.createElement(\"canvas\");\n    fixCanvas(cel, width, height);\n    var ctx = cel.getContext(\"2d\");\n\n    if (format == \"jpg\" || format == \"jpeg\") {\n        ctx.fillStyle = '#fff';\n        ctx.fillRect(0, 0, width, height);\n    }\n    window.Module.drawCanvasForExport(ctx, sx, sy);\n    return {data: cel.toDataURL(\"image/\" + format), width: width, height: height }\n}\n\ncanvas.drawGrid = function() {\n    var panel = document.getElementById(\"gridCanvas\");\n    var wd = panel.width;\n    var ht = panel.height;\n    var ctx = panel.getContext('2d');\n    ctx.clearRect(0, 0, panel.width, panel.height);\n    if (!canvas.showGrid) {\n        return;   \n    }\n    var zm = window.Module.getZoom();\n    var scroll = window.Module.getScroll();\n    var rad = 1 * zm;\n    var step = 48 * zm;\n\n    var startx = (scroll.x * zm) % step;\n    var starty = (scroll.y * zm) % step;\n\n    if (canvas.gridType == 1) {\n        if (step < 16) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.fillStyle = \"#c0c0c0\";\n        ctx.strokeStyle = \"#c0c0c0\";\n        for (var i = starty; i < ht; i+= step) {\n            for (var j = startx; j < wd; j+= step) {\n                ctx.moveTo(j + rad, i);\n                ctx.arc(j, i, rad, 0, 2 * Math.PI, false);\n            }\n        }\n        ctx.fill();\n        ctx.stroke();\n    } else {\n        if (step < 8) {\n            return;\n        }\n        ctx.lineWidth = 0.1;\n        ctx.strokeStyle = \"#606060\";\n        ctx.beginPath();\n        for (var i = starty; i < ht; i+= step) {\n          ctx.moveTo(0, i);\n          ctx.lineTo(wd, i);\n        }\n        for (i = startx; i < wd; i+= step) {\n          ctx.moveTo(i, 0);\n          ctx.lineTo(i, ht);\n        }\n        ctx.stroke();\n    }\n}\n  \ncanvas.draw = function() {\n    if (canvasElement == null) {\n        canvasElement = document.getElementById(\"drawCanvas\");\n    }\n    \n    var ctx = canvasElement.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    window.Module.drawCanvas(ctx);\n}\n\ncanvas.drawCell = function(categ, num, sz, ctx) {\n    var row = num / shapes.libraryColCount;\n    var col = num % shapes.libraryColCount;\n    var padding = 8;\n    window.Module.drawCell(categ, row, col, sz - padding, sz / 2, sz / 2, ctx);\n}\n\ncanvas.drawArrow = function(type, size, ctx) {\n}\n\nwindow.drawCanvas = canvas.draw;\nwindow.layoutCanvas = canvas.layout;\n\nexport default canvas;","class EventListener {\n    constructor() {\n        this.listeners = [];\n\n        this.addListener = (cb) => {\n            var idx = this.listeners.indexOf(cb);\n            if (idx < 0) {\n                this.listeners.push(cb);\n            }\n        };\n\n        this.removeListener = (cb) => {\n            var idx = this.listeners.indexOf(cb);\n            if (idx >= 0) {\n                this.listeners.splice(idx, 1);\n            }\n        };\n\n        this.trigger = (data) => {\n            for (let cb of this.listeners) {\n                try {\n                    cb(data);\n                } catch (e) {\n                    console.log(e);\n                }\n            }\n        };\n    }\n}\n\nexport default EventListener;\n","import canvas from './Canvas'\nimport EventListener from '../utils/EventListener'\n\nvar modes = {\n    selection: 1,\n    move: 2,\n    draw: 3,\n    smartDraw: 4,\n    text: 5,\n    erase: 6,\n    laser: 7\n}\n\nvar menus = {\n    selectionGroup: 0,\n    selection: 1,\n    move: 2,\n    laser: 3,\n    draw: 4,\n    smartDraw: 5,\n    text: 6,\n    shapes: 7,\n    erase: 8,\n    eraseAll: 9,\n    cameraInput: 10\n}\n\nvar menuState = {\n    menus: menus,\n    modes: modes,\n    popup: null,\n    selected: menus.smartDraw,\n    inputMode: modes.smartDraw,\n    selectionGroupVal: modes.selection,\n    cameraActive: false,\n    event: new EventListener()\n} \n\nmenuState.handleMenuClick = function(menu) {\n    if (menu == menus.eraseAll) {\n        window.Module.eraseAll();\n        canvas.draw();\n        return;\n    }\n    \n    if (menu == menus.selectionGroup) {\n        if (menuState.popup == menus.selectionGroup) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.selectionGroup;\n        }\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = menuState.selectionGroupVal;\n    } else if (menu == menus.selection) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.selection;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.selection;\n    } else if (menu == menus.move) {\n        menuState.popup = null;\n        menuState.selectionGroupVal = modes.move;\n        menuState.selected = menus.selectionGroup;\n        menuState.inputMode = modes.move;\n    } else if (menu == menus.laser) {\n        menuState.popup = null;\n        menuState.selected = menus.laser;\n        menuState.inputMode = modes.laser;\n    } else if (menu == menus.draw) {\n        if (menuState.popup == menus.draw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.draw;\n        }\n        menuState.selected = menus.draw;\n        menuState.inputMode = modes.draw;\n    } else if (menu == menus.smartDraw) {\n        if (menuState.popup == menus.smartDraw) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.smartDraw;\n        }\n        menuState.selected = menus.smartDraw;\n        menuState.inputMode = modes.smartDraw;\n    } else if (menu == menus.text) {\n        if (menuState.popup == menus.text) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.text;\n        }\n        menuState.selected = menus.text;\n        menuState.inputMode = modes.text;\n    } else if (menu == menus.shapes) {\n        if (menuState.popup == menus.shapes) {\n            menuState.popup = null;\n        } else {\n            menuState.popup = menus.shapes;\n        }\n    } else if (menu == menus.erase) {\n        menuState.popup = null;\n        menuState.selected = menus.erase;\n        menuState.inputMode = modes.erase;\n    } else if (menu == menus.cameraInput) {\n        menuState.cameraActive = !menuState.cameraActive\n        menuState.popup = null;\n    }\n\n    handleMode();\n    window.setTimeout(()=> {\n        menuState.event.trigger();\n    }, 1);\n}\n\nmenuState.hasPopup = function() {\n    return menuState.popup != null;\n}\n\nmenuState.removePopup = function() {\n    menuState.popup = null;\n}\n\nmenuState.inDrawMode = function() {\n    return menuState.inputMode == modes.draw || menuState.inputMode == modes.smartDraw;\n}\n\nfunction handleMode() {\n    var mode = menuState.inputMode;\n    var tpanel = document.getElementById(\"transparentPanel\");\n\n    if (mode == modes.selection) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.move) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'all-scroll';\n    } else if (mode == modes.laser) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.POINTING);\n        tpanel.style.cursor = 'url(\"red_circle.svg\") 10 10, auto';\n    } else if (mode == modes.draw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(false);\n        tpanel.style.cursor = 'url(\"pen-solid.svg\") 0 20, auto';\n        //tpanel.style.cursor = 'auto';\n    } else if (mode == modes.smartDraw) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.DRAWING);\n        window.Module.enableRecognition(true);\n        //tpanel.style.cursor = 'url(\"pen-solid.svg\") 0 20, auto';\n        tpanel.style.cursor = 'auto';\n    } else if (mode == modes.text) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.SELECTION);\n        tpanel.style.cursor = 'url(\"title_black.svg\") 0 20, auto';\n    } else if (mode == modes.erase) {\n        window.Module.inputReceiver().setMode(window.Module.InputMode.ERASING);\n        tpanel.style.cursor = 'url(\"eraser-solid.svg\"), auto';\n    }\n}\n\nexport default menuState;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport menuState from './MenuState'\nimport uiConfig from './UIConfig';\n\nvar AppInput = {\n  showContextMenu:()=>{},\n  showShapeProps: null\n};\n\nvar drawPoints = [];\nvar drawing = false;\nvar transparentPanel = null;\nvar tnode = null;\nvar ignoreNextClick = false;\n\nconst TextAlignHorizontalDefault = 0;\nconst TextAlignHorizontalCenter = 1;\nconst TextAlignHorizontalLeft = 2;\nconst TextAlignHorizontalRight = 3;\n\nfunction updateCursorLoc(x, y) {\n  var docid = window.wsmanager.docid\n  if (!docid || menuState.inputMode != menuState.modes.laser) {\n    return;\n  }\n\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y:y});\n  window.Module.inputFilter().pan(uiMappedPt, window.Module.InputType.OTHER);\n}\n\nfunction finishTextEditing() {\n  if (tnode != null) {\n    window.Module.finishTextEditing(tnode.val());\n    tnode.remove();\n    canvas.draw();\n    tnode = null;\n    ignoreNextClick = true;\n    return true;\n  }\n  return false;\n}\n\nfunction initShapeTextEditor() {\n  finishTextEditing()\n  ignoreNextClick = false;\n\n  var rect = window.Module.getTextEditRect();\n\n  var vpp = canvas.toViewPort({x: rect.x, y: rect.y});\n\n  var cx = vpp.x + rect.width / 2;\n  var cy = vpp.y + rect.height / 2;\n\n  var tid = Math.random() + \"t\";\n  tnode = $(\"<textarea id='\" + tid + \"'></textarea>\");\n  tnode.val(window.Module.getTextForEditing());\n  var style = window.Module.getTextEditStyle();\n  var fontSize = style.effectiveFontSize() * style.effectiveFontMultiplier();\n  var isFLoating = window.Module.isEditingFloatingText();\n\n  var tattrs = {\n    \"resize\": \"none\",\n    \"overflow\": \"hidden\",\n    \"position\": \"absolute\",\n    \"font\": style.effectivePlatformFontFamily(),\n    \"line-height\": fontSize + \"px\",\n    \"background-color\": \"transparent\",\n    \"left\": (vpp.x)+ \"px\", \n    \"top\": (vpp.y) + \"px\", \n    \"width\": rect.width + \"px\",\n    \"height\": rect.height + \"px\",\n    \"z-index\": \"1000\"\n  }\n\n  switch (style.effectiveTextAlignHorizontal().value) {\n    case TextAlignHorizontalDefault:\n    case TextAlignHorizontalCenter:\n      tattrs[\"text-align\"] = \"center\";\n      break;\n    case TextAlignHorizontalLeft:\n      tattrs[\"text-align\"] = \"left\";\n      break;\n    case TextAlignHorizontalRight:\n      tattrs[\"text-align\"] = \"right\";\n      break;\n    default:\n      break;\n  }\n  tnode.css(tattrs);\n  $(\"#drawContent\").append(tnode);\n  tnode.trigger(\"focus\");\n  tnode.on(\"blur\", function(e) {\n    finishTextEditing();\n  });\n  tnode.on(\"keyup\", function(e) {\n    if (e.code == \"Escape\" || e.key == \"Escape\") {\n      finishTextEditing();\n      ignoreNextClick = false;\n    }\n  });\n\n  function updateSize() {\n    if (!tnode) {\n      return;\n    }\n    var text = tnode.val();\n    var sz = window.Module.getTextEditSize(text, isFLoating);\n    if (sz.height == 0) {\n      sz.height = fontSize;\n    }\n    if (sz.width < 50) {\n      sz.width = 50;\n    }\n    sz.height += fontSize / 2;\n    tnode.css(\"top\", (cy - sz.height / 2) + \"px\");\n    tnode.css(\"height\", sz.height + \"px\");\n    if (isFLoating) {\n      var width = sz.width + 150;\n      tnode.css(\"width\", width + \"px\");\n      tnode.css(\"left\", (cx - width / 2) + \"px\");\n    }\n    //console.log(sz);\n  }\n \n  tnode.on('change keyup paste', updateSize);\n  updateSize();\n}\n\nconst drawLaserCircle = function(x, y) {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.beginPath();\n  ctx.arc(x, y, 32, 0, 2 * Math.PI, false);\n  ctx.fillStyle = 'red';\n  ctx.fill();\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = 'red';\n  ctx.stroke();\n}\n\nconst clearTransparentPanel = function() {\n  if (transparentPanel == null) {\n    transparentPanel = document.getElementById('transparentPanel')\n  }\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.clearRect(0, 0, transparentPanel.width, transparentPanel.height);\n}\n\nconst drawTemp = function() {\n  clearTransparentPanel();\n  var ctx = transparentPanel.getContext(\"2d\");\n  ctx.lineJoin = \"round\";\n  ctx.lineCap = \"round\";\n\n  if (drawPoints.length > 0) {\n    window.Module.setCurrentStyleToCtx(ctx);\n    ctx.beginPath();\n    var dp = drawPoints[0];\n    ctx.moveTo(dp.x, dp.y);\n    \n    for (var i = 0; i < drawPoints.length; i++) {\n      ctx.lineTo(drawPoints[i].x, drawPoints[i].y);  \n    }\n    \n    ctx.stroke(); \n  }\n}\n\nconst dbclick = (x, y) => {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n  finishTextEditing()\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y: y});\n  window.Module.inputFilter().tap(uiMappedPt, 2);\n  canvas.draw();\n  if (window.Module.inputReceiver().needTextEditing()) {\n    initShapeTextEditor()\n  }\n}\n\nAppInput.isEditingText = function() {\n  return tnode != null;\n}\n\nAppInput.onResize = function() {\n  transparentPanel = null;\n}\n\nAppInput.ignoreNextClick = function(val) {\n  ignoreNextClick = val;\n}\n\nAppInput.click = function(x, y) {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n\n  finishTextEditing()\n  if (ignoreNextClick) {\n    ignoreNextClick = false;\n    return true;\n  }\n  if (menuState.inputMode == menuState.modes.move) {\n    // Ignore click for move mode\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.text) {\n    // Text mode. Edit text and return\n    dbclick(x, y);\n    return;\n  }\n  var uiMappedPt = canvas.mapPtUIScroll({x:x, y: y});\n  if (menuState.inputMode == menuState.modes.draw) {\n    var mpt = {x: canvas.maprx(uiMappedPt.x), y: canvas.mapry(uiMappedPt.y)};\n    window.Module.addClickCircle(mpt);\n  } else {\n    window.Module.inputFilter().tap(uiMappedPt, 1);\n  }\n  canvas.draw();\n\n  if (AppInput.showShapeProps) {\n    AppInput.showShapeProps();\n  }\n}\n\nAppInput.dbclick = function(x, y) {\n    dbclick(x, y);\n}\n\nAppInput.drag = function(x, y, kind) {\n    //console.log(x + \", \" + y + \"  ==  \" + kind);\n    finishTextEditing();\n    if (uiConfig.readOnly()) {\n        dragMoveMode(x, y, kind);\n        return;\n    }\n    ignoreNextClick = false;\n    if (menuState.inputMode == menuState.modes.move) {\n        dragMoveMode(x, y, kind);\n    } else if (menuState.inputMode == menuState.modes.text) {\n      // Text mode\n      if (kind == 2) {\n        dbclick(x, y);\n      }\n    } else if (menuState.inputMode == menuState.modes.laser) {\n      dragLaser(x, y, kind);\n    }  else {\n      dragNative(x, y, kind);\n    }\n}\n\nfunction dragLaser(x, y, kind) {\n  if (kind == 2) {\n    clearTransparentPanel();\n  } else {\n    drawLaserCircle(x, y);\n  }\n  updateCursorLoc(x, y);\n}\n\nfunction dragNative(x, y, kind) {\n    var it = window.Module.InputType.START;\n    if (kind == 1) {\n        it = window.Module.InputType.OTHER;\n    } else if (kind == 2) {\n        it = window.Module.InputType.END\n    }\n    var pt = {x: x, y: y }\n    var uiMappedPt = canvas.mapPtUIScroll(pt);\n    var mpt = {x: canvas.maprx(uiMappedPt.x), y: canvas.mapry(uiMappedPt.y)};\n\n    if (it == window.Module.InputType.START && menuState.inDrawMode()) {\n      if (window.Module.willDrawAt(mpt)) {\n        drawing = true;\n      }\n    }\n\n    if (drawing) {\n      drawPoints.push(pt);\n      drawTemp();\n    } else {\n      window.Module.inputFilter().pan(uiMappedPt, it);\n      canvas.draw();\n    }\n\n    if (it == window.Module.InputType.END && drawing) {\n      drawing = false;\n      flushTempDrawing();\n    }\n}\n\nfunction flushTempDrawing() {\n  const mapPt = (pt) => canvas.mapPtUIScroll(pt);\n  if (drawPoints.length > 2) {\n    window.Module.inputFilter().pan(mapPt(drawPoints[0]), window.Module.InputType.START);\n    for (var i = 1; i < drawPoints.length - 1; i++) {\n      window.Module.inputFilter().pan(mapPt(drawPoints[i]), window.Module.InputType.OTHER);\n    }\n    var pt = drawPoints[drawPoints.length - 1];\n    window.Module.inputFilter().pan(mapPt(pt), window.Module.InputType.END);\n  }\n  canvas.draw();\n  drawPoints = [];\n  drawTemp();\n}\n\nfunction dragMoveMode(x, y, kind) {\n    canvas.move(x, y, kind);\n    canvas.drawGrid();\n    canvas.draw();\n}\n\nAppInput.contextmenu = function(x, y) {\n  if (uiConfig.readOnly()) {\n    return;\n  }\n  if (menuState.inputMode == menuState.modes.selection ||\n    menuState.inputMode == menuState.modes.draw ||\n    menuState.inputMode == menuState.modes.smartDraw) {\n    AppInput.showContextMenu(true, x, y);\n  }\n}\n\nAppInput.enter = function(x, y) {\n}\n\nAppInput.move = function(x, y) {\n  updateCursorLoc(x, y)\n}\n\nAppInput.leave = function(x, y) {\n}\n\nexport default AppInput;\n","var util = { };\n\nconst dataUrlRegex =  /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i;\n\nlet coreUtil = null;\n\nutil.generateUUID = function() {\n    var d = new Date().getTime();//Timestamp\n    var d2 = (window.performance && window.performance.now && (window.performance.now()*1000)) || 0;//Time in microseconds since page-load or 0 if unsupported\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16;//random number between 0 and 16\n        if(d > 0){//Use timestamp until depleted\n            r = (d + r)%16 | 0;\n            d = Math.floor(d/16);\n        } else {//Use microseconds since page-load if supported\n            r = (d2 + r)%16 | 0;\n            d2 = Math.floor(d2/16);\n        }\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n}\n\nutil.getBase64FromImage = (img, format) => {\n    let data = null;\n    if (!!img.src && img.src.startsWith('data:')) {\n        if (dataUrlRegex.test(img.src)) {\n            data = img.src;\n        }\n    }\n    if (data == null) {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        ctx.drawImage(img, 0, 0);\n        data = canvas.toDataURL();\n    }\n    if (data.indexOf('base64,') >= 0) {\n        data = data.substring(data.indexOf('base64,') + 7)\n    }\n    return data;\n}\n\nutil.mouseLocation = (event) => {\n  var x = event.pageX;\n    var y = event.pageY;\n    if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n        if (event.changedTouches && event.changedTouches.length > 0) {\n            var touch = event.changedTouches[0];\n            x = touch.pageX;\n            y = touch.pageY;\n        }\n    }\n    if (x == null || y == null || typeof x == \"undefined\" || typeof y == \"undefined\") {\n        return null;\n    }\n    return {x: x, y: y};\n}\n\nutil.hasTouch = () => {\n    var hasTouchScreen = false;\n    if (\"maxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.maxTouchPoints > 0;\n    } else if (\"msMaxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.msMaxTouchPoints > 0;\n    } else {\n        var mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n        if (mQ && mQ.media === \"(pointer:coarse)\") {\n            hasTouchScreen = !!mQ.matches;\n        } else if ('orientation' in window) {\n            hasTouchScreen = true; // deprecated, but good fallback\n        } else {\n            // Only as a last resort, fall back to user agent sniffing\n            var UA = navigator.userAgent;\n            hasTouchScreen = (\n                /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) ||\n                /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA)\n            );\n        }\n    }\n    return hasTouchScreen;\n}\n\nutil.loadScript = async (path) => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement(\"script\");\n        script.src = path;\n        script.async = true;\n        script.onload = () => {\n            resolve();\n        }\n        script.onerror = (err) => {\n            console.log(err)\n            reject(err);\n        }\n        document.body.appendChild(script);\n    });\n}\n\nutil.getModifiersFromEvent = (e) => {\n    let value = 0;\n    if (e.shiftKey) {\n        value = value | 1;\n    }\n    if (e.ctrlKey) {\n        value = value | 2;\n    }\n    if (e.altKey) {\n        value = value | 4;\n    }\n    if (e.metaKey) {\n        value = value | 16;\n    }\n    return value;\n}\n\nutil.setModifiersFromEvent = (e, pe) => {\n    let value = util.getModifiersFromEvent(e);\n    if (value != 0) {\n        let modifiers = new window.Module.avabodh_lekh_event_Modifiers()\n        modifiers.value = value;\n        pe.setModifiers(modifiers)\n    }\n}\n\nutil.fontStr = (style) => {\n    let str = '';\n    if (style.effectiveFontStyle() == window.Module.avabodh_lekh_Style_FontStyle.FontStyleItalic) {\n        str += 'italic ';\n    }\n    if (style.effectiveFontWeight() == window.Module.avabodh_lekh_Style_FontWeight.FontWeightBold) {\n        str += 'bold ';\n    }\n\n    let fz = style.effectiveFontSize();\n    let mult = style.effectiveFontMultiplier();\n    if (mult >= 0 && mult != 1.0) {\n        fz = fz * mult;\n    }\n    str += fz + 'px'\n    let ff = style.effectiveFontFamily();\n    if (ff != '') {\n        str += ' ' + ff + ',';\n    }\n    str +=  \" sans-serif\";\n    return str;\n}\n \nutil.colorStr = (cl, disabled) => {\n    if (disabled) {\n        if (coreUtil == null) {\n            coreUtil = window.Module.avabodh_lekh_app_CoreUtil_instance();\n        }\n        cl = coreUtil.disabledColor(cl);\n    }\n    return`rgba(${cl.red}, ${cl.green}, ${cl.blue}, ${cl.alpha / 255})`;\n}\n\nutil.listFont = () => {\n    const fontCheck = new Set([\n        // Windows 10\n        'Arial', 'Arial Black', 'Bahnschrift', 'Calibri', 'Cambria', 'Cambria Math', 'Candara', 'Comic Sans MS', 'Consolas', 'Constantia', 'Corbel', 'Courier New', 'Ebrima', 'Franklin Gothic Medium', 'Gabriola', 'Gadugi', 'Georgia', 'HoloLens MDL2 Assets', 'Impact', 'Ink Free', 'Javanese Text', 'Leelawadee UI', 'Lucida Console', 'Lucida Sans Unicode', 'Malgun Gothic', 'Marlett', 'Microsoft Himalaya', 'Microsoft JhengHei', 'Microsoft New Tai Lue', 'Microsoft PhagsPa', 'Microsoft Sans Serif', 'Microsoft Tai Le', 'Microsoft YaHei', 'Microsoft Yi Baiti', 'MingLiU-ExtB', 'Mongolian Baiti', 'MS Gothic', 'MV Boli', 'Myanmar Text', 'Nirmala UI', 'Palatino Linotype', 'Segoe MDL2 Assets', 'Segoe Print', 'Segoe Script', 'Segoe UI', 'Segoe UI Historic', 'Segoe UI Emoji', 'Segoe UI Symbol', 'SimSun', 'Sitka', 'Sylfaen', 'Symbol', 'Tahoma', 'Times New Roman', 'Trebuchet MS', 'Verdana', 'Webdings', 'Wingdings', 'Yu Gothic',\n        // macOS\n        'American Typewriter', 'Andale Mono', 'Arial', 'Arial Black', 'Arial Narrow', 'Arial Rounded MT Bold', 'Arial Unicode MS', 'Avenir', 'Avenir Next', 'Avenir Next Condensed', 'Baskerville', 'Big Caslon', 'Bodoni 72', 'Bodoni 72 Oldstyle', 'Bodoni 72 Smallcaps', 'Bradley Hand', 'Brush Script MT', 'Chalkboard', 'Chalkboard SE', 'Chalkduster', 'Charter', 'Cochin', 'Comic Sans MS', 'Copperplate', 'Courier', 'Courier New', 'Didot', 'DIN Alternate', 'DIN Condensed', 'Futura', 'Geneva', 'Georgia', 'Gill Sans', 'Helvetica', 'Helvetica Neue', 'Herculanum', 'Hoefler Text', 'Impact', 'Lucida Grande', 'Luminari', 'Marker Felt', 'Menlo', 'Microsoft Sans Serif', 'Monaco', 'Noteworthy', 'Optima', 'Palatino', 'Papyrus', 'Phosphate', 'Rockwell', 'Savoye LET', 'SignPainter', 'Skia', 'Snell Roundhand', 'Tahoma', 'Times', 'Times New Roman', 'Trattatello', 'Trebuchet MS', 'Verdana', 'Zapfino',\n        // Ubuntu\n        'C059', 'Century Schoolbook L', 'D050000L', 'DejaVu Sans', 'DejaVu Sans Mono', 'DejaVu Serif', 'Dingbats', 'Droid Sans Fallback', 'Nimbus Mono L', 'Nimbus Mono L', 'Nimbus Mono PS', 'Nimbus Roman', 'Nimbus Roman No9 L', 'Nimbus Sans', 'Nimbus Sans L', 'Nimbus Sans Narrow', 'Noto Mono', 'P052', 'Standard Symbols L', 'Standard Symbols PS', 'URW Bookman', 'URW Bookman L', 'URW Chancery L', 'URW Gothic', 'URW Gothic L', 'URW Palladio L', 'Z003',\n    ].sort());\n    const fontAvailable = new Set();\n    for (const font of fontCheck.values()) {\n        if (document.fonts.check(`12px \"${font}\"`)) {\n            fontAvailable.add(font);\n        }\n    }\n    return fontAvailable;\n}\n\nutil.readFile = (rootType, path) => {\n    let resp = {errorCode: -1, content: ''};\n    if (rootType != window.Module.avabodh_lekh_FileInfo_RootType.Document) {\n        return resp;\n    }\n    if (!path.startsWith('settings/')) {\n        return resp;\n    }\n\n    let content = localStorage.getItem('files:' + path)\n    if (!!content) {\n        resp.content = content;\n        resp.errorCode = 0;\n    }\n    \n    return resp;\n}\n\nutil.writeFile = (rootType, path, content) => {\n    if (rootType != window.Module.avabodh_lekh_FileInfo_RootType.Document) {\n        return -1;\n    }\n    if (!path.startsWith('settings/')) {\n        return -1;\n    }\n\n    localStorage.setItem('files:' + path, content);\n    return 0;\n}\n\nutil.resizeImage = (imgToResize, size) => {\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n\n    canvas.width = size.width;\n    canvas.height = size.height;\n\n    context.drawImage(\n        imgToResize,\n        0,\n        0,\n        size.width,\n        size.height\n    );\n    let img = new Image();\n    img.src = canvas.toDataURL();\n    return img;\n}\n\nexport default util;\n  ","\nimport util from \"./Util\";\n\nvar touchInput = {}\n\nvar mod = null;\nvar hostEnv = null;\n\nconst eventPointFromTouch = (touch, state, ts) => {\n    let pt = {\n      x: touch.pageX,\n      y: touch.pageY,\n      pointerId: touch.identifier,\n      state: state,\n      pressure: 0,\n      altitude:0,\n      azimuth: 0,\n      timestamp: ts,\n      pointerType: mod.avabodh_lekh_event_PointerType.Finger,\n      button: mod.avabodh_lekh_event_MouseButton.None,\n      flag: mod.avabodh_lekh_event_EventPoint_Flag.None\n    };\n    return pt;\n  }\n\nconst handleEvent = (ev, state) => {\n    let pe = new mod.avabodh_lekh_event_PointerEvent();\n    let list = new mod.List_avabodh_lekh_event_EventPoint();\n    for (let touch of ev.changedTouches) {\n        list.push_back(eventPointFromTouch(touch, state, ev.timeStamp));\n    }\n    pe.setPoints(list);\n    util.setModifiersFromEvent(ev, pe);\n    hostEnv.onPointerEvent(pe);\n}\n\ntouchInput.attachEvents = function(canvasElement) {\n    mod = window.Module;\n    hostEnv = mod.avabodh_lekh_app_HostEnv_instance();\n\n    canvasElement.addEventListener('touchstart', function(ev) {\n      ev.preventDefault();\n      handleEvent(ev, mod.avabodh_lekh_event_EventPointState.Down);\n    });\n    canvasElement.addEventListener('touchmove', function(ev) {\n      ev.preventDefault();\n      handleEvent(ev, mod.avabodh_lekh_event_EventPointState.Move);\n    });\n    canvasElement.addEventListener('touchend', function(ev) {\n      ev.preventDefault();\n      handleEvent(ev, mod.avabodh_lekh_event_EventPointState.Up);\n    });\n    canvasElement.addEventListener('touchleave', function(ev) {\n      ev.preventDefault();\n      hostEnv.resetPointerInputState();\n    });\n    canvasElement.addEventListener('touchcancel', function(ev) {\n      ev.preventDefault();\n      hostEnv.resetPointerInputState();\n    });\n}\n\nexport default touchInput;","import util from \"./Util\";\nvar mouseInput = { };\n\nvar downCount = 0;\nvar mod = null;\nvar hostEnv = null;\n\nconst eventPointsFromEvent = (e, state) => {\n  let list = new mod.List_avabodh_lekh_event_EventPoint();\n  let btn = mod.avabodh_lekh_event_MouseButton.Left;\n  if (e.button == 0) {\n    btn = mod.avabodh_lekh_event_MouseButton.Left;\n  } else if (e.button == 1) {\n    btn = mod.avabodh_lekh_event_MouseButton.Middle;\n  } else if (e.button == 2) {\n    btn = mod.avabodh_lekh_event_MouseButton.Right;\n  } else if (e.button == 3) {\n    btn = mod.avabodh_lekh_event_MouseButton.Back;\n  }\n  if (downCount == 0 && state == mod.avabodh_lekh_event_EventPointState.Move) {\n    btn = mod.avabodh_lekh_event_MouseButton.None;\n  }\n  let pt = {\n    x: e.offsetX,\n    y: e.offsetY,\n    pointerId: -1,\n    state: state,\n    pressure: 0,\n    altitude:0,\n    azimuth: 0,\n    timestamp: 0,\n    pointerType: mod.avabodh_lekh_event_PointerType.Mouse,\n    button: btn,\n    flag: mod.avabodh_lekh_event_EventPoint_Flag.None\n  };\n  list.push_back(pt);\n  return list;\n}\n\nmouseInput.attachEvents = function(canvasElement) {\n    mod = window.Module;\n    hostEnv = mod.avabodh_lekh_app_HostEnv_instance();\n\n    canvasElement.addEventListener('wheel', (e) => {\n        e.preventDefault();\n        let se = new mod.avabodh_lekh_event_ScrollEvent();\n        se.setDelta(-e.deltaX, -e.deltaY);\n        se.setType(mod.avabodh_lekh_event_ScrollEvent_Type.Generic);\n        se.setLocation({x: e.offsetX, y: e.offsetY});\n        se.setHasValidLocation(true);\n        util.setModifiersFromEvent(e, se);\n        hostEnv.onScrollEvent(se);\n    });\n  \n    window.bean.on(canvasElement, 'click', function (e) {\n        e.preventDefault();\n    });\n  \n    window.bean.on(canvasElement, 'mousedown', function (e) {\n      downCount++;\n      let pe = new mod.avabodh_lekh_event_PointerEvent();\n      let pts = eventPointsFromEvent(e, mod.avabodh_lekh_event_EventPointState.Down);\n      pe.setPoints(pts);\n      util.setModifiersFromEvent(e, pe);\n      hostEnv.onPointerEvent(pe);\n    });\n  \n    window.bean.on(canvasElement, 'mouseup', function (e) {\n      if (downCount > 0) {\n        downCount--;\n      }\n      let pe = new mod.avabodh_lekh_event_PointerEvent();\n      let pts = eventPointsFromEvent(e, mod.avabodh_lekh_event_EventPointState.Up);\n      pe.setPoints(pts);\n      util.setModifiersFromEvent(e, pe);\n      hostEnv.onPointerEvent(pe);\n    });\n  \n    window.bean.on(canvasElement, 'mousemove', function (e) {\n        e.preventDefault();\n        let pe = new mod.avabodh_lekh_event_PointerEvent();\n        let pts = eventPointsFromEvent(e, mod.avabodh_lekh_event_EventPointState.Move);\n        pe.setPoints(pts);\n        util.setModifiersFromEvent(e, pe);\n        hostEnv.onPointerEvent(pe);\n    });\n  \n    window.bean.on(canvasElement, 'mouseenter', function (e) {\n      downCount = 0;\n    });\n  \n    window.bean.on(canvasElement, 'mouseleave', function (e) {\n      downCount = 0;\n      hostEnv.resetPointerInputState();\n    });\n  \n    window.bean.on(canvasElement, 'contextmenu', function (e) {\n        e.preventDefault();\n    });\n}\n\nexport default mouseInput;\n","import util from './Util';\n\nvar keyboardInput = { \n    showingDialog: false\n};\n\nvar listeners = [];\nvar postListeners = [];\n\nconst isMac = navigator.userAgent.indexOf(\"OS X\") > 0;\n\nkeyboardInput.addListener = function(cb) {\n    listeners.push(cb);\n}\n\nkeyboardInput.removeListener = function(cb) {\n    for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i] == cb) {\n            listeners.splice(i, 1);\n            return;\n        }\n    }\n}\n\nkeyboardInput.addPostListener = function(cb) {\n    postListeners.push(cb);\n}\n\nkeyboardInput.removePostListener = function(cb) {\n    for (var i = 0; i < postListeners.length; i++) {\n        if (postListeners[i] == cb) {\n            postListeners.splice(i, 1);\n            return;\n        }\n    }\n}\n\nkeyboardInput.handleKeyDown = function(event) {\n    for (let cb of listeners) {\n        if (cb(event)) {\n            return;\n        }\n    }\n\n    let cmd = window.Module.avabodh_lekh_app_Command_instance();\n    let CmdKey = window.Module.avabodh_lekh_event_CmdKey;\n    let Modifiers = window.Module.avabodh_lekh_event_Modifiers;\n    let key = event.key.toLowerCase();\n\n    if (key == 'backspace') {\n        cmd.executeKeys2(CmdKey.Delete, Modifiers.None);\n    } else if (key == 'delete') {\n        cmd.executeKeys2(CmdKey.Delete, Modifiers.None);\n    } else if (key == 'escape') {\n        cmd.executeKeys2(CmdKey.Escape, Modifiers.None);\n    } else if (key == 'enter') {\n        cmd.executeKeys2(CmdKey.Enter, Modifiers.None);\n    } else if (key == 'arrowright') {\n        cmd.executeKeys2(CmdKey.RightArrow, Modifiers.None);\n    } else if (key == 'arrowleft') {\n        cmd.executeKeys2(CmdKey.LeftArrow, Modifiers.None);\n    } else if (key == 'arrowup') {\n        cmd.executeKeys2(CmdKey.UpArrow, Modifiers.None);\n    } else if (key == 'arrowdown') {\n        cmd.executeKeys2(CmdKey.DownArrow, Modifiers.None);\n    } else {\n        let modVal = util.getModifiersFromEvent(event);\n        // convert Ctrl -> Meta\n        if ((modVal & 2) != 0 && !isMac) {\n            modVal &= ~2;\n            modVal |= 16;\n        }\n        let modifiers = new window.Module.avabodh_lekh_event_Modifiers()\n        modifiers.value = modVal;\n        cmd.executeKeys(key, modifiers);\n    }\n    event.preventDefault();\n\n    for (let cb of postListeners) {\n        cb(event);\n    }\n}\n\nkeyboardInput.attachEvents = function(canvasElement) {\n    canvasElement.addEventListener(\"keydown\", e => keyboardInput.handleKeyDown(e), false);\n}\n\nexport default keyboardInput;\n","import $ from 'jquery';\nimport canvas from './Canvas'\nimport AppInput from './AppInput'\nimport touchInput from './TouchInput'\nimport mouseInput from './MouseInput'\nimport keyboardInput from './KeyboardInput'\nimport uiConfig from './UIConfig';\nimport EventListener from '../utils/EventListener';\n\nvar appEvent = {\n  resizeListener: new EventListener()\n};\n\nfunction attachResizeHandler() {\n  $(window).on(\"resize\", function(evt) {\n    canvas.onResize();\n    AppInput.onResize();\n    appEvent.resizeListener.trigger(evt);\n  });\n}\n\nappEvent.attachEventHandlers = function() {\n  attachResizeHandler();\n  var canvasElement = document.getElementById(\"transparentPanel\");\n  if (uiConfig.shouldAttachMouseEventHandler()) {\n    mouseInput.attachEvents(canvasElement);\n    touchInput.attachEvents(canvasElement);\n  }\n  if (uiConfig.shouldAttachKeyboardEventHandler()) {\n    keyboardInput.attachEvents(canvasElement);\n  }\n}\n\nexport default appEvent;\n","\nimport { Dialog } from \"@material-ui/core\";\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport React, {useState} from \"react\";\n\nexport const FileNameInputDialog = ({title, cancelText, okText, onCancel, onAccept, initialValue }) => {\n    const [value, setValue] = useState(initialValue);\n    var okDisabled = value.trim() == '';\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"name\"\n                fullWidth\n                variant=\"outlined\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onCancel}>{cancelText}</Button>\n            <Button onClick={()=>onAccept(value)} disabled={okDisabled}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\nexport const ConfirmDialog = ({title, msg, okText, cancelText, onAccept, onCancel }) => {\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onCancel}>{cancelText}</Button>\n            <Button onClick={onAccept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\nexport const MessageDialog = ({title, msg, okText, onAccept }) => {\n    return (\n    <Dialog onClose={()=>{}} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={onAccept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\n","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from '@material-ui/core';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport canvas from \"../../common/Canvas\";\n\nconst LekhImporter = ({showDialog, onImport, onCancel}) => {\n  const [file, setFile] = useState(null);\n  const [errMsg, setErrMsg] = useState('');\n\n  var btnText = 'Import';\n  var btnEnabled = file != null;\n  \n  const onChange = (e) => {\n    var changedFile = e.target.files[0];\n    setFile(changedFile);\n    setErrMsg('')\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => {\n        var out = window.Module.importLekh(reader.result);\n        if (out) {\n            setErrMsg('Unable to import. Please check that you are importing a valid Lekh file.');\n        } else {\n            showDialog(null);\n            canvas.draw();\n            onImport();\n        }\n    }, false);\n\n    if (file) {\n        reader.readAsText(file);\n    }\n  };\n\n  const close = ()=> {\n    showDialog(null);\n    onCancel();\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\">\n        <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Import Lekh File</h4>\n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <form\n            action=\"\"\n            className=\"\"\n            onSubmit={handleSubmit}\n        >\n            <input type='file' accept=\".lekh\" className=\"mx-3 mt-4\" onChange={onChange}/>\n            {errMsg && \n              <div className=\"mt-2 mx-3 text-red-600 text-sm\">\n                <label>{errMsg}</label>\n              </div>\n            }\n            <div className=\"flex mb-4 mt-5 mx-3\">\n                <div className=\"mr-4\"><Button variant=\"outlined\" onClick={close}>Cancel</Button></div>\n                <Button variant=\"outlined\" disabled={!btnEnabled} onClick={handleSubmit}>{btnText}</Button>\n            </div>\n        </form>\n    </Dialog>\n  );\n};\n\nexport default LekhImporter;\n","import React from \"react\"\n\nconst MiniLoader = () => {\n  return <div className=\"loading-spinner\"></div>\n}\n\nexport default MiniLoader\n","export const constant = {\n  tokenName: \"LKH-TKN\",\n  expiryName: \"LKH-EXP\",\n  refreshToken: \"LKH-RFR\",\n  baseUrl: \"https://api.lekh.app\",\n  appUrl: \"https://docs.lekh.app\",\n  backendVersion: \"v1.1\",\n  userInfoLoading: 'loading',\n  userInfoError: 'error',\n  userInfoAvailable: 'available'\n}\n","import { constant } from \"./ApiConstants\";\n\nexport const setTokenToStorage = token => {\n  return localStorage.setItem(constant.tokenName, token);\n};\n\nexport const setRefreshTokenToStorage = token => {\n  return localStorage.setItem(constant.refreshToken, token);\n};\n\nexport const setExpiryTimeToStorage = date => {\n  return localStorage.setItem(constant.expiryName, date);\n};\n\nexport const storageContainsToken = () => {\n  return !!localStorage.getItem(constant.tokenName);\n};\n\nexport const storageContainsRefreshToken = () => {\n  return !!localStorage.getItem(constant.tokenName);\n};\n\nexport const getTokenFromStorage = () => {\n  return localStorage.getItem(constant.tokenName);\n};\n\nexport const getRefreshTokenFromStorage = () => {\n  return localStorage.getItem(constant.refreshToken);\n};\n\nexport const getExpiryTimeFromStorage = () => {\n  return localStorage.getItem(constant.expiryName);\n};\n\nexport const tokenStillValid = () => {\n  return (\n    new Date().getTime() <\n    new Date(parseInt(getExpiryTimeFromStorage()) * 1000).getTime()\n  );\n};\n\nexport const checkLogin = () => {\n  if (getRefreshTokenFromStorage()) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\nexport const removeTokenFromStorage = () => {\n  localStorage.removeItem(constant.tokenName);\n};\n\nexport const removeRefreshTokenFromStorage = () => {\n  localStorage.removeItem(constant.refreshToken);\n};\n\nexport const removeExpiryDateFromStorage = () => {\n  localStorage.removeItem(constant.expiryName);\n};\n\nexport const logout = () => {\n  return (\n    removeExpiryDateFromStorage() &&\n    removeRefreshTokenFromStorage() &&\n    removeTokenFromStorage()\n  );\n};\n","import {\n  getRefreshTokenFromStorage,\n  setRefreshTokenToStorage,\n  removeRefreshTokenFromStorage,\n} from \"./ApiUtils\";\nimport { refreshToken, getCurrentUser } from \"./ApiRequests\";\nimport { constant } from \"./ApiConstants\";\nimport integ from \"../integ/integ\";\nimport uiConfig from \"../common/UIConfig\";\nimport EventListener from \"./EventListener\";\n\n/*\nThe user info can be used in react functional component like this\n\n  const onUserLoginStateChange = () => {\n    // handler for user login state change\n  }\n\n  useEffect(() => {\n    userInfo.addListener(onUserLoginStateChange);\n    userInfo.get();\n    return () => {\n      userInfo.removeListener(onUserLoginStateChange);\n    }\n  }, []);\n\n  // use this check while rendering\n  // userInfo.state == 'available' ==> user is logged in\n  // userInfo.state == 'loading' ==> the user info is being fetched\n  // userInfo.state == 'error' ==> unable to fetch the user info. redirect to login page\n\n*/\n\nconst available = constant.userInfoAvailable;\nconst loading = constant.userInfoLoading;\nconst error = constant.userInfoError;\n\nvar getCalled = false;\n\n// state can be one one of: loading, available, error\nvar userInfo = {\n  state: loading,\n  data: {},\n  token: \"\",\n  event: new EventListener()\n};\n\nuserInfo.isLoggedIn = () => {\n  return userInfo.state == available && !!userInfo.token;\n}\n\nuserInfo.logout = () => {\n  userInfo.token = \"\";\n  userInfo.data = { };\n  userInfo.state = \"loading\";\n  getCalled = false;\n  removeRefreshTokenFromStorage();\n}\n\nuserInfo.get = () => {\n  if (getCalled && userInfo.state != error) {\n    return\n  }\n  getCalled = true;\n\n  if (!uiConfig.isUsingLekhBackend()) {\n    integ.getUser((state, token, info) => {\n      userInfo.token = token;\n      userInfo.data = info;\n      userInfo.state = state;\n      onChange();\n    });\n    return;\n  }\n\n  window.addEventListener('storage', handleStorageChange);\n  userInfo.state = loading;\n  fetchInfo(false);\n};\n\nuserInfo.getAccessTokenOnDemand = async (refreshTokenStr) => {\n  if (!refreshTokenStr) {\n    return false;\n  }\n  var resp = null;\n  try {\n    resp = await refreshToken(refreshTokenStr);\n  } catch(err) {\n    console.log(err);\n    return false;\n  }\n  userInfo.token = resp.data.access_token;\n  try {\n    resp = await getCurrentUser(resp.data.access_token);\n  } catch (err) {\n    console.log(err);\n    return false;\n  }\n  userInfo.data = resp.data;\n  return true;\n}\n\nuserInfo.canUseGestures = () => {\n  if (!userInfo.isLoggedIn()) {\n    return false;\n  }\n  return userInfo.data.features && userInfo.data.features.gesture;\n}\n\nconst handleStorageChange = () => {\n  var loggedIn = userInfo.isLoggedIn();\n  let refreshTokenStr = getRefreshTokenFromStorage();\n  if (loggedIn && !!refreshTokenStr) {\n    console.log(\"Not responding to storage change\");\n    return;\n  }\n  console.log(\"Responding to storage change\");\n  fetchInfo(true)\n}\n\nconst onChange = () => {\n  try {\n    userInfo.event.trigger();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst fetchInfo = async (onStoreChange) => {\n  let refreshTokenStr = getRefreshTokenFromStorage();\n  if (!refreshTokenStr) {\n    if (userInfo.state != error) {\n      setErr();\n    }\n    return;\n  }\n  var wasLoggedin = userInfo.isLoggedIn()\n  var resp = await tryToRefreshToken(refreshTokenStr);\n  if (resp.new_refresh_token) {\n    if (!onStoreChange) {\n      setRefreshTokenToStorage(resp.new_refresh_token);\n    }\n    if (!wasLoggedin) {\n      onChange();\n    }\n  } else {\n    if (resp.do_retry) {\n      retry(onStoreChange);\n    } else {\n      removeRefreshTokenFromStorage();\n      setErr();\n    }\n  }\n}\n\nconst setErr = () => {\n  userInfo.state = error;\n  userInfo.data = {};\n  userInfo.token = '';\n  onChange();\n}\n\nconst tryToRefreshToken = async (refreshTokenStr) => {\n  let resp = null;\n  try {\n    resp = await refreshToken(refreshTokenStr);\n  } catch(err) {\n    if (err.response && err.response.data && err.response.data.code) {\n      let code = err.response.data.code;\n      if (code == \"code_expired\" || code == \"refresh_token_expired\" ||\n        code == \"invalid_input\" || code == 'login_failure' || code == 'unknown') {\n        return {new_refresh_token: null, do_retry: false};\n      }\n    }\n    console.log(err);\n    return {new_refresh_token: null, do_retry: true};\n  }\n\n  let new_refresh_token = resp.data.refresh_token\n  userInfo.token = resp.data.access_token;\n\n  try {\n    resp = await getCurrentUser(resp.data.access_token);\n  } catch (err) {\n    console.log(err);\n    return {new_refresh_token: null, do_retry: true};\n  }\n  \n  renewTokenBeforeExpiry();\n\n  userInfo.data = resp.data;\n  userInfo.state = available;\n\n  return {new_refresh_token: new_refresh_token, do_retry: false}\n};\n\nconst renewTokenBeforeExpiry = () => {\n  // TODO: we should look at the expires_at\n  // but for now we will refresh every half an hour\n  let hafHour = 1000 * 60 * 30;\n  setTimeout(() => {\n    fetchInfo(false);\n  }, hafHour);\n};\n\nconst retry = (onStoreChange) => {\n  setTimeout(() => {\n    fetchInfo(onStoreChange);\n  }, 1000 * 10);\n};\n\nexport default userInfo;\n","import axios from \"axios\";\n// import { getTokenFromStorage } from \"./ApiUtils\";\nimport { constant } from \"./ApiConstants\";\nimport userInfo from \"./UserInfo\";\n\nexport const ApiRequestWithToken = () => {\n  const config = { baseURL: constant.baseUrl };\n  config.headers = { \"X-Auth-Token\": userInfo.token };\n  const instance = axios.create(config);\n  return instance;\n};\n\nexport const ApiRequestWithoutToken = () => {\n  const config = { baseURL: constant.baseUrl, withCredentials: true };\n  const instance = axios.create(config);\n  return instance;\n};\n\nexport const fetcher = url =>\n  ApiRequestWithToken()\n    .get(url)\n    .then(res => res.data);\n\nexport const signUp = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/users\", data);\n\nexport const login = data => ApiRequestWithoutToken().post(\"/v1.1/auth\", data);\n\nexport const confirmAccount = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/confirm\", data);\n\nexport const forgotPassword = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/forgot\", data);\n\nexport const resetPassword = data =>\n  ApiRequestWithoutToken().post(\"/v1.1/auth/reset\", data);\n\nexport const refreshToken = data =>\n  ApiRequestWithToken().post(\"/v1.1/auth/refresh\", { refresh_token: data });\n\nexport const loginWithGoogle = data =>\nApiRequestWithoutToken().post(\"/v1.1/auth/googlelogin\", data);\n\nexport const loginWithApple = data =>\nApiRequestWithoutToken().post(\"/v1.1/auth/applelogin\", data);\n\nexport const getCurrentUser = () =>\n  ApiRequestWithToken().get(\"/v1.1/users/current\");\n\nexport const getDocs = qstr => ApiRequestWithToken().get(\"/v1.1/docs\" + qstr);\n\nexport const getDoc = docid => ApiRequestWithToken().get(\"/v1.1/docs/\" + docid);\n\nexport const updateCurrentUser = data =>\n  ApiRequestWithToken().post(\"/v1.1/users/current\", data);\n\nexport const createNew = data => ApiRequestWithToken().post(\"/v1.1/docs\", data);\n\nexport const openDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {});\n\nexport const deleteDoc = id => ApiRequestWithToken().delete(`/v1.1/docs/${id}`);\n\nexport const claimDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {'operation': {'type': 'claim'}});\n\nexport const duplicateDoc = id => ApiRequestWithToken().post(`/v1.1/docs/${id}`, {'operation': {'type': 'duplicate'}});\n\nexport const shareDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}/share`, data);\n\nexport const RenameDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}`, data);\n\nexport const MoveDoc = (id, data) =>\n  ApiRequestWithToken().post(`/v1.1/docs/${id}`, data);\n\nexport const deleteShare = (id, email) =>\n  ApiRequestWithToken().delete(`/v1.1/docs/${id}/share?email=${email}\n`);\n\nexport const getResource = (id) => ApiRequestWithToken().get(`/v1.1/resources/${id}`, {responseType: 'blob'});\n\nexport const hello = (ref) => ApiRequestWithoutToken().get('/hello?ref=' + ref, {withCredentials: true});\n\nexport const getDocsLogSessions = (qstr) => ApiRequestWithToken().get('/v1.1/docslog/logs/sessions?' + qstr);\nexport const getADocsLogSession = (sessionid) => ApiRequestWithToken().get('/v1.1/docslog/logs/sessions/' + sessionid);\nexport const getDocsLogUpdate = (docid, version) => ApiRequestWithToken().get('/v1.1/docslog/logs/updates/' + docid + '/' + version);","import qs from 'qs';\nimport { getDocs, getDoc, deleteDoc, createNew, duplicateDoc } from \"./ApiRequests\";\nimport EventListener from './EventListener'\n\nvar nextToken = null;\n\nvar docsManager = {\n  state: \"loading\",\n  parent: null,\n  search: null,\n  order: null,\n  orderBy: null,\n  docs: [],\n  path: [],\n  mode: 'mydocs',\n  event: new EventListener(),\n};\n\ndocsManager.setPath = (path) => {\n  var arr = path.split('/');\n  if (arr.length % 2 != 0) {\n    return;\n  }\n\n  docsManager.path = [];\n  docsManager.parent = null;\n\n  for (let i = 0; i < arr.length; i+= 2) {\n    var obj = {docid: arr[i], name: arr[i + 1]}\n    docsManager.path.push(obj);\n  }\n  if (docsManager.path.length > 0) {\n    docsManager.parent = docsManager.path[docsManager.path.length - 1].docid;\n  } else {\n    docsManager.parent = null;\n  }\n}\n\ndocsManager.serializePath = () => {\n  var path = '';\n  for(let item of docsManager.path) {\n    if (path != '') {\n      path += '/';\n    }\n    path += item.docid + '/' + item.name;\n  }\n  return encodeURIComponent(path);\n}\n\ndocsManager.setRoute = (route, qparam) => {\n  if (route == '/docs/mydocs') {\n    docsManager.mode = 'mydocs';\n  } else if (route == '/docs/shared') {\n    docsManager.mode = 'shared';\n  } else if (route == '/docs/search') {\n    docsManager.mode = 'search';\n  } else {\n    return;\n  }\n  docsManager.reset();\n  var qpath = qs.parse(qparam, { ignoreQueryPrefix: true }).path;\n  if (qpath) {\n    docsManager.setPath(qpath);\n  }\n  var qsearch = qs.parse(qparam, { ignoreQueryPrefix: true }).search;\n  if (qsearch) {\n    docsManager.search = qsearch;\n  }\n}\n\ndocsManager.getRoute = () => {\n  var qs = docsManager.serializePath();\n  var path = '/docs/' + docsManager.mode;\n  var arr = []\n  if (qs != '') {\n    arr.push('path=' + qs);\n  } \n  if (docsManager.mode == 'search' && docsManager.search) {\n    arr.push('search=' + encodeURIComponent(docsManager.search));\n  }\n\n  if (arr.length > 0) {\n    path += '?' + arr.join('&');\n  }\n  return path;\n}\n\ndocsManager.setSearchMode = (searchTerm) => {\n    if (docsManager.mode == 'search') {\n      docsManager.search = searchTerm;\n      return;\n    }\n    docsManager.reset();\n    docsManager.search = searchTerm;\n    docsManager.mode = 'search';\n}\n\ndocsManager.getRootName = () => {\n    if (docsManager.mode == 'shared') {\n        return 'Shared with me';\n    } else if (docsManager.mode == 'search') {\n        return 'Search';\n    } else {\n        return 'My Documents'\n    }\n}\n\ndocsManager.reset = () => {\n  docsManager.state = \"loading\";\n  docsManager.docs = [];\n  docsManager.parent = null;\n  docsManager.search = null;\n  docsManager.order = null;\n  docsManager.orderBy = null;\n  docsManager.path = [];\n  nextToken = null;\n};\n\ndocsManager.pushParent = function (parent) {\n  for (let item of docsManager.docs) {\n    if (item.docid == parent) {\n      docsManager.parent = parent;\n      docsManager.path.push(item);\n      docsManager.docs = [];\n      docsManager.state = 'loading';\n      break;\n    }\n  }\n};\n\ndocsManager.popParentTo = function (parent) {\n  docsManager.docs = [];\n  docsManager.state = 'loading';\n\n  if (!parent) {\n    docsManager.path = [];\n    docsManager.parent = null;\n    return;\n  }\n\n  while (docsManager.path.length > 0) {\n    let item = docsManager.path[docsManager.path.length - 1];\n    if (item.docid == parent) {\n        docsManager.parent = parent;\n        break;\n    }\n    docsManager.path.pop();\n  }\n};\n\ndocsManager.deleteDoc = async docid => {\n  await deleteDoc(docid);\n  await docsManager.reload();\n};\n\ndocsManager.canCreateNewDoc = () => {\n  return docsManager.mode == \"mydocs\" || docsManager.path.length > 0;\n}\n\ndocsManager.createDoc = async (parent, type, name) => {\n  await createNew({ parent: parent, type: type, name: name });\n  await docsManager.reload();\n};\n\ndocsManager.reload = async () => {\n  var qs = [];\n  if (docsManager.parent) {\n    qs.push(\"parent=\" + docsManager.parent);\n  }\n  if (docsManager.mode == 'search' && docsManager.search && !docsManager.parent) {\n    qs.push(\"search=\" + docsManager.search);\n  }\n  if (docsManager.order) {\n    qs.push(\"order=\" + docsManager.order);\n  }\n  if (docsManager.orderBy) {\n    qs.push(\"order_by=\" + docsManager.orderBy);\n  }\n  if (docsManager.mode == 'shared' && !docsManager.parent) {\n    qs.push(\"shared=true\");\n  }\n  var qstr = \"\";\n  if (qs.length > 0) {\n    qstr = \"?\" + qs.join(\"&\");\n  }\n\n  docsManager.state = \"loading\";\n  docsManager.event.trigger();\n  try {\n    var resp = await getDocs(qstr);\n    docsManager.docs = resp.data.docs;\n    docsManager.state = \"available\";\n  } catch (err) {\n    docsManager.state = \"error\";\n    console.log(err);\n  }\n  docsManager.event.trigger();\n};\n\ndocsManager.getADoc = async (docid) => {\n  var resp = await getDoc(docid);\n  return resp.data;\n}\n\ndocsManager.getFullPath = async (docid, root) => {\n  var arr = [];\n  var doc = null;\n  try {\n    doc = await docsManager.getADoc(docid);\n    arr.push({name: doc.name, docid: doc.docid});\n  } catch (err) {\n    console.log(err);\n  }\n\n  while (doc.parent != root) {\n    try {\n      doc = await docsManager.getADoc(doc.parent);\n      arr.unshift({name: doc.name, docid: doc.docid});\n    } catch(err) {\n      console.log(err);\n      break;\n    }\n  }\n  return arr;\n}\n\ndocsManager.get = async () => {\n  if (docsManager.state == \"available\") {\n    return;\n  }\n  docsManager.reload();\n};\n\ndocsManager.duplicate = async (docid) => {\n  await duplicateDoc(docid);\n}\n\ndocsManager.getChildFolders = async folderId => {\n  var docs = await docsManager.getChildItems(folderId);\n  var folders = [];\n  for (let item of docs) {\n    if (item.type == \"folder\") {\n      folders.push(item);\n    }\n  }\n  return folders;\n};\n\ndocsManager.getChildItems = async folderId => {\n  var qstr = \"?parent=\" + folderId;\n  var docs = [];\n  try {\n    var resp = await getDocs(qstr);\n    docs = resp.data.docs;\n  } catch (err) {\n    console.log(err);\n  }\n  return docs;\n};\n\nexport default docsManager;\n","import EventListener from \"../utils/EventListener\";\nimport { constant } from \"../utils/ApiConstants\";\n\nconst messaging  = {\n    event: new EventListener(),\n    data: null,\n    init: () => { window.addEventListener(\"message\", onMessage, false); }\n}\n\nconst onMessage = (event) => {\n    if (event.origin !== constant.appUrl) {\n        return;\n    }\n    messaging.data = event.data;\n    messaging.event.trigger(event);\n}\n\nexport default messaging;","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog, IconButton } from \"@material-ui/core\";\nimport { useEffect, useState, useRef } from \"react\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport docsManager from \"../../utils/DocsManager\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { AiFillFolder, AiOutlineRight } from \"react-icons/ai\";\nimport { BiArrowBack } from \"react-icons/bi\";\nimport uiConfig from \"../../common/UIConfig\";\nimport { constant } from \"../../utils/ApiConstants\";\nimport messaging from \"../../common/Messaging\";\n\nconst LekhItemPicker = ({ close, pick, defaultTitle, pickText, folderOnly }) => {\n  var [loading, setLoading] = useState(false);\n  const [data, setData] = useState();\n  const [parent, setParent] = useState(userInfo?.data?.userid);\n  const [loginState, setLoginState] = useState(uiConfig.isUsingLekhBackend()? userInfo.state: 'init');\n  const [error, setError] = useState(null);\n  const [parentDoc, setParentDoc] = useState(null);\n  const [selectedIdx, setSelectedIdx] = useState(-1);\n\n  const [cache, setCache] = useState(new Map());\n  const [childCache, setChildCache] = useState(new Map());\n\n  const refreshToken = useRef('dummy');\n\n  const signingIn = loginState == 'loading';\n  const signedIn = loginState == 'available';\n  loading = loading || signingIn;\n  \n  useEffect(() => {\n    if (!parent) {\n      return;\n    }\n    setLoading(true);\n    getDoc(parent)\n    .then(resp=>{\n      setParentDoc(resp);\n    })\n    .then(()=> getChildren(parent || userInfo?.data?.userid))\n    .then(res => {\n      setData(res);\n      setLoading(false);\n    })\n    .catch(err => console.log(err.response));\n  }, [parent]);\n\n  useEffect(() => {\n    fetchAccessToken();\n    messaging.event.addListener(fetchAccessToken);\n    return () => messaging.event.removeListener(fetchAccessToken);\n  }, []);\n\n  var title = \"\";\n  var pickClass = '';\n  if (signedIn && parentDoc) {\n    title = parentDoc.name;\n  } else {\n    title = defaultTitle;\n  }\n\n  if (!folderOnly && selectedIdx < 0) {\n    pickClass = \"text-white\";\n  }\n\n  var signInMessage = (<>\n    <div className=\"text-center font-bold\">Please <a className=\"text-blue-600\" href={constant.appUrl + '#/login'} target=\"_blank\">sign in</a></div>\n    <br/>\n    <div>You need to be signed-in into the Lekh account for importing / exporting.</div>\n    </>);\n\n  const fetchAccessToken = () => {\n    if (!uiConfig.isUsingLekhBackend()) {\n      var rtoken = messaging.data;\n      if (rtoken == refreshToken.current || !rtoken) {\n        return;\n      }\n      refreshToken.current = rtoken;\n      setLoginState('loading');\n      userInfo.getAccessTokenOnDemand(rtoken).then(result => {\n        if (result) {\n          setSelectedIdx(-1);\n          setParent(userInfo?.data?.userid);\n          setLoginState('available');\n        } else {\n          setLoginState('error');\n        }\n      });\n    }\n  }\n\n  const getDoc = async (docid) => {\n    if (!docid || docid == userInfo?.data?.userid) {\n      return {docid: docid, name: 'My Documents', parent: null}\n    }\n    if (cache.has(docid)) {\n      return cache.get(docid);\n    }\n    var doc = await docsManager.getADoc(docid);\n    cache.set(docid, doc);\n    return doc;\n  }\n\n  const getChildren = async (docid) => {\n    if (childCache.has(docid)) {\n      return childCache.get(docid);\n    }\n    if (folderOnly) {\n      var children = await docsManager.getChildFolders(docid);  \n    } else {\n      var children = await docsManager.getChildItems(docid);\n    }\n    \n    childCache.set(docid, children);\n    for (let item of children) {\n      cache.set(item.docid, item);\n    }\n    return children;\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!folderOnly) {\n      if (selectedIdx < 0) {\n        return;\n      }\n      pick(data[selectedIdx].docid);\n    } else {\n      let docid = parentDoc.docid;\n      setLoading(true);\n      docsManager.getChildItems(docid).then(children => {\n        pick(parentDoc.docid, children);\n      }).catch(e=> {\n        setLoading(false);\n      });\n    }\n  };\n\n  var iframe = null;\n  if (!uiConfig.isUsingLekhBackend()) {\n    var prefix = '';\n    if (constant.appUrl.startsWith('http://localhost')) {\n      prefix = '/integ/ac/confluence/res'\n    }\n    const iframeUrl = constant.appUrl + prefix + \"/atlassian_util.html\";\n    iframe = <iframe style={{display:'block'}} width=\"0\" height=\"0\" frameBorder=\"0\" scrolling=\"no\" vspace=\"0\" hspace=\"0\" marginHeight=\"0\" marginWidth=\"0\" src={iframeUrl}></iframe>\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\" aria-labelledby=\"Share\">\n      <form\n        className={`py-2 h-72 w-64 lg:w-96 bg-white`}\n        onSubmit={handleSubmit}\n      >\n        {iframe}\n        <div className=\"flex items-center justify-between my-2 px-3\">\n          {parent != userInfo?.data?.userid ? (\n            <BiArrowBack\n              className=\"text-xl cursor-pointer\"\n              onClick={() => {\n                setParent(parentDoc.parent);\n                setSelectedIdx(-1);\n              }}\n            />\n          ) : (\n            <div />\n          )}\n\n          <h4 className=\"text-center m-0 w-44 truncate\">\n            {title}\n          </h4>\n\n          <AiOutlineClose\n            className=\"text-xl cursor-pointer\"\n            onClick={() => close()}\n          />\n        </div>\n        <hr />\n\n        {loading && (\n          <div className=\"mt-6\">\n            <MiniLoader />\n          </div>\n        )}\n        {!loading && !signedIn && signInMessage}\n        {!loading && signedIn && (\n          <>\n            <div className=\"h-40 space-y-2 py-2 overflow-y-auto px-3\">\n              {data?.map((m, i) => {\n                let isFolder = m.type == 'folder';\n                let backClass = 'hover:bg-gray-200';\n                if (selectedIdx == i) {\n                  backClass = 'bg-gray-200';\n                }\n                const onClick = () => {\n                  if (isFolder) {\n                    setSelectedIdx(-1);\n                    setParent(m.docid);\n                  } else {\n                    setSelectedIdx(i);\n                  }\n                }\n                return (<div\n                  className={`move-grid text-lg cursor-pointer ` + backClass}\n                  key={i}\n                >\n                  <div\n                    className=\"flex items-center space-x-2 cursor-pointer\"\n                    onClick={onClick}\n                  >\n                    {isFolder &&<AiFillFolder />}\n                    {!isFolder && (\n                      <IconButton color=\"inherit\" className=\"w-3\">\n                        <img\n                            src={require(\"../../assests/icons/lekhboard-small.svg\").default}\n                            className=\"w-3\" />\n                      </IconButton>)}\n                    <span className=\"w-40  lg:w-44 truncate\">{m.name}</span>\n                  </div>\n                  {isFolder && <AiOutlineRight\n                    className=\"cursor-pointer text-right ml-auto\"\n                    onClick={() => {setParent(m.docid); setSelectedIdx(-1)}}\n                  />}\n                </div>\n              )})}\n            </div>\n            <hr />\n            <div className=\"text-right mt-3 px-3\">\n              <button\n                type=\"submit\"\n                className={pickClass + \" font-medium lg:text-lg px-3 py-1 outline-none border-none border-0 mx-auto\"}\n              >\n                {pickText}\n              </button>\n            </div>\n          </>\n        )}\n      </form>\n    </Dialog>\n  );\n};\n\nexport default LekhItemPicker;\n","import appEvent from \"../common/AppEvent\";\nimport {v4} from 'uuid'\nimport EventListener from \"../utils/EventListener\";\nimport menuState from \"../common/MenuState\";\nimport {FileNameInputDialog, ConfirmDialog, MessageDialog} from \"./AtlasianIntegUI\";\nimport { FaMousePointer, FaHandRock } from 'react-icons/fa';\nimport canvas from \"../common/Canvas\";\nimport LekhImporter from \"../components/LekhImporter/LekhImporter\";\nimport LekhItemPicker from \"../components/Picker/LekhItemPicker\";\nimport LekhErrJson from './load_err.json'\nimport axios from \"axios\";\nimport { constant } from \"../utils/ApiConstants\";\nimport util from \"../common/Util\";\n\nconst integVersion = '1.0';\nconst enableEditorTimeout = true;\nconst editorInitTimeout = 1 * 60 * 1000; // one minute\nconst enableDebugLog = false;\n\nvar macroType = 'confluence.ac.lekh.app:lekh-diagram';\nvar macroKey = 'lekh';\nif (constant.baseUrl.startsWith('http://localhost') || constant.baseUrl.endsWith('ngrok.io')) {\n    macroType = 'dev-confluence.ac.lekh.app:lekh-diagram';\n    macroKey = 'newdg';\n}\n\nconst atlassian = {}\n\nvar integMode = null;\n\nvar customContentInfo = null;\nvar previousComputedHeight = 0;\nvar docInfo = {name: '', docid: ''}\n\n// Initial values updated during initialization\nvar atlassianUserId = '';\nvar pageLocation = null;\nvar pageId = null;\nvar macroData = null;\nvar showDialog = null;\nvar setAppState = null;\nvar contextToken = null;\n\n// Attachment related variables\nvar lekhAttachment = null;\nvar draftAttachment;\nvar lekhAttachmentReadErr = null;\nvar draftAttachmentReadErr = null;\n\nvar editorInitTimer = null;\n\n// variables to track updates in diagrams by editing by user\nvar numUpdatesInEditor = 0;\nvar numPageAttrUpdate = 0;\nvar draftSavedAtCounter = 0;\nvar saveDraftTimer = null;\nvar draftSaveFailureWarnDone = false;\n\nconst has_touch = util.hasTouch();\n\nconst eventListener = new EventListener();\nconst waitList = [];\n\nconst eventTypes = {\n    create: 'create',\n    promptCreate: 'promptCreate',\n    view: 'view',\n    fullView: 'fullView',\n    edit: 'edit',\n    save: 'save',\n    saveError: 'saveError',\n    readError: 'readErroror',\n    timeout: 'timeout',\n    deleteDraftError: 'deleteDraftError',\n    macroFindError: 'macroFindError',\n    diagramImport: 'diagramImport',\n    cloudImport: 'cloudImport',\n    cloudImportError: 'cloudImportError',\n}\n\nconst logDebug = (fn) => {\n    if (enableDebugLog) {\n        fn();\n    }\n}\n\nconst wakeupWaiting = () => {\n    let i = 0;\n    while (i < waitList.length) {\n        if (waitList[i].cond()) {\n            waitList[i].resolve();\n            waitList.splice(i, 1);\n        } else {\n            i++;\n        }\n    }\n}\neventListener.addListener(wakeupWaiting);\n\nconst waitFor = async (cond) => {\n    if (cond()) {\n        return;\n    }\n    return new Promise((resolve, reject) => {\n        waitList.push({cond: cond, resolve: resolve});\n    });\n}\n\nconst sendEventToBackend = async (type, info, err) => {\n    const makeStr = (obj) => {\n        if (obj == null || typeof(obj) == 'undefined') {\n            return '';\n        } else if (typeof(obj) == 'object') {\n            return JSON.stringify(obj);\n        }\n        return String(obj);\n    }\n    info = info || { }\n    if (macroData && macroData.attachmentName) {\n        info.attachmentName = macroData.attachmentName;\n        info.diagramName = macroData.diagramName;\n    }\n    info.pageId = pageId;\n    info.location = pageLocation.href;\n    info.userId = atlassianUserId;\n    info.has_touch = has_touch;\n    info.product = 'confluence';\n    if (err) {\n        info.err = makeStr(err);\n    }\n    \n    let data = {\n        type: type,\n        info: info\n    }\n    const config = { baseURL: constant.baseUrl };\n    config.headers = { \"authorization\": 'JWT ' + contextToken };\n    return await axios.post('/integ/ac/confluence/api/stats', data, config);\n}\n\nconst showNotification = (data) => {\n    window.AP.flag.create(data);\n    //alert(data.title + ': ' + data.body);\n}\n\nconst setupEditorInitTimeout = () => {\n    if (integMode.editor != null && enableEditorTimeout) {\n        editorInitTimer = window.setTimeout(()=> {\n            sendEventToBackend(eventTypes.timeout);\n            showNotification({\n                title: \"Error\",\n                body: \"Unable to load the Lekh Diagram. Operation timed out.\",\n                type: \"error\"\n            });\n            atlassian.closeEditor();\n        }, editorInitTimeout);\n    }\n}\n\nconst getMacroData = (cb) => {\n    if (customContentInfo != null) {\n        pageId = customContentInfo.pageId;\n        cb(customContentInfo);\n    } else {\n        window.AP.confluence.getMacroData(data => {\n            if (!data || Object.keys(data).length == 0) {\n                if (pageLocation && pageLocation.target == 'addonmodule' &&\n                 pageLocation.context && pageLocation.context.context &&\n                 pageLocation.context.context['content.type'] == 'custom' &&\n                 pageLocation.context.context['content.id']) {\n                    var customContentId = pageLocation.context.context['content.id'];\n                    getContentInfo(customContentId, true, (err, resp) => {\n                        if (err == null) {\n                            customContentInfo = JSON.parse(decodeURIComponent(resp.body.storage.value));\n                            pageId = customContentInfo.pageId;\n                            cb(customContentInfo);\n                        } else {\n                            cb(data);\n                        }\n                    });\n                 } else {\n                    cb(data);\n                 }\n            } else {\n                cb(data);\n            }\n        });\n    }\n}\n\nconst getPageContext = () => {\n    setupEditorInitTimeout();\n    // We are calling atlassian API serially. Ideally we should call them in parallel\n    // but it seems the atlassian does not support API call in parallel\n    window.AP.navigator.getLocation(loc => {\n        logDebug(() => console.log('getLocation responded: ', performance.now()));\n        pageLocation = loc;\n        pageId = loc.context.contentId;\n        window.AP.user.getCurrentUser(user => {\n            logDebug(() => console.log('getCurrentUser responded: ', performance.now()));\n            atlassianUserId = user.atlassianAccountId;\n            window.AP.context.getToken(token => {\n                logDebug(() => console.log('getToken responded: ', performance.now()));\n                contextToken = token;\n                getMacroData(data => {\n                    logDebug(() => console.log('getMacroData responded: ', performance.now()));\n                    macroData = data;\n                    eventListener.trigger();\n                    readLekhAttachment(() => {\n                        logDebug(() => console.log('LekhAttachment read done: ', performance.now()));\n                        readDraftAttachment(() => {\n                            logDebug(() => console.log('DraftAttachment read done: ', performance.now()));\n                            eventListener.trigger();\n                            handleAtlassianInit();\n                        });\n                    });\n                });\n            });\n        });\n    });\n}\n\nconst handleAtlassianInit = async () => {\n    if (editorInitTimer != null) {\n        window.clearTimeout(editorInitTimer);\n        editorInitTimer = null;\n    }\n\n    // if we are unable to read the attachment and we are in editor mode\n    // then we should simple close the editor\n    if (lekhAttachmentReadErr && lekhAttachmentReadErr.status != 404 && integMode.editor != null) {\n        showNotification({\n            title: 'Error',\n            body: 'Unable to load the editor',\n            type: 'error'\n        });\n        atlassian.closeEditor();\n        return;\n    }\n\n    eventListener.trigger();\n\n    // when the macro is created then we do not have any attachment name \n    if (!macroData.attachmentName && integMode.editor != null) {\n        sendEventToBackend(eventTypes.promptCreate);\n        await waitFor(() => showDialog != null);\n        \n        let onCancel = () => {\n            atlassian.closeEditor();\n        }\n\n        let onAccept = (value) => {\n            var attachmentName = v4();\n            macroData = {diagramName: value, attachmentName: attachmentName, counter:1, integVersion: integVersion };\n            docInfo.name = value;\n            docInfo.docid = attachmentName;\n            numUpdatesInEditor++;\n            showDialog(null);\n            sendEventToBackend(eventTypes.create);\n        }\n\n        showDialog(<FileNameInputDialog title={\"Enter Diagram Name\"} cancelText={\"Cancel\"} okText={\"OK\"} onCancel={onCancel} onAccept={onAccept} initialValue={''}/>)\n    }\n    \n    if (integMode.editor != null) {\n        sendEventToBackend(eventTypes.edit);\n    } else if (integMode.viewer.full) {\n        sendEventToBackend(eventTypes.fullView);\n    } else {\n        sendEventToBackend(eventTypes.view);\n    }\n    eventListener.trigger();\n}\n\nconst setViewerSize = () => {\n    var vport = document.getElementById(\"viewport\");\n    var clientRect = vport.getBoundingClientRect();\n    var rect = window.Module.getBoundsOfAll();\n    const padding = 12;\n    var viewerHeight = rect.height + 2 * padding;\n    var viewerWidth = rect.width + 2 * padding;\n    var zoom = 1.0;\n    var sx = padding - rect.x;\n    var sy = padding - rect.y;\n    if (viewerWidth > clientRect.width && viewerWidth > 0) {\n        // We need to zoom so that the content can fit in the width\n        zoom = clientRect.width / viewerWidth;\n        viewerHeight *= zoom;\n    }\n    window.Module.setScroll({x: sx, y: sy});\n    if (zoom != 1.0 && !integMode.viewer.full) {\n        window.Module.setZoom(Math.floor(zoom * 100));\n    }\n\n    if (integMode.viewer != null && !integMode.viewer.full) {\n        var newHeight = Math.ceil(viewerHeight);\n        if (Math.abs(newHeight - previousComputedHeight) > 2) {\n            previousComputedHeight = newHeight;\n            window.AP.resize('100%', newHeight);\n        }\n    }\n}\n\nconst readLekhAttachment = (cb) => {\n    if (lekhAttachment != null) {\n        cb();\n        return;\n    }\n    \n    if (!macroData.attachmentName) {\n        lekhAttachment = \"\";\n        cb();\n        return;\n    }\n\n    var fileName = macroData.attachmentName + \".lekh\";\n    readAttachment(fileName, (content, err) => {\n        if (err) {\n            var errObj = {}\n            if (err.status) { errObj.status = err.status}\n            if (err.statusText) { errObj.statusText = err.statusText}\n            sendEventToBackend(eventTypes.readError, {fileName: fileName}, errObj);\n            lekhAttachment = '';\n            lekhAttachmentReadErr = err;\n        } else {\n            lekhAttachment = content == null? '' : content;\n        }\n        cb();\n    });\n}\n\nconst draftName = () => {\n    return macroData.attachmentName + \"-\" + atlassianUserId + \"-draft.lekh\";\n}\n\nconst readDraftAttachment = (cb) => {\n    if (integMode.editor == null || !macroData.attachmentName) {\n        draftAttachment = \"\";\n        cb();\n        return;\n    }\n    if (draftAttachment != null) {\n        cb();\n        return;\n    }\n\n    var fileName = draftName();\n    readAttachment(fileName, (content, err) => {\n        if (err) {\n            if (err.status && err.status != 404) {\n                var errObj = {}\n                if (err.status) { errObj.status = err.status}\n                if (err.statusText) { errObj.statusText = err.statusText}\n                sendEventToBackend(eventTypes.readError, {fileName: fileName}, errObj);\n            }\n            draftAttachment = '';\n            draftAttachmentReadErr = err;\n        } else {\n            draftAttachment = content == null? '' : content;\n        }\n        cb();\n    });\n}\n\nconst readAttachment = (fileName, cb) => {\n    window.AP.request({\n        url: '/download/attachments/' + pageId + '/' + fileName,\n        success: (resp) => {\n            cb(resp, null);\n        },\n        error: (err) => {\n            cb(null, err);\n        }\n    });\n}\n\nconst getContentInfo = (id, fetchBody, cb) => {\n    if (!id) {\n        cb('err', '');\n        return;\n    }\n\n    var url = '/rest/api/content/' + id;\n    if (fetchBody) {\n        url += '/?expand=body.storage'\n    }\n\n    window.AP.request({\n        url: url,\n\t\ttype: 'GET',\n\t\tcontentType: 'application/json;charset=UTF-8',\n\t\tsuccess: (resp) => {\n            let obj = JSON.parse(resp);\n\t\t\tcb(null, obj);\n\t\t},\n\t\terror: (resp) => {\n            cb('err', resp);\n        }\n\t});\n}\n\nconst saveCustomContent = (customContentId, cb) => {\n    var info = {\n\t    \"pageId\": pageId,\n        \"attachmentName\": macroData.attachmentName,\n\t    \"diagramName\": macroData.diagramName,\n        \"counter\": macroData.counter\n    }\n\n    var customObj = {\n        \"type\": \"ac:\" + macroType,\n        \"space\": {\n           \"key\": pageLocation.context.spaceKey\n         },\n         \"container\": {\n               \"type\": 'page',\n               \"id\": pageId\n            },\n         \"title\": macroData.diagramName,\n         \"body\": {\n           \"storage\": {\n             \"value\": encodeURIComponent(JSON.stringify(info)),\n             \"representation\": \"storage\"\n           }\n         },\n         \"status\": \"current\"\n    };\n    getContentInfo(customContentId, false, (err, resp) => {\n        if (err) {\n            customContentId = null;\n        } else {\n            customObj.version = {\n                \"number\": resp.version.number + 1\n            }\n            info.version = resp.version.number + 1;\n            customObj.body.storage.value = encodeURIComponent(JSON.stringify(info));\n        }\n        window.AP.request({\n            type: customContentId? 'PUT' : 'POST',\n            data: JSON.stringify(customObj),\n            url:  \"/rest/api/content/\" + (customContentId? customContentId : \"\"),\n            contentType: \"application/json\",\n            success: (resp) => {\n                cb(null, resp);\n            },\n            error: (resp) => {\n                cb('err', resp)\n            }\n        });\n    });\n}\n\nconst saveAttachment = (fileName, content, comment, cb) => {\n    logDebug(() => console.log('will save attachment: ', performance.now()));\n    var attFile = (content instanceof Blob)? content : new Blob([content], {type: 'application/lekh'});;\n    attFile.name = fileName;\n    if (!comment) {\n        comment = 'Created by Lekh';\n    }\n    var reqData = {file: attFile, minorEdit: true, comment: comment};\n    var draftFlag = pageLocation.target == 'contentcreate' ? '?status=draft' : '';\n\n    window.AP.request({\n        type: 'PUT',\n        data: reqData,\n        url:  \"/rest/api/content/\"+ pageId +\"/child/attachment\" + draftFlag,\n        contentType: \"multipart/form-data\",\n        success: () => {\n            logDebug(() => console.log('attachment saved: ', performance.now()));\n            cb(null);\n        },\n        error: (e) => {\n            var errObj = { }\n            if (e.status) { errObj.status = e.status}\n            if (e.statusText) { errObj.statusText = e.statusText}\n            sendEventToBackend(eventTypes.saveError, {fileName: fileName}, errObj);\n            cb(e);\n        }\n    });\n}\n\nconst getAttachmentInfo = (fileName, cb) => {\n\twindow.AP.request({\n        type: 'GET',\n        url: '/rest/api/content/' + pageId + '/child/attachment?filename=' + encodeURIComponent(fileName),\n        contentType: 'application/json;charset=UTF-8',\n        success: function (resp) {\n            var tmp = JSON.parse(resp);\n            if (tmp.results && tmp.results.length == 1) {\n                var info = tmp.results[0], attInfo;\n                cb(null, info);\n            } else {\n                cb({status: 404});\n            }\n        },\n        error: cb\n    });\n};\n\nconst deleteDraft = (cb) => {\n    getAttachmentInfo(draftName(), (err, info) => {\n        if (err == null && info && info.id) {\n            window.AP.request({\n                url : '/rest/api/content/' + info.id,\n                type : 'DELETE',\n                success : () => {cb(null)},\n                error : e=> {cb(e)}\n            });\n        } else {\n            cb(err);\n        }\n    });\n}\n\nconst saveDraft = async () => {\n    if (draftSavedAtCounter == numUpdatesInEditor) {\n        return;\n    }\n    var curUpdatesCounter = numUpdatesInEditor;\n    return new Promise((resolve, reject) => {\n        var lekhContent = window.Module.getLekh();\n        var fileName = draftName();\n        saveAttachment(fileName, lekhContent, 'Lekh Draft', (e) => {\n            if (!e) {\n                draftSavedAtCounter = curUpdatesCounter;\n                resolve();\n            } else {\n                console.log('Error in saving draft', e)\n                if (!draftSaveFailureWarnDone) {\n                    draftSaveFailureWarnDone = true;\n                    let title = \"Draft save error\";\n                    let msg = \"Unable to save the draft. Please check you are connected to the internet and logged-in into Atlassian.\";\n                    showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n                }\n                reject(e);\n            }\n        });\n    });\n}\n\nconst onDiagramChange = (docid, data) => {\n    var obj = JSON.parse(data);\n    if (obj && obj.type == 'update' && obj.updates && obj.updates.type != 'trackpointer') {\n        if (obj.updates.type == 'changepageattr' && numPageAttrUpdate == 0) {\n            numPageAttrUpdate = 1;\n        } else {\n            numUpdatesInEditor++;\n            if (saveDraftTimer == null) {\n                // Accumulate updates of 10 seconds and then save\n                saveDraftTimer = window.setTimeout(() => {\n                    saveDraft().finally(()=> {\n                        saveDraftTimer = null;\n                    });\n                }, 10 * 1000);\n            }\n        }\n    }\n}\n\nconst closeEditor = (saveDraftAndClose) => {\n    if (saveDraftAndClose) {\n        if (setAppState != null) {\n            setAppState('closing')\n        }\n        saveDraft().finally(() => {\n            window.AP.dialog.close();\n        });\n    } else {\n        window.AP.dialog.close();\n    }\n}\n\nconst confirmDraftLoad = () => {\n    let onAccept = () => {\n        lekhAttachment = draftAttachment;\n        numUpdatesInEditor++;\n        draftAttachment = null;\n        showDialog(null);\n        eventListener.trigger();\n    }\n    let onCancel = () => {\n        draftAttachment = null;\n        showDialog(null);\n        eventListener.trigger();\n    }\n\n    let title = \"Load draft?\";\n    let msg = \"Found unpublished changes from past editing\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"Cancel\"} okText={\"Load Draft\"} onCancel={onCancel} onAccept={onAccept}/>)\n}\n\nconst getDiagramsInPage = (cb) => {\n    var diagrams = [];\n    const processMacroNode = (node) => {\n        let isLekh = false;\n        for (let attrib of node.attributes) {\n            if (attrib.name == \"ac:name\" && attrib.value == macroKey) {\n                isLekh = true;\n                break;\n            }\n        }\n        if (!isLekh) {\n            return;\n        }\n\n        let diagram = { }\n        for (let param of node.childNodes) {\n            if (param.tagName != \"ac:parameter\") {\n                continue;\n            }\n\n            for (let attrib of param.attributes) {\n                if (attrib.name == \"ac:name\") {\n                    diagram[attrib.value] = param.innerHTML;\n                }\n            }\n        }\n        diagrams.push(diagram);\n    }\n\n    const processNode = (node) => {\n        if (node.tagName == \"ac:structured-macro\") {\n            processMacroNode(node);\n        } else {\n            for (let item of node.childNodes) {\n                processNode(item);\n            }\n        }\n    }\n    window.AP.request({\n        url: '/rest/api/content/' + pageId + '/?expand=body.storage,version&status=draft',\n        contentType: 'application/json;charset=UTF-8',\n        success: (resp) => {\n            try {\n                let page = JSON.parse(resp);\n                let content = '<data xmlns:ac=\"https://www.atlassian.com/confluence/page\">' + page.body.storage.value + '</data>';\n                let parser = new DOMParser();\n                let xmlDoc = parser.parseFromString(content, \"text/xml\");\n                processNode(xmlDoc.childNodes[0]);\n            } catch (err) {\n                cb(err, [])\n            }\n            cb(null, diagrams);\n        },\n        error: (err) => {\n            console.log(err)\n            cb(err, [])\n        }\n    });\n}\n\nconst saveImage = (cb) => {\n    try {\n        var imgData = canvas.exportToImage('png');\n    } catch (e) {\n        cb(e);\n        return;\n    }\n    fetch(imgData.data)\n    .then(res => res.blob())\n    .then(blob => {\n        let fileName = macroData.attachmentName + \".png\";\n        saveAttachment(fileName, blob, null, (err) => {\n            if (err == null) {\n                macroData.width = imgData.width;\n                macroData.height = imgData.height;\n            }\n            cb(err);\n        });\n    })\n    .catch(cb);\n}\n\nconst publish = (cb) => {\n    var lekhContent = window.Module.getLekh();\n    var attName = macroData.attachmentName;\n    if (!attName) {\n        attName = v4();\n    }\n    var fileName = attName + \".lekh\";\n    if (setAppState != null) {\n        setAppState('saving')\n    }\n    saveAttachment(fileName, lekhContent, null, (err) => {\n        if (!err) {\n            sendEventToBackend(eventTypes.save);\n            saveCustomContent(macroData.customContentId, (custErr, custResp) => {\n                if (!custErr) {\n                    let respObj = null;\n                    try {\n                        respObj = JSON.parse(custResp);\n                    } catch (e) { }\n                    if (respObj != null) {\n                        macroData.customContentId = respObj.id;\n                    }\n                }\n                saveImage(imgErr => {\n                    if (imgErr != null) {\n                        console.log(\"Error in saving image attachment \", imgErr);\n                    }\n                    macroData.counter = !!macroData.counter? macroData.counter + 1 : 1;\n                    macroData.pageId = pageId;\n                    window.AP.confluence.saveMacro(macroData);\n                    deleteDraft(e=> {\n                        setTimeout(() => {\n                            window.AP.dialog.close();\n                        }, 1);\n                        cb(null);\n                    });\n                });\n            });\n        } else {\n            const onAccept = () => {\n                if (setAppState != null) {\n                    setAppState('ready')\n                }\n                showDialog(null);\n                cb(err);\n            }\n            let title = \"Error\";\n            let msg = \"Unable to publish changes. Please check that you are connected to the internet and try again.\";\n            showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={onAccept}/>)\n            console.log('Error in saving attachment', err)\n        }\n    });\n}\n\nconst renameDiagram = () => {\n    const rename = (name) => {\n        macroData.diagramName = name;\n        docInfo.name = name;\n        numUpdatesInEditor++;\n        showDialog(<MessageDialog title={\"Diagram renamed\"} msg={\"You need to publish to save the new name.\"} okText={\"OK\"} onAccept={()=>showDialog(null)} />)\n    }\n\n    const cancel = () => {\n        showDialog(null);\n    }\n\n    let curName = !!macroData.diagramName? macroData.diagramName: '';\n    showDialog(<FileNameInputDialog title={\"Enter New Name\"} cancelText={\"Cancel\"} okText={\"Rename\"} onCancel={cancel} onAccept={rename} initialValue={curName}/>)\n}\n\nconst importLekhFile = () => {\n    const doImport = () => {\n        const onImport = () => {\n            sendEventToBackend(eventTypes.diagramImport);\n            numUpdatesInEditor++;\n            setPageSize();\n        }\n        showDialog(<LekhImporter showDialog={showDialog} onImport={onImport} onCancel={()=>{}} />)\n    }\n\n    let msg = \"Importing a Lekh file will replace the current diagram with a new Lekh file. This operation cannot be undone. Do you want to proceed?\";\n    let title = \"Import\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"No\"} okText={\"Yes\"} onCancel={()=>showDialog(null)} onAccept={doImport}/>)\n}\n\nconst importFromCloud = () => {\n    const doImport = () => {\n        const close = () => {\n            showDialog(null);\n        }\n\n        const pick = (docid) => {\n            showDialog(null);\n            setAppState('importing');\n            window.Module.getRemoteLekhContent(docid, (err, content) => {\n                var errMsg = null;\n                if (!err) {\n                    var out = window.Module.importLekh(content);\n                    if (out) {\n                        errMsg = \"Unable to import due to unexpected error. Please contact our support\";\n                    } else {\n                        canvas.draw();\n                        numUpdatesInEditor++;\n                    }\n                } else {\n                    errMsg = \"Unable to fetch the diagram from the cloud. Please try again. If the problem persists then contact our support\"\n                }\n\n                if (errMsg) {\n                    sendEventToBackend(eventTypes.cloudImportError);\n                    showDialog(<MessageDialog title={\"Error\"} msg={errMsg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n                } else {\n                    sendEventToBackend(eventTypes.cloudImport);\n                }\n                setAppState('ready');\n\n                setTimeout(() => {\n                    canvas.draw();\n                }, 10);\n            });\n        }\n\n        let picker = <LekhItemPicker close={close} pick={pick} defaultTitle={\"Import\"} folderOnly={false} pickText={\"Import\"}/>\n        showDialog(picker);\n    }\n    let msg = \"Importing from Lekh Cloud will replace the current diagram with the imported file. This operation cannot be undone. Do you want to proceed?\";\n    let title = \"Import\";\n    showDialog(<ConfirmDialog title={title} msg={msg} cancelText={\"No\"} okText={\"Yes\"} onCancel={()=>showDialog(null)} onAccept={doImport}/>)\n}\n\nconst copyToLekhCloud = () => {\n    const close = () => {\n        showDialog(null);\n    }\n    const newName = (children) => {\n        const isUnique = (name) => {\n            for (let item of children) {\n                if (item.name == name) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        var name = macroData.diagramName;\n        var count = 0;\n        while (!isUnique(name)) {\n            count++;\n            name = macroData.diagramName + \"-\" + count;\n        }\n        return name;\n    }\n\n    const pick = (docid, children) => {\n        showDialog(null);\n        let diagName = newName(children);\n        var content = window.Module.getLekh();\n        setAppState('exporting');\n        window.Module.uploadDoc(diagName, docid, '', content, (err) => {\n            setAppState('ready');\n            let title = \"\";\n            let msg = \"\";\n            if (err) {\n                title = \"Error\";\n                msg = \"Unable to copy. Please try again. If problem persists then contact our support\";\n            } else {\n                title = \"Copied successfully\";\n                msg = \"\";\n            }\n            showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=>showDialog(null)}/>)\n        })\n    }\n    let picker = <LekhItemPicker close={close} pick={pick} defaultTitle={\"Select Folder\"} folderOnly={true} pickText={\"Copy Here\"}/>\n    showDialog(picker);\n}\n\nconst setPageSize = () => {\n    var pageEditor = window.Module.startPageEditing();\n    pageEditor.setSize(window.Module.CanvasSizeType.Infinite, {width: 0, height: 0, unit: window.Module.Unit.Inch}, \"infinite\");\n}\n\natlassian.setShowDialogHandler = (dialogHandler, setStateForApp) => {\n    showDialog = dialogHandler;\n    setAppState = setStateForApp;\n    eventListener.trigger();\n}\n\natlassian.init = (params) => {\n    logDebug(() => console.log('Init called: ', performance.now()));\n\n    if (params.editor == 'true') {\n        integMode = {\n            useLekhBackend: false,\n            editor: {\n                showOptions: true,\n                fileNameEditable: true,\n                readOnly: false\n            },\n            viewer: null\n        };\n    } else {\n        integMode = {\n            useLekhBackend: false,\n            editor: null,\n            viewer: {\n                full: params.viewertype == 'full',\n                makeLink: params.viewertype != 'full',\n                showEditOption: false,\n                showOptions: false\n            },\n        };\n    }\n\n    const checkLicenseAndGetPageContext = () => {\n        // check license in prod only\n        var checkLicense = constant.baseUrl.startsWith('https://api.lekh.app');\n        if (checkLicense && integMode.editor != null) {\n            if (!params.lic || params.lic == 'none') {\n                waitFor(() => showDialog != null).then(() => {\n                    let title = \"Invalid license\";\n                    let msg = \"You do not have a valid licence to use Lekh Diagram\";\n                    showDialog(<MessageDialog title={title} msg={msg} okText={\"OK\"} onAccept={()=> {\n                        showDialog(null);\n                        closeEditor(false);\n                    }}/>)\n                });\n                return;\n            }\n        }\n\n        getPageContext();\n    }\n\n    const checkCustomContent = () => {\n        var customContentId = null;\n        if (params.custom == 'true') {\n            customContentId = params.customContentId;\n        }\n        if (customContentId == null) {\n            checkLicenseAndGetPageContext();\n        } else {\n            getContentInfo(customContentId, true, (err, resp) => {\n                if (err == null) {\n                    customContentInfo = JSON.parse(decodeURIComponent(resp.body.storage.value));\n                    checkLicenseAndGetPageContext();\n                }\n            });\n        }\n    }\n    \n    if (!window.AP) {\n        var head = document.getElementsByTagName('head')[0];\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.onload = function() {\n            checkCustomContent()\n        }\n        script.src = 'https://connect-cdn.atl-paas.net/all.js';\n        head.appendChild(script);\n    } else {\n        checkCustomContent();\n    }\n}\n\natlassian.getIntegMode = (params) => {\n    return integMode;\n}\n\natlassian.getUser = (cb) => {\n    //return state, token, info\n    cb('available', 'dummy', {name: ''});\n}\n\natlassian.getDocInfo = (cb) => {\n    // return state, docid, info\n    waitFor(()=> macroData != null).then(() => {\n        if (macroData.diagramName) {\n            docInfo.name = macroData.diagramName;\n        }\n        if (macroData.attachmentName) {\n            docInfo.docid = macroData.attachmentName;\n        }\n        cb('available', 'dummy', docInfo);\n    })\n}\n\natlassian.handleClickOnViewer = (evt) => {\n    var name = \"\";\n    if (macroData && macroData.diagramName) {\n        name = macroData.diagramName;\n    }\n    window.AP.dialog.create({\n        key: 'viewer-full-screen',\n        width: '100%',\n        height: '100%',\n        chrome: true,\n        header: name\n      }).on(\"close\", () => {\n      });\n}\n\natlassian.closeEditor = () => {\n    closeEditor(true);\n}\n\natlassian.publishEditorChanges = async () => {\n    return new Promise((resolve, reject) => {\n        if (numUpdatesInEditor > draftSavedAtCounter) {\n            getDiagramsInPage((err, diagrams) => {\n                if (err) {\n                    sendEventToBackend(eventTypes.macroFindError, null, err);\n                }\n                let count = 0;\n                if (!!diagrams) {\n                    for (let item of diagrams) {\n                        if (item.attachmentName == macroData.attachmentName) {\n                            count++\n                            if (count > 1) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (count > 1) {\n                    // there exists a macro with same attachment name\n                    // to fix the conflicts, rename the attachment name\n                    // for this macro. This happens in copy paste\n                    macroData.attachmentName = v4();\n                    macroData.customContentId = null;\n                }\n                publish((err) => {\n                    if (err == null) {\n                        resolve();\n                    } else {\n                        reject(err);\n                    }\n                });\n            });\n        } else {\n            deleteDraft(e=> {\n                setTimeout(() => {\n                    window.AP.dialog.close();\n                }, 1);\n                resolve();\n            });\n        }\n    });\n}\n\natlassian.loadDoc = async () => {\n    logDebug(() => console.log('loadDoc called: ', performance.now()));\n    await waitFor(() => lekhAttachment != null);\n    if (integMode.editor != null) {\n        await waitFor(() => draftAttachment != null);\n        if (draftAttachment != '') {\n            confirmDraftLoad();\n            await waitFor(() => draftAttachment == null || draftAttachment == '');\n        }\n    }\n\n    if (lekhAttachmentReadErr != null && integMode.viewer != null && lekhAttachment == '') {\n        window.Module.loadDoc(JSON.stringify(LekhErrJson));\n    } else {\n        window.Module.loadDoc(lekhAttachment);\n    }\n\n    logDebug(() => console.log('doc loaded: ', performance.now()));\n\n    // override the send so that we can track user's changes in the doc\n    window.wsmanager.send = onDiagramChange;\n    window.Module.startDoc(macroData.attachmentName? macroData.attachmentName : 'docid');\n    \n    setPageSize();\n\n    window.drawCanvas();\n\n    if (integMode.viewer != null) {\n        setViewerSize();\n        if (!integMode.viewer.full) {\n            appEvent.resizeListener.addListener(setViewerSize);\n        }\n    }\n    window.wsmanager.setState('ready');\n}\n\natlassian.customizeSidebar = (sidebarMenu) => {\n    let items = [\n    {\n        id: menuState.menus.selection,\n        icon: <FaMousePointer size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Select',\n    },\n    {\n        id: menuState.menus.move,\n        icon: <FaHandRock size=\"1.2em\" color=\"#000000b8\"/>,\n        name: 'Move',\n    }];\n\n    return items.concat(sidebarMenu.slice(2));\n}\n\natlassian.customizeAppMenu = (appMenu) => {\n    var subOption = [\n        {id: 'fromLekhFile', name: 'Lekh File', handler: importLekhFile},\n        {id: 'fromLekhCloud', name: 'From Lekh Cloud', handler: importFromCloud}\n    ]\n    var menus = [\n        { id: \"renameDiagram\", name: 'Rename Diagram', checkable: false, handler: renameDiagram },\n        { id: \"importLekh\", name: 'Import', submenu:  subOption},\n        { id: \"exportToCloud\", name: 'Copy to Lekh Cloud', checkable: false, handler: copyToLekhCloud}\n    ];\n\n    var newMenu = appMenu.slice(1);\n    newMenu.splice(5, 1);\n    return menus.concat(newMenu)\n}\n\natlassian.handleLogoClick = () => {\n    window.open('https://lekh.app', '_blank')\n}\n\natlassian.shouldShowQuickTip = () => {\n    if (!macroData || !macroData.attachmentName) {\n        return false;\n    }\n    return true;\n}\n\nexport default atlassian;\n\n","import atlassian from './atlassian';\n\nconst integ = { }\nvar integImpl = null;\n\ninteg.isIntegration = (params) => {\n    if (params.atlassian == 'true') {\n        integImpl = atlassian;\n        integImpl.init(params);\n        return true;\n    }\n    return false;\n}\n\ninteg.getIntegMode = (params) => {\n    if (params.atlassian == 'true') {\n        return atlassian.getIntegMode(params);\n    }\n    return null;\n}\n\ninteg.getUser = (cb) => {\n    integImpl.getUser(cb);\n}\n\ninteg.getDocInfo = (cb) => {\n    integImpl.getDocInfo(cb);\n}\n\ninteg.loadDoc = async () => {\n    integImpl.loadDoc();\n}\n\ninteg.handleClickOnViewer = (evt) => {\n    integImpl.handleClickOnViewer();\n}\n\ninteg.closeEditor = () => {\n    integImpl.closeEditor();\n}\n\ninteg.publishEditorChanges = async () => {\n    await integImpl.publishEditorChanges();\n}\n\ninteg.customizeSidebar = (sidebarMenu) => {\n    return integImpl.customizeSidebar(sidebarMenu);\n}\n\ninteg.customizeAppMenu = (appMenu) => {\n    return integImpl.customizeAppMenu(appMenu);\n}\n\ninteg.setShowDialogHandler = (showDialog, setAppState) => {\n    integImpl.setShowDialogHandler(showDialog, setAppState);\n}\n\ninteg.handleLogoClick = () => {\n    integImpl.handleLogoClick();\n}\n\ninteg.shouldShowQuickTip = () => {\n    return integImpl.shouldShowQuickTip();\n}\n\nexport default integ;","import integ from \"../integ/integ\";\n\nconst uiConfig = {\n}\n\nvar integMode = {\n    useLekhBackend: false,\n    editor: {\n        showOptions: false,\n        fileNameEditable: false,\n        readOnly: false\n    },\n    viewer: {\n        full: false,\n        makeLink: false,\n        showEditOption: false,\n        showOptions: false\n    },\n};\n\nvar offline = false;\n\nuiConfig.initForIntegMode = (params) => {\n    integMode = integ.getIntegMode(params);\n}\n\nuiConfig.initForLekhBackendMode = () => {\n    integMode = null;\n    offline = false;\n}\n\nuiConfig.initForOfflineMode = () => {\n    integMode = null;\n    offline = true;\n}\n\nuiConfig.isIntegMode = () => {\n    return integMode != null;\n}\n\nuiConfig.isIntegViewer = () => {\n    return integMode != null && integMode.editor == null;\n}\n\nuiConfig.isViewerLink = () => {\n    if (integ != null && integMode != null && integMode.viewer != null) {\n        return integMode.viewer.makeLink;\n    }\n    return false;\n}\n\nuiConfig.isFullViewer = () => {\n    if (integ != null && integMode != null && integMode.viewer != null) {\n        return integMode.viewer.full;\n    }\n    return false;\n}\n\nuiConfig.readOnly = () => { \n    if (integMode != null) {\n        if (integMode.editor != null) {\n            return integMode.editor.readOnly;\n        }\n        return true;\n    }\n    return window.wsmanager && window.wsmanager.readOnly();\n}\n\nuiConfig.offline = () => {\n    return offline;\n}\n\nuiConfig.shouldLoadShapes = () => {\n    if (integMode != null) {\n        return integMode.editor != null;\n    }\n    return true;\n}\n\nuiConfig.shouldAttachMouseEventHandler = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        } else {\n            return true;\n        }\n    }\n    return true;\n}\n\nuiConfig.shouldAttachKeyboardEventHandler = () => {\n    if (integMode != null) {\n        return integMode.editor != null;\n    }\n    return true;\n}\n\n\nuiConfig.shouldShowFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return true;\n    }\n    return true;\n}\n\nuiConfig.isZoomOnlyFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return false;\n    }\n    return false;\n}\n\nuiConfig.shouldShowPagesInFooter = () => {\n    return integMode == null;\n}\n\nuiConfig.shouldShowUndoRedoInFooter = () => {\n    if (integMode != null) {\n        if (integMode.viewer != null) {\n            return integMode.viewer.full;\n        }\n        return false;\n    }\n    return true;\n}\n\nuiConfig.isUsingLekhBackend = () => {\n    if (integMode != null) {\n        return integMode.useLekhBackend;\n    }\n    return true;\n}\n\nuiConfig.shouldShowPublishCancelButton = () => {\n    return integMode != null && integMode.editor != null\n}\n\nuiConfig.shouldShowQuickTip = () => {\n    if (integMode != null && integMode.editor != null) {\n        return integ.shouldShowQuickTip();\n    }\n    return true;\n}\n\nexport default uiConfig;","import util from \"../../common/Util\";\nimport $ from 'jquery';\n\nconst border = 1;\nconst padding = 2;\n\nclass TextEditor {\n    constructor() {\n        this.textArea = null;\n        this.textInput = null;\n        this.lekhCore = null;\n    }\n\n    updateMultiline(param, style) {\n        if (this.textArea == null) {\n            return;\n        }\n\n        this.textArea.css(\"left\", (param.inRect.x - border - padding)+ \"px\");\n        this.textArea.css(\"top\", (param.inRect.y - border - padding) + \"px\");\n        this.textArea.css(\"width\", (param.inRect.width) + \"px\");\n        this.textArea.css(\"height\", (param.inRect.height) + \"px\");\n    }\n\n    editMultiline(param, style) {\n        if (this.lekhCore == null) {\n            this.lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n        }\n\n        // In case the single edit is still around\n        this.finishSingleLine();\n\n        if (param.isUpdate) {\n            if (this.textArea == null) {\n                return;\n            }\n            this.updateMultiline(param, style);\n            return;\n        }\n\n        // starting new edit. Make sure older is gone\n        this.finishMultiLine();\n\n        var tid = Math.random() + \"t\";\n        this.textArea = $(\"<textarea id='\" + tid + \"'></textarea>\");\n        this.textArea.val(param.text)\n        var fontSize = style.effectiveFontSize() * style.effectiveFontMultiplier();\n        var tattrs = {\n            \"outline\": \"none\",\n            \"resize\": \"none\",\n            \"overflow\": \"hidden\",\n            \"position\": \"absolute\",\n            \"font\": util.fontStr(style),\n            \"line-height\": fontSize + \"px\",\n            \"background-color\": \"transparent\",\n            \"left\": (param.inRect.x - border - padding)+ \"px\",\n            \"top\": (param.inRect.y - border - padding) + \"px\",\n            \"width\": param.inRect.width + \"px\",\n            \"height\": param.inRect.height + \"px\",\n            \"border\": border + 'px solid gray',\n            \"margin\": 0,\n            \"padding\": padding + \"px\",\n            \"z-index\": \"1000\"\n        }\n        let ha = window.Module.avabodh_lekh_Style_TextAlignHorizontal;\n        switch (style.effectiveTextAlignHorizontal()) {\n            case ha.TextAlignHorizontalDefault:\n            case ha.TextAlignHorizontalCenter:\n              tattrs[\"text-align\"] = \"center\";\n              break;\n            case ha.TextAlignHorizontalLeft:\n              tattrs[\"text-align\"] = \"left\";\n              break;\n            case ha.TextAlignHorizontalRight:\n              tattrs[\"text-align\"] = \"right\";\n              break;\n            default:\n              break;\n        }\n\n        // For interpreted text\n        if (param.defaultAlignAlways) {\n            tattrs[\"text-align\"] = \"left\";\n        }\n\n        this.textArea.css(tattrs);\n        $(\"#drawContent\").append(this.textArea);\n        this.textArea.trigger(\"focus\");\n\n        let self = this;\n        this.textArea.on(\"blur\", function(e) {\n            self.finishTextEditing();\n        });\n        this.textArea.on(\"keyup\", function(e) {\n            if (e.code == \"Escape\" || e.key == \"Escape\") {\n                self.finishTextEditing();\n            }\n        });\n        this.textArea.on('input propertychange', function(e) {\n            self.lekhCore.platformTextEditorTextChanged(self.textArea.val());\n        });\n    }\n\n    updateSingleLine(param, style) {\n\n    }\n\n    editSingleLine(param, style) {\n        if (this.lekhCore == null) {\n            this.lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n        }\n\n        // In case the multi line edit is still around\n        this.finishMultiLine();\n\n        if (param.isUpdate) {\n            if (this.textInput == null) {\n                return;\n            }\n            this.updateSingleLine(param, style);\n            return;\n        }\n\n        // starting new edit. Make sure older is gone\n        this.finishSingleLine();\n\n        var tid = Math.random() + \"t\";\n        this.textInput = $(\"<input type='text' id='\" + tid + \"' />\");\n        this.textInput.val(param.text)\n        var fontSize = style.effectiveFontSize() * style.effectiveFontMultiplier();\n        var tattrs = {\n            \"outline\": \"none\",\n            \"resize\": \"none\",\n            \"overflow\": \"hidden\",\n            \"position\": \"absolute\",\n            \"font\": util.fontStr(style),\n            \"line-height\": fontSize + \"px\",\n            \"background-color\": \"transparent\",\n            \"left\": (param.inRect.x - padding)+ \"px\",\n            \"top\": (param.inRect.y - padding) + \"px\",\n            \"width\": param.inRect.width + \"px\",\n            \"height\": param.inRect.height + \"px\",\n            \"border\": '0px',\n            \"margin\": 0,\n            \"padding\": padding + \"px\",\n            \"z-index\": \"1000\"\n        }\n        let ha = window.Module.avabodh_lekh_Style_TextAlignHorizontal;\n        switch (style.effectiveTextAlignHorizontal()) {\n            case ha.TextAlignHorizontalDefault:\n            case ha.TextAlignHorizontalCenter:\n              tattrs[\"text-align\"] = \"center\";\n              break;\n            case ha.TextAlignHorizontalLeft:\n              tattrs[\"text-align\"] = \"left\";\n              break;\n            case ha.TextAlignHorizontalRight:\n              tattrs[\"text-align\"] = \"right\";\n              break;\n            default:\n              break;\n        }\n        this.textInput.css(tattrs);\n        $(\"#drawContent\").append(this.textInput);\n        this.textInput.trigger(\"focus\");\n\n        let self = this;\n        this.textInput.on(\"blur\", function(e) {\n            self.finishTextEditing();\n        });\n        this.textInput.on(\"keyup\", function(e) {\n            if (e.code == \"Escape\" || e.key == \"Escape\" || e.code == \"Enter\" || e.key == \"Enter\") {\n                self.finishTextEditing();\n            }\n        });\n        this.textInput.on('input propertychange', function(e) {\n            self.lekhCore.platformTextEditorTextChanged(self.textInput.val());\n        });\n    }\n\n    editText(param, style) {\n        if (param.multiLine) {\n            this.editMultiline(param, style);\n        } else {\n            this.editSingleLine(param, style);\n        }\n    }\n\n    finishTextEditing() {\n        this.finishMultiLine();\n        this.finishSingleLine();\n    }\n\n    finishSingleLine() {\n        if (this.textInput != null) {\n            this.lekhCore.platformTextEditorFinished();\n            this.textInput.remove();\n            this.textInput = null;\n        }\n    }\n\n    finishMultiLine() {\n        if (this.textArea != null) {\n            this.lekhCore.platformTextEditorFinished();\n            this.textArea.remove();\n            this.textArea = null;\n        }\n    }\n}\n\nconst textEditor = new TextEditor();\n\nexport default textEditor;","import axios from \"axios\";\nimport userInfo from \"./UserInfo\";\n\nvar httpUtil = { }\n\nconst b64toBlob = (base64, type = 'application/octet-stream') => \n  fetch(`data:${type};base64,${base64}`).then(res => res.blob());\n\nconst blobToBase64 = async (blob) => {\n    return new Promise(resole => {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            resole(reader.result);\n        }\n        reader.readAsDataURL(blob);\n    });\n}\n\nconst blobToStr = async (blob) => {\n    return new Promise(resole => {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            resole(reader.result);\n        }\n        reader.readAsText(blob); \n    });\n}\n\nconst toBlob = (data) => {\n    if (data instanceof Blob) {\n        return data;\n    }\n\n    if (typeof(data) == 'string') {\n        return new Blob([data]);\n    }\n    \n    if (typeof(data) == 'object') {\n        return new Blob([JSON.stringify(data)]);\n    }\n    return new Blob(['']);\n}\n\nconst toStr = async (data) => {\n    if (typeof(data) == 'string') {\n        return data;\n    }\n    if (data instanceof Blob) {\n        return await blobToStr(data);\n    }\n    if (typeof(data) == 'object') {\n        return JSON.stringify(data);\n    }\n    return '';\n}\n\nconst shouldIncludeHeader = (url) => {\n    if (url.startsWith('https://rajeevku02.github.io')) {\n        return false;\n    }\n    return true;\n}\n\nhttpUtil.requestHttp = async (request) => { \n    \n    let headers = { }\n    let keys = request.headers.keys();\n    for (let i = 0; i < keys.size(); i++) {\n        let hk = keys.get(i);\n        let hv = request.headers.get(hk);\n        headers[hk] = hv;\n    }\n    headers['x-auth-token'] = userInfo.token;\n    const config = {\n        url: request.url,\n        method: request.method,\n        timeout: request.timeoutSec* 1000,\n        responseType: 'blob'\n    };\n\n    if (shouldIncludeHeader(request.url)) {\n        config['headers'] = headers;\n    } else {\n        config.withCredentials = false;\n    }\n\n    if (!request.encodeResponseBase64) {\n        config.responseType = 'text';\n    }\n\n    if (request.multiPart.size() > 0) {\n        const dataArray = new FormData();\n        for (let idx = 0; idx < request.multiPart.size(); idx++) {\n            let mp = request.multiPart.get(idx);\n            if (mp.decodeValueBase64) {\n                var mime = mp.mime? mp.mime: 'application/octet-stream';\n                var blob = await b64toBlob(mp.value, mime);\n                dataArray.append(mp.name, blob);\n            } else {\n                if (mp.mime) {\n                    dataArray.append(mp.name, new Blob([mp.value], {type: mp.mime}));\n                } else {\n                    dataArray.append(mp.name, mp.value);\n                }\n            }\n        }\n        config.data = dataArray;\n    } else if (request.method.toLowerCase() != 'get' && !!request.body) {\n        if (request.decodeRequestBase64) {\n            config.data = await b64toBlob(request.body);\n        } else {\n            config.data = request.body;\n        }\n    }\n\n    var httpResp = {\n        error: true,\n        status: 0,\n        body: '',\n        headers: new window.Module.Map_std_string_std_string(),\n    }\n    var resp = null;\n    try {\n        resp = await axios(config);\n    } catch (e) {\n        if (!!e && !!e.response && !!e.response.status) {\n            resp = e.response;\n        }\n    }\n\n    if (resp != null) {\n        httpResp.error = false;\n        httpResp.status = resp.status;\n\n        for (let item in resp.headers) {\n            if (typeof(resp.headers[item]) == 'string') {\n                httpResp.headers.set(item, resp.headers[item]);\n            }\n        }\n\n        if (request.encodeResponseBase64) {\n            let body = await blobToBase64(toBlob(resp.data));\n            if (body.startsWith('data:') && body.indexOf('base64,') >= 0) {\n                body = body.substring(body.indexOf('base64,') + 7);\n            }\n            httpResp.body = body;\n        } else {\n            let body = await toStr(resp.data)\n            httpResp.body = body;\n        }\n    }\n    \n    return httpResp;\n}\n\nexport default httpUtil;","class WSManager\n{\n    constructor() {\n        this.ws = null;\n        this.lekhCore = null;\n        this.setTimer();\n    }\n\n    setTimer = () => {\n        let self = this;\n        window.setInterval(() => {\n            if (self.ws == null) {\n                return;\n            }\n            try {\n                self.ws.send('{}');\n            } catch (e) { }\n        }, 15000);\n    }\n\n    send(docid, data) {\n        if (this.ws != null) {\n            try {\n                this.ws.send(data);\n            } catch(e) {\n                this.lekhCore.coreIO().onWebSocketDisconnect();\n                return false;\n            }\n            return true;\n        }\n    }\n\n    connect(docid, location) {\n        this.lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n        this.ws = new window.WebSocket(location);\n        let self = this;\n\n        this.ws.onopen = function(event) {\n            console.log('connection opened: ', event);\n            self.lekhCore.coreIO().onWebSocketConnect();    \n        };\n    \n        this.ws.onmessage = function(event) {\n            self.lekhCore.coreIO().onWebSocketMessage(event.data);\n        };\n    \n        this.ws.onclose = function(event) {\n            console.log('connection closed:', event);\n            self.lekhCore.coreIO().onWebSocketDisconnect();\n        };\n    \n        this.ws.onerror = function(event) {\n            console.log('connection error: ', event);\n            self.lekhCore.coreIO().onWebSocketDisconnect();\n        };\n    }\n\n    disconnect() {\n        if (this.ws != null) {\n            try {\n                this.ws.close();\n            } catch (e) { }\n        }\n    }\n}\n\nlet wsmanager = new WSManager();\nexport default wsmanager;","import viewPort from \"../components/ViewPort/ViewPort\";\nimport { JSDrawingPlatform } from \"./Platform\";\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { jsPDF } from \"jspdf\";\nimport util from \"./Util\";\n\nvar FileSaver = require('file-saver');\n\nconst errMsg = 'Unable to export. Canvas is probably too large. Please try exporting from Android / iOS app or contact support at info@lekhapp.com';\n\nclass Exporter\n{\n    constructor() {\n        this.input = null;\n        this.showDialog = null;\n    }\n\n    export(input) {\n        this.input = input;\n\n        if (input.format == window.Module.avabodh_lekh_ExportInput_ExportFormat.PDF) {\n            this.exportPdf();\n        } else if (input.format == window.Module.avabodh_lekh_ExportInput_ExportFormat.PNG) {\n            this.exportImage('png');\n        } else if (input.format == window.Module.avabodh_lekh_ExportInput_ExportFormat.JPG) {\n            this.exportImage('jpg');\n        } else if (input.format == window.Module.avabodh_lekh_ExportInput_ExportFormat.SVG) {\n            this.exportSvg();\n        } else if (input.format == window.Module.avabodh_lekh_ExportInput_ExportFormat.LEKH) {\n            this.exportLekh();\n        }\n    }\n\n    checkError(img) {\n        if (img == null || img.data == \"data:,\") {\n            const handleClose = () => viewPort.showDialog(null);\n            var dialog = (\n                <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={true}>\n                    <DialogTitle id=\"simple-dialog-title\">{errMsg}</DialogTitle>\n                    <Button onClick={handleClose}>OK</Button>\n                </Dialog>\n            )\n            viewPort.showDialog(dialog)\n            return true;\n        }\n        return false;\n    }\n\n    exportPdf() {\n        let pdfDoc = null;\n        for (let i = 0; i < this.input.pages.size(); i++) {\n            let img = this.getImage(i, \"jpg\", 0.5);\n            if (this.checkError(img)) {\n                return;\n            }\n            var orient = \"landscape\";\n            if (img.height > img.width) {\n                orient = \"portrait\";\n            }\n            if (pdfDoc == null) {\n                pdfDoc = new jsPDF({\n                    unit: 'pt',\n                    orientation: orient,\n                    format: [img.width, img.height]\n                });\n            } else {\n                pdfDoc = pdfDoc.addPage([img.width, img.height], orient);\n            }\n\n            pdfDoc.addImage(img.data, 'JPEG', 0, 0, img.width, img.height)\n        }\n        pdfDoc.save(this.input.fileName);\n    }\n\n    exportImage(format) {\n        for (let i = 0; i < this.input.pages.size(); i++) {\n            let pageInfo = this.input.pages.get(i);\n            let img = this.getImage(i, format, pageInfo.imageScale);\n            if (this.checkError(img)) {\n                return;\n            }\n            FileSaver.saveAs(img.data, pageInfo.fileName);\n        }\n    }\n\n    exportLekh() {\n        var blob = new Blob([this.input.content], { type: \"text/plain;charset=utf-8\" });\n        FileSaver.saveAs(blob, this.input.fileName);\n    }\n\n    exportSvg() {\n        for (let i = 0; i < this.input.pages.size(); i++) {\n            let pageInfo = this.input.pages.get(i);\n            var blob = new Blob([pageInfo.content], { type: \"text/plain;charset=utf-8\" });\n            FileSaver.saveAs(blob, pageInfo.fileName);\n        }\n    }\n\n    getImage(pageIdx, format, imageScale) {\n        let pageInfo = this.input.pages.get(pageIdx);\n        let scale = 1;\n        if (imageScale > 0 && imageScale < 8) {\n            scale = imageScale;\n        }\n\n        var cel = document.createElement(\"canvas\");\n        viewPort.fixCanvas(cel, pageInfo.width * scale, pageInfo.height * scale);\n        var ctx = cel.getContext(\"2d\");\n\n        let lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n\n        if (format == \"jpg\" || format == \"jpeg\") {\n            ctx.fillStyle = '#fff';\n            if (this.input.includeBackground) {\n                let back = lekhCore.getPageBackground(pageInfo.pageIndex);\n                if (back.type() == window.Module.avabodh_lekh_LekhBackground_Type.TypeColor) {\n                    ctx.fillStyle = util.colorStr(back.getColor(), false);\n                }\n            }\n            ctx.fillRect(0, 0, pageInfo.width * scale, pageInfo.height * scale);\n        }\n\n        let jsp = new JSDrawingPlatform();\n        jsp.init();\n        jsp.ctx = ctx;\n\n        if (scale != 1) {\n            ctx.scale(scale, scale);\n        }\n\n        lekhCore.drawForExporting(jsp.cppObj, pageInfo.pageIndex, this.input.includeBackground, pageInfo.translateX, pageInfo.translateY);\n\n        jsp.cppObj.delete();\n\n        return { data: cel.toDataURL(\"image/\" + format), width: pageInfo.width * scale, height: pageInfo.height * scale }\n    }\n}\n\nexport default Exporter;","import viewPort from \"../components/ViewPort/ViewPort\";\nimport util from \"./Util\";\nimport textEditor from \"../components/ViewPort/TextEditor\";\nimport httpUtil from \"../utils/HttpUtil\";\nimport luaScripts from '../data/lua_script.json'\nimport wsmanager from \"./WSManager\";\nimport Exporter from \"./Exporter\";\n\nclass JSPlatform {\n    init() {\n        this.cppObj = new window.Module.PlatformImpl(this);\n        let hostEnv = window.Module.avabodh_lekh_app_HostEnv_instance();\n        hostEnv.initForWeb(this.cppObj, util.hasTouch());\n    }\n\n    getTextBoxSize(str, style, constr) {\n        return this.getTextSize(str, style, constr);\n    }\n\n    getTextSize(str, style, constr) {\n        return this.measureText(str, style, constr);\n    }\n\n    measureText(lines, style, constr) {\n        style = style.get();\n        let font = util.fontStr(style);\n        return viewPort.measureText(lines, font, style.effectiveFontSize());\n    }\n\n    processFont(style) {\n    }\n\n    setFontFromPlatformName(str, style) {\n    }\n\n    freePlatformImageObject(img) {\n    }\n\n    getImageDataFromBase64String(str) {\n        let img = new Image();\n        img.src = \"data:image/png;base64,\" + str;\n        img.onload = function() {\n            viewPort.drawCanvas(window.Module.avabodh_lekh_CanvasType.Drawing);\n        }\n        return img;\n    }\n\n    cloneImageData(img, format) {\n        return img;\n    }\n\n    getBase64FromImage(img, format, output) {\n        let data = util.getBase64FromImage(img, format);\n        output.set(data);\n    }\n\n    getImageSize(img) {\n        return { width: img.width, height: img.height };\n    }\n\n    resizeImage(img, size) {\n        let img2 = util.resizeImage(img, size);\n        if (img2 != null) {\n            img2.onload = function() {\n                viewPort.drawCanvas(window.Module.avabodh_lekh_CanvasType.Drawing);\n            }\n        }\n        return img2;\n    }\n\n    setBackgoundNeedUpdate() {\n    }\n\n    canvasSize() {\n        return {width: 0, height: 0};\n    }\n\n    scrollOffset() {\n        return {x: 0, y: 0};\n    }\n\n    zoomCanvas(dp, val) {\n        let drawingDp = dp.get().jsObj()\n        drawingDp.ctx.save();\n        drawingDp.ctx.scale(val, val);\n        return true;\n    }\n\n    resetZoomCanvas(dp) {\n        let drawingDp = dp.get().jsObj()\n        drawingDp.ctx.restore();\n    }\n\n    LOG(str) {\n        console.log(str);\n    }\n\n    getResource(name, output) {\n        var sc = luaScripts[name];\n        if (sc) {\n            return output.set(sc);\n        }\n        output.set('')\n    }\n\n    getRemoteResource(name, type) {\n    }\n\n    getUUID(output) {\n        let out = util.generateUUID();\n        output.set(out);\n    }\n\n    setTimer(milli, cb) {\n        let callback = cb.clone();\n        return window.setTimeout(function() {\n            callback.exec();\n        }, milli);\n    }\n\n    clearTimer(tid) {\n        window.clearTimeout(tid);\n    }\n\n    sendUpdate(docid, msg) {\n        return wsmanager.send(docid, msg);\n    }\n\n    requestHttp(request, cb) {\n        cb = cb.clone();\n        httpUtil.requestHttp(request).then(resp => {\n            cb.exec(resp);\n        });\n    }\n\n    getSetting(key, type, output) {\n    }\n\n    setSetting(key, type, val) {\n    }\n\n    pointsPerInch() {\n        return 144;\n    }\n\n    pixelsPerInch() {\n        return 96;\n    }\n\n    navigateBack() {\n        window.location.href=\"/\";\n    }\n\n    drawCanvas(type) {\n        viewPort.drawCanvas(type);\n    }\n\n    setCanvasSizeAndPos(left, top, width, height) {\n        viewPort.setCanvasSize(left, top, width, height);\n    }\n\n    ediText(param, style) {\n        textEditor.editText(param, style.get());\n    }\n\n    finishTextEditing() {\n        textEditor.finishTextEditing();\n    }\n\n    listFiles(rootType, path) {\n    }\n\n    readFile(rootType, path) {\n        return util.readFile(rootType, path);\n    }\n\n    writeFile(rootType, path, content) {\n        return util.writeFile(rootType, path, content);\n    }\n\n    renameFile(rootType, from, to) {\n        return -1;\n    }\n\n    deleteFile(rootType, file) {\n        return -1;\n    }\n    \n    generateUIFeedback(type) {\n    }\n\n    showDialog(input, cb) {\n        viewPort.openDialog(input, cb.clone());\n    }\n\n    openView(input, cb) {\n        viewPort.openView(input, cb.clone());\n    }\n\n    exportDoc(input) {\n        let exporter = new Exporter();\n        exporter.export(input);\n    }\n\n    pickImage(cb) {\n        viewPort.pickImage(cb.clone())\n    }\n\n    getFontFamilies() {\n        let fonts = new window.Module.List_std_string();\n        let fontSet = util.listFont();\n        for (let font of fontSet) {\n            fonts.push_back(font);\n        }\n        return fonts;\n    }\n\n    connectWebSocket(url, docid) {\n        wsmanager.connect(docid, url);\n    }\n\n    disconnectWebSocket() {\n        wsmanager.disconnect();\n    }\n\n    reactTo(param) {\n        viewPort.reactTo(param);\n    }\n\n    setPointerIconType(type) {\n        viewPort.setPointerIconType(type);\n    }\n\n    inputModeChanged(type) {\n    }\n}\n\nexport class JSDrawingPlatform {\n    constructor() {\n        this.ctx = null;\n        this.style = null;\n        this.path = null;\n        this.coreUtil = null;\n    }\n\n    init() {\n        this.cppObj = new window.Module.DrawingPlatformImpl(this);\n        this.coreUtil = window.Module.avabodh_lekh_app_CoreUtil_instance();\n    }\n\n    setStrokeStyle() {\n        let cl = this.style.effectiveStrokePaint().solidColor;\n        this.ctx.strokeStyle = util.colorStr(cl, this.style.effectiveDisabled());\n        let mod = window.Module;\n        if (this.style.isJoinStyleDefined()) {\n            let js = this.style.effectiveJoinStyle();\n            if (js == mod.avabodh_lekh_Style_JoinStyle.JoinStyleBevelJoin) {\n                this.ctx.lineJoin = 'bevel';\n            } else if (js == mod.avabodh_lekh_Style_JoinStyle.JoinStyleMiterJoin) {\n                this.ctx.lineJoin = 'miter';\n            } else if (js == mod.avabodh_lekh_Style_JoinStyle.JoinStyleRoundJoin) {\n                this.ctx.lineJoin = 'round';\n            }\n        } else {\n            this.ctx.lineJoin = 'round';\n        }\n\n        let dashArray = this.style.effectiveDashArray();\n        \n        if (this.style.isCapStyleDefined()) {\n            let lc = this.style.effectiveCapStyle();\n            if (lc == mod.avabodh_lekh_Style_CapStyle.CapStyleButtCap) {\n                this.ctx.lineCap = 'butt';\n            } else if (lc == mod.avabodh_lekh_Style_CapStyle.CapStyleSquareCap) {\n                this.ctx.lineCap = 'square';\n            } else if (lc == mod.avabodh_lekh_Style_CapStyle.CapStyleRoundCap) {\n                this.ctx.lineCap = 'round';\n            }\n        } else {\n            if (dashArray.size() > 0) {\n                this.ctx.lineCap = 'butt';\n            } else {\n                this.ctx.lineCap = 'round';\n            }\n        }\n\n        let dc = dashArray.size();\n        if (dc > 0) {\n            let arr = [];\n            for (let i = 0; i < dc; i++) {\n                arr.push(dashArray.get(i));\n            }\n            this.ctx.setLineDash(arr);\n            this.ctx.lineDashOffset = 0;\n        }\n    }\n\n    setBackground(background) {\n\n    }\n\n    startDrawing(point, style) {\n        this.style = style.get();\n        this.path = new Path2D();\n        this.path.moveTo(point.x, point.y);\n    }\n\n    endDrawing() {\n        this.ctx.save();\n        \n        if (this.style.fill()) {\n            this.ctx.fillStyle = util.colorStr(this.style.effectiveFillPaint().solidColor, this.style.effectiveDisabled());\n            this.ctx.fill(this.path);\n        }\n        \n        let width = this.style.effectiveStrokeWidth();\n        if (width < 0) { width = 0; }\n        let shadow = this.style.effectiveShadow();\n        let hasShadow = shadow.radius > 0;\n        if ((width > 0 || hasShadow) && this.style.effectiveStrokePaint().type != window.Module.avabodh_lekh_Style_Paint_Type.PaintTypeNoPaint) {\n            this.setStrokeStyle();\n            if (width == 0) {\n                // This can happen if there is shadow but no border.\n                // sice the zero value is ignored (old value is kept) so\n                // set it to small value so that small values is set.\n                width = 0.001;\n                // make the border color same as shadow color\n                this.ctx.strokeStyle = util.colorStr(shadow.color, false);\n\n            }\n            this.ctx.lineWidth = width;\n\n            if (hasShadow) {\n                this.ctx.shadowOffsetX = shadow.dx;\n                this.ctx.shadowOffsetY = shadow.dy;\n                this.ctx.shadowBlur = shadow.radius;\n                this.ctx.shadowColor = util.colorStr(shadow.color, false);\n            }\n\n            this.ctx.stroke(this.path);    \n        }\n\n        this.ctx.restore();\n    }\n\n    closePath() {\n        this.path.closePath();\n    }\n\n    addLineTo(point) {\n        this.path.lineTo(point.x, point.y);\n    }\n\n    moveTo(point) {\n        this.path.moveTo(point.x, point.y);\n    }\n\n    addCircle(center, radius) {\n        this.path = new Path2D();\n        if (radius < 0) { radius = 0; }\n        this.path.ellipse(center.x, center.y, radius, radius, 0, 0, 6.3);\n    }\n\n    addArc(center, radius, startAngle, endAngle) {\n        this.path = new Path2D();\n        this.path.arc(center.x, center.y, radius, startAngle, endAngle, false);\n    }\n\n    addEllipse(center, width, height, angle) {\n        if (width < 0) {\n            width = 0;\n          }\n          if (height < 0) {\n            height = 0;\n          }\n          this.path = new Path2D();\n          this.path.ellipse(center.x, center.y, width / 2, height / 2, angle, 0, 6.3);\n    }\n\n    addCurve(curve) {\n        if (curve.numPoints == 3) {\n            this.path.quadraticCurveTo(curve.point2.x, curve.point2.y, curve.point3.x, curve.point3.y);\n          } else {\n            this.path.bezierCurveTo(curve.point2.x, curve.point2.y, curve.point3.x, curve.point3.y, curve.point4.x, curve.point4.y);\n          }\n    }\n\n    addRoundedRect(rect, angle) {\n\n    }\n\n    drawText(str, floating, at, rect, angle, style) {\n\n    }\n\n    drawTextWithParam(param, splits, style) {\n        if (splits.size() == 0) {\n            return;\n        }\n\n        style = style.get();\n        this.ctx.save();\n\n        let cx = param.inRect.x + param.inRect.width / 2;\n        let cy = param.inRect.y + param.inRect.height / 2;\n\n        let ahz = window.Module.avabodh_lekh_Style_TextAlignHorizontal;\n\n        let atx = cx;\n        let align = 'center'\n        if (style.effectiveTextAlignHorizontal() == ahz.TextAlignHorizontalLeft) {\n            atx = param.inRect.x;\n            align = 'left';\n        } else if (style.effectiveTextAlignHorizontal() == ahz.TextAlignHorizontalRight) {\n            atx = param.inRect.x + param.inRect.width;\n            align = 'right';\n        }\n\n        let lineHeight = style.effectiveFontSize();\n        let aty = cy - lineHeight * splits.size() / 2;\n        this.ctx.textBaseline = 'top';\n        this.ctx.textAlign = align;\n        this.ctx.font = util.fontStr(style);\n        let colorStr = util.colorStr(style.effectiveTextFill().solidColor, style.effectiveDisabled());\n        this.ctx.fillStyle = colorStr;\n        this.ctx.strokeStyle = colorStr;\n        \n        if (param.angle != 0) {\n            this.ctx.translate(cx, cy);\n            this.ctx.rotate(param.angle);\n            atx -= cx;\n            aty -= cy;\n        }\n\n        let underline = this.coreUtil.isUnderlineText(style);\n        let strikeThrough = this.coreUtil.isStrikeThroughText(style);\n\n        this.ctx.lineWidth = lineHeight / 15;\n        let delta = lineHeight * 0.92;\n\n        for (let i = 0; i < splits.size(); i++) {\n            this.ctx.fillText(splits.get(i).text, atx, aty);\n\n            if (underline || strikeThrough) {\n                let tw = splits.get(i).width;\n                let x1 = atx;\n                let x2;\n                if (align == 'left') {\n                    x2 = x1 + tw;\n                } else if (align == 'right') {\n                    x2 = x1 - tw;\n                } else {\n                    x2 = x1 + tw / 2;\n                    x1 = x1 - tw / 2;\n                }\n\n                let path = new Path2D();\n                if (strikeThrough) {\n                    path.moveTo(x1, aty + lineHeight / 2);\n                    path.lineTo(x2, aty + lineHeight / 2);\n                }\n\n                if (underline) {\n                    path.moveTo(x1, aty + delta);\n                    path.lineTo(x2, aty + delta);\n                }\n                this.ctx.stroke(path);\n            }\n\n            aty += lineHeight;\n        }\n\n        this.ctx.restore();\n    }\n\n    drawImage(center, size, angle, img, style) {\n        if (img == null) {\n          return;\n        }\n        this.ctx.save();\n        this.ctx.translate(center.x, center.y);\n        if (angle != 0) {\n            this.ctx.rotate(angle);\n        }\n        this.ctx.drawImage(img, -size.width / 2, -size.height / 2, size.width, size.height);\n        this.ctx.restore();\n    }\n\n    saveContext() {\n        this.ctx.save();\n    }\n\n    restoreContext() {\n        this.ctx.restore();\n    }\n\n    translate(x, y) {\n        this.ctx.translate(x, y);\n    }\n\n    clip(pathSteps) {\n        if (pathSteps.size() == 0) {\n            return;\n        }\n        let cp = new Path2D();\n        let tp = window.Module.avabodh_geometry_PathStep_Type;\n\n        for (let i = 0; i < pathSteps.size(); i++) {\n            let p = pathSteps.get(i);\n            if (p.type == tp.Move) {\n                cp.moveTo(p.p1.x, p.p1.y);\n            } else if (p.type == tp.Line) {\n                cp.lineTo(p.p1.x, p.p1.y);\n            } else if (p.type == tp.Quad) {\n                cp.quadraticCurveTo(p.p1.x, p.p1.y, p.p2.x, p.p2.y);\n            } else if (p.type == tp.Cubic) {\n                cp.quadraticCurveTo(p.p1.x, p.p1.y, p.p2.x, p.p2.y, p.p3.x, p.p3.y);\n            } else if (p.type == tp.Close) {\n                cp.closePath();\n            } else if (p.type == tp.Arc) {\n                // TODO:\n            }\n        }\n        this.ctx.clip(cp);\n    }\n}\n\nconst platform = new JSPlatform();\nexport default platform;","import { getDoc } from \"./ApiRequests\";\nimport uiConfig from \"../common/UIConfig\";\nimport integ from \"../integ/integ\";\n\nvar docInfo = {\n  state: 'loading',\n  docid: '',\n  data: {name: ''},\n  onChange: () => { },\n}\n\nconst onChange = () => {\n  if (docInfo.onChange) {\n    try {\n      docInfo.onChange();\n    } catch(err) {\n      console.log(err)\n    }\n  }\n}\n\ndocInfo.reset = () => {\n  docInfo.state = 'loading';\n  docInfo.data = {name: ''}\n}\n\ndocInfo.get = async () => {\n  if (!uiConfig.isUsingLekhBackend()) {\n    integ.getDocInfo((state, docid, info) => {\n      docInfo.state = state;\n      docInfo.data = info;\n      docInfo.docid = docid;\n      onChange();\n    });\n    return;\n  }\n\n  docInfo.state = 'loading'\n  try {\n    let resp = await getDoc(docInfo.docid);\n    docInfo.data = resp.data;\n    docInfo.state = 'available';\n  } catch(err) {\n    console.log(err);\n    docInfo.state = 'error';\n  }\n  onChange();\n}\n\nexport default docInfo;\n","\nimport { getResource } from \"./ApiRequests\";\nimport canvas from \"../common/Canvas\";\n\nvar resources = new Map();\nvar inProgress = new Set();\nvar failedUrl = new Map();\n\nvar remoteResouceManager = { }\n\nconst onDataFromBackend = (data, url, type) => {\n    if (type == \"image\") {\n        var img = new Image();\n        img.src = window.URL.createObjectURL(data);\n        img.onload = function() {\n            remoteResouceManager.addToResources(url, img);\n        }\n    } else {\n        remoteResouceManager.addToResources(url, data);\n    }\n}\n\nremoteResouceManager.addToResources = (url, data) => {\n    resources.set(url, data);\n    window.setTimeout(()=> {\n        resources.delete(url);\n    }, 30 * 1000);\n    canvas.draw();\n}\n\nremoteResouceManager.getResource = (url, type) => {\n    if (resources.has(url)) {\n        return resources.get(url);\n    }\n    if (failedUrl.has(url)) {\n        var count = failedUrl.get(url);\n        if (count >= 3) {\n            return null;\n        }\n    }\n\n    if (inProgress.has(url)) {\n        return null;\n    }\n\n    if (url.startsWith('res://')) {\n        inProgress.add(url);\n        var resid = url.substr(6);    \n        getResource(resid).then(data => {\n            onDataFromBackend(data.data, url, type);\n        }).catch(err=> {\n            console.log(err);\n        }).finally(()=> {\n            inProgress.delete(url);\n            if (failedUrl.has(url)) {\n                failedUrl.set(url, failedUrl.get(url) + 1);\n            } else {\n                failedUrl.set(url, 1);\n            }\n        });\n        return null;\n    }\n    return null;\n}\n\nexport default remoteResouceManager;","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from '@material-ui/core';\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { constant } from \"../../utils/ApiConstants\";\nimport { ApiRequestWithToken } from \"../../utils/ApiRequests\";\nimport docInfo from \"../../utils/DocInfo\";\nimport canvas from \"../../common/Canvas\";\nimport remoteResouceManager from \"../../utils/RemoteResourceManager\";\nimport uiConfig from \"../../common/UIConfig\";\n\nconst MaxSize = 5 * 1024 * 1024;\nvar selectedImage = null;\n\nconst ImageUploader = (props) => {\n  const [file, setFile] = useState(null);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const [errMsg, setErrMsg] = useState('');\n  const [uploading, setUploading] = useState(false);\n\n  var btnText = 'Upload';\n  if (uploading) {\n    btnText = \"Uploading..\";\n  }\n  if (!uiConfig.isUsingLekhBackend()) {\n    btnText = \"Insert\";\n  }\n  var btnEnabled = true;\n  if (uploading || width == 0 || height == 0 || file == null || file.size > MaxSize) {\n    btnEnabled = false;\n  }\n  const onChange = (e) => {\n    var changedFile = e.target.files[0];\n    setFile(changedFile);\n    setWidth(0);\n    setHeight(0);\n    if (changedFile.size > MaxSize) {\n      setErrMsg('Must be less than 5M');\n    } else {\n      setErrMsg('');\n    }\n\n    var objectUrl = window.URL.createObjectURL(changedFile);\n    var img = new Image();\n    img.src = objectUrl;\n    img.onload = function() {\n      setWidth(img.width)\n      setHeight(img.height);\n      //window.URL.revokeObjectURL(objectUrl)\n      if (selectedImage != null) {\n        window.URL.revokeObjectURL(selectedImage.src);\n      }\n      selectedImage = img;\n    }\n  }\n\n  /*\n  const insertImage = () => {\n    var objectUrl = window.URL.createObjectURL(file);\n    var img = new Image();\n    img.src = objectUrl;\n    img.onload = function() {\n      window.Module.insertImage(img, props.at.x, props.at.y, img.width, img.height);\n      window.URL.revokeObjectURL(objectUrl);\n      props.dialogHandler(null);\n      setTimeout(() => {\n        canvas.draw();\n      }, 1);\n    }\n  }\n  */\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    props.cb.exec(false, selectedImage);\n    props.dialogHandler(null);\n\n    /*\n    \n    if (!uiConfig.isUsingLekhBackend()) {\n      insertImage();\n      return;\n    }\n\n    const dataArray = new FormData();\n    dataArray.append(\"data\", file);\n    dataArray.append(\"type\", 'image');\n    dataArray.append(\"scope\", docInfo.docid);\n\n    setUploading(true);\n    ApiRequestWithToken()\n      .post(constant.baseUrl + \"/v1.1/resources/upload\", dataArray, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      })\n      .then((resp) => {\n        props.dialogHandler(null);\n        var url = 'res://' + resp.data.resid;\n        window.Module.inputReceiver().insertImageWithResource(url, {width:width, height: height}, props.at);\n        remoteResouceManager.addToResources(url, selectedImage);\n        canvas.draw();\n      })\n      .catch((err) => {\n          setErrMsg('Error in upload');\n          console.log(err);\n      });*/\n  };\n\n  const close = ()=> {\n      props.dialogHandler(null);\n  }\n\n  return (\n    <Dialog open={true} className=\"px-5\">\n        <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Insert Image</h4>\n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <form\n            action=\"\"\n            className=\"\"\n            onSubmit={handleSubmit}\n        >\n            <input type='file' accept=\"image/*\" disabled={uploading} className=\"mx-3 mt-4\" onChange={onChange}/>\n            {errMsg && \n              <div className=\"mt-2 mx-3 text-red-600 text-sm\">\n                <label>{errMsg}</label>\n              </div>\n            }\n            <div className=\"flex mb-4 mt-5 mx-3\">\n                <div className=\"mr-4\"><Button variant=\"outlined\" onClick={close}>Cancel</Button></div>\n                <Button variant=\"outlined\" disabled={!btnEnabled} onClick={handleSubmit}>{btnText}</Button>\n            </div>\n        </form>\n    </Dialog>\n  );\n};\n\nexport default ImageUploader;\n","import './ShapeProps.css'\n\nimport React from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport keyboardInput from '../../common/KeyboardInput';\n\nconst getTopPlacement = (rect) => {\n    const getBoundingClientRect = () =>  {\n        return {\n            x: rect.x,\n            y: rect.y,\n            width:rect.width,\n            height: rect.height,\n            top: rect.y,\n            left: rect.x,\n            bottom: rect.y + rect.height,\n            right: rect.x + rect.width\n        }\n    }\n\n    var anchorEl = {\n        clientWidth: rect.width,\n        clientHeight: rect.height,\n        getBoundingClientRect,\n    }\n\n    return {anchorEl: anchorEl, placement: 'top'}\n}\n\nconst Help = (props) => {\n    const handleClickAway = () => {\n        props.showShapeHelp(null);\n    }\n\n    const handleKey = (event) => {\n        let key = event.key.toLowerCase();\n        if (key == 'escape') {\n            handleClickAway();\n            return true;\n        }\n        return false;\n    }\n\n    React.useEffect(() => {\n        keyboardInput.addListener(handleKey);\n        return () => {\n            keyboardInput.removeListener(handleKey);\n        }\n    }, [])\n\n    let rect = props.input.fromRect\n    rect.y -= 4;\n    let pos = getTopPlacement(rect);\n    let helpText = props.input.content;\n    helpText = helpText.replace(\" tap \", \" click \");\n\n    return (\n        <ClickAwayListener onClickAway={handleClickAway}>\n            <Popper open={true} {...pos}>\n                <div className=\"shape_help_paper\">\n                    {<div dangerouslySetInnerHTML={{ __html: helpText }} />}\n                </div>\n            </Popper>\n        </ClickAwayListener>\n    );\n}\n\nexport default Help;","import React from \"react\";\n\nconst InputField = ({\n  label,\n  type,\n  id,\n  name,\n  value,\n  handleChange,\n  placeholder,\n  pattern,\n  required,\n  error,\n  errorText,\n  readOnly\n}) => {\n  return (\n    <div className=\"flex  flex-col\">\n      {label ? (\n        <label\n          htmlFor={id}\n          className=\"text-prmDGrey mb-2 font-Poppins lg:text-lg\"\n        >\n          {label}\n        </label>\n      ) : (\n        <label\n          htmlFor=\"email\"\n          className=\"text-prmDGrey mb-2 font-Poppins lg:text-lg invisible\"\n        >\n          *****\n        </label>\n      )}\n      {error && (\n        <p className=\"font-italic text-red-400 my-0 mb-2 text-sm\">\n          {errorText}\n        </p>\n      )}\n      <input\n        type={type}\n        id={id}\n        placeholder={placeholder}\n        name={name}\n        value={value}\n        onChange={handleChange}\n        readOnly={readOnly}\n        pattern={pattern}\n        required={required}\n        className={`${\n          readOnly ? \"cursor-not-allowed bg-gray-100\" : \"\"\n        }   \"lg:text-lg outline-none text-prmDGrey border border-1 border-prmLGrey px-3 py-1.5 mb-5 font-Poppins \"`}\n      />\n    </div>\n  );\n};\n\nexport default InputField;\n","import useSWR from \"swr\"\nimport { fetcher } from \"../utils/ApiRequests\"\n\nconst useFetch = url => {\n  const { data, error } = useSWR(url, fetcher)\n\n  return { data, loading: !error && !data, error }\n}\n\nexport default useFetch\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog } from \"@material-ui/core\";\nimport Select from \"react-select\";\nimport InputField from \"../InputField/InputField\";\nimport { useState } from \"react\";\nimport { deleteShare, shareDoc } from \"../../utils/ApiRequests\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport { toast } from \"react-toastify\";\nimport { HiInformationCircle } from \"react-icons/hi\";\nimport useFetch from \"../../hooks/useFetch\";\nimport { IoMdMail } from \"react-icons/io\";\nimport { mutate } from \"swr\";\nimport { BiArrowBack } from \"react-icons/bi\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { useEffect } from \"react\";\n\nconst ShareModal = ({ state, close, doc }) => {\n  const id = doc.docid;\n  const [email, setEmail] = useState(\"\");\n  const [type, setType] = useState(\"private\");\n  const [access, setAccess] = useState(\"read\");\n  const [loading, setLoading] = useState(false);\n  const [viewShares, setViewShares] = useState(false);\n  const { data, loading: fetch } = useFetch(id ? `/v1.1/docs/${id}/share` : \"\");\n  const [copied, setCopied] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(null);\n  const options = [\n    { value: \"private\", label: \"Private\" },\n    { value: \"public\", label: \"Public\" }\n  ];\n  const accessOptions = [\n    { value: \"read\", label: \"Read\" },\n    { value: \"write\", label: \"Write\" }\n  ];\n\n  useEffect(() => {\n    setEmail(\"\");\n    setType(\"private\");\n    setAccess(\"read\");\n    setCopied(false);\n    setError(null);\n    setSuccess(false);\n  }, [close]);\n\n  // const handleKeyDown = event => {\n  //   console.log(event.key);\n  //   // if (event.key.toLowerCase() == \"esc\") {\n  //   //   close();\n  //   // }\n  // };\n\n  // useEffect(() => {\n  //   document.addEventListener(\"keydown\", handleKeyDown);\n\n  //   return () => {\n  //     document.removeEventListener(\"keydown\", handleKeyDown);\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  var docUrl = window.origin + \"/?docid=\" + id;\n  if (doc.type == \"folder\") {\n    docUrl =\n      window.origin +\n      \"/#/docs/shared?path=\" +\n      encodeURIComponent(id + \"/\" + doc.name);\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const privateForm = {\n      email: email,\n      type: access\n    };\n    setLoading(true);\n    setError(null);\n    shareDoc(id, type === \"private\" ? privateForm : { type: access })\n      .then(res => {\n        mutate(`/v1.1/docs/${id}/share`);\n        setViewShares(true);\n        setError(null);\n        setSuccess(true);\n      })\n      .catch(err => {\n        if (\n          err?.response?.data?.code == \"already_has_permission\" ||\n          err?.response?.data?.code == \"already_has_folder_permission\"\n        ) {\n          setError(\"User already has access\");\n        }\n\n        if (err?.response?.data?.code == \"user_not_found\") {\n          setError(\"User with the given email not found\");\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\" aria-labelledby=\"Share\">\n      <div className={`py-4 w-64 lg:w-96 bg-white`}>\n        {!viewShares && (\n          <form onSubmit={handleSubmit}>\n            <div className=\"px-3 flex justify-between items-center mb-3\">\n              <div />\n              <h4 className=\"text-center m-0 text-lg\">Share</h4>\n\n              <AiOutlineClose\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  if (success === true) {\n                    docsManager.reload();\n                    close();\n                  }\n                  close();\n                }}\n              />\n            </div>\n\n            <hr />\n            <div className=\"px-5 mt-1\">\n              <Select\n                options={\n                  doc.type == \"folder\"\n                    ? [{ value: \"private\", label: \"Private\" }]\n                    : options\n                }\n                className=\"mb-3\"\n                onChange={e => setType(e.value)}\n                placeholder=\"Private\"\n                defaultValue=\"private\"\n              />\n\n              <p className=\"m-0 mb-1 font-medium\">Access Level</p>\n              <Select\n                options={accessOptions}\n                className=\"mb-3\"\n                onChange={e => setAccess(e.value)}\n                defaultValue=\"read\"\n                placeholder=\"Read\"\n              />\n\n              {type === \"public\" && (\n                <CopyToClipboard text={docUrl} onCopy={() => setCopied(true)}>\n                  <div className=\"copy-grid gap-3 items-center w-full\">\n                    <div className=\"-mt-4\">\n                      <InputField required={true} value={docUrl} readOnly />\n                      {/* <span className=\"-mb-2\">Copied</span> */}\n                    </div>\n\n                    <span className=\"text-white font-medium text-center text-sm block py-1 bg-blue-500 cursor-pointer outline-none border-none border-0 \">\n                      Copy\n                    </span>\n                  </div>\n                </CopyToClipboard>\n              )}\n              {copied && <span className=\"-mt-3 block italic\">Copied</span>}\n\n              {type === \"private\" && (\n                <>\n                  <InputField\n                    label=\"Email\"\n                    required={true}\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    handleChange={e => setEmail(e.target.value)}\n                    value={email}\n                  />\n                  {error && !loading && (\n                    <span className=\"-mt-3 block italic text-red-500 text-sm\">\n                      {error}\n                    </span>\n                  )}\n                </>\n              )}\n              <div className=\"mt-3\">\n                {loading ? (\n                  <MiniLoader />\n                ) : (\n                  <div className=\"flex items-center justify-between\">\n                    <p\n                      className=\"m-0 cursor-pointer italic flex items-center space-x-1 \"\n                      onClick={() => setViewShares(true)}\n                    >\n                      <HiInformationCircle className=\"m-0 text-lg\" />\n                      <span>View Shares</span>\n                    </p>\n\n                    <button\n                      type=\"submit\"\n                      className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 \"\n                    >\n                      Share\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </form>\n        )}\n        {viewShares && (\n          <div>\n            <div className=\"px-5 flex justify-between items-center mb-3\">\n              <BiArrowBack\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  setViewShares(false);\n                }}\n              />\n\n              <h4 className=\"text-center m-0 text-lg\">Shares</h4>\n\n              <AiOutlineClose\n                className=\"text-xl cursor-pointer\"\n                onClick={() => {\n                  if (success === true) {\n                    docsManager.reload();\n                    close();\n                  }\n                  close();\n                }}\n              />\n            </div>\n            <hr />\n\n            {fetch && <MiniLoader />}\n\n            {!data?.shares?.length && !fetch && (\n              <p className=\"text-center\">No shares yet</p>\n            )}\n\n            {!fetch &&\n              data?.shares.map((m, i) => (\n                <div className=\"share-grid mb-3 px-5 \" key={i}>\n                  <div className=\"flex items-center space-x-2\">\n                    <IoMdMail />\n                    <p className=\"truncate w-24 lg:w-44\">\n                      {m?.email || \"Public\"}\n                    </p>\n                  </div>\n\n                  <p className=\"m-0\">{m?.type}</p>\n\n                  <AiOutlineClose\n                    className=\"text-base cursor-pointer ml-auto\"\n                    onClick={() => {\n                      deleteShare(id, m?.email)\n                        .then(res => {\n                          mutate(`/v1.1/docs/${id}/share`);\n                        })\n                        .catch(err =>\n                          toast.error(err?.response?.data?.message)\n                        );\n                    }}\n                  />\n                </div>\n              ))}\n          </div>\n        )}\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ShareModal;\n","var titles = {\n    'select-input-mode': [{\n            start: 0,\n            end: 3.8,\n            msg: 'Drag empty area to multi select'\n        },\n        {\n            start: 4.1,\n            end: 6,\n            msg: 'Clik a shape to select'\n        },\n        {\n            start: 6.1,\n            end: 9,\n            msg: 'Ctrl + Click shapes to multi select'\n        },\n        {\n            start: 10,\n            end: 14,\n            msg: 'Double click to add text'\n        },\n        {\n            start: 14.2,\n            end: 18,\n            msg: 'Two fingers drag to scroll'\n        },\n        {\n            start: 18.5,\n            end: 20,\n            msg: 'Mouse wheel to scroll'\n        },\n        {\n            start: 20,\n            end: 25,\n            msg: 'Ctrl + Mouse drag to scroll'\n        },\n        {\n            start: 25.1,\n            end: 30,\n            msg: 'Alt + Mouse drag to duplicate a shape'\n        }\n    ],\n    'smart-draw-mode': [{\n            start: 0,\n            end: 9,\n            msg: 'Drag to draw basic shapes'\n        },\n        {\n            start: 9.1,\n            end: 13,\n            msg: 'Double click to add text'\n        },\n        {\n            start: 13.1,\n            end: 15,\n            msg: 'Click a shape to select'\n        },\n        {\n            start: 15.1,\n            end: 17,\n            msg: 'Ctrl + Click shapes to multi select'\n        },\n        {\n            start: 18,\n            end: 24.8,\n            msg: 'Two fingers drag to scroll'\n        },\n        {\n            start: 25,\n            end: 27,\n            msg: 'Mouse wheel to scroll'\n        },\n        {\n            start: 27.1,\n            end: 31,\n            msg: 'Ctrl + Mouse drag to scroll'\n        }\n    ],\n    'scroll-input-mode': [{\n            start: 0,\n            end: 4,\n            msg: 'Drag to scroll'\n        }\n    ],\n    'draw-input-mode': [{\n            start: 0,\n            end: 10,\n            msg: 'Drag to draw'\n        },\n        {\n            start: 10.6,\n            end: 14,\n            msg: 'Two fingers drag to scroll'\n        },\n        {\n            start: 14.2,\n            end: 16,\n            msg: 'Mouse wheel to scroll'\n        },\n        {\n            start: 16.1,\n            end: 19,\n            msg: 'Ctrl + Mouse drag to scroll'\n        }\n    ],\n    'erase-input-mode': [{\n            start: 0,\n            end: 3.9,\n            msg: 'Drag to erase'\n        },\n        {\n            start: 4,\n            end: 6.2,\n            msg: 'Two fingers drag to scroll'\n        },\n        {\n            start: 6.3,\n            end: 9,\n            msg: 'Mouse wheel to scroll'\n        },\n        {\n            start: 9.1,\n            end: 12,\n            msg: 'Ctrl + Mouse drag to scroll'\n        }\n    ],\n    'text-input-mode': [{\n            start: 0,\n            end: 4,\n            msg: 'Click to add text'\n        }\n    ],\n    'drawing_connection': [{\n            start: 0,\n            end: 28,\n            msg: 'Draw connection lines in different ways'\n        },\n        {\n            start: 28.1,\n            end: 33,\n            msg: 'Draw and erase arrows'\n        },\n        {\n            start: 33.1,\n            end: 50,\n            msg: 'Customize connection lines'\n        },\n        {\n            start: 50.1,\n            end: 55,\n            msg: 'Double click to add text on connection'\n        },\n        {\n            start: 55.1,\n            end: 60,\n            msg: 'Move the text on connection line while connection is selected'\n        },\n        {\n            start: 60,\n            end: 80,\n            msg: 'Change arrows using selection menu'\n        }\n    ],\n    'drawing_polygon': [{\n            start: 0,\n            end: 22.5,\n            msg: 'Draw shapes'\n        },\n        {\n            start: 22.6,\n            end: 28,\n            msg: 'Draw connections'\n        },\n        {\n            start: 28.1,\n            end: 35,\n            msg: 'Select and move a shape to align'\n        },\n        {\n            start: 35.1,\n            end: 42,\n            msg: 'Double click to add text'\n        },\n        {\n            start: 42.1,\n            end: 56,\n            msg: 'Erase and redraw arrows on connectors'\n        },\n        {\n            start: 56.1,\n            end: 64,\n            msg: 'Double click on connectors to add text'\n        },\n        {\n            start: 64.1,\n            end: 70,\n            msg: 'Use selection menu to set fill or line colors'\n        }\n    ],\n    'drawing_path': [{\n            start: 0,\n            end: 7,\n            msg: 'Draw line, polyline and curves'\n        },\n        {\n            start: 7.1,\n            end: 12.5,\n            msg: 'Draw line, multiline or curve connectors'\n        },\n        {\n            start: 12.6,\n            end: 26,\n            msg: 'Click on the end points (black/blue circles) and drag to move them'\n        },\n        {\n            start: 26.1,\n            end: 35,\n            msg: 'Draw and erase arrows on lines, curves and connectors'\n        },\n    ],\n    'selection_menu_path': [{\n            start: 0,\n            end: 16,\n            msg: 'Click on the end points (black/blue circles) and drag to move them'\n        },\n        {\n            start: 16.1,\n            end: 25,\n            msg: 'Change line color and styles using selection menu'\n        },\n        {\n            start: 25.1,\n            end: 34,\n            msg: 'Resize and rotate by dragging the corners of selection rectangle'\n        },\n        {\n            start: 34.1,\n            end: 47,\n            msg: 'Change arrows at the end point of lines and curves'\n        }\n    ],\n    'selection_menu_generic': [{\n            start: 0,\n            end: 8,\n            msg: 'Double click to add text'\n        },\n        {\n            start: 8.1,\n            end: 28,\n            msg: 'Use selection menu to change fill color, line and text style'\n        },\n        {\n            start: 28.1,\n            end: 37,\n            msg: 'Drag selection rectangle corners to resize and rotate'\n        },\n        {\n            start: 37.1,\n            end: 42,\n            msg: 'Use selection menu to duplicate shapes'\n        }\n    ],\n    'selection_menu_multiselected': [{\n            start: 0,\n            end: 8,\n            msg: 'Change fill color and line color using selection menu'\n        },\n        {\n            start: 8.1,\n            end: 10,\n            msg: 'Use selection menu to group selected shapes'\n        },\n        {\n            start: 10.1,\n            end: 19,\n            msg: 'Drag corners of selection to resize and rotate the grouped shape'\n        },\n        {\n            start: 19.1,\n            end: 22,\n            msg: 'Use selection menu to un-group the grouped shape'\n        }\n    ],\n    'selection_menu_connection': [{\n            start: 0,\n            end: 7,\n            msg: 'Draw and erase arrows at the end of connection lines'\n        },\n        {\n            start: 7,\n            end: 11,\n            msg: 'Double click to add text on connection lines'\n        },\n        {\n            start: 11,\n            end: 16,\n            msg: 'Move the text on connection line while connector is selected'\n        },\n        {\n            start: 16,\n            end: 30,\n            msg: 'Customize connection lines by moving end points'\n        },\n        {\n            start: 30,\n            end: 42,\n            msg: 'Change arrows using selection menu'\n        },\n        {\n            start: 42,\n            end: 46,\n            msg: 'Swap arrows'\n        }\n    ]\n}\n\nexport default titles;","import './CHelp.css'\n\nimport React from 'react'\nimport { Dialog } from \"@material-ui/core\";\nimport { AiOutlineClose } from \"react-icons/ai\"\nimport titles from './Captions';\n\nconst startCaption = (name, vid, spanElement) => {\n    let curTitles = titles[name];\n    let idx = 0;\n    let showingIndex = -1;\n\n    function updateCaption() {\n        while (idx < curTitles.length) {\n            if (vid.currentTime < curTitles[idx].start) {\n                return;\n            } else if (vid.currentTime >= curTitles[idx].end) {\n                removeCaption();\n                idx++;\n            } else {\n                updateForIndex(idx);\n                break;\n            }\n        }\n    }\n\n    function removeCaption() {\n        showingIndex = -1;\n        spanElement.innerHTML = \"&nbsp;\";\n    }\n\n    function updateForIndex(index) {\n        if (index == showingIndex) {\n            return;\n        }\n        showingIndex = index;\n        var msg = curTitles[index].msg;\n        const isMac = navigator.userAgent.indexOf(\"OS X\") > 0;\n        if (isMac) {\n            msg = msg.replace('Ctrl +', 'Cmd +')\n        }\n        spanElement.innerHTML = msg;\n    }\n\n    vid.addEventListener('loadeddata', function() {\n        //vid.textTracks[0].mode = \"showing\";\n        window.setTimeout(function() {\n            if (vid.paused) {\n                //vid.setAttribute(\"controls\", \"controls\");\n                vid.play();\n            }\n        }, 2000);\n    });\n\n    vid.addEventListener('timeupdate', function() {\n        updateCaption();\n    });\n\n    vid.addEventListener('ended', function () {\n        idx = 0;\n        this.play();\n    })\n}\n\nconst checkAndStartCaption = (name) => {\n    var vid = document.getElementById(\"tip_video\");\n    var span = document.getElementById(\"caption_text\");\n    if (vid == null || span == null) {\n        setTimeout(()=> {\n            checkAndStartCaption(name);\n        }, 10);\n        return;\n    }\n    window.setTimeout(()=> {\n        if (vid != null && vid.paused) {\n            vid.setAttribute(\"controls\", \"controls\")\n        }\n    }, 200);\n    startCaption(name, vid, span);\n}\n\nconst ContextHelp = (props) => {\n    let close = () => {\n        props.showDialog(null);\n    }\n\n    React.useEffect(() => {\n        checkAndStartCaption(props.name);\n    }, [])\n\n    let src = \"a1/videos/cs/\" + props.name + \".mp4\";\n    return <Dialog onClose={close} open={true}>\n        <div className=\"tip_container\">\n            <div className=\"tip_header\">\n                <span className=\"tip_title\">{props.title}</span>\n                <AiOutlineClose className=\"tip_close\" onClick={close}></AiOutlineClose>\n            </div>\n            <div className=\"vid_container\">\n                <span className=\"caption_text\" id=\"caption_text\">&nbsp;</span>\n                <video id=\"tip_video\" className=\"tip_video\" autoPlay muted playsInline>\n                    <source src={src} type=\"video/mp4\" />\n                </video>\n            </div>\n        </div>\n    </Dialog>\n}\n\nexport default ContextHelp;","import $ from 'jquery';\nimport EventListener from '../../utils/EventListener';\nimport { JSDrawingPlatform } from '../../common/Platform';\nimport ImageUploader from '../ImageUploader/ImageUploader';\nimport { Dialog } from \"@material-ui/core\";\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport React, {useState} from \"react\";\nimport Help from './ShapeHelp';\nimport ShareModal from '../DashboardItems/ShareModal';\nimport ContextHelp from '../ContextHelp/ContextHelp';\n\nconst isDarkMode = () => {\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n        return true;\n    }\n    return false;\n}\n\nconst InputDialog = ({input, accept, cancel}) => {\n    const [value, setValue] = useState(input.value);\n    var okDisabled = input.allowEmpty? false : value.trim() == '';\n    return (\n    <Dialog onClose={cancel} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{input.title}</DialogTitle>\n        <DialogContent>\n            <div>{input.message}</div><br/>\n            <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"name\"\n                fullWidth\n                variant=\"outlined\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n            />\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={cancel}>{input.cancelText}</Button>\n            <Button onClick={()=> {accept(value)}} disabled={okDisabled}>{input.okText}</Button>\n        </DialogActions>\n    </Dialog>\n    );\n};\n\nconst showInputDialog = (input, cb) => {\n    let types = window.Module.avabodh_lekh_DialogResponse_Type;\n    let cancel = () => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Cancelled, value: ''});\n    }\n    let accept = (value) => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Accepted, value: value});\n    }\n    let dialog = <InputDialog input={input} accept={accept} cancel={cancel} />;\n    viewPort.showDialog(dialog);\n}\n\nconst showOkCancel = (title, msg, okText, cancelText, cb) => {\n    let types = window.Module.avabodh_lekh_DialogResponse_Type;\n    let cancel = () => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Cancelled, value: ''});\n    }\n    let accept = () => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Accepted, value: ''});\n    }\n    let dialog = <Dialog onClose={cancel} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={cancel}>{cancelText}</Button>\n            <Button onClick={accept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    viewPort.showDialog(dialog);\n}   \n\nconst showMsg = (title, msg, okText, cb) => {\n    if (!okText) {\n        okText = \"OK\";\n    }\n    let types = window.Module.avabodh_lekh_DialogResponse_Type;\n    let cancel = () => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Cancelled, value: ''});\n    }\n    let accept = () => {\n        viewPort.showDialog(null);\n        cb.exec({type: types.Accepted, value: ''});\n    }\n    let dialog = <Dialog onClose={cancel} aria-labelledby=\"simple-dialog-title\" open={true} style={{zIndex:1550}}>\n        <DialogTitle id=\"simple-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n            <div>{msg}</div>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={accept}>{okText}</Button>\n        </DialogActions>\n    </Dialog>\n    viewPort.showDialog(dialog);\n}\n\nclass ViewPort {\n    constructor() {\n        this.resizeListener = new EventListener();\n\n        this.grid = null;\n        this.draw = null;\n        this.middle = null;\n        this.ui = null;\n                \n        this.gridDp = null;\n        this.drawDp = null;\n        this.middleDp = null;\n        this.uiDp = null;\n\n        this.gridNeedsUpdate = false;\n        this.drawNeedsUpdate = false;\n        this.middleNeedsUpdate = false;\n        this.uiNeedsUpdate = false;\n\n        this.hostEnv = null;\n        this.lekhCore = null;\n\n        this.canvasTypeEnum = null;\n\n        this.showDialog = null;\n        this.showShapeHelp = null;\n        this.showAirGesture = null;\n    }\n\n    attachResizerHandler() {\n        let self = this;\n        $(window).on(\"resize\", function (evt) {\n            self.onResize();\n            self.resizeListener.trigger(evt);\n        });\n    }\n\n    attachScreenModeHandler() {\n        let self = this;\n        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {\n            self.reactTo(window.Module.avabodh_lekh_ReactParam.ConfigChange);\n        });        \n    }\n\n    onResize() {\n        let dc = document.getElementById(\"drawContent\");\n        let rect = dc.getBoundingClientRect();\n        this.fixCanvas(this.middle, rect.width, rect.height);\n        this.fixCanvas(this.ui, rect.width, rect.height);\n        this.hostEnv.setScreenSize({width: rect.width, height: rect.height});\n        this.drawCanvas(this.canvasTypeEnum.Middle);\n        this.drawCanvas(this.canvasTypeEnum.UI);\n    }\n\n    fixCanvas(cnv, width, height) {\n        var dpr = window.devicePixelRatio || 1;\n        cnv.width = width * dpr;\n        cnv.height = height * dpr;\n        cnv.style.width = width + \"px\";\n        cnv.style.height = height + \"px\";\n        var ctx = cnv.getContext(\"2d\");\n        ctx.scale(dpr, dpr);\n    }\n\n    setCanvasSize(left, top, width, height) {\n        this.fixCanvas(this.grid, width, height);\n        this.fixCanvas(this.draw, width, height);\n\n        this.grid.style.left = left + 'px';\n        this.grid.style.top = top + 'px';\n\n        this.draw.style.left = left + 'px';\n        this.draw.style.top = top + 'px';\n    }\n\n    measureText(lines, font, fontSize) {\n        let sz = { width: 0, height: 0 };\n        let ctx = this.drawDp.ctx;\n        \n        ctx.save();\n\n        ctx.font = font;\n        for(let i = 0; i < lines.size(); i++) {\n            let str = lines.get(i);\n            let metrics = ctx.measureText(str);\n            if (sz.width < metrics.width) {\n                sz.width = metrics.width;\n            }\n            sz.height += fontSize;\n        }\n\n        ctx.restore();\n\n        return sz;\n    }\n\n    init() {\n        this.hostEnv = window.Module.avabodh_lekh_app_HostEnv_instance();\n        this.lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n        this.canvasTypeEnum = window.Module.avabodh_lekh_CanvasType;\n\n        this.grid = document.getElementById(\"gridCanvas\");\n        this.draw = document.getElementById(\"drawCanvas\");\n        this.middle = document.getElementById(\"middleCanvas\");\n        this.ui = document.getElementById(\"uiCanvas\");\n\n        this.gridDp = new JSDrawingPlatform();\n        this.gridDp.init();\n        this.gridDp.ctx = this.grid.getContext('2d');\n\n        this.drawDp = new JSDrawingPlatform();\n        this.drawDp.init();\n        this.drawDp.ctx = this.draw.getContext('2d');\n\n        this.middleDp = new JSDrawingPlatform();\n        this.middleDp.init();\n        this.middleDp.ctx = this.middle.getContext('2d');\n\n        this.uiDp = new JSDrawingPlatform();\n        this.uiDp.init();\n        this.uiDp.ctx = this.ui.getContext('2d');\n\n        var rect = this.ui.getBoundingClientRect();\n\n        this.fixCanvas(this.grid, rect.width, rect.height);\n        this.fixCanvas(this.draw, rect.width, rect.height);\n        this.fixCanvas(this.middle, rect.width, rect.height);\n        this.fixCanvas(this.ui, rect.width, rect.height);\n\n        this.attachResizerHandler();\n        this.attachScreenModeHandler();\n        this.onResize();\n        \n        this.reactTo(window.Module.avabodh_lekh_ReactParam.ConfigChange);\n    }\n\n    initUI(initial) {\n        this.lekhCore.initUI(initial);\n    }\n\n    drawCanvas(type) {\n        let self = this;\n\n        if (type == this.canvasTypeEnum.Grid) {\n            if (!this.gridNeedsUpdate) {\n                this.gridNeedsUpdate = true;\n                requestAnimationFrame(()=> {\n                    self.gridNeedsUpdate = false;\n                    self.gridDp.ctx = self.grid.getContext('2d');\n                    self.gridDp.ctx.clearRect(0, 0, self.grid.width, self.grid.height);\n                    self.lekhCore.draw(self.gridDp.cppObj, type);\n                });\n            }\n        } else if (type == this.canvasTypeEnum.Drawing) {\n            if (!this.drawNeedsUpdate) {\n                this.drawNeedsUpdate = true;\n                requestAnimationFrame(()=> {\n                    self.drawNeedsUpdate = false;\n                    self.drawDp.ctx = self.draw.getContext('2d');\n                    self.drawDp.ctx.clearRect(0, 0, self.draw.width, self.draw.height);\n                    self.lekhCore.draw(self.drawDp.cppObj, type);\n                });\n            }\n        } else if (type == this.canvasTypeEnum.Middle) {\n            if (!this.middleNeedsUpdate) {\n                this.middleNeedsUpdate = true;\n                requestAnimationFrame(()=> {\n                    self.middleNeedsUpdate = false;\n                    self.middleDp.ctx = self.middle.getContext('2d');\n                    self.middleDp.ctx.clearRect(0, 0, self.middle.width, self.middle.height);\n                    self.lekhCore.draw(self.middleDp.cppObj, type);\n                });\n            }\n        } else if (type == this.canvasTypeEnum.UI) {\n            if (!this.uiNeedsUpdate) {\n                this.uiNeedsUpdate = true;\n                requestAnimationFrame(()=> {\n                    self.uiNeedsUpdate = false;\n                    self.uiDp.ctx = self.ui.getContext('2d');\n                    self.uiDp.ctx.clearRect(0, 0, self.ui.width, self.ui.height);\n                    self.lekhCore.draw(self.uiDp.cppObj, type);\n                });\n            }\n        }\n    }\n\n    setPointerIconType(type) {\n        if (this.ui == null) {\n            return;\n        }\n        let pointers = window.Module.avabodh_lekh_PointerIconType;\n        if (type == pointers.Action) {\n            this.ui.style.cursor = 'pointer';\n        } else if (type == pointers.Draw) {\n            this.ui.style.cursor = 'url(\"pen-solid.svg\") 0 20, auto';\n        } else if (type == pointers.Scroll) {\n            this.ui.style.cursor = 'grab';\n        } else if (type == pointers.Text) {\n            this.ui.style.cursor = 'url(\"title_black.svg\") 10 10, auto';\n        } else if (type == pointers.Laser) {\n            this.ui.style.cursor = 'url(\"red_circle.svg\") 10 10, auto';\n        } else if (type == pointers.Erase) {\n            this.ui.style.cursor = 'url(\"eraser-solid.svg\") 10 10, auto';\n        } else {\n            this.ui.style.cursor = 'auto';\n        }\n    }\n\n    pickImage(cb) {\n        this.showDialog(<ImageUploader dialogHandler={this.showDialog} at={{x: 0, y: 0}} cb={cb} />)\n    }\n\n    openDialog(input, cb) {\n        let types = window.Module.avabodh_lekh_DialogInput_Type;\n        if (input.type == types.OkCancel) {\n            showOkCancel(input.title, input.message, input.okText, input.cancelText, cb);\n        } else if (input.type == types.TextInput) {\n            showInputDialog(input, cb);\n        } else {\n            showMsg(input.title, input.message, input.okText, cb);\n        }\n    }\n\n    openView(input, cb) {\n        let types = window.Module.avabodh_lekh_OpenViewInput_Type;\n        let dirs = window.Module.avabodh_lekh_OpenViewInput_PopuDir;\n\n        if (input.type == types.Popup) {\n            if (input.arg == \"contact\") {\n                window.open(\"https://lekh.app/contact.html\", '_blank').focus();\n            } else if (input.arg == \"share\") {\n                let doc = this.lekhCore.coreIO().currentlyOpenedRemoteDoc();\n                let modal = <ShareModal state={true} close={() => this.showDialog(null)} doc={doc} />;\n                this.showDialog(modal);\n            } else if (input.arg == \"main_help\") {\n                let content = '';\n                if (!!input.content) {\n                    content = '#' + input.content;\n                }\n                window.open(\"https://lekh.app/help/board.html\" + content, '_blank').focus();\n            } else if (input.arg == \"platform_info\") {\n                window.open(\"https://lekh.app/help/about.html\", '_blank').focus();\n            } else if (input.arg.startsWith(\"context_info\")) {\n                let modal = <ContextHelp showDialog={this.showDialog} name={input.content} title={input.title}/>;\n                this.showDialog(modal);\n            }\n        } else if (input.type == types.HTMLContent) {\n            if (input.arg == \"shape_help\") {\n                let popup = <Help input={input} showShapeHelp={this.showShapeHelp} />\n                this.showShapeHelp(popup);\n            }\n        }\n    }\n\n    reactTo(param) {\n        if (param == window.Module.avabodh_lekh_ReactParam.AirGesture) {\n            this.showAirGesture(true);\n            return;\n        }\n\n        if (param == window.Module.avabodh_lekh_ReactParam.PageReload) {\n            window.location.reload();\n            return;\n        }\n\n        if (param != window.Module.avabodh_lekh_ReactParam.ConfigChange) {\n            return;\n        }\n        let isDark = false;\n        let hostEnv = window.Module.avabodh_lekh_app_HostEnv_instance();\n\n        if (hostEnv.getBrightnessConfig() == 1) {\n            isDark = false;\n        } else if (hostEnv.getBrightnessConfig() == 2) {\n            isDark = true;\n        } else {\n            isDark = isDarkMode();\n        }\n\n        let dc = document.getElementById('drawContent');\n        if (!dc) {\n            return;\n        }\n\n        if (isDark) {\n            hostEnv.setBrightnessMode(window.Module.avabodh_lekh_app_HostEnv_BrightnessMode.Dark);\n            dc.style.background = '#000000';\n        } else {\n            hostEnv.setBrightnessMode(window.Module.avabodh_lekh_app_HostEnv_BrightnessMode.Light);\n            dc.style.background = '#f2f2f7';\n        }\n    }\n}\n\nconst viewPort = new ViewPort()\n\nexport default viewPort;\n","import uiConfig from './UIConfig'\nimport integ from '../integ/integ'\nimport messaging from './Messaging'\nimport viewPort from '../components/ViewPort/ViewPort';\nimport platform from './Platform';\nimport mouseInput from './MouseInput';\nimport touchInput from './TouchInput';\nimport keyboardInput from './KeyboardInput';\nimport libnames from '../data/libnames.json'\nimport userInfo from '../utils/UserInfo';\nimport { getRefreshTokenFromStorage } from '../utils/ApiUtils';\n\nvar initializer = { };\n\nvar runtimeInitialized = false;\nvar initialInitDone = false;\nvar reactAppReady = false;\nvar shapesInitDone = false;\nvar uiInitDone = false;\nvar docStarted = false;\nvar userInfoFetched = false;\nvar isLoggedIn = false;\n\nwindow.Module = {\n    onRuntimeInitialized: function () {\n        runtimeInitialized = true;\n        initializer.initInternal();\n    }\n};\n\nwindow.toggleDebug = function() {\n    window.Module.toggleDebug();\n}\n\nconst appendScript = (scriptToAppend) => {\n    const script = document.createElement(\"script\");\n    script.src = scriptToAppend;\n    script.async = false;\n    document.body.appendChild(script);\n}\n\nconst initShapes = async () => {\n    // wait for fonts to be ready\n    try {\n        await document.fonts.ready;\n    } catch (e) { }\n\n    let lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n    lekhCore.library().initNames(JSON.stringify(libnames));\n    lekhCore.shapeManager().initGroupsAndSetDisplaySettings();\n\n    shapesInitDone = true;\n}\n\nconst initEventHandlers = () => {\n    var uiCanvas = document.getElementById(\"uiCanvas\");\n    if (uiConfig.shouldAttachMouseEventHandler()) {\n        mouseInput.attachEvents(uiCanvas);\n        touchInput.attachEvents(uiCanvas);\n    }\n    if (uiConfig.shouldAttachKeyboardEventHandler()) {\n        keyboardInput.attachEvents(uiCanvas);\n    }  \n}\n\nconst initUI = () => {\n    if (uiInitDone || !shapesInitDone) {\n        return;\n    }\n    uiInitDone = true;\n    viewPort.initUI(true);\n    let url = new URL(window.location);\n    let offline = url.searchParams.get('offline');\n    if (offline != 'true') {\n        let hostEnv = window.Module.avabodh_lekh_app_HostEnv_instance();\n        hostEnv.blockView('Loading..');\n    }\n    startDoc();\n}\n\nconst fetchUserDetail = () => {\n    userInfo.event.addListener(() => {\n        if (isLoggedIn && !userInfo.isLoggedIn()) {\n          window.location.reload();\n          return;\n        }\n        \n        if (!isLoggedIn && userInfo.isLoggedIn() && docStarted) {\n          window.location.reload();\n          return;\n        }\n  \n        if (userInfo.isLoggedIn()) {\n            let lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n            lekhCore.backendFlow().setAccessToken(userInfo.token);\n        }\n        if (docStarted) {\n          return;\n        }\n  \n        isLoggedIn = userInfo.isLoggedIn();\n        let rtoken = getRefreshTokenFromStorage()\n        if (!isLoggedIn && rtoken) {\n            return;\n        }\n\n        userInfoFetched = true;\n        startDoc();\n    });\n  \n    userInfo.get();\n}\n\nconst startDoc = () => {\n    if (!uiInitDone || docStarted || !userInfoFetched) {\n        return;\n    }\n    docStarted = true;\n    \n    if (!uiConfig.isUsingLekhBackend()) {\n        integ.loadDoc();\n        return;\n    }\n\n    let lekhCore = window.Module.avabodh_lekh_app_LekhCore_instance();\n\n    let url = new URL(window.location);\n    let docid = url.searchParams.get('docid');\n    let offline = url.searchParams.get('offline');\n    //var np = url.searchParams.get('_new');\n    //var ref = url.searchParams.get('ref');\n    if (offline != 'true') {\n        lekhCore.coreIO().openRemoteDocById(docid);\n    }\n}\n\ninitializer.init = (dialogHandler, showShapeHelp, showAirGesture) => {\n    reactAppReady = true;\n    viewPort.showDialog = dialogHandler;\n    viewPort.showShapeHelp = showShapeHelp;\n    viewPort.showAirGesture = showAirGesture;\n    messaging.init();\n    appendScript(\"a1/lekhapp.js\");\n    initializer.initInternal();\n}\n\ninitializer.initInternal = () => {\n    if (initialInitDone || !reactAppReady || !runtimeInitialized) {\n        return;\n    }\n    initialInitDone = true;\n    fetchUserDetail();\n    platform.init();\n    viewPort.init();\n    initShapes().then(function() {\n        initEventHandlers();\n        initUI();\n    });\n}\n\nexport default initializer;\n","var canvasElement = null;\nvar cameraCanvas = null;\n\nvar canvasCtx = null;\nvar cameraCtx = null;\n\nvar canvasWidth = 1280;\nvar canvasHeight = 720;\n\nvar landmarkLines = [\n    [0, 1, 2, 3, 4],\n    [0, 5, 6, 7, 8],\n    [9, 10 , 11, 12],\n    [13, 14, 15, 16],\n    [0, 17, 18, 19, 20],\n    [5, 9, 13, 17]\n];\n\nexport function setCanvas(ce, cameraElement) {\n    canvasElement = ce;\n    canvasCtx = canvasElement.getContext('2d');\n\n    cameraCanvas = cameraElement;\n    cameraCtx = cameraCanvas.getContext('2d');\n}\n\nexport function mirrorPoint(pt) {\n    var npt = {x:pt.x, y:pt.y}\n    npt.x -= 1280;\n    npt.x *= -1;\n    npt.x += 100;\n    npt.y += 70;\n    return npt;\n}\n\nexport function drawActivePoint(pt) {\n    var npt = mkpt(pt);\n    npt.x -= 1280;\n    npt.x *= -1;\n\n    canvasCtx.save();\n    canvasCtx.strokeStyle = '#FF0000';\n    canvasCtx.beginPath();\n    canvasCtx.arc(npt.x, npt.y, 10, 0, 2 * Math.PI);\n    canvasCtx.stroke()\n    canvasCtx.restore();\n}\nexport function drawLandmarks(landmarks) {\n    var pts = [];\n    for (let item of landmarks) {\n        var npt = mkpt(item);\n        npt.x -= 1280;\n        npt.x *= -1;\n        pts.push(npt);\n    }\n\n    canvasCtx.save();\n    canvasCtx.strokeStyle = '#00FF00';\n    canvasCtx.lineWidth = 4;\n    for (let line of landmarkLines) {\n        canvasCtx.beginPath();\n        canvasCtx.moveTo(pts[line[0]].x, pts[line[0]].y);\n        for (let i = 1; i < line.length; i++) {\n            canvasCtx.lineTo(pts[line[i]].x, pts[line[i]].y)\n        }\n        canvasCtx.stroke();\n    }\n    canvasCtx.restore();\n\n    canvasCtx.save();\n    canvasCtx.lineWidth = 1;\n    canvasCtx.fillStyle = '#FF0000';\n    canvasCtx.strokeStyle = '#FF0000';\n    for (let pt of pts) {\n        canvasCtx.beginPath();\n        canvasCtx.arc(pt.x, pt.y, 5, 0, 2 * Math.PI);\n        canvasCtx.fill()\n    }\n    canvasCtx.restore()\n}\n\nexport function clearLandmarkCanvas() {\n    canvasCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n}\n\nexport function clearCameraCanvas() {\n    cameraCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n}\n\nfunction drawCenterText(text) {\n    var fz = 40;\n   \n    canvasCtx.save();\n    canvasCtx.fillStyle = \"#FFFFFFB0\"\n    canvasCtx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    canvasCtx.font = canvasCtx.font.replace(/\\d+px/, fz + \"px\");\n    canvasCtx.fillStyle = \"red\";\n    canvasCtx.strokeStyle = 'white';\n    canvasCtx.textAlign = \"center\";\n    canvasCtx.fillText(text, canvasWidth/2, canvasHeight/2); \n    canvasCtx.strokeText(text, canvasWidth/2, canvasHeight/2);\n    canvasCtx.restore();\n}\nexport function showInit() {\n    var text = \"Starting camera..\";\n    drawCenterText(text);\n}\n\nexport function showFlashMessage() {\n    var text = \"Make sure you are in front of the camera\";\n    drawCenterText(text);\n}\n\nexport function showCameraImage(image) {\n    if (image == null) {\n        return;\n    }\n    cameraCtx.save();\n    cameraCtx.translate(canvasWidth, 0);\n    cameraCtx.scale(-1, 1);\n    cameraCtx.drawImage(image, 0, 0, canvasWidth, canvasHeight);\n    cameraCtx.restore();\n}\n\nexport function mkpt(p) {\n    return {x: p.x * canvasWidth, y: p.y* canvasHeight, z: p.z * canvasWidth}\n}\n\nexport function pt2d(x, y) {\n    return {x: x, y:y , z: 0}\n}\n","import { pt2d } from \"./Frame\";\n\nconst RANGE_DELTA = 0.5;\n\nexport function dist(p1, p2) {\n    var dx, dy;\n    dx = (p2.x - p1.x);\n    dy = (p2.y - p1.y);\n    return Math.sqrt(((dx * dx) + (dy * dy)));\n}\n\nexport function dist2(p1, p2) {\n    var dx, dy, dz;\n    dx = (p2.x - p1.x);\n    dy = (p2.y - p1.y);\n    dz = (p2.z - p1.z);\n    return Math.sqrt((((dx * dx) + (dy * dy)) + (dz * dz)));\n}\n\nexport function inOrder(pts) {\n    if (pts.length < 3) {\n        return true;\n    }\n\n    function inord(p1, p2, p3) {\n        var eq = new LineEq(p1, p2);\n        eq = eq.perp(p2);\n        return eq.crosses(p1, p3);\n    }\n    for (let i = 0; i < pts.length - 2; i++) {\n        if (!inord(pts[i], pts[i + 1], pts[i + 2])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function turnAngle(pts) {\n    if (pts.length < 3) {\n        return 0;\n    }\n\n    function ta(p1, p2, p3) {\n        var dp = (p2.x - p1.x) * (p3.x - p2.x) + (p2.y - p1.y) * (p3.y - p2.y);\n        var d1 = dist(p1, p2);\n        var d2 = dist(p2, p3);\n        var D = d1 * d2;\n        // if D is very small\n        if (Math.abs(D) < 0.0001) {\n            return 0;\n        }\n        var theta = Math.acos(dp / D);\n        var cp = crossProduct(p1, p2, p3);\n        if (cp < 0) {\n            return -theta;\n        }\n        return theta;\n    }\n\n    var turn = 0;\n    for (let i = 0; i < pts.length - 2; i++) {\n        turn += ta(pts[i], pts[i+1], pts[i+2]);\n    }\n    return turn;\n}\n\nexport function crossProduct(p1, p2, p3) {\n    var v1x = p2.x - p1.x;\n    var v1y = p2.y - p1.y;\n\n    var v2x = p3.x - p2.x;\n    var v2y = p3.y - p2.y;\n\n    return v1x * v2y - v2x * v1y;\n}\n\nexport class LineEq {\n    constructor(p1, p2) {\n        this.A = (p2.y - p1.y);\n        this.B = (p1.x - p2.x);\n        this.C = ((p1.y * p2.x) - (p1.x * p2.y));\n    }\n\n    distFrom(pt) {\n        var dist = (Math.abs((((this.A * pt.x) + (this.B * pt.y)) + this.C)) / Math.sqrt(((this.A * this.A) + (this.B * this.B))));\n        return dist;\n    }\n\n    solve(eq2) {\n        var D = ((this.A * eq2.B) - (eq2.A * this.B));\n        var Dx = ((eq2.B * (- this.C)) - (this.B * (- eq2.C)));\n        var Dy = ((this.A * (- eq2.C)) - (eq2.A * (- this.C)));\n        if ((D === 0)) {\n            return [false, null];\n        }\n        return [true, pt2d(Dx / D, Dy / D)];\n    }\n\n    angleWithHz() {\n        return Math.atan2(this.A, (- this.B));\n    }\n\n    crosses(p1, p2) {\n        var d1 = (((this.A * p1.x) + (this.B * p1.y)) + this.C);\n        var d2 = (((this.A * p2.x) + (this.B * p2.y)) + this.C);\n        return ((d1 * d2) <= 0);\n    }\n\n    perp(p) {\n        var eq = new LineEq(pt2d(0, 0), pt2d(1, 1));\n        eq.A = (- this.B);\n        eq.B = this.A;\n        eq.C = (((- eq.A) * p.x) - (eq.B * p.y));\n        return eq;\n    }\n\n    pval(pt) {\n        return pt.x * this.A + pt.y*this.B + this.C;\n    }\n}\n\nexport class LineSegment {\n    constructor(p1, p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    length() {\n        return dist(this.p1, this.p2);\n    }\n\n    eq() {\n        return new LineEq(this.p1, this.p2);\n    }\n\n    contains(pt) {\n        var d1 = dist(pt, this.p1);\n        var d2 = dist(pt, this.p2);\n        var len = this.length();\n        var diff = Math.abs((len - (d1 + d2)));\n        return (diff < RANGE_DELTA);\n    }\n\n    distFrom(point) {\n        var _, d1, d2, eq, eq2, near;\n        eq = new LineEq(this.p1, this.p2);\n        eq2 = eq.perp(point);\n        [_, near] = eq.solve(eq2);\n        if (this.contains(near)) {\n            return eq.distFrom(point);\n        }\n        d1 = dist(this.p1, point);\n        d2 = dist(this.p2, point);\n        return Math.min(d1, d2);\n    }\n\n    intersect(seg) {\n        var at, eq1, eq2, got;\n        eq1 = new LineEq(this.p1, this.p2);\n        eq2 = new LineEq(seg.p1, seg.p2);\n        [got, at] = eq1.solve(eq2);\n        if ((((! got) || (! this.contains(at))) || (! seg.contains(at)))) {\n            return [false, pt2d(0, 0)];\n        }\n        return [true, at];\n    }\n\n    intersectEq(eq) {\n        var at, eq1, got;\n        eq1 = new LineEq(this.p1, this.p2);\n        [got, at] = eq1.solve(eq);\n        if (((! got) || (! this.contains(at)))) {\n            return [false, pt2d(0, 0)];\n        }\n        return [true, at];\n    }\n}\n\n","import {dist} from './Geometry';\nimport { mirrorPoint } from './Frame';\n\nexport class Dragger {\n    constructor() {\n        this.reset();\n        this.MOVE_DIST_REF = 10.0;\n        this.MOVE_DIST_SMALL_REF = 5.0;\n        this.MOVE_DIST_SMALL = 8.0;\n    }\n\n    reset() {\n        this.last = null;\n        this.lastRef = null;\n        this.moving = false;\n        this.points = [];\n    }\n\n    start() {\n        this.reset();\n    }\n\n    addPoint(pt) {\n        this.points.push(mirrorPoint(pt));\n    }\n\n    checkMove(pt, ptref) {\n        if (this.lastRef === null) {\n            this.lastRef = ptref;\n            this.last = pt;\n            return;\n        }\n\n        var d = dist(ptref, this.lastRef);\n        if (d > this.MOVE_DIST_REF) {\n            this.moving = true;\n            this.addPoint(this.last);\n            this.last = pt;\n            this.lastRef = ptref;\n        }\n    }\n\n    validMove(pt, ptref) {\n        var dx1 = (ptref.x - this.lastRef.x);\n        var dx2 = (pt.x - this.last.x);\n        var dy1 = (ptref.y - this.lastRef.y);\n        var dy2 = (pt.y - this.last.y);\n        var valid_x = (((dx1 <= 0) && (dx2 <= 0)) || ((dx1 >= 0) && (dx2 >= 0)));\n        var valid_y = (((dy1 <= 0) && (dy2 <= 0)) || ((dy1 >= 0) && (dy2 >= 0)));\n        return (valid_x && valid_y);\n    }\n\n    handleMove(pt, ptref) {\n        var d = dist(ptref, this.lastRef);\n        if ((d > this.MOVE_DIST_SMALL_REF)) {\n            d = dist(pt, this.last);\n            if (d > this.MOVE_DIST_SMALL) {\n                this.addPoint(pt);\n                this.last = pt;\n                this.lastRef = ptref;\n            }\n        }\n    }\n\n    track(pt, ptref) {\n        if (this.moving) {\n            this.handleMove(pt, ptref);\n        } else {\n            this.checkMove(pt, ptref);\n        }\n    }\n}\n\n","import {Dragger} from './Dragger';\n//import AppInput from '../common/AppInput'\n//import canvas from '../common/Canvas'\nimport { mirrorPoint } from './Frame';\n//import menuState from '../common/MenuState';\n//import { reloadSideBar } from '../components/SideBarMenu/SideBarMenu';\n\nvar lastDrawMode = null; ///menuState.menus.smartDraw;\n\n//var clickTimer = null;\n//const DOUBLE_CLICK_DURATION = 0;\n\nvar toolMenu = null;\nvar InputModeEnum = null;\nvar hostEnv = null;\nvar EventPointState = null;\n\n/*\nfunction handleClick(pt) {\n    var mpt = mirrorPoint(pt);\n    if (clickTimer != null) {\n        window.clearTimeout(clickTimer);\n        clickTimer = null;\n        AppInput.dbclick(mpt.x, mpt.y);\n    } else {\n        clickTimer = window.setTimeout(() => {\n            clickTimer = null;\n            AppInput.click(mpt.x, mpt.y);\n        }, DOUBLE_CLICK_DURATION);\n    }\n}\n\nfunction updateSidebarMenus() {\n    if (reloadSideBar) {\n        reloadSideBar();\n    }\n}\n*/\n\nexport function init() {\n    toolMenu = window.Module.avabodh_lekh_app_ToolMenu_instance();\n    hostEnv = window.Module.avabodh_lekh_app_HostEnv_instance();\n\n    InputModeEnum = window.Module.avabodh_lekh_app_ToolMenu_InputMode;\n    EventPointState = window.Module.avabodh_lekh_event_EventPointState;\n}\n\nconst eventPointFromTouch = (x, y, state, ts) => {\n    let mod = window.Module;\n    let pt = {\n      x: x,\n      y: y,\n      pointerId: -2,\n      state: state,\n      pressure: 0,\n      altitude:0,\n      azimuth: 0,\n      timestamp: ts,\n      pointerType: mod.avabodh_lekh_event_PointerType.Finger,\n      button: mod.avabodh_lekh_event_MouseButton.None,\n      flag: mod.avabodh_lekh_event_EventPoint_Flag.None\n    };\n    return pt;\n  }\n\nconst sendPoint = (x, y, state) => {\n    let mod = window.Module;\n    let pe = new mod.avabodh_lekh_event_PointerEvent();\n    let list = new mod.List_avabodh_lekh_event_EventPoint();\n    let ts = Date.now();\n    list.push_back(eventPointFromTouch(x, y, state, ts));\n    pe.setPoints(list);\n    hostEnv.onPointerEvent(pe);\n}\n\n\nfunction captureDrawMode() {\n    if (toolMenu.inputMode() == InputModeEnum.Draw || toolMenu.inputMode() == InputModeEnum.SmartDraw) {\n        lastDrawMode = toolMenu.inputMode();\n    }\n\n    /*\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            lastDrawMode = menuState.selected;\n    }*/\n}\n\nfunction setDrawMode() {\n    if (toolMenu.inputMode() == InputModeEnum.Draw || toolMenu.inputMode() == InputModeEnum.SmartDraw) {\n        lastDrawMode = toolMenu.inputMode();\n        return;\n    }\n\n    if (lastDrawMode != InputModeEnum.Draw && lastDrawMode != InputModeEnum.SmartDraw) {\n        lastDrawMode = InputModeEnum.SmartDraw;\n    }\n    toolMenu.setInputMode(lastDrawMode);\n\n    /*\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            return;\n    }\n    if (!(lastDrawMode == menuState.menus.draw ||\n        lastDrawMode == menuState.menus.smartDraw)) {\n            lastDrawMode = menuState.menus.smartDraw;\n    }\n    menuState.handleMenuClick(lastDrawMode);\n    menuState.popup = null;\n    updateSidebarMenus();*/\n}\n\nfunction setSelectionMode() {\n    if (toolMenu.inputMode() == InputModeEnum.Select) {\n        return;\n    }\n    captureDrawMode();\n    toolMenu.setInputMode(InputModeEnum.Select);\n\n    /*\n    if (menuState.selected == menuState.menus.selectionGroup &&\n        menuState.inputMode == menuState.modes.selection) {\n        return;\n    }\n\n    captureDrawMode();\n    menuState.handleMenuClick(menuState.menus.selection);\n    menuState.popup = null;\n    updateSidebarMenus();*/\n}\n\nfunction setEraseMode() {\n    if (toolMenu.inputMode() == InputModeEnum.Erase) {\n        return;\n    }\n    captureDrawMode();\n    toolMenu.setInputMode(InputModeEnum.Erase);\n\n    /*\n    if (menuState.selected == menuState.menus.erase) {\n        return;\n    }\n    \n    captureDrawMode();\n    menuState.handleMenuClick(menuState.menus.erase);\n    menuState.popup = null;\n    updateSidebarMenus();*/\n}\n\nfunction checkModeBeforeClick() {\n    /*\n    if (menuState.selected == menuState.menus.smartDraw ||\n        menuState.selected == menuState.menus.draw) {\n            return;\n    }*/\n    if (toolMenu.inputMode() == InputModeEnum.Draw || toolMenu.inputMode() == InputModeEnum.SmartDraw) {\n        return;\n    }\n    setSelectionMode();\n}\n\nexport class Gesture {\n    constructor(id) {\n        this.dragger = new Dragger();\n        this.id = id;\n        this.ptidx = 0;\n    }\n    \n    done() {\n    }\n\n    move(landmarks) {\n    }\n\n    setMode() {\n    }\n\n    sendPoints() {\n        var pts = this.dragger.points;\n        if (pts.length > this.ptidx) {\n            if (this.ptidx == 0) {\n                this.setMode();\n                sendPoint(pts[0].x, pts[0].y, EventPointState.Down);\n                //AppInput.drag(pts[0].x, pts[0].y, 0);\n                this.ptidx = 1;\n            }\n            while (this.ptidx < pts.length) {\n                sendPoint(pts[this.ptidx].x, pts[this.ptidx].y, EventPointState.Move);\n                //AppInput.drag(pts[this.ptidx].x, pts[this.ptidx].y, 1);\n                this.ptidx++;\n            }\n        }\n    }\n\n    checkClick() {\n        if (!this.dragger.moving && this.dragger.last != null)  {\n            checkModeBeforeClick();\n            //handleClick(this.dragger.last);\n            var mpt = mirrorPoint(this.dragger.last);\n            sendPoint(mpt.x, mpt.y, EventPointState.Down);\n            sendPoint(mpt.x, mpt.y, EventPointState.Up);\n            this.dragger.points = []\n        }\n    }\n\n    sendLastPoint() {\n        var pts = this.dragger.points;\n        if (pts.length > 0 && this.ptidx > 0) {\n            var lastpt = pts[pts.length - 1];\n            sendPoint(lastpt.x, lastpt.y, EventPointState.Up);\n            //AppInput.drag(lastpt.x, lastpt.y, 2);\n        }\n        this.ptidx = 0;\n        this.dragger.reset();\n    }\n\n    activePoint() {\n        return -1;\n    }\n}\n\nexport class Drag1Gesture extends Gesture {\n    constructor() {\n        super(\"drag1\");\n    }\n\n    setMode() {\n        setSelectionMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[4], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.checkClick();\n        this.sendLastPoint();\n    }\n\n    activePoint() {\n        return 4;\n    }\n}\n\nexport class Drag2Gesture extends Gesture {\n    constructor() {\n        super(\"drag2\");\n        \n    }\n\n    setMode() {\n        setDrawMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[8], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.checkClick();\n        this.sendLastPoint()\n    }\n\n    activePoint() {\n        return 8;\n    }\n}\n\nexport class ThumbGesture extends Gesture {\n    constructor() {\n        super(\"thumb\");\n        this.dragger.MOVE_DIST_REF = 1.0;\n    }\n\n    setMode() {\n        setEraseMode();\n    }\n\n    move(landmarks) {\n        this.dragger.track(landmarks[4], landmarks[0]);\n        this.sendPoints();\n    }\n\n    done() {\n        this.sendLastPoint();\n    }\n\n    activePoint() {\n        return 4;\n    }\n}\n\nexport class PinchGesture extends Gesture {\n    constructor() {\n        super(\"pinch\");\n        this.dragger.MOVE_DIST_REF = 1.0;\n        this.dragger.MOVE_DIST_SMALL = 1.0;\n        this.dragger.MOVE_DIST_SMALL_REF = 2.0;\n    }\n\n    move(landmarks) {\n        let mod = window.Module;\n\n        this.dragger.track(landmarks[0], landmarks[0]);\n        var pts = this.dragger.points;\n        while (this.ptidx < pts.length) {\n            if (this.ptidx > 0) {\n                let p2 = pts[this.ptidx];\n                let p1 = pts[this.ptidx - 1];\n                let dx = p2.x - p1.x;\n                let dy = p2.y - p1.y;\n                let se = new mod.avabodh_lekh_event_ScrollEvent();\n                se.setDelta(dx, dy);\n                se.setType(mod.avabodh_lekh_event_ScrollEvent_Type.Generic);\n                hostEnv.onScrollEvent(se);\n                //canvas.moveDelta(p2.x - p1.x, p2.y - p1.y)\n            }\n            this.ptidx++;\n        }\n    \n    }\n\n    done() {\n        this.ptidx = 0;\n        this.dragger.reset();\n    }\n}\n\n","import {LineEq, inOrder, turnAngle} from './Geometry'\n\nclass Features {\n    constructor() {\n        this.backSide = false;\n\n        this.indexBent = false;\n        this.middleBent = false;\n        this.ringBent = false;\n\n        this.indexInOrder = false;\n        this.middleInOrder = false;\n        this.ringInOrder = false;\n\n        this.indexCurved = false;\n        this.middleCurved = false;\n        this.ringCurved = false;\n    }\n    print() {\n        console.log(\"idb:\", this.indexBent, \", midb\", \n        this.middleBent, \", rb\", this.ringBent, ', back:', this.backSide,\n        ', idxs', this.indexInOrder)\n    }\n}\n\nfunction getSide(p1, p2, p3) {\n    var eq = new LineEq(p1, p2);\n    return eq.pval(p3) >= 0;\n}\n\nfunction isCurved(p1, p2, p3, p4) {\n    var ta = turnAngle([p1, p2, p3, p4]);\n    var deg = (ta * 180) / Math.PI;\n    return Math.abs(deg) >= 90;\n}\n\nexport function getFeatures(pts, hand) {\n    var features = new Features();\n    \n    features.indexBent = !inOrder([pts[0], pts[5], pts[8]]);\n    features.middleBent = !inOrder([pts[0], pts[9], pts[12]]);\n    features.ringBent = !inOrder([pts[0], pts[13], pts[16]]);\n\n    features.indexInOrder = inOrder([pts[5], pts[6], pts[7], pts[8]]);\n    //features.middleInOrder = inOrder([pts[9], pts[10], pts[11], pts[12]]);\n    //features.ringInOrder = inOrder([pts[13], pts[14], pts[15], pts[16]]);\n\n    features.indexCurved = isCurved(pts[5], pts[6], pts[7], pts[8]);\n    features.middleCurved = isCurved(pts[9], pts[10], pts[11], pts[12]);\n    features.ringCurved = isCurved(pts[13], pts[14], pts[15], pts[16]);\n                             \n    features.backSide = !getSide(pts[0], pts[5], pts[9]) || \n                        !getSide(pts[0], pts[5], pts[13]) ||\n                        !getSide(pts[0], pts[5], pts[17])\n    if (hand == 'left') {\n        features.backSide = !features.backSide;\n    }\n    return features;\n}","import {Drag1Gesture, Drag2Gesture, ThumbGesture, PinchGesture, Gesture} from './Gestures'\nimport { mkpt } from './Frame';\nimport { getFeatures } from './LandmarksFeatures';\nimport { dist, LineSegment, inOrder } from './Geometry';\n//import command from '../common/Command'\n\nvar drag1Active = false;\nvar drag2Active = false;\n\nconst undo = () => {\n    window.Module.avabodh_lekh_app_Command_instance().undo();\n}\n\nclass RepeatedGesture {\n    constructor(type, noop, gap, times, handler) {\n        this.type = type;\n        this.noop = noop;\n        this.gap = gap;\n        this.lastGesture = null;\n        this.lastAt = 0;\n        this.count = 0;\n        this.handler = handler;\n        this.times = times;\n    }\n\n    check(gesture) {\n        if (this.lastGesture == null) {\n            this.lastGesture = gesture;\n            return;\n        }\n\n        if (gesture == this.noop) {\n            if (this.lastGesture == this.type && !this.lastGesture.dragger.moving) {\n                var now = Date.now();\n                if (now - this.lastAt > this.gap) {\n                    this.count = 1;\n                } else {\n                    this.count++;\n                }\n                this.lastAt = now;\n                if (this.count == this.times) {\n                    this.count = 0;\n                    this.lastAt = 0;\n                    this.handler();\n                }\n            }\n\n        } else {\n            if (gesture != this.type) {\n                this.count = 0;\n                this.lastAt = 0;\n            }\n        }\n\n        this.lastGesture = gesture;\n    }\n}\n\nfunction isDrag2(pts, features) {\n    if (features.backSide) {\n        return false;\n    }\n\n    if (features.indexBent || !features.middleBent ||\n        !features.ringBent || !features.indexInOrder) {\n        return false;\n    }\n    //const THREASHOLD_1 = 0.32;\n    //const THREASHOLD_2 = 0.42;\n    //var d1 = dist(pts[0], pts[5]);\n\n    const THREASHOLD_1 = 1.1;\n    const THREASHOLD_2 = 1.2;\n    var d1 = dist(pts[5], pts[9]);\n\n    if (dist(pts[10], pts[11]) < 0.0001) {\n        return false;\n    }\n    var seg = new LineSegment(pts[10], pts[11]);\n    var d2 = seg.distFrom(pts[4]);\n\n    var target1 = d1 * THREASHOLD_1;\n    var target2 = d1 * THREASHOLD_2;\n\n    if (!drag2Active) {\n        if (d2 < target1) {\n            drag2Active = true;\n        }\n    } else {\n        if (d2 > target2) {\n            drag2Active = false;\n        }\n    }\n    return drag2Active;\n}\n\nfunction isDrag1(pts, features) {\n    if (features.middleBent || features.ringBent || features.backSide) {\n        return false;\n    }\n\n    const THRESHOLD_1 = 0.3;\n    const THRESHOLD_2 = 0.4;\n    const THREASHOLD_3 = 0.5;\n\n    var d1 = dist(pts[0], pts[5]);\n\n    var dPinch = d1 * THREASHOLD_3;\n    var pinchLike = true;\n    for (let id of [8, 12, 16, 20]) {\n        let tmp = dist(pts[id], pts[4]);\n        if (tmp > dPinch) {\n            pinchLike = false;\n            break;\n        }\n    }\n    if (pinchLike) {\n        return false;\n    }\n\n    var d2 = dist(pts[4], pts[8]);\n    var factor = 100.0;\n    if (d1 !== 0) {\n        factor = d2 / d1;\n    }\n    if (drag1Active) {\n        if (factor > THRESHOLD_2) {\n            drag1Active = false;\n        }\n    } else {\n        if (factor < THRESHOLD_1) {\n            drag1Active = true;\n        }\n    }\n    return drag1Active;\n}\n\nfunction isThumb(pts, features) {\n    const FACTOR = 0.3;\n    var d1 = dist(pts[0], pts[5]) * FACTOR;\n    var d2 = dist(pts[4], pts[8]);\n    if (d2 < d1) {\n        return false;\n    }\n\n    if (features.indexBent && features.middleBent && features.ringBent) {\n        if (features.indexCurved || features.middleCurved || features.ringCurved) {\n            return true;\n        }\n    }\n    if (pts[4].y < pts[5].y && pts[4].y < pts[9].y && pts[4].y < pts[13].y) {\n        if (inOrder([pts[5], pts[8], pts[6]]) &&\n            inOrder([pts[9], pts[12], pts[10]]) &&\n            inOrder([pts[13], pts[16], pts[14]])) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction isPinch(pts, features) {\n    const FACTOR = 0.4;\n    var d1 = dist(pts[0], pts[5]) * FACTOR;\n    for (let id of [8, 12, 16, 20]) {\n        let d2 = dist(pts[id], pts[4]);\n        if (d2 > d1) {\n            return false\n        } \n\n    }\n    return true;\n}\n\nexport class GestureRecognizer {\n    constructor(model) {\n        this.model = model;\n        this.drag1Gesture = new Drag1Gesture();\n        this.drag2Gesture = new Drag2Gesture();\n        this.thumbGesture = new ThumbGesture();\n        this.pinchGesture = new PinchGesture();\n        this.noopGesture = new Gesture(\"noop\");\n        this.undoGesture = new RepeatedGesture(this.drag2Gesture, this.noopGesture, 500, 3, undo);\n    }\n\n    handleRepeated(gesture) {\n        this.undoGesture.check(gesture);\n    }\n\n    get(landmarks, hand) {\n        var gesture = this.getGesture(landmarks, hand);\n        this.handleRepeated(gesture);\n        return gesture;\n    }\n\n    getGesture(landmarks, hand) {\n        var pts = [];\n        for (let item of landmarks) {\n            pts.push(mkpt(item))\n        }\n    \n        var features = getFeatures(pts, hand);\n        //features.print()\n\n        if (isPinch(pts, features)) {\n            return this.pinchGesture;\n        }\n\n        if (isThumb(pts, features)) {\n            return this.thumbGesture;\n        }\n\n        if (features.backSide) {\n            if (drag1Active) {\n                return this.drag1Gesture;\n            }\n            if (drag2Active) {\n                return this.drag2Gesture;\n            }\n\n            return this.noopGesture;\n        }\n\n        if (isDrag2(pts, features)) {\n            drag1Active = false;\n            return this.drag2Gesture;\n        }\n\n        if (isDrag1(pts, features)) {\n            drag2Active = false;\n            return this.drag1Gesture;\n        }\n\n        return this.noopGesture;\n    }\n}\n\n/*\n\n// older drag2 detector\n\nfunction isDrag2_1(pts, features) {\n    if (features.backSide) {\n        return false;\n    }\n\n    if (features.indexBent || !features.middleBent ||\n        !features.ringBent || !features.indexInOrder) {\n        return false;\n    }\n    const THREASHOLD_1 = 1.1\n    const THREASHOLD_2 = 0.9\n\n    function thumbMiddleOpposite(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        return eq.crosses(pts[2], pts[10]);\n    }\n    \n    function thumbCorsses(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        var seg = new LineSegment(pts[3], pts[4]);\n        var [it, _] = seg.intersectEq(eq);\n        return it;\n    }\n\n    function checkForCross(pts) {\n        var eq = new LineEq(pts[5], pts[6]);\n        var d1 = eq.distFrom(pts[4]);\n        var d2 = eq.distFrom(pts[10]);\n        if (d1 > (d2 / 4)) {\n            return true;\n        }\n        return false;\n    }\n\n    var opp = thumbMiddleOpposite(pts);\n    var crosses = thumbCorsses(pts);\n    if (opp && crosses) {\n        if (checkForCross(pts)) {\n            drag2Active = true;\n            return true;\n        }\n    }\n\n    var d1 = dist(pts[4], pts[10]);\n    var d2 = dist(pts[10], pts[11]);\n    var factor = 100.0;\n    if (d1 !== 0) {\n        factor = (d2 / d1);\n    }\n\n    if (drag2Active) {\n        if (factor < THREASHOLD_2) {\n            drag2Active = false;\n        }\n    } else {\n        if (factor > THREASHOLD_1) {\n            drag2Active = true;\n        }\n    }\n    return drag2Active;\n}\n\n// Neural network based gesture identification\n\nvar gesturesNames = {\n    0: \"drag1\",\n    1: \"drag2\",\n    2: \"thumb\",\n    3: \"pinch\",\n    4: \"thumb_index\",\n    5: \"open\",\n    6: \"other\"\n};\n\n    predict(landmarks) {\n        var arr = [];\n        for (let item of landmarks) {\n            arr.push(item.x);\n            arr.push(item.y);\n            arr.push(item.z);\n        }\n        if (arr.length != 63) {\n            return 6;\n        }\n        var inp = window.tf.tensor2d([arr]);\n        var out = this.model.predict(inp);\n        var idx = out.argMax(-1).arraySync()[0]\n        return idx\n    }\n\n    get2(landmarks) {\n        var ges, idx, pts;\n        idx = this.predict(landmarks);\n        pts = [];\n        for (let item of landmarks) {\n            pts.push(mkpt(item))\n        }\n    \n        var features = getFeatures(pts);\n        features.print();\n\n        ges = this.checkDrag2(idx, pts);\n        if (ges !== null) {\n            deactivateDrag1();\n            return ges;\n        }\n        ges = this.checkDrag1(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        ges = this.checkThumb(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        ges = this.checkPinch(idx, pts);\n        if (ges !== null) {\n            return ges;\n        }\n        return this.noopGesture;\n    }\n\n    checkPinch(idx, pts) {\n        if (idx === 3) {\n            return this.pinchGesture;\n        }\n        return null;\n    }\n\n    checkThumb(idx, pts) {\n        if (idx === 2) {\n            return this.thumbGesture;\n        }\n        return null;\n    }\n\n    checkDrag1(idx, pts) {\n        if (!(idx === 0 || idx === 4) || idx === 5) {\n            deactivateDrag1();\n            return null;\n        }\n\n        if (checkDrag1(pts)) {\n            return this.drag1Gesture;\n        }\n        return null;\n    }\n\n    checkDrag2(idx, pts) {\n        if (!(idx === 1 || idx === 2 || idx === 4)) {\n            deactivateDrag2();\n            return null;\n        }\n\n        if (checkDrag2(pts)) {\n            return this.drag2Gesture;\n        }\n        return null;\n    }\n\n// ------------ Drag1Recognizer.js -----------\nimport {dist} from './Geometry';\n\nvar active = false;\n\nconst THRESHOLD_1 = 0.3;\nconst THRESHOLD_2 = 0.4;\n\nexport function deactivateDrag1() {\n    active = false;\n}\n\nexport function checkDrag1(pts) {\n    var d1, d2, factor;\n    d1 = dist(pts[0], pts[5]);\n    d2 = dist(pts[4], pts[8]);\n    factor = 100.0;\n    if (d1 !== 0) {\n        factor = d2 / d1;\n    }\n    if (active) {\n        if (factor > THRESHOLD_2) {\n            active = false;\n        }\n    } else {\n        if (factor < THRESHOLD_1) {\n            active = true;\n        }\n    }\n    return active;\n}\n\n// ------------ Drag2Recognizer.js -----------\nimport {LineEq, LineSegment, dist} from './Geometry';\n\nvar active = false;\nconst THRESHOLD_1 = 1.1;\nconst THRESHOLD_2 = 0.9;\n\nfunction bentForward(pts) {\n    var eq, eq2;\n    eq = new LineEq(pts[0], pts[9]);\n    eq2 = eq.perp(pts[9]);\n    return (! eq2.crosses(pts[0], pts[10]));\n}\n\nfunction thumbMiddleOpposite(pts) {\n    var eq;\n    eq = new LineEq(pts[5], pts[6]);\n    return eq.crosses(pts[2], pts[10]);\n}\n\nfunction thumbCorsses(pts) {\n    var _, eq, it, seg;\n    eq = new LineEq(pts[5], pts[6]);\n    seg = new LineSegment(pts[3], pts[4]);\n    [it, _] = seg.intersectEq(eq);\n    return it;\n}\n\nexport function deactivateDrag2() {\n    active = false;\n}\n\nfunction checkForCross(pts) {\n    var d1, d2, eq;\n    eq = new LineEq(pts[5], pts[6]);\n    d1 = eq.distFrom(pts[4]);\n    d2 = eq.distFrom(pts[10]);\n    if ((d1 > (d2 / 4))) {\n        return true;\n    }\n    return false;\n}\n\nexport function checkDrag2(pts) {\n    var bent, crosses, d1, d2, factor, opp;\n    bent = bentForward(pts);\n    opp = thumbMiddleOpposite(pts);\n    crosses = thumbCorsses(pts);\n    if ((((! bent) && opp) && crosses)) {\n        if (checkForCross(pts)) {\n            active = true;\n            return active;\n        }\n    }\n    d1 = dist(pts[4], pts[10]);\n    d2 = dist(pts[10], pts[11]);\n    factor = 100.0;\n    if ((d1 !== 0)) {\n        factor = (d2 / d1);\n    }\n    if (active) {\n        if (factor < THRESHOLD_2) {\n            active = false;\n        }\n    } else {\n        if (factor > THRESHOLD_1) {\n            active = true;\n        }\n    }\n    return active;\n}\n\n\n\n*/","import {GestureRecognizer} from './GestureRecognizer';\n\nimport { \n    mkpt, \n    setCanvas,\n    drawLandmarks,\n    showInit,\n    showCameraImage,\n    clearCameraCanvas,\n    clearLandmarkCanvas,\n    showFlashMessage,\n    drawActivePoint\n    } from './Frame';\n\nvar PENDING_THRESHOLD = 30;\n\nvar gestureRecognizer = null;\nvar prevGesture = null;\nvar timer = null;\nvar pendingGesture = null;\n\nvar initStartTime = null;\nvar flashDuration = -1;\n\nvar showingVideo = false;\nvar flashing = true;\n\nfunction handleLast(curGesture) {\n    if (pendingGesture != null && curGesture.id != 'noop') {\n        if (timer != null) {\n            window.clearTimeout(timer);\n            timer = null;\n        }\n        if (pendingGesture.id != curGesture.id) {\n            pendingGesture.done();\n        }\n        pendingGesture = null;\n    }\n\n    if (prevGesture != null && prevGesture.id != curGesture.id) {\n        if ((prevGesture.id == 'drag1' || prevGesture.id == 'drag2') &&\n            prevGesture.dragger.moving &&\n            curGesture.id == 'noop') {\n            pendingGesture = prevGesture;\n            timer = window.setTimeout(()=> {\n                if (pendingGesture != null) {\n                    pendingGesture.done()\n                    pendingGesture = null;\n                    timer = null;\n                }\n            }, PENDING_THRESHOLD);\n        } else {\n            prevGesture.done();\n        }\n    }\n\n    prevGesture = curGesture;\n}\n\nfunction handle(landmarks, hand) {\n    //if ((hand.toLowerCase() === \"right\")) {\n    //    return;\n    //}\n    drawLandmarks(landmarks);\n\n    var pts = []\n    for (let item of landmarks) {\n        pts.push(mkpt(item))\n    }\n\n    var curGesture = gestureRecognizer.get(landmarks, hand);\n    handleLast(curGesture);\n    curGesture.move(pts);\n    var activeptIdx = curGesture.activePoint();\n    if (activeptIdx >= 0) {\n        drawActivePoint(landmarks[activeptIdx]);\n    }\n}\n\nfunction showVideo(results) {\n    if (!showingVideo && !flashing) {\n        return;\n    }\n    showCameraImage(results.image)\n\n    if (flashing) {\n        var now = Date.now()\n        if (now - initStartTime > flashDuration) {\n            flashing = false;\n            clearCameraCanvas();\n        } else {\n            showFlashMessage();\n        }\n    }\n}\n\nexport var handleLandmarkResults = (results) => {\n    clearLandmarkCanvas();\n    showVideo(results);\n    \n    if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {\n        var lms = {left: [], right: []}\n        //var used = new Set();\n        for (let item of results.multiHandedness) {\n            /*\n            let idx = item.index;\n            if (results.multiHandLandmarks.length > idx && !used.has(idx)) {\n                used.add(idx);\n                let hand = item.label.toLowerCase();\n                if (hand == \"left\") {\n                    lms.left.push(results.multiHandLandmarks[idx]);\n                } else if (hand == \"right\"){\n                    lms.right.push(results.multiHandLandmarks[idx]);\n                }\n            }*/\n            // Right now we have enabled only one hand\n            if (results.multiHandLandmarks.length > 0) {\n                let hand = item.label.toLowerCase();\n                // Left and right are revered becuase we are seeing front camera\n                if (hand == \"left\") {\n                    lms.right.push(results.multiHandLandmarks[0]);\n                } else if (hand == \"right\"){\n                    lms.left.push(results.multiHandLandmarks[0]);\n                }\n                break;\n            }\n\n        }\n        for (let item of lms.left) {\n            handle(item, 'left')\n        }\n        for (let item of lms.right) {\n            handle(item, 'right')\n        }\n    }\n}\n\nexport function initLandmarkHandler(canvasElement, cameraCanvas) {\n    initStartTime = Date.now();\n    if (gestureRecognizer == null) {\n        gestureRecognizer = new GestureRecognizer(null);\n    }\n    if (flashing) {\n        flashDuration = 7 * 1000;\n    } else {\n        flashDuration = 0;\n    }\n    showingVideo = false;\n\n    setCanvas(canvasElement, cameraCanvas);\n    showInit();\n}\n\nexport function showCameraVideo(val) {\n    clearCameraCanvas();\n    showingVideo = val;\n}\n\nexport default handleLandmarkResults;\n\n\n//var model = null;\n//var loadingModel = false;\n//\n//function loadModel() {\n//    window.tf.loadGraphModel('/mlmodels/v1/model.json').then((m) =>{\n//        model = m;\n//        gestureRecognizer = new GestureRecognizer(m);\n//    }).catch((e) => {\n//        loadingModel = false;\n//        console.log(e);\n//    });\n//}","import \"./Gestures.css\"\n\nimport {handleLandmarkResults, initLandmarkHandler, showCameraVideo} from \"./LandmarkHandler\";\nimport React, { useRef, useEffect } from 'react'\nimport {FaAngleDown, FaVideo} from 'react-icons/fa'\nimport { AiOutlineClose } from \"react-icons/ai\"\nimport { Button} from '@material-ui/core';\nimport {init as initGestures } from './Gestures'\n\nvar devices = [];\nconst getDevices = () => {\n    devices = [];\n    navigator.mediaDevices.enumerateDevices()\n    .then((deviceInfos) => {\n        for (const deviceInfo of deviceInfos) {\n            if (deviceInfo.kind === 'videoinput') {\n              var dev = {name: deviceInfo.label, id: deviceInfo.deviceId}\n              devices.push(dev);\n            }\n          }\n    })\n}\n\nconst GesturePanel = (props) => {\n    var [showList, setShowList] = React.useState(false);\n    var [showCamera, setShowCamera] = React.useState(false);\n    var [initialized, setInitialized] = React.useState(false)\n    \n    useEffect(() => {\n        initGestures();\n        getDevices();\n        startCamera();\n    }, []);\n\n    function startMediapipe(devId) {\n        console.log(\"Initializing mediapipe\");\n        window.frames[0].startCamera(devId, (results) => {\n            handleLandmarkResults(results)\n        });\n    }\n    function startCamera() {\n        var outCanvas = document.getElementById('gestureCanvas');\n        var cameraCanvas = document.getElementById('cameraCanvas');\n        const iframe = document.getElementById('mpframe');\n        if (!iframe || !outCanvas || !cameraCanvas) {\n            window.setTimeout(() => {\n                startCamera();\n            }, 10)\n        }\n        initLandmarkHandler(outCanvas, cameraCanvas);\n        iframe.addEventListener('load', () => {\n            setInitialized(true);\n            startMediapipe(null);\n        }, true);\n    }\n\n    const onListChange = (event) => {\n        console.log(event.target.value)\n        setShowList(false);\n        startMediapipe(event.target.value)\n    }\n\n    const onShowCamera = (event) => {\n        if (initialized) {\n            showCameraVideo(!showCamera)\n            setShowCamera(!showCamera);\n        }\n    }\n\n    const onShowList = (event) => {\n        if (initialized && devices.length > 0) {\n            setShowList(!showList);\n        }\n    }\n\n    return <>\n        <div className=\"gesture_panel\">\n            <canvas id=\"gestureCanvas\" width=\"1280px\" height=\"720px\"></canvas>\n            <iframe src=\"/mediapipe/mp.html\" title=\"A\" id=\"mpframe\" width=\"0\" height=\"0\"></iframe> \n        </div>\n        <Button className=\"listCameraButton\" onClick={onShowList}><FaAngleDown /></Button>\n        <Button className=\"showCameraVideoButton\" onClick={onShowCamera}><FaVideo /></Button>\n        <Button className=\"closeCameraVideoButton\" onClick={()=>props.showAirGesture(false)}><AiOutlineClose /></Button>\n        {showList &&\n        <select name='option' className=\"cameraDropDown\" size=\"4\" onChange={onListChange}>\n            {devices.map((dev) => {\n                return <option key={dev.id} value={dev.id}>{dev.name}</option>\n            })}\n        </select>\n        }\n    </>\n}\n\nexport default GesturePanel;\n\n\n/*\nfunction includeScript() {\n    var lib = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js';\n    var loaded = document.querySelectorAll('[src=\"' + lib + '\"]').length > 0;\n    if (!loaded) {\n        const script = document.createElement(\"script\");\n        script.src = lib;\n        script.async = false;\n        script.crossorigin = 'anonymous';\n        document.body.appendChild(script);\n    }\n}\n*/","import './App.css';\n\nimport Content from './components/ViewPort/Content';\nimport React from \"react\";\nimport initializer from './common/Initializer'\nimport GesturePanel from './gestures/GesturePanel';\n\nclass AppComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dialog: null,\n      shapeHelp: null,\n      airGestureShowing: false\n    };\n    this.showDialog = this.showDialog.bind(this);\n    this.showShapeHelp = this.showShapeHelp.bind(this);\n    this.showAirGesture = this.showAirGesture.bind(this);\n  }\n\n  showShapeHelp(help) {\n    this.setState({shapeHelp:help});\n  }\n\n  showDialog(dialog) {\n    this.setState({dialog:dialog});\n  }\n\n  showAirGesture(flag) {\n    this.setState({airGestureShowing:flag});\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <Content cameraActive={this.state.airGestureShowing} />\n        {this.state.dialog}\n        {this.state.shapeHelp}\n        {this.state.airGestureShowing && <GesturePanel showAirGesture={this.showAirGesture}></GesturePanel>}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.showDialog, this.showShapeHelp, this.showAirGesture);\n  }\n}\n\nexport default AppComponent;\n","import React from 'react';\n\nconst FooterStyle = {\n\n    footer: {\n        justifyContent: 'center',\n        display: 'flex',\n      },\n      backClass:{\n        border: '1px solid',\n        backgroundColor: '#fff',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        margin: '13px 10px',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      countClass:{\n        border: '1px solid',\n        margin: '13px 10px',\n        width: '173px',\n        borderColor: '#fff',\n        borderRadius: '4px',\n        backgroundColor: '#fff',\n        boxShadow:'0 0 0 50px transparent',\n        filter: 'drop-shadow(0 1px 2px rgba(0, 0, 0, .3))',\n        display:'flex',\n        '&:hover':{\n          cursor:'pointer'\n      }\n      },\n      valueClass:{\n        margin: '15px 0px',\n        width:'45px',\n        textAlign: 'center',\n      },\n      iconClass:{\n        fontSize:'22px',\n        padding: '8px 8px'\n      },\n      countBtn:{\n        minWidth:'64px',\n        padding: 0,\n      }\n}\n\nexport default FooterStyle;","var speechCommand = { }\n\nconst cmdMap = {\n    \"start a flowchart\": [2, 20],\n    \"start flowchart\": [2, 20],\n    \"start\": [2, 20],\n    \"end\": [2, 20],\n    \"done\": [2, 20],\n    \"end the flowchart\": [2, 20],\n    \"add input\": [2, 4],\n    \"input\": [2, 4],\n    \"add decision\": [2, 1],\n    \"decision\": [2, 1],\n    \"add process\": [2, 0],\n    \"process\": [2, 0],\n}\n\nconst handleText = (text, addShape) => {\n    console.log(text);\n    var shape = cmdMap[text];\n    if (shape) {\n        addShape(shape[0], shape[1]);\n    }\n}\n\nspeechCommand.start = (addShape) => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition    \n    var recognition = new SpeechRecognition();\n    //var grammar = '#JSGF V1.0; grammar colors; public <color> = aqua | azure | beige | bisque | black | blue | brown | chocolate | coral | crimson | cyan | fuchsia | ghostwhite | gold | goldenrod | gray | green | indigo | ivory | khaki | lavender | lime | linen | magenta | maroon | moccasin | navy | olive | orange | orchid | peru | pink | plum | purple | red | salmon | sienna | silver | snow | tan | teal | thistle | tomato | turquoise | violet | white | yellow ;'\n    //var speechRecognitionList = new SpeechGrammarList();\n    //speechRecognitionList.addFromString(grammar, 1);\n    //recognition.grammars = speechRecognitionList;\n    recognition.continuous = false;\n    recognition.lang = 'en-US';\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n\n    recognition.onresult = function(event) {\n        var text = event.results[0][0].transcript;\n        handleText(text, addShape);\n    }\n\n    recognition.start();\n    console.log('Ready to receive speech command.');\n}\n\nexport default speechCommand;","import canvas from './Canvas'\nimport mouseInput from './MouseInput'\nimport menuState from './MenuState'\nimport speechCommand from '../experimental/SpeechCommand';\n\nvar command = {inputModeChanged: false };\n\nfunction getShapeAddLocation() {\n    var loc = mouseInput.pointerLocation();\n    var at = null;\n    if (loc.x == null || loc.y == null || !canvas.isVisible(loc.x, loc.y, 40)) {\n        at = canvas.getMidPoint();\n    } else {\n        at = loc;\n    }\n    at = canvas.mapPtUIScroll(at);\n    at = {x: canvas.maprx(at.x), y: canvas.mapry(at.y)};\n    return at;\n}\n\ncommand.del = () => {\n    window.Module.del();\n}\n\ncommand.copy = () => {\n    window.Module.copy();\n}\n\ncommand.cut = () => {\n    window.Module.cut();\n}\n\ncommand.paste = () => {\n    window.Module.paste();\n}\n\ncommand.pasteAt = (at) => {\n    window.Module.pasteAt(at);\n}\n\ncommand.selectAll = () => {\n    command.inputModeChanged = true;\n    menuState.handleMenuClick(menuState.menus.selection);\n    window.Module.selectAll();\n}\n\ncommand.addBox = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 2, at.x, at.y);\n}\n\ncommand.addCircle = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(0, 0, at.x, at.y);\n}\n\ncommand.addUser = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 8, at.x, at.y);\n}\n\ncommand.addDb = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(2, 6, at.x, at.y);\n}\n\ncommand.addCloud = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 9, at.x, at.y);\n}\n\ncommand.addNote = (at) => {\n    if (typeof at == 'undefined') {\n        at = getShapeAddLocation();\n    }\n    window.Module.libraryStore().addObjectToCanvas(5, 7, at.x, at.y);\n}\n\ncommand.escape = () => {\n    window.Module.handleEscapeKey();\n}\n\ncommand.undo = () => {\n    window.Module.inputReceiver().undo();\n}\n\ncommand.redo = () => {\n    window.Module.inputReceiver().redo();\n}\n\ncommand.moveToFront = () => {\n    window.Module.moveObjectToFront();\n}\n\ncommand.moveToBack = () => {\n    window.Module.moveObjectToBack();\n}\n\ncommand.startSpeech = () => {\n    speechCommand.start((r, c) => {\n        var at = getShapeAddLocation();\n        window.Module.libraryStore().addObjectToCanvas(r, c, at.x, at.y);\n        canvas.draw();\n    });\n}\n\nexport default command;\n","import canvas from \"../../common/Canvas\";\n\nvar pageManager = {\n    curIdx: 0,\n    pages: [\n        {name: \"page 1\", id: \"page1\"},\n        {name: \"page 2 sdf  fd fds fsd fds fdsfsf sdf sdfd fsdfsdfsdf sdf\", id: \"page2\"},\n        {name: \"page 3\", id: \"page3\"},\n        {name: \"page 4\", id: \"page4\"},\n        {name: \"page 5\", id: \"page5\"},\n        {name: \"page 6\", id: \"page6\"},\n        {name: \"page 7\", id: \"page7\"},\n        {name: \"page 8\", id: \"page8\"},\n        {name: \"page 9\", id: \"page9\"},\n        {name: \"page 10\", id: \"page10\"},\n        {name: \"page 11\", id: \"page11\"},\n        {name: \"page 12\", id: \"page12\"},\n        {name: \"page 13\", id: \"page13\"},\n        {name: \"page 14\", id: \"page14\"},\n        {name: \"page 15\", id: \"page15\"},\n        {name: \"page 16\", id: \"page16\"},\n        {name: \"page 17\", id: \"page17\"},\n        {name: \"page 18\", id: \"page18\"},\n        {name: \"page 19\", id: \"page19\"},\n        {name: \"page 20\", id: \"page20\"},\n        {name: \"page 21\", id: \"page21\"},\n        {name: \"page 22\", id: \"page22\"},\n        {name: \"page 23\", id: \"page23\"},\n    ]\n}\n\nvar editor = null;\npageManager.load = () => {\n    if (editor == null) {\n        editor = window.Module.startPageEditing();\n    }\n}\n\npageManager.getPages = () => {\n    var numPages = editor.numPages();\n    var pages = [];\n    for (let i = 0; i < numPages; i++) {\n        var page = {name: editor.getPageName(i), id: editor.getPageId(i)};\n        pages.push(page);\n    }\n    return pages;\n}\n\npageManager.changeOrder = (oldIdx, newIdx) => {\n    if (oldIdx == newIdx) {\n        return;\n    }\n    editor.reorder(oldIdx, newIdx);\n    canvas.draw();\n}\n\npageManager.add = (name) => {\n    if (!name) {\n        name = \"Page \" + (editor.numPages() + 1)\n    }\n    editor.addPage(name);\n    canvas.draw();\n}\n\npageManager.remove = (idx) => {\n    editor.deletePage(idx);\n    canvas.draw();\n}\n\npageManager.rename = (idx, newName) => {\n    editor.setPageName(idx, newName);\n    canvas.draw();\n}\n\npageManager.duplicate = (idx) => {\n    editor.duplicatePage(idx);\n    canvas.draw();\n}\n\npageManager.current = () => {\n    return editor.activePageIndex();\n}\n\npageManager.setCurrent = (idx) => {\n    editor.select(idx);\n    canvas.draw();\n}\n\nexport default pageManager;","import './PageList.css'\n\nimport React, { useState } from \"react\"\nimport Popper from '@material-ui/core/Popper';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener'\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { AiOutlinePlus } from \"react-icons/ai\";\nimport { MdDragHandle } from \"react-icons/md\";\nimport { HiOutlineDotsHorizontal } from \"react-icons/hi\";\nimport pageManager from './PageManager';\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { Dialog } from \"@material-ui/core\";\nimport InputField from \"../InputField/InputField\";\nimport keyboardInput from '../../common/KeyboardInput';\n\nvar showingDialogForKeyboardInput = false;\n\nconst RenameModal = ({close, orig, rename}) => {\n    const [newName, setName] = useState(orig);\n  \n    React.useEffect(() => {\n        showingDialogForKeyboardInput = keyboardInput.showingDialog;\n        keyboardInput.showingDialog = true;\n        return () => {\n            keyboardInput.showingDialog = showingDialogForKeyboardInput;\n        }\n    }, [])\n\n    const handleSubmit = e => {\n      e.preventDefault();\n    };\n  \n    return (\n      <Dialog open={true} className=\"px-5\">\n        <form\n          action=\"\"\n          className=\"py-2 w-64 lg:w-96 bg-white \"\n          onSubmit={handleSubmit}\n        >\n          <div className=\"flex justify-between items-center my-2 px-2\">\n            <div />\n            <h4 className=\"text-center m-0\">Rename</h4>\n  \n            <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n          </div>\n  \n          <hr className=\"-mb-5\" />\n  \n          <div className=\"px-2\">\n            <InputField\n              // label=\"Rename\"\n              placeholder=\"Name\"\n              handleChange={e => setName(e.target.value)}\n              value={newName}\n            />\n            <div className=\"text-right\">\n                <button\n                  type=\"submit\"\n                  className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n                  onClick={()=>rename(newName)}\n                >\n                  Rename\n                </button>\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n};\n\nconst ConfirmModal = ({cancel, accept}) => {\n    return (<Dialog open={true}>\n    <div className=\"w-64 lg:w-72 py-8 px-5 space-y-10\">\n      <p className=\"font-sans text-center text-lg\">\n        Are you sure you want to delete?\n      </p>\n\n      <div className=\"grid grid-cols-2 gap-5\">\n        <button\n          className=\"button border border-lkhRed text-center py-3 bg-white \"\n          onClick={() => cancel()}\n        >\n          Cancel\n        </button>\n\n        <button\n          onClick={() => accept()}\n          className=\"button bg-lkhRed text-white border-0\"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </Dialog>)\n}\n\n\nconst PageContextMenu = (props) => {\n    const [showRenameDialog, setShowRenameDialog] = useState(false);\n    const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\n    var page = pageManager.getPages()[props.idx];\n\n    const onRename = (newName) => {\n        setShowRenameDialog(false);\n        pageManager.rename(props.idx, newName)\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    const onDelete = () => {\n        setShowDeleteDialog(false);\n        pageManager.remove(props.idx);\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    const onDpulicte = () => {\n        pageManager.duplicate(props.idx);\n        window.setTimeout(()=> {\n            props.close();\n        }, 100);\n    }\n\n    return (\n        <>\n        {showRenameDialog && <RenameModal orig={page.name} rename={onRename} close={()=>setShowRenameDialog(false)}></RenameModal>}\n        {showDeleteDialog && <ConfirmModal accept={onDelete} cancel={()=>setShowDeleteDialog(false)}></ConfirmModal>}\n        <div className=\"absolute top-0 right-3 py-3 px-7 shadow-lg bg-white space-y-4 text-left z-20\">\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={onDpulicte}>\n            Duplicate\n            </p>\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={() => setShowRenameDialog(true)}>\n            Rename\n            </p>\n            <p className=\"text-sm cursor-pointer m-0 mb-2\" onClick={() => setShowDeleteDialog(true)}>\n            Delete\n            </p>\n        </div>\n        </>\n    )\n}\n\nconst useRefState = initialValue => {\n    const [state, setState] = React.useState(initialValue)\n    const stateRef = React.useRef(state)\n    React.useEffect(\n        () => { stateRef.current = state },\n        [state]\n    )\n    return [state, stateRef, setState];\n}\n\nconst PageList = (props) => {\n    const [counter, counterRef, setCounter] = useRefState(0);\n    const [anchorEl, setAnchorEl] = useState(null);\n    const [showMenu, setShowMenu] = useState(false);\n    const [menuIdx, setMenuIdx] = useState(0);\n\n    pageManager.load();\n\n    React.useEffect(() => {\n        window.setTimeout(()=> {\n            var idx = pageManager.current();\n            var item = pageManager.getPages()[idx];\n            var row = document.getElementById('pages-list-row-' + item.id);\n            if (row) {\n                row.scrollIntoView({block: \"nearest\"});\n            }\n        }, 100);\n        window.wsmanager.event.addListener(onWebsocketUpdate);\n        return () => {\n            window.wsmanager.event.removeListener(onWebsocketUpdate);\n        }\n    }, [])\n\n    const onWebsocketUpdate = (data) => {\n        try {\n            var msg = JSON.parse(data);\n            if (msg.updates.type == 'addpages' || msg.updates.type == 'delpages' || msg.updates.type == 'changepageattr') {\n                reload();\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    const reload = function () {\n        setCounter(counterRef.current + 1);\n    }\n\n    const addPage = () => {\n        pageManager.add();\n        window.setTimeout(()=> {\n            var listDiv = document.getElementById(\"page-list-container\");\n            listDiv.scrollTop = listDiv.scrollHeight;\n        }, 200);\n        reload();\n    }\n\n    const setCurrentPage = (idx) => {\n        if (showMenu) {\n            return;\n        }\n        pageManager.setCurrent(idx);\n        window.layoutCanvas()\n        reload();\n    }\n\n    const onDragStart = (evt) => {\n        setShowMenu(false);\n    }\n\n    const onDragEnd = (evt) => {\n        if (!evt.source || !evt.destination) {\n            return;\n        }\n        pageManager.changeOrder(evt.source.index, evt.destination.index);\n        reload();\n    }\n\n    const getRenderItem = (items) => (provided, snapshot, rubric) => {\n        var idx = rubric.source.index;\n        var item = items[idx];\n        var className = \"pages-list-row\";\n        if (idx == pageManager.current()) {\n            className += \" bg-gray-200\"\n        }\n        var rowId = 'pages-list-row-' + item.id;\n        return (\n        <div ref={provided.innerRef}\n            {...provided.draggableProps}\n            id={rowId}\n            className={className} onClick={()=>{setCurrentPage(idx)}}>\n            <div className=\"flex w-full\">\n                <div {...provided.dragHandleProps}><MdDragHandle  className=\"text-xl ml-2\"/></div>\n                <div className=\"pages-list-page-name ml-2\">{item.name}</div>\n                <HiOutlineDotsHorizontal className=\"text-xl cursor-pointer pages-list-page-option mr-2\" onClick={(e)=>onPageOption(e, idx)} />\n            </div>\n        </div>\n        );\n    }\n    const renderItem = getRenderItem(pageManager.getPages());\n\n    const onPageOption = (e, idx) => {\n        setAnchorEl(e.currentTarget);\n        setMenuIdx(idx);\n        setShowMenu(true)\n    }\n\n    const onClickAway = () => {\n        if (!showMenu) {\n            props.close()\n        }\n    }\n\n    const closeContextMenu = () => {\n        setShowMenu(false);\n    }\n\n    var position = props.pos;\n    if (!position) {\n        position = {style: { position: 'fixed', top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }}\n    }\n\n    return (\n    <>\n    {showMenu && <ClickAwayListener onClickAway={()=>setShowMenu(false)}>\n        <Popper open={true} placement={'right'} anchorEl={anchorEl}>\n            <PageContextMenu close={closeContextMenu} idx={menuIdx}></PageContextMenu>\n        </Popper>\n    </ClickAwayListener>}\n    <ClickAwayListener onClickAway={onClickAway}>\n        <Popper open={true} {...position}>\n            <div className=\"page-list-container shadow-xl\">\n                <div className=\"flex justify-between items-center my-2 px-2\">\n                    <div />\n                    <h4 className=\"text-center m-0\">Pages</h4>\n                    <AiOutlinePlus className=\"text-xl -mr-10 cursor-pointer\" onClick={addPage} />\n                    <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={props.close} />\n                </div>\n                <hr/>\n                <DragDropContext onDragEnd={onDragEnd} onDragStart={onDragStart}>\n                    <Droppable droppableId=\"list\" renderClone={renderItem}>\n                        {provided => (\n                        <div id=\"page-list-container\" className=\"pages-list w-full\" ref={provided.innerRef} {...provided.droppableProps}>\n                            {pageManager.getPages().map((item, idx) => {\n                                return (\n                                    <Draggable draggableId={item.id} index={idx} key={item.id}>\n                                        {renderItem}\n                                    </Draggable>)\n                            })}\n                            {provided.placeholder}\n                        </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n            </div>\n        </Popper>\n    </ClickAwayListener> </>)\n}\n\nexport default PageList;","import './Footer.css'\n\nimport React, { useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport Style from './FooterStyle';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport AddIcon from '@material-ui/icons/Add';\nimport canvas from '../../common/Canvas'\nimport globalState from '../../common/GlobalState'\nimport command from '../../common/Command'\nimport { GrMultiple } from \"react-icons/gr\";\nimport PageList from '../PageList/PageList'\nimport uiConfig from '../../common/UIConfig';\n\nconst useStyles = makeStyles(Style);\nconst Footer = () => {\n    const classes = useStyles();\n    const [count, setCount] = useState(100);\n    const [showPages, setShowPages] = useState(false);\n    const [pagesAnchorEl, setPagesAnchorEl] = useState(null);\n\n    if (!uiConfig.shouldShowFooter()) {\n        return null;\n    }\n\n    const zoomOnlyFooter = uiConfig.isZoomOnlyFooter();\n\n    const handleCount = () => {\n        var curCount = count - 10;\n        curCount = Math.round(curCount / 10) * 10;\n        if (curCount < 10) {\n            curCount = 5;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleAddCount = () => {\n        var curCount = 0;\n        if (count < 10) {\n            curCount = 10;\n        } else {\n            curCount = count + 10;\n            curCount = Math.round(curCount / 10) * 10;\n        }\n        setCount(curCount);\n        canvas.zoom(curCount / 100);\n    }\n\n    const handleUndo = () => {\n        command.undo();\n        canvas.draw();\n    }\n\n    const handleRedo = () => {\n        command.redo();\n        canvas.draw();\n    }\n\n    const handlePages = (e) => {\n        setPagesAnchorEl(e.currentTarget)\n        setShowPages(!showPages);\n    }\n\n    globalState.setZoomHandler(function(zoom) {\n        var val = Math.round(zoom * 100);\n        setCount(val);\n    });\n\n    return (\n        <>\n        {showPages && <PageList pos={{placement: 'top', anchorEl: pagesAnchorEl}} close={()=>{setShowPages(false)}}></PageList>}\n        <div className=\"footer-area\">\n            {uiConfig.shouldShowPagesInFooter() && <div className=\"pages-button\">\n                <Button className=\"resButton\" onClick={handlePages}><GrMultiple className={classes.iconClass}/></Button>\n            </div>}\n            {!zoomOnlyFooter && <div className=\"undo-redo-buttons\">\n                <Button className=\"resButton\"><ReplayIcon className={classes.iconClass} onClick={() => handleUndo()}/></Button>\n                <Button className=\"resButton\"><RefreshIcon className={classes.iconClass} onClick={() => handleRedo()}/> </Button>\n            </div>}\n            <div className='zoom-info'>\n                <Button className={classes.countBtn}><RemoveIcon className={classes.iconClass} onClick={() => handleCount()} /></Button>\n                <div className={classes.valueClass}> {count}% </div> \n                <Button className={classes.countBtn}><AddIcon className={classes.iconClass} onClick={() => handleAddCount()} /></Button>\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default Footer;","import React from 'react'\nimport menuState from '../../common/MenuState';\n\nconst  Content = () =>  {\n    return (\n        <div className=\"canvasContainer\" id=\"drawContent\">\n            <div id=\"viewport\" className=\"viewport\">\n                <canvas id=\"gridCanvas\" className=\"canvasGridClass\" />\n                {menuState.cameraActive && <canvas id=\"cameraCanvas\" className=\"cameraCanvas\" width=\"1280px\" height=\"720px\"/>}\n                <canvas id=\"drawCanvas\" className=\"canvasClass\" />\n            </div>\n          <canvas id=\"transparentPanel\" className=\"viewport\" />\n        </div>\n    )\n}\n\nexport default Content;\n","import canvas from './Canvas'\n\nimport appEvent from './AppEvent'\nimport shapes from '../shapelib/Shapes'\n\nimport luaScripts from '../data/lua_script.json'\nimport userInfo from '../utils/UserInfo'\nimport {constant} from '../utils/ApiConstants'\nimport remoteResouceManager from '../utils/RemoteResourceManager'\nimport uiConfig from './UIConfig'\nimport integ from '../integ/integ'\nimport util from './Util'\nimport httpUtil from '../utils/HttpUtil';\nimport messaging from './Messaging'\n\nimport EventListener from '../utils/EventListener'\n\nvar initializer = { };\n\nvar shapesInitDone = false;\nvar docDetailFetched = false;\nvar docStarted = false;\n\nvar apiBasePath = constant.baseUrl + \"/\" + constant.backendVersion;\n\n// Adding into window as this is being used by c++ code\nwindow.wsmanager = {\n    // state values: init, ready, disconnected, notfound, offline, prompt\n    state: \"init\",\n    cb: null,\n    docid: null,\n    event: new EventListener(),\n    setState: function(state) {\n        window.wsmanager.state = state;\n        if (window.wsmanager.cb != null) { window.wsmanager.cb(state); }\n        canvas.onConnectionStateChanged();\n    },\n    permission: 'write',\n    readOnly: () => window.wsmanager.permission != 'write',\n}\n\nwindow.toggleDebug = function() {\n    window.Module.toggleDebug();\n}\n\nwindow.getLekhResource = function(name) {\n    var sc = luaScripts[name];\n    if (sc) {\n        return sc;\n    }\n    return \"\";\n}\n\nwindow.getBase64FromImage = (img) => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n    var data = canvas.toDataURL();\n    if (data.indexOf('base64,') >= 0) {\n        data = data.substr(data.indexOf('base64,') + 7)\n    }\n    return data;\n}\n\nwindow.getRemoteResource = remoteResouceManager.getResource;\n\nvar runtimeInitialized = false;\nvar initialInitDone = false;\nvar reactAppReady = false;\n\nconst appendScript = (scriptToAppend) => {\n    const script = document.createElement(\"script\");\n    script.src = scriptToAppend;\n    script.async = false;\n    document.body.appendChild(script);\n}\n\nconst setStyleAfterDocLoad = () => {\n    //window.Module.inputReceiver().currentStyle().setStrokeWidth(4);\n    window.Module.inputReceiver().currentStyle().setFontSize(18);\n}\n\n/*\nwindow.Module = {\n    onRuntimeInitialized: function () {\n        runtimeInitialized = true;\n        initializer.initInternal();\n    }\n};\n*/\n\ninitializer.init = function(cb) {\n    reactAppReady = true;\n    window.wsmanager.cb = cb;\n    //appendScript(\"a1/bean.min.js\");\n    httpUtil.initPlatformImpl();\n    messaging.init();\n    appendScript(\"a1/lekhapp.js\");\n    initializer.initInternal();\n}\n\ninitializer.onDocDetailFetch = () => {\n    docDetailFetched = true;\n    startDoc();\n}\n\ninitializer.initInternal = function() {\n    if (initialInitDone || !reactAppReady || !runtimeInitialized) {\n        return;\n    }\n    initialInitDone = true;\n    var panel = document.getElementById(\"gridCanvas\");\n    if (!panel) {\n        return;\n    }\n    var canvasElement = document.getElementById(\"drawCanvas\");\n    initialInitDone = true;\n\n    window.Module.init(canvasElement);\n    //window.Module.setZoom(70)\n    canvas.setSize();\n    canvas.drawGrid();\n    \n    shapes.initialize().then(function() {\n        appEvent.attachEventHandlers();\n        shapesInitDone = true;\n        startDoc();\n    });\n}\n\ninitializer.createNewDoc = () => {\n    var url = new URL(window.location);\n    var ref = url.searchParams.get('ref');\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n        if (this.readyState == 4) {\n            if (this.status == 200) {\n                var obj = JSON.parse(xhttp.responseText);\n                var url = new URL(window.location);\n                var newUrl = url.origin + \"/?docid=\" + obj.docid;\n                window.location = newUrl;\n            } else {\n                window.wsmanager.setState('error');\n            }\n        }\n    };\n    var url = apiBasePath + \"/docs\"\n    if (ref) {\n        url += \"?ref=\" + ref;\n    }\n    xhttp.open(\"POST\", url);\n    xhttp.withCredentials = true;\n    xhttp.send();\n}\n\nfunction startDoc() {\n    if (!shapesInitDone || !docDetailFetched || docStarted) {\n        return;\n    }\n    docStarted = true;\n\n    if (!uiConfig.isUsingLekhBackend()) {\n        integ.loadDoc();\n        return;\n    }\n\n    var url = new URL(window.location);\n    var docid = url.searchParams.get('docid');\n    var np = url.searchParams.get('_new');\n    var ref = url.searchParams.get('ref');\n    var offline = url.searchParams.get('offline');\n    if (docid) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function() {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              var touch = 'false';\n              try {\n                if (util.hasTouch()) {\n                    touch = 'true';\n                }\n              } catch(e) {\n              }\n              var obj = JSON.parse(xhttp.responseText);\n              let url = obj.location+'?_touch=' + touch;\n              if (userInfo.isLoggedIn()) {\n                url += '&access_token=' + userInfo.token;\n              }\n              window.wsmanager.start(docid, url);\n            } else {\n                if (this.status == 404) {\n                    window.wsmanager.setState('notfound');\n                } else if (this.status == 403) {\n                    window.wsmanager.setState('forbidden');\n                } else {\n                  window.wsmanager.setState('error');\n                }\n            }\n          }\n        };\n        var url = apiBasePath + \"/docs/\" + docid;\n        xhttp.open(\"POST\", url);\n        xhttp.withCredentials = true;\n        if (userInfo.isLoggedIn()) {\n          xhttp.setRequestHeader('x-auth-token', userInfo.token);\n        }\n        xhttp.send();\n    } else if (np == 'true') {\n      window.wsmanager.setState('newwait');\n    } else if (offline == 'true') {\n        window.wsmanager.setState('offline');\n    } else {\n        window.wsmanager.setState('prompt');\n    }\n}\n\nwindow.wsmanager.start = function (docid, location) {\n    var timer;\n  \n    const ws = new window.WebSocket(location);\n    window.Module.startDoc(docid);\n  \n    window.wsmanager.send = function(docid, data) {\n      ws.send(data);\n      return true;\n    }\n  \n    ws.onopen = function(event) {\n        console.log('connection opened: ', event);\n        timer = window.setInterval(function() {\n            ws.send('{}');\n        }, 15000);\n    };\n  \n    ws.onmessage = function(event) {\n        window.Module.updateDoc(event.data);\n        window.wsmanager.event.trigger(event.data);\n        canvas.draw();\n        if (window.wsmanager.state == 'init') {\n            // The first update is supposed to load update\n            // after loading the doc, we can change the default style\n            var updateObj = JSON.parse(event.data);\n            if (updateObj.type == 'update' && updateObj.updates &&\n                updateObj.updates.type == 'load' && updateObj.updates.permission) {\n                window.wsmanager.permission = updateObj.updates.permission;\n            }\n            setStyleAfterDocLoad();\n            window.wsmanager.docid = docid;\n            window.wsmanager.setState('ready');\n        }\n    };\n  \n    ws.onclose = function(event) {\n        console.log('connection closed:', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n  \n    ws.onerror = function(event) {\n        console.log('connection error: ', event);\n        window.wsmanager.setState('disconnected');\n        window.clearInterval(timer);\n    };\n}\n\nexport default initializer;\n","import Footer from '../components/Footer/Footer';\nimport Content from '../components/SideBarMenu/Content';\nimport React from \"react\";\nimport initializer from '../common/AppInit'\nimport integ from '../integ/integ';\nimport uiConfig from './UIConfig';\nimport canvas from './Canvas';\n\nclass Viewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.wsCallback = this.handleWSState.bind(this);\n  }\n\n  handleWSState(state) {\n    if (this.props.wsStateHandler) {\n      this.props.wsStateHandler(state);\n    }\n  }\n\n  setMouseCursor(attempt) {\n    const fn = (tpanel) => {\n      if (uiConfig.isViewerLink()) {\n        tpanel.style.cursor = 'pointer';\n        window.bean.on(tpanel, 'click', function (e) {\n          if (e.button == 0) {\n            e.preventDefault();\n            integ.handleClickOnViewer(e);\n          }\n        });\n      } else if (uiConfig.isFullViewer()) {\n        tpanel.style.cursor = 'all-scroll';\n      }\n    };\n\n    var tpanel = document.getElementById(\"transparentPanel\");\n    if (tpanel == null) {\n      if (attempt > 3) {\n        return;\n      }\n      var self = this;\n      setTimeout(()=> {\n        self.setMouseCursor(attempt + 1);\n      }, 50);\n    } else {\n      fn(tpanel);\n    }\n  }\n\n  render() {\n    canvas.showGrid = false;\n    return (\n      <div className=\"container\">\n        <Content />\n        <Footer />\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    initializer.init(this.wsCallback);\n    initializer.onDocDetailFetch();\n    this.setMouseCursor(0);\n  }\n}\n\nexport default Viewer;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\n// import \"../../assests/index.css\"\n// import \"../../assests/page.css\"\n\nconst AuthLayout = ({ children }) => {\n  return (\n    <div className=\"w-full h-full bg-white\">\n      <div className=\"global-container\">{children}</div>\n    </div>\n  )\n}\n\nexport default AuthLayout\n","import React from \"react\";\n\nconst ModalContainer = ({ children, parentOnClick }) => {\n  return (\n    <div\n      className=\"fixed top-30 left-0 right-0 bottom-0 w-screen h-screen bg-gray-200 bg-opacity-30 z-30\"\n      onClick={parentOnClick}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default ModalContainer;\n","import React from \"react\"\nimport ModalContainer from \"../ModalContainer/ModalContainer\"\n// import MiniLoader from \"./MiniLoader\"\n\nconst FullLoader = () => {\n  return (\n    <ModalContainer>\n      <div className=\"h-full w-full flex justify-center items-center\">\n        <div className=\"loading-spinner loading-spinner-big\"></div>\n      </div>\n    </ModalContainer>\n  )\n}\n\nexport default FullLoader\n","const { useLocation } = require(\"react-router-dom\")\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search)\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n// import InputField from \"../../components/InputField/InputField\"\n// import { Link } from \"react-router-dom\"\n// import MiniLoader from \"../../components/Loaders/MiniLoader\"\nimport { confirmAccount } from \"../../utils/ApiRequests\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { toast } from \"react-toastify\";\n\nconst ConfirmUser = () => {\n  const [loading, setLoading] = useState(true);\n  const query = useQuery();\n  const history = useHistory();\n  const code = query.get(\"code\");\n  // console.log(code)\n  useEffect(() => {\n    confirmAccount({\n      code: code\n    })\n      .then(res => {\n        // console.log(res.data)\n        history.push(\"/login\");\n      })\n      .catch(err => {\n        history.push(\"/login\");\n        toast.error(\"Link is expired\");\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [code]);\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      {loading && <FullLoader />}\n    </div>\n  );\n};\n\nexport default ConfirmUser;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { login } from \"../../utils/ApiRequests\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { toast } from \"react-toastify\";\n\nconst ConfirmLogin = () => {\n  const [loading, setLoading] = useState(true);\n  const query = useQuery();\n  const history = useHistory();\n  const code = query.get(\"code\");\n\n  useEffect(() => {\n    login({\n      code: code\n    })\n      .then(res => {\n        // console.log(res.data)\n        // toast.success(\"Login Successful\");\n        setRefreshTokenToStorage(res.data.refresh_token);\n        setExpiryTimeToStorage(res.data.expires_at);\n        history.push(\"/docs/mydocs\");\n      })\n      .catch(err => {\n        history.push(\"/login\");\n        toast.error(err?.response?.data?.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [code]);\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      {loading && <FullLoader />}\n    </div>\n  );\n};\n\nexport default ConfirmLogin;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n  // setTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { GrMail } from \"react-icons/gr\";\nimport { useHistory } from \"react-router-dom\";\n\nconst EmailLogin = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (loginForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    login(loginForm)\n      .then(res => {\n        showSuccessText(true);\n      })\n      .catch(err => {\n        // console.log(err.response)\n        // toast.error(\"Invalid email or password\")\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          <InputField\n            name=\"email\"\n            label=\"Email\"\n            placeholder=\"you@address.com\"\n            required={true}\n            type=\"email\"\n            handleChange={handleChange}\n            value={loginForm.email}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          {successText && (\n            <p className=\"-mt-3 italic font-medium\">\n              Please open the link you received in the email to login\n            </p>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Log In\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2 mt-5 lg:flex-row flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/login\");\n            }}\n          >\n            {/* <GrMail /> */}\n            <span>Return to Sign In</span>\n          </button>\n\n          {/* <GoogleLogin\n            render={render => (\n              <button className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\">\n                <img\n                  src={require(\"../../assests/icons/google.svg\").default}\n                  alt=\"Google\"\n                />{\" \"}\n                <span>Sign in with Google</span>\n              </button>\n            )}\n          /> */}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EmailLogin;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { forgotPassword } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\n\nconst Forgot = () => {\n  const [passwordForm, setpasswordForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setpasswordForm({ ...passwordForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (passwordForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    forgotPassword(passwordForm)\n      .then(res => {\n        setSuccess(true);\n      })\n      .catch(err => {\n        setError(\"Invalid email\");\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Forgot Password{\" \"}\n        </h1>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          handleChange={handleChange}\n          value={passwordForm.email}\n        />\n        {success && !loading && (\n          <>\n          <p className=\"-mt-3 font-medium\">\n            Please proceed to your mail\n          </p>\n          <p className=\"-mt-3 italic text-sm\">\n          (Please check the <strong>\"All Mail\"</strong> folder if you dont find the email in Inbox)\n          </p>\n        </>\n        )}\n        {error && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {error}\n          </span>\n        )}\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Forgot Password\n            </button>\n          )}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          {/* <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link> */}\n          <p className=\"text-lg font-medium\">\n            Have an account?{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Forgot;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login, loginWithGoogle, loginWithApple } from \"../../utils/ApiRequests\";\nimport util from \"../../common/Util\";\nimport { GoogleLogin } from \"react-google-login\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n  // setTokenToStorage\n} from \"../../utils/ApiUtils\";\nimport { GrMail, GrApple } from \"react-icons/gr\";\nimport { useHistory } from \"react-router-dom\";\nimport { constant } from \"../../utils/ApiConstants\";\n\nvar attemptedLoadingAppleScript = false;\nvar appleAuthInitialized = false;\n\nconst loadAppleScript = async () => {\n  if (attemptedLoadingAppleScript) {\n    return;\n  }\n  attemptedLoadingAppleScript = true;\n  await util.loadScript('apple/appleid.auth.js');\n  //try {\n    //await util.loadScript('https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js');\n  //} catch(err) {\n  //}\n}\n\nconst initAppleAuth = () => {\n  if (appleAuthInitialized) {\n    return;\n  }\n  appleAuthInitialized = true;\n  window.AppleID.auth.init({\n    clientId: \"com.avabodh.lekh.signin\",\n    scope: \"name email\",\n    redirectURI: constant.appUrl,\n    state: \"lekhapp\",\n    usePopup: true,\n  });\n}\n\nconst Login = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\",\n    password: \"\",\n    code: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [formType, setFormType] = useState(\"regular\");\n  const [error, setError] = useState(null);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [appleScriptLoaded, setAppleScriptLoaded] = useState(false);\n\n  if (!appleScriptLoaded) {\n    loadAppleScript().then(() => {\n      if (window.AppleID) {\n        initAppleAuth();\n        setAppleScriptLoaded(true);\n      }\n    })\n  }\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (\n      (loginForm.email === \"\" || loginForm.password === \"\") &&\n      formType === \"regular\"\n    ) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    if (formType === \"email\") {\n      setloginForm({ ...loginForm, ...{ password: null } });\n    }\n\n    login(loginForm)\n      .then(res => {\n        if (formType === \"email\") {\n          showSuccessText(true);\n        } else {\n          setRefreshTokenToStorage(res.data.refresh_token);\n          setExpiryTimeToStorage(res.data.expires_at);\n          history.push(\"/docs/mydocs\");\n        }\n      })\n      .catch(err => {\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  const handleGoogleLoginFailure = async googleData => {\n    console.log(googleData);\n    setError(\"Google Login Failed\");\n    setLoading(false);\n  }\n\n  const handleGoogleLogin = async googleData => {\n    let res = null;\n    try {\n      res = await loginWithGoogle({token: googleData.tokenId});\n    } catch (err) {\n      setError(err?.response?.data?.message);\n      setLoading(false);\n      return;\n    }\n    setRefreshTokenToStorage(res.data.refresh_token);\n    setExpiryTimeToStorage(res.data.expires_at);\n    history.push(\"/docs/mydocs\");\n    setLoading(false);\n  }\n\n  const handleAppleLogin = async () => {\n    var response;\n    try {\n      response = await window.AppleID.auth.signIn();\n    } catch (err) {\n      console.log(err);\n      setError(\"Unable to authenticate with Apple\");\n      setLoading(false);\n      return;\n    }\n      \n    let token = '';\n    let firstName = '';\n    let lastName = '';\n    let code = '';\n    if (response.authorization) {\n      token = response.authorization.id_token;\n      code = response.authorization.code;\n    }\n    if (response.user && response.user.name) {\n      firstName = response.user.name.firstName;\n      lastName = response.user.name.lastName;\n    }\n    let data = {\n      token: token,\n      code: code,\n      first_name: firstName,\n      last_name: lastName\n    }\n    try {\n      var res = await loginWithApple(data);\n    } catch (err) {\n      console.log(err)\n      setError(\"Unknown error!\");\n      setLoading(false);\n      return;\n    }\n    setRefreshTokenToStorage(res.data.refresh_token);\n    setExpiryTimeToStorage(res.data.expires_at);\n    history.push(\"/docs/mydocs\");\n    setLoading(false);\n  }\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          <InputField\n            name=\"email\"\n            label=\"Email\"\n            placeholder=\"you@address.com\"\n            required={true}\n            type=\"email\"\n            handleChange={handleChange}\n            value={loginForm.email}\n          />\n\n          <InputField\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n            required={true}\n            label=\"Password\"\n            value={loginForm.password}\n            handleChange={handleChange}\n          />\n\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Log In\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex items-start gap-2 mt-5 flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/passwordless-login\");\n            }}\n          >\n            <GrMail />\n            <span>Login without password</span>\n          </button>\n        \n          {<GoogleLogin\n            render={renderProps => (\n              <button className=\"flex items-center space-x-2 py-1 mt-2 bg-white border-1 outline-none px-4 text-lg\"\n                onClick={renderProps.onClick} disabled={renderProps.disabled}>\n                <img src={require(\"../../assests/icons/google.svg\").default} alt=\"Google\" />{\" \"}\n                <span>Sign in with Google &nbsp;&nbsp;&nbsp;&nbsp;</span>\n            </button>\n            )}\n            clientId={\"10145530965-qqoheu39gba07e38hi7obqjhtihhrpb9.apps.googleusercontent.com\"}\n            onSuccess={handleGoogleLogin}\n            onFailure={handleGoogleLoginFailure}\n            cookiePolicy={'single_host_origin'}\n          />}\n\n          <button\n            disabled={!appleScriptLoaded}\n            className=\"flex items-center space-x-2 py-1 mt-2 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              e.preventDefault()\n              handleAppleLogin()\n            }}\n          >\n            <GrApple />\n            <span>Sign in with Apple &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n          </button>\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { login } from \"../../utils/ApiRequests\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport {\n  setExpiryTimeToStorage,\n  setRefreshTokenToStorage\n} from \"../../utils/ApiUtils\";\n\nconst OTPLogin = () => {\n  const [loginForm, setloginForm] = useState({\n    email: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [successText, showSuccessText] = useState(false);\n  const [error, setError] = useState(null);\n  //   const [step, setStep] = useState(1);\n\n  //   I am here\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setloginForm({ ...loginForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (loginForm.email === \"\") {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    login(\n      successText\n        ? { email: loginForm.email, code_type: \"otp\", code: loginForm.code }\n        : {\n            email: loginForm.email,\n            type: \"otp\"\n          }\n    )\n      .then(res => {\n        showSuccessText(true);\n\n        if (loginForm.code) {\n          toast.success(\"Login Successful\");\n          setRefreshTokenToStorage(res.data.refresh_token);\n          setExpiryTimeToStorage(res.data.expires_at);\n          history.push(\"/docs/mydocs\");\n        }\n      })\n      .catch(err => {\n        setError(err?.response?.data?.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign in to Lekh{\" \"}\n        </h1>\n\n        <>\n          {!successText && (\n            <InputField\n              name=\"email\"\n              label=\"Email\"\n              placeholder=\"you@address.com\"\n              required={true}\n              type=\"email\"\n              handleChange={handleChange}\n              value={loginForm.email}\n            />\n          )}\n\n          {successText && (\n            <>\n              <InputField\n                name=\"code\"\n                label=\"OTP\"\n                placeholder=\"000000\"\n                required={true}\n                type=\"number\"\n                handleChange={handleChange}\n                value={loginForm.code}\n              />\n\n              <p className=\"-mt-3 font-medium\">\n              Please enter the code you received in your email or open the link from the email.\n              </p>\n              <p className=\"-mt-3 italic text-sm\">\n              (Please check the <strong>\"All Mail\"</strong> folder if you dont find the email in Inbox)\n              </p>\n            </>\n          )}\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n        </>\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <div className=\"flex items-center gap-5\">\n              <button\n                type=\"submit\"\n                className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                  !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n                }`}\n                disabled={!proceed()}\n              >\n                {successText ? \"Login\" : \"Proceed\"}\n              </button>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-center gap-2 mt-5 lg:flex-row flex-col\">\n          <button\n            className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\"\n            onClick={e => {\n              history.push(\"/login\");\n            }}\n          >\n            {/* <GrMail /> */}\n            <span>Return to Sign In</span>\n          </button>\n\n          {/* <GoogleLogin\n            render={render => (\n              <button className=\"flex items-center space-x-2 py-1 bg-white border-1 outline-none px-4 text-lg\">\n                <img\n                  src={require(\"../../assests/icons/google.svg\").default}\n                  alt=\"Google\"\n                />{\" \"}\n                <span>Sign in with Google</span>\n              </button>\n            )}\n          /> */}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot Password?\n          </Link>\n\n          <p className=\"text-lg font-medium m-0\">\n            Don't have an account?{\" \"}\n            <Link to=\"/sign-up\" className=\"font-normal\">\n              Sign up here\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default OTPLogin;\n","export var passwordCheck = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/;","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { resetPassword } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport { useQuery } from \"../../hooks/useQuery\";\nimport { passwordCheck } from \"./AuthUtil\";\n\nconst Reset = () => {\n  const query = useQuery();\n  const code = query.get(\"code\");\n  const [passwordForm, setpasswordForm] = useState({\n    password: \"\",\n    code: code,\n    cPassword: \"\"\n  });\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(true);\n  const [apiError, setApiError] = useState(null);\n  \n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n\n    setpasswordForm({ ...passwordForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (passwordForm.cPassword !== passwordForm.password) {\n      return false;\n    }\n\n    if (passwordForm.password === \"\") {\n      return false;\n    }\n    if (!error) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n\n    resetPassword(passwordForm)\n      .then(res => {\n        history.push(\"/login\");\n      })\n      .catch(err => {\n        setApiError(\"Unable to reset password\");\n        history.push(\"/forgot\");\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Reset password{\" \"}\n        </h1>\n\n        <InputField\n          name=\"password\"\n          label=\"Password\"\n          placeholder=\"New Password\"\n          required={true}\n          type=\"password\"\n          handleChange={handleChange}\n          value={passwordForm.password}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"cPassword\"\n          label=\"Confirm Password\"\n          placeholder=\"Confirm Password\"\n          required={true}\n          type=\"password\"\n          handleChange={handleChange}\n          value={passwordForm.cPassword}\n          error={passwordForm.password !== passwordForm.cPassword}\n          errorText=\"Passwords do not match\"\n        />\n\n        {apiError && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {apiError}\n          </span>\n        )}\n\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Reset password\n            </button>\n          )}\n        </div>\n\n        <div className=\"space-y-1 mt-2\">\n          {/* <Link to=\"/forgot\" className=\"text-lg font-medium block\">\n            Forgot password?\n          </Link> */}\n          <p className=\"text-lg font-medium\">\n            Have an account?{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Reset;\n","import React, { useState } from \"react\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport MiniLoader from \"../../components/Loaders/MiniLoader\";\nimport { signUp } from \"../../utils/ApiRequests\";\nimport { toast } from \"react-toastify\";\nimport { passwordCheck } from \"./AuthUtil\";\n\nconst SignUp = () => {\n  const [signUpForm, setSignUpForm] = useState({\n    email: \"\",\n    password: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    cPassword: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const [error, setError] = useState(true);\n  const [apiError, setApiError] = useState(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  // console.log(error)\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setSignUpForm({ ...signUpForm, ...newEntry });\n  };\n\n  const handlePasswordChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n    setSignUpForm({ ...signUpForm, ...newEntry });\n  };\n\n  const proceed = () => {\n    if (signUpForm.email === \"\" || signUpForm.password === \"\") {\n      return false;\n    }\n    if (signUpForm.password !== signUpForm.cPassword) {\n      return false;\n    }\n    if (!error) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    signUp(signUpForm)\n      .then(res => {\n        // console.log(res.data)\n        //toast.success(\"Please follow the email to active your account\");\n        //history.push(\"/login\");\n        setSubmitSuccess(true);\n      })\n      .catch(err => {\n        // console.log(err.response);\n        setApiError(err.response.data.message);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen flex justify-center items-center \">\n      <form\n        //   className=\"\"\n        onSubmit={handleSubmit}\n        className=\"w-full lg:w-3/5 px-5 lg:px-10 py-3 lg:py-6 shadow-md\"\n      >\n        <h1 className=\"font-medium text-xl  text-center mb-7\">\n          Sign up to Lekh{\" \"}\n        </h1>\n\n        {!submitSuccess &&<><div className=\"w-full grid grid-cols-2 gap-5\">\n          <InputField\n            name=\"first_name\"\n            label=\"First Name\"\n            placeholder=\"First Name\"\n            handleChange={handleChange}\n            value={signUpForm.first_name}\n          />\n          <InputField\n            name=\"last_name\"\n            label=\"Last name\"\n            placeholder=\"Last Name\"\n            handleChange={handleChange}\n            value={signUpForm.last_name}\n          />\n        </div>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          handleChange={handleChange}\n          value={signUpForm.email}\n        />\n        <InputField\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Password\"\n          required={true}\n          label=\"Password\"\n          value={signUpForm.password}\n          handleChange={handlePasswordChange}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"cPassword\"\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n          required={true}\n          label=\"Confirm Password\"\n          value={signUpForm.cPassword}\n          handleChange={handleChange}\n          error={signUpForm.password !== signUpForm.cPassword}\n          errorText=\"Passwords do not match\"\n        />\n\n        {apiError && !loading && (\n          <span className=\"-mt-3 block italic text-red-500 text-sm\">\n            {apiError}\n          </span>\n        )}\n        <div className=\"flex \">\n          {loading ? (\n            <MiniLoader />\n          ) : (\n            <button\n              type=\"submit\"\n              className={`py-2 lg:py-3.5 px-12 font-Poppins bg-lkhRed text-white rounded-3xl outline-none border-0 ${\n                !proceed() ? \"bg-lkhGrey cursor-not-allowed\" : \"\"\n              }`}\n              disabled={!proceed()}\n            >\n              Create an account\n            </button>\n          )}\n        </div></>}\n        {submitSuccess && <>\n          <p className=\"-mt-3 font-medium\">\n          Please follow the instructions in the email to activate your account.\n          </p>\n          <p className=\"-mt-3 italic text-sm\">\n          (Please check the <strong>\"All Mail\"</strong> folder if you dont find the email in Inbox)\n          </p>\n\n          <p className=\"text-lg font-medium\">\n            Back to{\" \"}\n            <Link to=\"/login\" className=\"font-normal\">\n              Log in\n            </Link>\n          </p>\n        </>}\n\n        <p className=\"text-lg font-medium\">\n          Have an account?{\" \"}\n          <Link to=\"/login\" className=\"font-normal\">\n            Log in\n          </Link>\n        </p>\n        <p className=\"text-lg font-medium\">\n          <Link to=\"/passwordless-login\" className=\"font-normal\">\n          Log in\n          </Link>\n          {\" \"}without signing up\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default SignUp;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { checkLogin } from \"../utils/ApiUtils\";\n\nconst PublicRoute = ({ component: Component, ...rest }) => {\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        checkLogin() ? <Redirect to=\"/docs/mydocs\" /> : <Component {...props} />\n      }\n    />\n  );\n};\n\nexport default PublicRoute;\n","import { Switch, Route } from \"react-router-dom\";\nimport AuthLayout from \"../components/AuthLayout/AuthLayout\";\nimport ConfirmUser from \"../pages/auth/Confirm\";\nimport ConfirmLogin from \"../pages/auth/ConfirmLogin\";\nimport EmailLogin from \"../pages/auth/EmailLogin\";\nimport Forgot from \"../pages/auth/Forgot\";\nimport Login from \"../pages/auth/Login\";\nimport OTPLogin from \"../pages/auth/OTPLogin\";\nimport Reset from \"../pages/auth/Reset\";\nimport SignUp from \"../pages/auth/SignUp\";\nimport PublicRoute from \"./PublicRoute\";\n\nexport const AuthRouteList = [\n  { path: \"/login\", component: Login, exact: true },\n  { path: \"/email-login\", component: EmailLogin, exact: true },\n  { path: \"/passwordless-login\", component: OTPLogin, exact: true },\n  { path: \"/sign-up\", component: SignUp, exact: true },\n  { path: \"/forgot\", component: Forgot, exact: true },\n  { path: \"/user/reset\", component: Reset, exact: true },\n  { path: \"/user/confirm\", component: ConfirmUser, exact: true },\n  { path: \"/user/passwordless-login\", component: ConfirmLogin, exact: true }\n];\n\n// To add a private route HOC when approved\n\nconst AuthRoutes = () => {\n  return (\n    <Switch>\n      <main className=\"inner-route-body\">\n        <AuthLayout>\n          {AuthRouteList.map(r => (\n            <PublicRoute\n              key={r.path}\n              component={r.component}\n              exact={r.exact}\n              path={r.path}\n            />\n          ))}\n        </AuthLayout>\n      </main>\n    </Switch>\n  );\n};\n\nexport default AuthRoutes;\n","import React from \"react\"\n\nconst useClickOutside = (ref, callback) => {\n  const handleClick = e => {\n    if (ref.current && !ref.current.contains(e.target)) {\n      callback()\n    }\n  }\n  React.useEffect(() => {\n    document.addEventListener(\"click\", handleClick)\n    return () => {\n      document.removeEventListener(\"click\", handleClick)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport default useClickOutside\n","import React, { useState } from \"react\";\nimport { AiOutlineClose, AiOutlinePlus } from \"react-icons/ai\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport InputField from \"../../components/InputField/InputField\";\nimport Select from \"react-select\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { Link, NavLink, useHistory, useLocation } from \"react-router-dom\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { useEffect } from \"react\";\n\nexport const NewBoard = ({ state, close }) => {\n  const [type, setType] = useState(\"board\");\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  // const history = useHistory();\n\n  useEffect(() => {\n    setType(\"board\");\n    setName(\"\");\n    setLoading(false);\n    setError(null);\n  }, [close]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    docsManager\n      .createDoc(docsManager.parent || userInfo?.data?.userid, type, name)\n      .then(res => {\n        close();\n      })\n      .catch(err => {\n        if (err?.response?.data?.code === \"doc_name_exists\") {\n          setError(\"Name exists\");\n        } else {\n          setError(err?.response?.data?.message);\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  const options = [\n    { value: \"board\", label: \"Board\" },\n    { value: \"folder\", label: \"Folder\" }\n    // { value: \"diagram\", label: \"Diagram\" },\n  ];\n\n  return (\n    <Dialog open={state} aria-labelledby=\"New Document\" className=\"px-5\">\n      {loading && <FullLoader />}\n      <form\n        action=\"\"\n        className=\"py-3 w-64 lg:w-96 bg-white \"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"flex justify-between items-center mb-5 px-2\">\n          <div />\n          <h4 className=\"text-center text-xl m-0\">Create New</h4>\n\n          <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n        <div className=\"px-3 lg:px-5\">\n          <Select\n            options={options}\n            className=\"mb-3\"\n            onChange={e => setType(e.value)}\n            defaultValue=\"board\"\n            placeholder=\"Board\"\n          />\n          <InputField\n            label=\"Name\"\n            placeholder=\"Name\"\n            handleChange={e => setName(e.target.value)}\n            value={name}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          <div className=\"text-right\">\n            <button\n              type=\"submit\"\n              className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n            >\n              Create\n            </button>\n          </div>\n        </div>\n      </form>\n    </Dialog>\n  );\n};\n\nconst DashSidebar = ({ close }) => {\n  const location = useLocation();\n  const [openNew, setOpenNew] = useState(false);\n  const [docsState, setDocsState] = React.useState(docsManager.state);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    var docsManagerCb = () => { setDocsState(docsManager.state) }\n    docsManager.event.addListener(docsManagerCb);\n    return () => {\n      docsManager.event.removeListener(docsManagerCb);\n    };\n  }, []);\n\n  return (\n    <aside\n      className=\"w-60 fixed top-0 left-0 bg-gray-100 h-screen px-6 py-5 transition-all\"\n      // ref={sideRef}\n    >\n      <NewBoard state={openNew} close={() => setOpenNew(false)} />\n      <div className=\"text-right m-0 mb-0 lg:hidden\">\n        <AiOutlineClose className=\"text-2xl\" onClick={close} />\n      </div>\n\n      <Link\n        to=\"/docs/mydocs\"\n        className=\"flex items-center justify-center mb-10\"\n      >\n        <img\n          src={require(\"../../assests/icons/Logo.svg\").default}\n          className=\"w-8/12\"\n          alt=\"Logo\"\n        />\n      </Link>\n      <div className=\"w-full flex justify-center\">\n        <button\n          className={`flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto ${\n            !docsManager.canCreateNewDoc()\n              ? \"cursor-not-allowed bg-opacity-30 mx-auto\"\n              : \"\"\n          }`}\n          onClick={() => {\n            if (docsManager.canCreateNewDoc()) {\n              setOpenNew(true);\n            } else {\n              return;\n            }\n          }}\n        >\n          <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n          <span className=\"m-0\">New</span>\n        </button>\n      </div>\n\n      <NavLink\n        to=\"/docs/mydocs\"\n        className=\"block text-center mt-10 font-semibold text-lg\"\n        activeClassName=\"bg-white py-2\"\n      >\n        My Documents\n      </NavLink>\n\n      <NavLink\n        className=\"cursor-pointer block text-center mt-5 font-medium text-base \"\n        activeClassName=\"bg-white py-2\"\n        onClick={() => {}}\n        to=\"/docs/shared\"\n        exact={true}\n      >\n        Shared with me\n      </NavLink>\n    </aside>\n  );\n};\n\nexport default DashSidebar;\n","import React, { useRef, useState } from \"react\";\nimport { AiOutlineSearch } from \"react-icons/ai\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport { GiHamburgerMenu } from \"react-icons/gi\";\nimport ModalContainer from \"../ModalContainer/ModalContainer\";\nimport DashSidebar from \"./DashSidebar\";\nimport userInfo from \"../../utils/UserInfo\";\nimport docsManager from \"../../utils/DocsManager\";\n\nconst MobileMenu = ({ close }) => {\n  return (\n    <ModalContainer>\n      <DashSidebar close={close} />\n    </ModalContainer>\n  );\n};\n\nconst DashboardTop = () => {\n  const settingsRef = useRef();\n  const [openSettings, setOpenSettings] = useState(false);\n  const [openMenu, setOpenMenu] = useState(false);\n  const [text, setText] = useState(\"\");\n  useClickOutside(settingsRef, () => setOpenSettings(false));\n  const history = useHistory();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    docsManager.setSearchMode(text);\n    history.push(docsManager.getRoute());\n    docsManager.reload();\n  };\n\n  return (\n    <div className=\"sticky top-0 left-0 pb-5  shadow-md w-full flex justify-between items-center px-5 z-10 mb-5 lg:flex-row flex-col bg-white\">\n      {openMenu && <MobileMenu close={() => setOpenMenu(false)} />}\n      <div className=\"lg:hidden w-full flex justify-between items-center\">\n        <Link\n          to=\"/docs/mydocs\"\n          className=\"flex items-center justify-center mb-3\"\n        >\n          <img\n            src={require(\"../../assests/icons/Logo.svg\").default}\n            className=\"w-24\"\n            alt=\"Logo\"\n          />\n        </Link>\n\n        <GiHamburgerMenu\n          className=\"text-xl\"\n          onClick={() => setOpenMenu(true)}\n        />\n      </div>\n\n      <div>\n        <h1 className=\"text-xl font-medium m-0\">{`Welcome, ${\n          userInfo?.data?.first_name || userInfo?.data.email\n        }!`}</h1>\n      </div>\n\n      <div className=\"flex items-center lg:space-x-2 justify-between w-full lg:w-auto lg:justify-start\">\n        <form\n          className=\"flex items-center px-1 py-0 mx-auto\"\n          style={{ border: \"1px solid black\" }}\n          onSubmit={handleSubmit}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"Search\"\n            className=\"border-none outline-none\"\n            value={text}\n            onChange={e => setText(e.target.value)}\n          />\n\n          <button\n            className=\"bg-transparent outline-none border-none m-0 p-0  \"\n            type=\"submit\"\n          >\n            <AiOutlineSearch className=\"text-lg\" />\n          </button>\n        </form>\n\n        {/* <img\n          src={require(\"../../assests/icons/help.svg\").default}\n          alt=\"avatar\"\n          className=\"w-7 h-6\"\n          // onClick={() => setOpenSettings(!openSettings)}\n        /> */}\n\n        <div className=\"relative\" ref={settingsRef}>\n          <img\n            src={require(\"../../assests/icons/avatar.svg\").default}\n            alt=\"avatar\"\n            className=\"w-7 h-7\"\n            onClick={() => setOpenSettings(!openSettings)}\n          />\n\n          {openSettings && (\n            <div className=\"absolute bg-white shadow-md transition-all  w-28 py-2 px-2 right-0 space-y-2 flex flex-col text-center\">\n              {/* <h1>Settings</h1> */}\n              <Link to=\"/user/settings\" className=\"text-gray-500\">\n                Settings\n              </Link>\n\n              <button\n                to=\"/login\"\n                onClick={() => {\n                  userInfo.logout();\n                  history.push(\"/login\");\n                }}\n                className=\"text-gray-500 cursor-pointer p-0 bg-transparent border-0 outline-none  text-base \"\n              >\n                Logout\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardTop;\n","import React from \"react\";\nimport DashboardTop from \"./DashboardTop\";\nimport DashSidebar from \"./DashSidebar\";\n\nconst DashLayout = ({ children }) => {\n  // const [loading, setLoading] = useState(true);\n\n  return (\n    <main className=\"flex w-full min-h-screen overflow-auto\">\n      {/* {loading && <FullLoader />} */}\n      {\n        <>\n          <div className=\"hidden lg:block\">\n            <DashSidebar />\n          </div>\n\n          <div className=\" lg:ml-60 bg-white w-full py-2 lg:py-7 h-screen \">\n            <DashboardTop />\n            <div\n              className=\"px-5 overflow-auto py-3\"\n              style={{ height: \"calc(100vh - 170px)\" }}\n            >\n              {children}\n            </div>\n          </div>\n        </>\n      }\n    </main>\n  );\n};\n\nexport default DashLayout;\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport userInfo from \"../../utils/UserInfo\";\nimport ModalContainer from \"../ModalContainer/ModalContainer\";\nimport { IoFolderOutline } from \"react-icons/io5\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport docsManager from \"../../utils/DocsManager\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\n\nconst DetailsModal = ({ open, close, m }) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const inScope = m?.in_my_scope === true;\n  const ref = useRef(null);\n\n  // useClickOutside(open ? ref : null, close);\n\n  // if (open)\n  useEffect(() => {\n    if (!inScope) {\n      return;\n    }\n    docsManager\n      .getFullPath(m?.docid, userInfo.data.userid)\n      .then(res => setData(res))\n      .catch(err => console.log(err.response))\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (inScope) {\n      return;\n    }\n\n    docsManager\n      .getADoc(m?.docid)\n      .then(res => setData(res))\n      .catch(err => console.log(err.response))\n      .finally(() => {\n        setLoading(false);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // const handleKeyDown = event => {\n  //   if (event.key.toLowerCase()) {\n  //     close();\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   document.addEventListener(\"keydown\", handleKeyDown);\n\n  //   return () => {\n  //     document.removeEventListener(\"keydown\", handleKeyDown);\n  //   };\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  return (\n    <ModalContainer>\n      <div className=\"h-full lg:w-80 w-64 py-7 px-2 bg-white fixed right-0 top-0 z-20 \">\n        <div ref={open ? ref : null}>\n          <div className=\"\">\n            <AiOutlineClose\n              className=\"text-3xl cursor-pointer\"\n              onClick={() => close()}\n            />\n          </div>\n\n          <h1 className=\"text-center text-xl\">{m.name}</h1>\n          {m.type === \"board\" && (\n            <img\n              src={require(\"../../assests/icons/Logo-grey.png\").default}\n              alt=\"Board Icon\"\n              className=\"w-full h-20 lg:h-40 object-scale-down my-7\"\n            />\n          )}\n\n          {m.type === \"folder\" && (\n            <IoFolderOutline className=\"w-full h-20 lg:h-40  object-scale-down my-7\"></IoFolderOutline>\n          )}\n\n          <div className=\"w-full space-y-3\">\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Type:</h2>\n\n              <p className=\"capitalize m-0\">{m.type}</p>\n            </div>\n\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Created at:</h2>\n\n              <p className=\"capitalize m-0\">\n                {new Date(m.created_at).toDateString()}\n              </p>\n            </div>\n\n            <div className=\"details-grid\">\n              <h2 className=\"m-0 font-medium text-base\">Updated at:</h2>\n\n              <p className=\"capitalize m-0\">\n                {new Date(m.updated_at).toDateString()}\n              </p>\n            </div>\n            {m.in_my_scope === true && !loading && (\n              <div className=\"details-grid\">\n                <h2 className=\"m-0 font-medium text-base\">Location:</h2>\n\n                <p className=\"m-0 break-all\">\n                  {userInfo?.data?.userid === m.parent ? (\n                    \"My Documents\"\n                  ) : (\n                    <>\n                      <span>My Documents</span>{\" \"}\n                      {data?.map(m => (\n                        <span key={m?.name}>/{m?.name}</span>\n                      ))}\n                    </>\n                  )}\n                </p>\n              </div>\n            )}\n\n            {m.in_my_scope === false && !loading && (\n              <div className=\"details-grid\">\n                <h2 className=\"m-0 font-medium text-base\">Shared by:</h2>\n                <p className=\"m-0 break-all\">{data?.owner}</p>\n              </div>\n            )}\n\n            {loading && <MiniLoader />}\n          </div>\n        </div>\n      </div>\n    </ModalContainer>\n  );\n};\n\nexport default DetailsModal;\n","import { Dialog } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport { toast } from \"react-toastify\";\nimport InputField from \"../../components/InputField/InputField\";\nimport { RenameDoc } from \"../../utils/ApiRequests\";\nimport docsManager from \"../../utils/DocsManager\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\n\nconst RenameModal = ({ state, close, m }) => {\n  const [newName, setName] = useState(m?.name);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setError(null);\n    setLoading(false);\n  }, [close]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    RenameDoc(m?.docid, {\n      name: newName,\n      parent: m?.parent\n    })\n      .then(res => {\n        // toast.success(\"Renamed Successfully\");\n        docsManager.reload();\n      })\n      .catch(err => setError(err?.response?.data?.message))\n      .finally(() => {\n        setLoading(false);\n        // docsManager.relo\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\">\n      <form\n        action=\"\"\n        className=\"py-2 w-64 lg:w-96 bg-white \"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"flex justify-between items-center my-2 px-2\">\n          <div />\n          <h4 className=\"text-center m-0\">Rename</h4>\n\n          <AiOutlineClose className=\"text-xl cursor-pointer\" onClick={close} />\n        </div>\n\n        <hr className=\"-mb-5\" />\n\n        <div className=\"px-2\">\n          <InputField\n            // label=\"Rename\"\n            placeholder=\"Name\"\n            handleChange={e => setName(e.target.value)}\n            value={newName}\n          />\n          {error && !loading && (\n            <span className=\"-mt-3 block italic text-red-500 text-sm\">\n              {error}\n            </span>\n          )}\n\n          <div className=\"text-right\">\n            {loading ? (\n              <MiniLoader />\n            ) : (\n              <button\n                type=\"submit\"\n                className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n              >\n                Rename\n              </button>\n            )}\n          </div>\n        </div>\n      </form>\n    </Dialog>\n  );\n};\n\nexport default RenameModal;\n","import { AiOutlineClose } from \"react-icons/ai\";\nimport { Dialog } from \"@material-ui/core\";\n// import Select from \"react-select\";\nimport { useEffect, useState } from \"react\";\nimport MiniLoader from \"../Loaders/MiniLoader\";\nimport { toast } from \"react-toastify\";\nimport docsManager from \"../../utils/DocsManager\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { MoveDoc } from \"../../utils/ApiRequests\";\nimport { AiFillFolder, AiOutlineRight } from \"react-icons/ai\";\nimport { BiArrowBack } from \"react-icons/bi\";\n// import { IoArrowBackCircleSharp } from \"react-icons/io5\";\n\nconst MoveModal = ({ state, close, m }) => {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState();\n  const [parent, setParent] = useState(userInfo?.data?.userid);\n  const [error, setError] = useState(null);\n  const [parentDoc, setParentDoc] = useState(null);\n\n  const [cache, setCache] = useState(new Map());\n  const [childCache, setChildCache] = useState(new Map());\n\n  const getDoc = async (docid) => {\n    if (!docid || docid == userInfo?.data?.userid) {\n      return {docid: docid, name: 'Root Folder', parent: null}\n    }\n    if (cache.has(docid)) {\n      return cache.get(docid);\n    }\n    var doc = await docsManager.getADoc(docid);\n    cache.set(docid, doc);\n    return doc;\n  }\n\n  const getChildren = async (docid) => {\n    if (childCache.has(docid)) {\n      return childCache.get(docid);\n    }\n    var children = await docsManager.getChildFolders(docid);\n    childCache.set(docid, children);\n    for (let item of children) {\n      cache.set(item.docid, item);\n    }\n    return children;\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    getDoc(parent)\n    .then(resp=>{\n      setParentDoc(resp);\n    })\n    .then(()=> getChildren(parent || userInfo?.data?.userid))\n    .then(res => {\n      setData(res);\n      setLoading(false);\n    })\n    .catch(err => console.log(err.response));\n  }, [parent]);\n\n  // console.log(options);\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    MoveDoc(m?.docid, { parent: parent || userInfo?.data?.userid, name: m?.name })\n      .then(res => {\n        docsManager.reload();\n        close();\n      })\n      .catch(err => toast.error(err?.response?.data?.message))\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <Dialog open={state} className=\"px-5\" aria-labelledby=\"Share\">\n      <form\n        className={`py-2 h-72 w-64 lg:w-96 bg-white`}\n        onSubmit={handleSubmit}\n        // onClick\n      >\n        <div className=\"flex items-center justify-between my-2 px-3\">\n          {parent != userInfo?.data?.userid ? (\n            <BiArrowBack\n              className=\"text-xl cursor-pointer\"\n              onClick={() => {\n                setParent(parentDoc.parent);\n              }}\n            />\n          ) : (\n            <div />\n          )}\n\n          <h4 className=\"text-center m-0 w-44 truncate\">\n            {\" \"}\n            {parentDoc?.name || \"Root Folder\"}\n          </h4>\n\n          <AiOutlineClose\n            className=\"text-xl cursor-pointer\"\n            onClick={() => close()}\n          />\n        </div>\n        <hr />\n\n        {loading && (\n          <div className=\"mt-6\">\n            <MiniLoader />\n          </div>\n        )}\n        {!loading && (\n          <>\n            <div className=\"h-1/2 space-y-6 py-2 overflow-y-auto px-3\">\n              {data?.map((m, i) => (\n                <div\n                  className={`move-grid text-lg cursor-pointer hover:bg-gray-200`}\n                  key={i}\n                >\n                  <div\n                    className=\"flex items-center space-x-2 cursor-pointer\"\n                    onClick={() => {\n                      setParent(m.docid);\n                    }}\n                  >\n                    <AiFillFolder />\n                    <span className=\"w-40  lg:w-44 truncate\">{m.name}</span>\n                  </div>\n                  <AiOutlineRight\n                    className=\"cursor-pointer text-right ml-auto\"\n                    onClick={() => setParent(m.docid)}\n                  />\n                </div>\n              ))}\n            </div>\n\n            <div className=\"text-right mt-8 px-3\">\n              <button\n                type=\"submit\"\n                className=\"text-white font-medium lg:text-lg px-3 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n              >\n                Move Here\n              </button>\n            </div>\n          </>\n        )}\n      </form>\n    </Dialog>\n  );\n};\n\nexport default MoveModal;\n","import React, { useRef, useState } from \"react\";\n// import { truncateString } from \"../../utils/Helpers\";\nimport { BsThreeDotsVertical } from \"react-icons/bs\";\nimport useClickOutside from \"../../hooks/useOnClickOutside\";\nimport { toast } from \"react-toastify\";\nimport FullLoader from \"../Loaders/FullLoader\";\nimport ShareModal from \"./ShareModal\";\nimport DetailsModal from \"./DetailsModal\";\nimport docsManager from \"../../utils/DocsManager\";\nimport RenameModal from \"./RenameModal\";\nimport MoveModal from \"./MoveModal\";\nimport { useHistory } from \"react-router-dom\";\nimport { IoFolderOutline, IoPeople } from \"react-icons/io5\";\nimport { Dialog } from \"@material-ui/core\";\n\nconst DocumentListItem = ({ m }) => {\n  const [open, setOpen] = useState(false);\n  const ref = useRef();\n  useClickOutside(ref, () => setOpen(false));\n  const [loading, setLoading] = useState(false);\n  const [share, setShare] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [rename, setRename] = useState(false);\n  const [move, setMove] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const history = useHistory();\n\n  // console.log(m);\n\n  const handleOpen = () => {\n    if (share || showDetails || rename || move) {\n      return;\n    }\n    if (m.type === \"board\") {\n      const win = window.open(`/?docid=${m.docid}`, \"_blank\");\n      //win.focus();\n    } else if (m.type === \"folder\") {\n      docsManager.pushParent(m.docid);\n      history.push(docsManager.getRoute());\n      docsManager.reload();\n    }\n  };\n\n  const duplicate = () => {\n    docsManager\n      .duplicate(m.docid)\n      .then(() => {\n        docsManager.reload();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <div\n      className=\"w-full h-40 lg:h-52 rounded-2xl shadow-md  flex flex-col justify-between\"\n      ref={ref}\n    >\n      {loading && <FullLoader />}\n      {share && (\n        <ShareModal state={share} close={() => setShare(false)} doc={m} />\n      )}\n      {showDetails && (\n        <DetailsModal\n          m={m}\n          close={() => setShowDetails(false)}\n          open={showDetails}\n        />\n      )}\n      <RenameModal state={rename} close={() => setRename(false)} m={m} />\n      {move && <MoveModal state={move} close={() => setMove(false)} m={m} />}\n\n      <Dialog open={deleting}>\n        <div className=\"w-64 lg:w-72 py-8 px-5 space-y-10\">\n          <p className=\"font-sans text-center text-lg\">\n            Are you sure you want to delete?\n          </p>\n\n          <div className=\"grid grid-cols-2 gap-5\">\n            <button\n              className=\"button border border-lkhRed text-center py-3 bg-white \"\n              onClick={() => setDeleting(false)}\n            >\n              Cancel\n            </button>\n\n            <button\n              onClick={() => {\n                setDeleting(false);\n                setLoading(true);\n                docsManager\n                  .deleteDoc(m.docid)\n                  .then(res => {})\n                  .catch(err => {\n                    toast(err?.response?.data?.code);\n                  })\n                  .finally(() => {\n                    setLoading(false);\n                  });\n              }}\n              className=\"button bg-lkhRed text-white border-0\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </Dialog>\n\n      <div\n        className=\"h-3/4 relative transition-all hover:bg-gray-100 px-5 py-5  cursor-pointer\"\n        onClick={handleOpen}\n      >\n        {m.type === \"board\" && (\n          <img\n            src={require(\"../../assests/icons/Logo-grey.png\").default}\n            alt=\"Board Icon\"\n            className=\"w-5/6 h-5/6 object-scale-down\"\n          />\n        )}\n\n        {m.type === \"folder\" && (\n          <IoFolderOutline className=\"w-5/6 h-5/6 scale-y-90 scale-x-90 object-scale-down\"></IoFolderOutline>\n        )}\n\n        {m?.shared && m.in_my_scope && (\n          <IoPeople className=\"absolute right-3 text-lg top-5\" />\n        )}\n      </div>\n\n      <div className=\"flex items-center justify-between h-1/4 px-4 py-3 bg-gray-50\">\n        <h1 className=\"m-0 text-sm break-all font-medium line-clamp-2\">\n          {m.name}\n        </h1>\n\n        <div className=\"relative\">\n          <BsThreeDotsVertical\n            onClick={() => setOpen(!open)}\n            className=\"cursor-pointer\"\n          />\n\n          {open && (\n            <div className=\"absolute top-0 right-3 py-3 px-7 shadow-md bg-white space-y-4 text-left z-20\">\n              <p\n                className=\"text-sm cursor-pointer m-0 mb-2\"\n                onClick={() => {\n                  handleOpen();\n                }}\n              >\n                Open\n              </p>\n\n              <p\n                className=\"text-sm cursor-pointer m-0 mb-2\"\n                onClick={() => setShowDetails(true)}\n              >\n                Details\n              </p>\n\n              {m.in_my_scope && (\n                <>\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setShare(true)}\n                  >\n                    Share\n                  </p>\n\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setRename(true)}\n                  >\n                    Rename\n                  </p>\n\n                  {m.type != \"folder\" && (\n                    <p\n                      className=\"text-sm cursor-pointer\"\n                      onClick={() => {\n                        setOpen(!open);\n                        duplicate();\n                      }}\n                    >\n                      Duplicate\n                    </p>\n                  )}\n\n                  {m.type == \"board\" && (\n                    <p\n                      className=\"text-sm cursor-pointer\"\n                      onClick={() => setMove(true)}\n                    >\n                      Move\n                    </p>\n                  )}\n\n                  <p\n                    className=\"text-sm cursor-pointer\"\n                    onClick={() => setDeleting(true)}\n                  >\n                    Delete\n                  </p>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentListItem;\n","import React, { useState } from \"react\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\n// import { toast } from \"react-toastify\";\nimport DocumentListItem from \"../../components/DashboardItems/DocumentListItem\";\nimport docsManager from \"../../utils/DocsManager\";\nimport { AiOutlineRight, AiOutlinePlus } from \"react-icons/ai\";\nimport { useHistory } from \"react-router-dom\";\nimport { NewBoard } from \"../../components/DashLayout/DashSidebar\";\n\nconst Dashboard = props => {\n  const [docsState, setDocsState] = React.useState(docsManager.state);\n  const [openNew, setOpenNew] = useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    var docsManagerCb = () => { setDocsState(docsManager.state) }\n    docsManager.event.addListener(docsManagerCb);\n    docsManager.setRoute(props.location.pathname, props.location.search);\n    docsManager.reload();\n\n    return () => {\n      docsManager.event.removeListener(docsManagerCb);\n    };\n  }, []);\n\n  return (\n    <div className=\"pb-40\">\n      {docsManager.state == \"loading\" && <FullLoader />}\n      <NewBoard state={openNew} close={() => setOpenNew(false)} />\n      {docsManager.state == \"available\" && (\n        <>\n          <div className=\"flex items-center space-x-2\">\n            <h1\n              className=\"text-xl font-medium m-0 mb-3 lg:mb-10 cursor-pointer\"\n              onClick={() => {\n                docsManager.popParentTo(null);\n                history.push(docsManager.getRoute());\n                docsManager.reload();\n              }}\n            >\n              {docsManager.getRootName()}\n            </h1>\n\n            {docsManager?.path &&\n              docsManager.path.map((m, i) => (\n                <h1\n                  className={`flex items-center space-x-2 text-xl font-medium m-0 mb-2 lg:mb-10 ${\n                    i !== docsManager.path.length - 1 ? \"cursor-pointer\" : \"\"\n                  }`}\n                  onClick={() => {\n                    if (i !== docsManager.path.length - 1) {\n                      docsManager.popParentTo(m.docid);\n                      history.push(docsManager.getRoute());\n                      docsManager.reload();\n                    }\n                  }}\n                  key={i}\n                >\n                  <AiOutlineRight className=\"text-xl font-semibold\" />\n                  <span> {m?.name} </span>\n                </h1>\n              ))}\n          </div>\n\n          {docsManager.state == \"available\" &&\n            docsManager.canCreateNewDoc() &&\n            docsManager?.docs?.length > 0 && (\n              <button\n                className={`mb-5 lg:hidden flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0`}\n                onClick={() => {\n                  setOpenNew(true);\n                }}\n              >\n                <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n                <span className=\"m-0\">New</span>\n              </button>\n            )}\n          <div className=\"w-full grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 pb-20\">\n            {docsManager.docs.map((m, i) => {\n              return <DocumentListItem m={m} key={i} />;\n            })}\n          </div>\n        </>\n      )}\n      {docsManager.state == \"available\" &&\n        docsManager.mode == \"mydocs\" &&\n        !(docsManager?.docs?.length > 0) && (\n          <div className=\"w-full flex flex-col items-center justify-center space-y-2\">\n            <div className=\"w-full flex justify-center flex-col items-center\">\n              <h3 className=\"text-lkhDGrey\">\n                You do not have any document in this folder. Please add a\n                document\n              </h3>\n              <button\n                className={`flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto`}\n                onClick={() => {\n                  setOpenNew(true);\n                }}\n              >\n                <AiOutlinePlus className=\"mr-2 font-semibold\" />{\" \"}\n                <span className=\"m-0\">New</span>\n              </button>\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import React, { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport InputField from \"../../components/InputField/InputField\";\nimport FullLoader from \"../../components/Loaders/FullLoader\";\nimport { updateCurrentUser } from \"../../utils/ApiRequests\";\nimport userInfo from \"../../utils/UserInfo\";\nimport { passwordCheck } from \"../auth/AuthUtil\";\n\nconst Settings = () => {\n  const [loading, setLoading] = useState(false);\n  const [updateForm, setupdateForm] = useState({\n    email: userInfo?.data?.email,\n    current_password: \"\",\n    first_name: userInfo?.data?.first_name,\n    last_name: userInfo?.data?.last_name\n  });\n  const [error, setError] = useState(true);\n\n  const handleChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setupdateForm({ ...updateForm, ...newEntry });\n  };\n\n  const handlePasswordChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    const newEntry = { [name]: value };\n    setError(passwordCheck.test(value));\n    setupdateForm({ ...updateForm, ...newEntry });\n  };\n\n  const updateUser = e => {\n    e.preventDefault();\n    setLoading(true);\n    updateCurrentUser(updateForm)\n      .then(res => toast.success(\"Profile updated successfully\"))\n      .catch(err => toast.error(err.response.data.message))\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div>\n      {loading && <FullLoader />}\n      <h1 className=\"lg:text-2xl font-medium m-0 mb-10\">Update Profile</h1>\n\n      <form\n        className=\"w-full lg:w-5/12 shadow-md p-5 mb-10\"\n        onSubmit={updateUser}\n      >\n        <div className=\"w-full grid grid-cols-2 gap-5\">\n          <InputField\n            name=\"first_name\"\n            label=\"First Name\"\n            placeholder=\"First Name\"\n            handleChange={handleChange}\n            value={updateForm.first_name}\n          />\n          <InputField\n            name=\"last_name\"\n            label=\"Last name\"\n            placeholder=\"Last Name\"\n            handleChange={handleChange}\n            value={updateForm.last_name}\n          />\n        </div>\n\n        <InputField\n          name=\"email\"\n          label=\"Email\"\n          placeholder=\"you@address.com\"\n          required={true}\n          type=\"email\"\n          // handleChange={handleChange}\n          readOnly={true}\n          value={updateForm.email}\n        />\n\n        <InputField\n          name=\"current_password\"\n          type=\"password\"\n          placeholder=\"Current Password\"\n          //   required={true}\n          label=\"Current Password\"\n          value={updateForm.current_password}\n          handleChange={handleChange}\n          //   error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <InputField\n          name=\"new_password\"\n          type=\"password\"\n          placeholder=\"New Password\"\n          //   required={true}\n          label=\"New Password\"\n          value={updateForm.new_password}\n          handleChange={handlePasswordChange}\n          error={!error}\n          errorText=\"Password must be a minimum of 8 characters including a capital letter and special character\"\n        />\n\n        <button\n          type=\"submit\"\n          className=\"flex items-center justify-center text-white font-medium text-lg px-6 py-1 bg-lkhRed outline-none border-none border-0 mx-auto\"\n        >\n          Update\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Settings;\n","import { Switch, Route, Redirect } from \"react-router-dom\";\nimport DashLayout from \"../components/DashLayout/DashLayout\";\nimport Dashboard from \"../pages/Dashboard/Dashboard\";\nimport Settings from \"../pages/Dashboard/Settings\";\nimport FullLoader from \"../components/Loaders/FullLoader\";\nimport { useEffect, useState } from \"react\";\nimport userInfo from \"../utils/UserInfo\";\nimport \"../assests/index.css\";\nimport \"../assests/page.css\";\n\nexport const DashRouteList = [\n  { path: \"/user/settings\", component: Settings, exact: true },\n  { path: \"/docs/mydocs\", component: Dashboard, exact: true },\n  { path: \"/docs/shared\", component: Dashboard, exact: true },\n  { path: \"/docs/search\", component: Dashboard, exact: true }\n];\n\nconst DashRoutes = () => {\n  const [userState, setUserState] = useState(userInfo.state);\n\n  const onUserInfoChange = () => {\n    setUserState(userInfo.state);\n  }\n  useEffect(() => {\n    userInfo.event.addListener(onUserInfoChange);\n    userInfo.get();\n\n    return () => {\n      userInfo.event.removeListener(onUserInfoChange);\n    };\n  }, []);\n\n  const PrivateRoute = ({ component: Component, ...rest }) => {\n    return (\n      <Route\n        {...rest}\n        render={props =>\n          userInfo.state === \"available\" ? (\n            <Component {...props} />\n          ) : (\n            <Redirect to=\"/login\" />\n          )\n        }\n      />\n    );\n  };\n\n  return (\n    <>\n      {userInfo.state === \"loading\" && <FullLoader />}\n      <Switch>\n        {userInfo.state !== \"loading\" && (\n          <main className=\"inner-route-body\">\n            <DashLayout>\n              {DashRouteList.map(r => (\n                <PrivateRoute\n                  key={r.path}\n                  component={r.component}\n                  exact={r.exact}\n                  path={r.path}\n                />\n              ))}\n            </DashLayout>\n          </main>\n        )}\n      </Switch>\n    </>\n  );\n};\n\nexport default DashRoutes;\n","export const dateStr = (ts) => {\n    var date = new Date(ts * 1000);\n    \n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var seconds = date.getSeconds();\n    \n    return year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\n}","import React, { useState, useEffect, useRef } from 'react';\nimport userInfo from '../../utils/UserInfo';\nimport Viewer from '../../common/Viewer'\nimport uiConfig from \"../../common/UIConfig\";\nimport canvas from '../../common/Canvas';\nimport { Button } from '@material-ui/core';\nimport { GrNext, GrPause, GrPlay, GrRefresh } from \"react-icons/gr\";\n\nimport qs from 'qs';\n\nimport { getADocsLogSession, getDocsLogUpdate } from '../../utils/ApiRequests';\n\nconst SessionViewer = props => {\n    const [session, setSession] = useState(null);\n    const [token, setToken] = useState(null);\n    const [updates, setUpdates] = useState(null);\n    const [loadingMsg, setLoadingMsg] = useState('Loading..');\n    const [loading, setLoading] = useState(true);\n    \n    const playing = useRef(false);\n\n    const onUserInfoChange = () => {\n        setToken(userInfo.token);\n        getSession();\n    }\n\n    const getSession = () => {\n        if (session != null) {\n            return;\n        }\n\n        var search = window.location.hash.substring(window.location.hash.indexOf('?'))\n        var params = qs.parse(search, { ignoreQueryPrefix: true })\n        var sessionid = params.sessionid;\n        setSession(sessionid);\n        getADocsLogSession(sessionid).then(resp => {\n            console.log('Got ' + resp.data.updates.length + ' versions')\n            let updatesArr = resp.data.updates;\n            updatesArr.sort((a, b) => {\n                return a.version < b.version;\n            });\n            getUpdates(updatesArr, 0);\n        });\n    }\n\n    const getUpdates = (updateArr, idx) => {\n        const batchSize = 75;\n        if (idx < updateArr.length) {\n            let from = idx;\n            let to = Math.min(idx + batchSize, updateArr.length - 1);\n\n            setLoadingMsg('Loading ' + (from + 1) + '-' + (to + 1) + ' out of ' + updateArr.length + ' updates')\n\n            let verStr = updateArr[from].version;\n            if (from != to) {\n                verStr = updateArr[from].version + \"-\" + updateArr[to].version;\n            }\n            getDocsLogUpdate(updateArr[idx].docid, verStr).then(resp => {\n                let respIdx = 0;\n                while (from <= to) {\n                    updateArr[from].content = resp.data.data[respIdx];\n                    from++;\n                    respIdx++;\n                }\n                getUpdates(updateArr, to + 1)\n            });\n        } else {\n            setUpdates(updateArr);\n            onUpdatesLoaded(updateArr);\n        }\n    }\n\n    const onUpdatesLoaded = (updates) => {\n        uiConfig.initForOfflineMode();\n        if (updates.length > 0 && !updates[0].is_delta) {\n            setLoading(false);\n        } else {\n            setLoadingMsg('Updates are not correct');\n        }\n    }\n\n    const onWsStateChange = (state) => {\n        if (playing.current) {\n            return;\n        }\n        playing.current = true;\n        var content = JSON.stringify(JSON.parse(updates[0].content).doc);\n        window.Module.startDoc(updates[0].docid)\n        window.Module.loadDoc(content);\n        canvas.draw();\n    }\n\n    useEffect(() => {\n        userInfo.event.addListener(onUserInfoChange);\n        userInfo.get();\n        return () => {\n          userInfo.event.removeListener(onUserInfoChange);\n        };\n    }, []);\n\n    if (!loading) {\n        window.wsmanager.permission = 'read';\n        console.log(updates)\n    }\n\n    return <div>\n        {!loading && <Viewer wsStateHandler={onWsStateChange}/>}\n        <div style={{width: '100%', position: 'absolute', top: 0, left: 0, marginLeft: 10, marginTop: 10}}>\n            {loading &&<div>{loadingMsg}</div>}\n            {!loading && <TopBar updates={updates} />}\n        </div>\n    </div>\n}\n\nconst TopBar = ({updates}) => {\n    const [counter, setCounter] = useState(0);\n    \n    const counterRef = useRef(0);\n    const autoPlay = useRef(false);\n    const curVersionIdx = useRef(0);\n    const playInterval = useRef(500);\n\n    const redraw = () => {\n        counterRef.current += 1;\n        setCounter(counterRef.current);\n    }\n\n    const restart = () => {\n        var content = JSON.stringify(JSON.parse(updates[0].content).doc);\n        window.Module.startDoc(updates[0].docid)\n        window.Module.loadDoc(content);\n        canvas.draw();\n\n        playInterval.current = window.playInterval || playInterval.current;\n        curVersionIdx.current = 0;\n        autoPlay.current = false;\n\n        redraw();\n    }\n\n    const toggleAutoPlay = () => {\n        autoPlay.current = !autoPlay.current;\n        onTimer();\n    }\n\n    const onTimer = () => {\n        if (curVersionIdx.current < updates.length - 1 && autoPlay.current) {\n            applyNext();\n            window.setTimeout(onTimer, playInterval.current);\n        } else {\n            redraw();\n        }\n    }\n\n    const applyNext = () => {\n        curVersionIdx.current += 1;\n        redraw();\n        if (curVersionIdx.current < updates.length) {\n            var content = updates[curVersionIdx.current].content;\n            if (typeof content == 'string') {\n                window.Module.updateDoc(content);\n                canvas.draw();\n            } else {\n                window.alert(content + ' is not string');\n            }\n        }\n    }\n\n    var msg = '[ ' + (curVersionIdx.current + 1) + ' of ' + updates.length + ' updates ] ';\n    var hasNext = curVersionIdx.current < updates.length - 1;\n    return <div style={{display: 'flex'}}>\n        <span>{msg}</span>\n        <Button onClick={restart}><GrRefresh/></Button>\n        {hasNext && autoPlay.current && <Button onClick={toggleAutoPlay}><GrPause/></Button>}\n        {hasNext && !autoPlay.current && <Button onClick={toggleAutoPlay}><GrPlay/></Button>}\n        {hasNext && !autoPlay.current && <Button onClick={applyNext}><GrNext/></Button>}\n    </div>;\n}\n\nexport default SessionViewer;\n\n","import OfflineList from \"./OfflineList\";\nimport OfflineViewer from \"./OfflineViewer\";\nimport SessionList from \"./SessionList\";\nimport SessionViewer from \"./SessionViewer\";\n\nconst DocsLogRoutes = [\n    { path: \"/docslog/sessionlist\", component: SessionList, exact: true },\n    { path: \"/docslog/sessionviewer\", component: SessionViewer, exact: true },\n    { path: \"/docslog/offlinelist\", component: OfflineList, exact: true },\n    { path: \"/docslog/offlineviewer\", component: OfflineViewer, exact: true }\n]\n\nexport default DocsLogRoutes;","\nimport React, { useState, useEffect } from 'react';\nimport { Button } from '@material-ui/core';\nimport { GrNext } from \"react-icons/gr\";\nimport userInfo from '../../utils/UserInfo';\nimport { dateStr } from './DocsLogUtil';\n\nimport { getDocsLogSessions } from '../../utils/ApiRequests';\n\nconst SessionList = props => {\n    let date = new Date();\n    let defKey = date.getFullYear() + \"-\" + date.getMonth();\n    const [key, setKey] = useState(defKey);\n    const [sessions, setSessions] = useState(null);\n    const [token, setToken] = useState(null);\n    const [nextToken, setNextToken] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const handleKeyChange = (e) => {\n        setNextToken(null);\n        setKey(e.target.value);\n    }\n\n    const fetchData = () => {\n        setLoading(true);\n        setSessions(null);\n        var elm = document.getElementById('key_text');\n        var parts = elm.value.split(\"-\");\n        var qstr = '';\n        if (parts.length == 2) {\n            qstr = 'year=' + parts[0] + '&month=' + parts[1];\n        } else {\n            qstr = 'docid=' + elm.value;\n        }\n        if (nextToken) {\n            qstr += '&next_token=' + encodeURIComponent(nextToken);\n        }\n        getDocsLogSessions(qstr).then(resp => {\n            setLoading(false);\n            if (resp.data) {\n                setSessions(resp.data.sessions);\n                console.log(resp.data)\n                setNextToken(resp.data.next_token);\n            }\n        });\n    }\n\n    const onUserInfoChange = () => {\n        setToken(userInfo.token);\n    }\n\n    useEffect(() => {\n        userInfo.event.addListener(onUserInfoChange);\n        userInfo.get();\n        return () => {\n          userInfo.event.removeListener(onUserInfoChange);\n        };\n    }, []);\n\n    var items = [];\n    if (sessions) {\n        let count = 0;\n        for (let sess of sessions) {\n            let ds = dateStr(sess.timestamp);\n            items.push(<div className='mt-4 ml-4' key={ds}>\n                <span>[{count}]</span><span> </span>\n                <span>{sess.email}</span><span> </span>\n                <span> [Updates: {sess.num_updates}] </span><span> </span>\n                <span><a target=\"_blank\" className=\"text-blue-700\" href={\"/#/docslog/sessionviewer?sessionid=\" + sess.id}>{'id:' + sess.id}</a></span><span> </span>\n                <span>{'docid:' + sess.docid}</span><span> </span>\n                <span className=\"text-purple-500\">{ds}</span><span> </span>\n                </div>)\n            count++;\n        }\n    }\n    return (<>\n    <div className=\"flex justify-around mt-4\">\n        <input type=\"text\" id=\"key_text\" value={key} onChange={handleKeyChange} className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5\"></input>\n        <div className=\"mt-2\">1 - 100</div>\n        <Button onClick={fetchData} disabled={token == null}><GrNext/></Button>\n    </div>\n    <hr/>\n    {loading &&<div>Loading..</div>}\n    {!loading && <div style={{overflow: 'auto', height: 'calc(100% - 110px)'}}>{items}</div>}\n    </>);\n}\n\nexport default SessionList;","const OfflineList = props => {\n    return <div>Offline List</div>;\n}\n\nexport default OfflineList;","const OfflineViewer = props => {\n    return <div>Offline Viewer</div>;\n}\n\nexport default OfflineViewer;","import { Switch, Redirect, Route } from \"react-router-dom\";\nimport AuthRoutes, { AuthRouteList } from \"./AuthRoutes\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.min.css\";\nimport DashRoutes, { DashRouteList } from \"./DashRoutes\";\nimport DocsLogRoutes from \"../components/DocsLog/DocsLogRoutes\";\n\nconst RouteList = [\n  { path: DashRouteList.map(r => r.path), component: DashRoutes, exact: true },\n  { path: AuthRouteList.map(r => r.path), component: AuthRoutes, exact: true },\n  ...DocsLogRoutes\n];\n\nconst Routes = () => {\n  return (\n    <>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        pauseOnHover\n      ></ToastContainer>\n      <Switch>\n        {RouteList.map(r => (\n          <Route\n            key={r.path}\n            exact={r.exact}\n            component={r.component}\n            path={r.path}\n          />\n        ))}\n        <Route path=\"/\" exact={true}>\n          <Redirect to=\"/docs/mydocs\" />\n        </Route>\n      </Switch>\n    </>\n  );\n};\n\nexport default Routes;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./App.css\";\nimport AppComponent from \"./App\"\nimport Viewer from \"./common/Viewer\";\nimport { HashRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport Routes from \"./routes/Routes\";\nimport qs from 'qs';\nimport docInfo from './utils/DocInfo'\nimport {hello} from './utils/ApiRequests'\nimport integ from \"./integ/integ\";\nimport uiConfig from \"./common/UIConfig\";\n\nvar openDoc = false;\nvar viewer = false;\nvar params = qs.parse(window.location.search, { ignoreQueryPrefix: true })\n\nvar docid = params.docid;\nvar _new = params._new;\nvar offline = params.offline;\nvar ref = params.ref;\n\nif (integ.isIntegration(params)) {\n  uiConfig.initForIntegMode(params);\n  openDoc = true;\n  viewer = uiConfig.isIntegViewer();\n} else {\n  if (offline) {\n    uiConfig.initForOfflineMode();\n  } else {\n    uiConfig.initForLekhBackendMode();\n  }\n\n  if (ref) {\n    hello(ref);\n    if (!docid && !_new && window.location.pathname == '/' && window.location.hash == '') {\n      window.history.replaceState({}, \"\", \"/\")\n    }\n  }\n\n  if (window.location.pathname == '/' && (!!docid || _new == 'true' || offline == 'true')) {\n    docInfo.docid = docid;\n    openDoc = true;\n  }\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    {openDoc && !viewer && <AppComponent />}\n    {openDoc && viewer && <Viewer />}\n    {!openDoc &&<HashRouter>\n      <Routes />\n    </HashRouter>}\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}